(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1291:function(e,t,r){"use strict";r.r(t);r(24),r(190),r(856);var n=r(0),a=r.n(n),i=r(3),o=r.n(i),l=r(66),c=r(381),u=r(68),s=r(221),p=r(865),d=r(402),f=r(815),m=r(824),v=(r(17),r(12),r(18),r(353),r(26),r(27),r(22),r(28),r(220),r(43),r(14),r(29),r(30),r(20),r(40),r(42),r(41),r(36),r(23),r(35),r(50),r(37),r(44),r(45),r(46),r(51),r(49),r(818)),b=r(1154),O=r(1238),E=r(1303),y=(r(71),r(72),r(73),r(10)),g=r(833),I=r(823),h=r(1279),T=r(1296),P=function(e){var t=e["data-locator"],r=e.caption,n=e.classes,i=e.hasNullOption,o=e.inputId,l=e.name,c=e.onChange,u=e.optionRender,s=e.options,p=e.value;return(a.a.createElement("div",{"data-locator":t,className:n.container},a.a.createElement(g.a,{component:"label",shrink:!0,htmlFor:o},r),a.a.createElement(T.a,{name:l,value:p,displayEmpty:!0,onChange:c,input:a.a.createElement(I.a,{id:o}),className:n.selectRoot,MenuProps:{"data-locator":"options-".concat(o)}},i&&a.a.createElement(h.a,{"data-locator":"option-null",key:null,value:null},u({option:null,index:-1,options:s})),s.map((function(e,t){return a.a.createElement(h.a,{"data-locator":"option-".concat(e),key:e,value:e},u({option:e,index:t,options:s}))})))))},j=o.a.oneOfType([o.a.number,o.a.string]);P.propTypes={name:o.a.string,caption:o.a.string.isRequired,classes:o.a.objectOf(o.a.string).isRequired,hasNullOption:o.a.bool,inputId:o.a.string.isRequired,onChange:o.a.func.isRequired,optionRender:o.a.func,options:o.a.arrayOf(j),value:j},P.defaultProps={name:void 0,hasNullOption:!0,optionRender:function(e){return e.option||""},options:[],value:void 0};var S=Object(y.a)({container:{display:"block"},selectRoot:{display:"block"}})(P),C=(r(89),r(105),r(1241)),D=r(817),R=r(821),_=["isHighlighted","isSelected","option"];function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function N(e){var t=e.isHighlighted,r=e.isSelected,n=e.option,i=A(e,_);return(a.a.createElement(h.a,w({component:"div",selected:t,style:{fontWeight:r?500:400}},i),a.a.createElement(R.a,{primary:n.label,secondary:n.details})))}function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function V(e){var t=e.isOpen,r=e.options,n=e.classes,i=e.getMenuProps,o=e.getItemProps,l=e.selectedItem,c=e.highlightedIndex;return(a.a.createElement("div",i(),t&&a.a.createElement(D.a,{className:n.paper,square:!0},r.map((function(e,t){return a.a.createElement(N,L({key:e.label},o({item:e}),{isHighlighted:c===t,isSelected:Boolean(l)&&l.label===e.label,option:e}))})))))}var x=r(1221),k=r.n(x);function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){var t=e.classes,r=e.triggerProps,n=e.triggerInputProps;return(a.a.createElement(E.a,Y({InputProps:F({classes:{root:t.inputRoot,input:t.inputInput}},n),fullWidth:!0,classes:k()(t,"inputRoot","inputInput")},r)))}var U=["data-locator","classes","options","inputProps","triggerProps"];function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var W=Object(f.a)((function(e){return{root:{},container:{},paper:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0},inputRoot:{},inputInput:{}}})),J=function(e){return(e||{}).label};function X(e){var t=e["data-locator"],r=e.classes,n=e.options,i=e.inputProps,o=e.triggerProps,l=$(e,U),c=z(z({},W()),r);return a.a.createElement("div",{"data-locator":t,className:c.root},a.a.createElement(C.a,G({itemToString:J},l),(function(e){var t=e.getInputProps,r=e.getItemProps,l=e.getMenuProps,u=e.highlightedIndex,s=e.inputValue,p=e.isOpen,d=e.selectedItem;return(a.a.createElement("div",{className:c.container},a.a.createElement(B,{classes:c,inputValue:s,triggerProps:o,triggerInputProps:t(i)}),a.a.createElement(V,{isOpen:p,options:n,classes:c,getMenuProps:l,getItemProps:r,selectedItem:d,highlightedIndex:u})))})))}var Q=r(116),Z=r(48),ee=r(136);var te="FILTER",re="SEARCH";function ne(e){var t,r,n,a=e.queryFormat,i=e.filterField,o=e.inputValue,l={pageSize:e.numberOfItemsToRequest};switch(a){case re:return{navigation:l,search:o};case te:default:return{navigation:l,filter:(t={},r=i,n={comparator:"~",value:"%".concat(o,"%")},r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t)}}}var ae=["classes","inputProps","triggerProps","sourceProps","transformSuggestionToOption"];function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pe(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function de(e){var t=e.classes,r=e.inputProps,i=e.triggerProps,o=e.sourceProps,l=e.transformSuggestionToOption,c=void 0===l?function(e){return e}:l,u=pe(e,ae),s=ue(Object(n.useState)(""),2),p=s[0],d=s[1],f=function(e){var t=e.domain,r=e.modelName,n=e.inputValue,a=e.queryFormat,i=e.filterField,o=e.numberOfItemsToRequest,l=e.debounceRequestDelayMs,c=void 0===l?400:l,u=Object(ee.g)({debounceRequest:c,domain:t,isProvision:!0,modelName:r,observe:n,query:ne({queryFormat:a,filterField:i,inputValue:n,numberOfItemsToRequest:o})}),s=(Object(Z.o)(u)||{}).data,p=void 0===s?[]:s,d=Object(Q.c)((function(e){return Object(ee.c)(e,r)||{}}));return{provision:u,suggestions:p.map((function(e){return d[e]})).filter(Boolean)}}(le(le({},o),{},{inputValue:p})).suggestions,m=Object(n.useCallback)((function(e){var t;d(null===(t=e.target)||void 0===t?void 0:t.value)})),v=Object(n.useMemo)((function(){return le(le({},r),{},{onChange:m})}),[r,m]),b=Object(n.useMemo)((function(){return f.map(c)}),[f]);return a.a.createElement(X,ie({classes:t,inputProps:v,triggerProps:i,options:b},u))}var fe,me=r(214);function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var be=(ve(fe={},me.TRIP_TYPES.LEISURE,"Отдых"),ve(fe,me.TRIP_TYPES.BUSINESS,"Работа"),ve(fe,me.TRIP_TYPES.MIXED,"Смешанный"),ve(fe,me.TRIP_TYPES.RELOCATION,"Переезд"),ve(fe,me.TRIP_TYPES.OTHER,"Другой"),fe);var Oe=function(e){var t=e.option;return t?be[t]:"Не указан"},Ee=Object(f.a)({optionGroup:{display:"flex",minWidth:"400px"},suggest:{flexGrow:1}});function ye(e){var t,r,n,i,o=e.provision,l=(o=void 0===o?{}:o).locationsDict,c=void 0===l?{}:l,u=e.formikProps,s=Ee(),p=u.handleChange,d=u.setFieldValue,f=u.handleBlur,m=u.errors,y=u.touched,g=u.values.trip,I=void 0===g?{}:g,h=(c[I.originLocationId]||{}).locationName;return a.a.createElement(v.a,{container:!0,spacing:3,alignItems:"center"},a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(b.a,{control:a.a.createElement(O.a,{"data-locator":"TRIP_EDIT_PAGE.AUTOGENERATED_NAME_CHECKBOX",fullWidth:!0,helperText:(null===(t=y.trip)||void 0===t?void 0:t.hasAutogeneratedTripName)&&(null===(r=m.trip)||void 0===r?void 0:r.hasAutogeneratedTripName),name:"trip.hasAutogeneratedTripName",onBlur:f,onChange:p,checked:I.hasAutogeneratedTripName}),label:"Автогенерируемое название"})),a.a.createElement(v.a,{item:!0,xs:6},!I.hasAutogeneratedTripName&&a.a.createElement(E.a,{"data-locator":"TRIP_EDIT_PAGE.TRIP_NAME_INPUT",className:s.textField,fullWidth:!0,helperText:(null===(n=y.trip)||void 0===n?void 0:n.tripName)&&(null===(i=m.trip)||void 0===i?void 0:i.tripName),label:"Название поездки",margin:"normal",name:"trip.tripName",onBlur:f,onChange:p,value:I.tripName})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(de,{"data-locator":"TRIP_EDIT_PAGE.ORIGIN_LOCATION_SUGGEST",classes:{root:s.suggest},inputProps:{placeholder:"Пункт отправления..."},initialInputValue:h,onChange:function(e){var t=e.suggestion.geonameId;return d("trip.originGeonameId",t)},onBlur:f,sourceProps:{domain:"tripEditCard.geoname",modelName:"geonames",filterField:"locationName",queryFormat:re,resolveDetails:function(e){return[e.countryName,e.regionName].filter(Boolean).join(", ")}},transformSuggestionToOption:ge,triggerProps:{label:"Старт из"}})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"TRIP_EDIT_PAGE.TRIP_TYPE_SELECT",caption:"Тип поездки",name:"trip.tripType",inputId:"TripEditCard-TripTypeOptions",onChange:p,onBlur:f,optionRender:Oe,options:Object.values(me.TRIP_TYPES),hasNullOption:!0,value:I.tripType})))}function ge(e){return{label:e.locationName,detail:e.countryName,suggestion:e}}ye.propTypes={},ye.defaultProps={};r(872),r(873),r(874),r(875);var Ie=r(115),he=r.n(Ie),Te=function(e,t){return!e||!t||e.departureRideId===t.arrivalRideId},Pe=r(1231),je=function(e){for(var t=e.target;t;){var r=t.dataset;if(r){var n=r.sortHandler;if("enabled"===n)return!1;if("disabled"===n)return!0}t=t.parentNode}return!0},Se=["children"];function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function De(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Re=Object(Pe.SortableContainer)((function(e){var t=e.children,r=e.className;return(a.a.createElement("div",{className:r},t))})),_e=Object(Pe.SortableElement)((function(e){return e.node}));function we(e){var t=e.children,r=De(e,Se);return(a.a.createElement(Re,Ce({shouldCancelStart:je,lockAxis:"y",lockToContainerEdges:!0},r),a.a.Children.map(t,(function(e,t){return a.a.createElement(_e,{node:e,index:t})}))))}var Ae=r(1232),Ne=r.n(Ae),Le=Object(f.a)({dragHandler:{cursor:"grab"}});function Ve(e){var t=e.className,r=Le();return a.a.createElement(Ne.a,{className:he()(t,r.dragHandler),"data-sort-handler":"enabled"})}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ve.propTypes={className:o.a.string},Ve.defaultProps={className:void 0};var Ye="RIDE_CREATE_DIALOG",He="RIDE_EDIT_DIALOG",Fe="VISIT_CREATE_DIALOG",Me="VISIT_EDIT_DIALOG",Be="VISIT_DELETE_DIALOG";var Ue=Object(f.a)({container:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"12px 0",cursor:"grab",background:"#fff",padding:"12px",border:"1px solid #ccc",boxShadow:"0 2px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.2)",position:"relative","&:hover $visibleOnlyOnHover":{visibility:"visible"}},visibleOnlyOnHover:{visibility:"hidden"}});function Ge(e){var t=e.showDialog,r=Ue();return a.a.createElement("div",{className:r.container,"data-sort-handler":"enabled"},a.a.createElement(m.a,{"data-locator":"TRIP_EDIT_PAGE.ADD_VISIT_BUTTON","data-sort-handler":"disabled",size:"small",variant:"outlined",color:"primary",onClick:function(){return t(Fe)}},a.a.createElement("span",null,"Добавить посещение")),a.a.createElement(Ve,{className:r.visibleOnlyOnHover}))}Ge.propTypes={showDialog:o.a.func.isRequired},Ge.defaultProps={};var qe=r(829),ze=r(1032),Ke=r.n(ze),$e=["onClick"];function We(){return(We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Je(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Xe(e){var t=e.onClick,r=Je(e,$e);return(a.a.createElement(qe.a,We({"data-locator":"ACTIONS.CREATE_BUTTON",size:"small",variant:"outlined",color:"primary",component:"button",onClick:t},r),a.a.createElement(Ke.a,null)))}Xe.propTypes={},Xe.defaultProps={};var Qe=r(1007),Ze=r.n(Qe),et=["onClick"];function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function rt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nt(e){var t=e.onClick,r=rt(e,et);return(a.a.createElement(qe.a,tt({"data-locator":"ACTIONS.EDIT_BUTTON",size:"small",variant:"outlined",color:"primary",component:"button",onClick:t},r),a.a.createElement(Ze.a,null)))}nt.propTypes={},nt.defaultProps={};var at=r(1233),it=r.n(at),ot=["onClick"];function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ct(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ut(e){var t=e.onClick,r=ct(e,ot);return(a.a.createElement(qe.a,lt({"data-locator":"ACTIONS.DELETE_BUTTON",size:"small",variant:"outlined",color:"primary",component:"button",onClick:t},r),a.a.createElement(it.a,null)))}ut.propTypes={},ut.defaultProps={};var st=Object(f.a)({actions:{display:"inline-block"}});function pt(e){var t=e["data-locator"],r=e.className,n=e.isEntityExist,i=e.onEditClick,o=e.onDeleteClick,l=e.onCreateClick,c=st(),u=!n&&Boolean(l),s=n&&Boolean(i),p=n&&Boolean(o);return a.a.createElement("div",{"data-locator":t,"data-sort-handler":"disabled",className:he()(c.actions,r)},u&&a.a.createElement(Xe,{onClick:l}),s&&a.a.createElement(nt,{onClick:i}),p&&a.a.createElement(ut,{onClick:o}))}var dt=r(1236),ft=r.n(dt),mt=r(1234),vt=r.n(mt),bt=r(938),Ot=r.n(bt),Et=r(1235),yt=r.n(Et),gt=r(293);function It(e){var t=e.visit.visitType,r=e.className,n=function(e){switch(e){case gt.VISIT_TYPES.TRANSIT:return vt.a;case gt.VISIT_TYPES.BASE_CAMP:return yt.a;case gt.VISIT_TYPES.RELOCATION:return Ot.a;case gt.VISIT_TYPES.REGULAR:default:return ft.a}}(t);return a.a.createElement(n,{className:r})}var ht=r(295),Tt=Object(f.a)({container:{display:"inline-block",marginRight:"4px","&:hover $visibleOnHover":{visibility:"visible"}},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"},visibleOnHover:{visibility:"hidden"}}),Pt=function(e){var t=e.visit,r=e.showDialog,n=Tt();if(!t)return"Не указано";var i=t.locationName;return(a.a.createElement("div",{className:n.container,"data-locator":"TRIP_EDIT_PAGE.VISIT_BLOCK"},a.a.createElement(It,{visit:t,className:n.icon}),i,a.a.createElement(pt,{className:n.visibleOnHover,isEntityExist:!0,onEditClick:function(){return r(Me,t)},onDeleteClick:function(){return r(Be,t)}})))};Pt.propTypes={visit:o.a.shape(ht.default)},Pt.defaultProps={visit:{}};var jt=Pt,St=r(842),Ct=r(338),Dt=r(910);var Rt=Object(f.a)({container:{"&:hover $visibleOnHover":{visibility:"visible"}},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"},details:{marginRight:"4px"},visibleOnHover:{visibility:"hidden"}}),_t=function(e){var t,r,n,i=e.className,o=e.ride,l=e.showDialog,c=Rt(),u=o||{},s=u.rideId,p=u.arrivalDateTime,d=u.departureDateTime,f=Boolean(s);return a.a.createElement("div",{className:he()(i,c.container),"data-locator":"TRIP_EDIT_PAGE.RIDE_BLOCK"},f&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Dt.a,{ride:o,className:c.icon}),a.a.createElement("span",{className:c.details},Object(St.b)({departureDateTime:d,arrivalDateTime:p}))),a.a.createElement(pt,{"data-locator":"TRIP_EDIT_PAGE.RIDE_ACTIONS",className:he()((t={},r=c.visibleOnHover,n=f,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t)),isEntityExist:f,onCreateClick:function(){return l(Ye)},onEditClick:function(){return l(He,o)}}))};_t.propTypes={className:o.a.string,ride:o.a.shape(Ct.default)},_t.defaultProps={className:void 0,ride:{}};var wt=_t;function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){Lt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Vt=Object(f.a)({alwaysVisible:{},container:{margin:"12px 0",cursor:"grab",background:"#fff",padding:"12px",border:"1px solid #ccc",boxShadow:"0 2px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.2)",position:"relative","&:hover $editDialogTrigger":{visibility:"visible"},"&:hover $visibleOnlyOnHover":{visibility:"visible"}},editDialogTrigger:{marginLeft:"4px",position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-block",visibility:"hidden"},visibleOnlyOnHover:{visibility:"hidden"},ride:{},warning:{color:"red"}});function xt(e){var t=e.style,r=e.className,n=e.prevVisit,i=e.visit,o=e.nextVisit,l=e.showDialog,c=e.isArrivalRideMatch,u=e.isDepartureRideMatch,s=(e.tripId,e.provision),p=Vt(),d=s.ridesDict,f=i||{},m=f.visitId,v=f.arrivalRideId,b=f.departureRideId,O=(n||{}).visitId,E=(o||{}).visitId;return a.a.createElement("div",{className:he()(p.container,r),style:t,"data-sort-handler":"enabled"},a.a.createElement(wt,{showDialog:function(e,t){return l(e,Nt(Nt({},t),{},{departureVisitId:c?O:void 0,arrivalVisitId:m}))},className:he()(p.ride,Lt({},p.warning,!c)),ride:d[v],provision:s}),a.a.createElement(jt,{showDialog:l,classes:{editIcon:p.visibleOnlyOnHover},visit:i,provision:s}),a.a.createElement(wt,{showDialog:function(e,t){return l(e,Nt(Nt({},t),{},{departureVisitId:m,arrivalVisitId:u?E:void 0}))},visitId:m,className:he()(p.ride,Lt({},p.warning,!u)),ride:d[b],provision:s}))}function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(r),!0).forEach((function(t){Ht(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ht(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}xt.propTypes={},xt.defaultProps={};var Bt=Object(f.a)({creatorsContainer:{display:"flex",justifyContent:"space-between"},isCompact:{marginTop:"-52px"},resetFlow:{transform:"translate(0, 0)"}});function Ut(e){var t=e.showDialog,r=e.provision,i=e.formikProps,o=i.values.trip.visits,l=r.visitsDict,u=Bt(),s=Ft(Object(n.useState)(o.length),2),p=s[0],d=s[1],f=Ft(Object(n.useState)(!1),2),m=f[0],v=f[1],b=function(e,r){var n=Ft(qt(o,p).map((function(e){return e&&l[e]||null})),2),a=n[0],i=n[1];t(e,Yt(Yt({},r),{},{orderInTrip:Gt(a,i)}))};return o.length?a.a.createElement(c.a,{name:"trip.visits",render:function(e){return a.a.createElement(we,{className:u.resetFlow,updateBeforeSortStart:function(){return v(!0)},onSortEnd:function(t){v(!1);var r=t.oldIndex,n=t.newIndex;r===p?d(n):e.move(r,n)}},o.flatMap((function(e,n){var c=Ft(qt(o,n).map((function(e){return e&&l[e]||null})),3),s=c[0],d=c[1],f=c[2],v=function(e,t,r){var n=Te(e,t);return{isDepartureRideMatch:Te(t,r),isArrivalRideMatch:n}}(s,d,f),O=v.isArrivalRideMatch,E=v.isDepartureRideMatch,y=n>=1&&!m&&O&&p!==n,g=a.a.createElement(xt,{key:"v".concat(e),index:n,style:{zIndex:o.length-n},className:he()(Ht({},u.isCompact,y)),showDialog:t,isArrivalRideMatch:O,isDepartureRideMatch:E,prevVisit:s,visit:d,nextVisit:f,formikProps:i,provision:r}),I=p===n,h=p===o.length&&p===n+1;if(!I&&!h)return g;var T=a.a.createElement("div",{style:{zIndex:o.length+1}},a.a.createElement(Ge,{key:"visitCreator",showDialog:b}));return I?[T,g]:[g,T]})))}}):a.a.createElement(Ge,{key:"visitCreator",showDialog:b})}function Gt(e,t){var r=(e||{}).orderInTrip,n=(t||{}).orderInTrip;return e?t?(r+n)/2+(Math.random()-.5)*(n-r)/2:r+1:n-1}function qt(e,t){return[e[t-1]||null,e[t]||null,e[t+1]||null]}Ut.propTypes={},Ut.defaultProps={};r(64);var zt=r(219),Kt=r(946);function $t(e){var t=e.isCreation,r=e.className,n=e.provision,i=e.formikProps.values.trip,o=n.visitsDict,l=n.countriesDict,c=n.locationsDict,u=t?"Создание поездки":"Редактирование поездки",s=Object(Kt.a)(i,o,l,c),p="".concat(u,': "').concat(s,'"');return a.a.createElement(zt.a,{variant:"h6",className:r},p)}var Wt=Object(f.a)({container:{"&:hover $visibleOnlyOnHover":{visibility:"visible"}},visibleOnlyOnHover:{visibility:"hidden"},actionButton:{marginTop:"24px"},hint:{color:"gray",fontSize:12,paddingLeft:"8px"}}),Jt=function(e){var t=e.isCreation,r=e.showDialog,n=e.provision,i=e.formikProps,o=Wt();return a.a.createElement(a.a.Fragment,null,a.a.createElement($t,{className:o.container,formikProps:i,isCreation:t,provision:n}),a.a.createElement(c.b,null,a.a.createElement(ye,{formikProps:i,provision:n}),!t&&a.a.createElement(Ut,{classes:o,showDialog:r,formikProps:i,provision:n}),a.a.createElement(m.a,{"data-locator":"TRIP_EDIT_PAGE.SUBMIT_TRIP_BUTTON",className:o.actionButton,type:"submit",color:"primary"},t?"Создать":"Сохранить"),t&&a.a.createElement("div",{className:o.hint},"После создания поездки в нее можно будет добавить места посещения и маршрут")))};Jt.propTypes={isCreation:o.a.bool.isRequired},Jt.defaultProps={};var Xt=Jt,Qt=r(403),Zt=r(404),er=r(1281),tr=r(1285),rr=r(1283),nr=r(1284),ar=r(1282),ir=function(e){var t=e["data-locator"],r=e.isOpen,n=e.title,i=e.description,o=e.children,l=e.primaryButtonCaption,c=e.primaryButtonHandler,u=e.secondaryButtonCaption,s=e.secondaryButtonHandler,p=e.onClose;return(a.a.createElement(er.a,{"data-locator":t,transitionDuration:500,open:r,onClose:p,"aria-labelledby":"form-dialog"},a.a.createElement(ar.a,{id:"form-dialog-title"},n),a.a.createElement(rr.a,null,a.a.createElement(nr.a,null,i),o),a.a.createElement(tr.a,null,s&&a.a.createElement(m.a,{"data-locator":"DIALOG.RESET_BUTTON",onClick:s,color:"secondary"},u),c&&a.a.createElement(m.a,{"data-locator":"DIALOG.SUBMIT_BUTTON",onClick:c,color:"primary"},l))))},or=function(e){var t=e["data-locator"],r=e.initialValues,n=e.isOpen,i=e.onSubmit,o=e.onReset,l=e.title,u=e.description,s=e.children;return(a.a.createElement(c.c,{initialValues:r,enableReinitialize:!0,onSubmit:i},(function(e){return a.a.createElement(ir,{"data-locator":t,description:u,onClose:o,isOpen:n,primaryButtonCaption:"Сохранить",primaryButtonHandler:e.handleSubmit,secondaryButtonCaption:"Отмена",secondaryButtonHandler:o,title:l},a.a.cloneElement(s,{formikProps:e}))})))},lr=r(1286),cr=r(1301),ur=r(841),sr=Object(f.a)({container:{display:"inline-block",marginRight:"4px"},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"},period:{display:"inline",color:"gray",fontSize:12}}),pr=function(e){var t=e.visit,r=e.isLong,n=e.locationUrl,i=sr();if(!t)return"Не указано";var o=t.locationName;return(a.a.createElement("div",{className:i.container},a.a.createElement(It,{visit:t,className:i.icon}),a.a.createElement(ur.a,{to:n,optional:!0},o),r?", ":"",a.a.createElement("div",{className:i.period},r&&Object(St.c)(t))))};pr.defaultProps={visit:{}};var dr,fr,mr,vr,br=pr,Or=r(128);function Er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yr=(Er(dr={},Or.RIDE_CLASSES.ECONOMY,"Эконом"),Er(dr,Or.RIDE_CLASSES.COMFORT,"Комфорт"),Er(dr,Or.RIDE_CLASSES.BUSINESS,"Бизнес"),Er(dr,Or.RIDE_CLASSES.FIRST,"Первый"),Er(dr,Or.RIDE_CLASSES.PRIVATE,"Частный"),dr),gr=(Er(fr={},Or.RIDE_OCCUPATION.PASSENGER,"Пассажир"),Er(fr,Or.RIDE_OCCUPATION.STUFF,"Персонал"),Er(fr,Or.RIDE_OCCUPATION.DRIVER,"Водитель"),fr),Ir=(Er(mr={},Or.RIDE_TYPES.SELF_DRIVE,"Самостоятельная поездка"),Er(mr,Or.RIDE_TYPES.SCHEDULED,"Регулярный рейс"),Er(mr,Or.RIDE_TYPES.CHARTER,"Чартерный рейс"),Er(mr,Or.RIDE_TYPES.TOUR,"Тур"),Er(mr,Or.RIDE_TYPES.CARPOOL,"Попутный автомобиль"),Er(mr,Or.RIDE_TYPES.HITCH_HIKING,"Автостоп"),Er(mr,Or.RIDE_TYPES.DROP_OFF,"Подбросили до места"),mr),hr=(Er(vr={},Or.VEHICLE_TYPES.CAR,"Автомобиль"),Er(vr,Or.VEHICLE_TYPES.TRAIN,"Поезд"),Er(vr,Or.VEHICLE_TYPES.AIRCRAFT,"Самолет"),Er(vr,Or.VEHICLE_TYPES.BUS,"Автобус"),Er(vr,Or.VEHICLE_TYPES.MOTORHOME,"Дом на колесах"),Er(vr,Or.VEHICLE_TYPES.LOCAL_TRAIN,"Электричка"),Er(vr,Or.VEHICLE_TYPES.FERRY,"Паром"),Er(vr,Or.VEHICLE_TYPES.BIKE,"Велосипед"),Er(vr,Or.VEHICLE_TYPES.BY_FEET,"Пешком"),Er(vr,Or.VEHICLE_TYPES.ROPEWAY,"Канатная дорога"),Er(vr,Or.VEHICLE_TYPES.FUNICULAR,"Фуникулер"),Er(vr,Or.VEHICLE_TYPES.MOTORBIKE,"Мотоцикл"),Er(vr,Or.VEHICLE_TYPES.TRUCK,"Грузовик"),Er(vr,Or.VEHICLE_TYPES.ALL_TERRAIN_VEHICLE,"Вездеход"),Er(vr,Or.VEHICLE_TYPES.TRAM,"Трамвай"),Er(vr,Or.VEHICLE_TYPES.TROLLEY,"Троллейбус"),Er(vr,Or.VEHICLE_TYPES.TAXI,"Такси"),Er(vr,Or.VEHICLE_TYPES.CITY_BUS,"Муниципальный автобус"),Er(vr,Or.VEHICLE_TYPES.JITNEY,"Маршрутное такси"),Er(vr,Or.VEHICLE_TYPES.SUBWAY,"Метро"),Er(vr,Or.VEHICLE_TYPES.PUBLIC_TRANSPORT,"Общественный транспорт"),vr),Tr=(r(79),r(226)),Pr=r(424),jr=r(110),Sr=r(853),Cr=function(e){var t=e.dateFrom,r=e.timeFrom,n=Object(Sr.a)(r),a=Object(Sr.a)(t);return n&&a?new Date(t.getFullYear(),t.getMonth(),t.getDate(),r.getHours(),r.getMinutes(),r.getSeconds()):new Date(NaN)};function Dr(e,t){return Object(Sr.a)(e)&&!Object(Pr.a)(t,e)}function Rr(e){return function(e){if(Array.isArray(e))return _r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _r(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wr=null,Ar=function(e){return function(t){var r=t.option;return r===wr?"Пункт отправления":a.a.createElement(br,{visit:e[r]})}},Nr=function(e){var t=e.option;return t?hr[t]:"Не указан"},Lr=function(e){var t=e.option;return t?Ir[t]:"Не указан"},Vr=function(e){var t=e.option;return t?yr[t]:"Не указан"},xr=function(e){var t=e.option;return t?gr[t]:"Не указан"},kr=Object(f.a)({option:{width:"100%"}}),Yr=function(e){var t,r,n,i,o,l,c,u,s,p,d,f=e.tripVisitsIds,m=e.visitsDict,y=e.formikProps,g=y.values,I=g.vehicleType,h=g.rideType,T=g.rideComment,P=g.rideClass,j=g.rideOccupation,C=g.departureVisitId,D=g.departureDateTime,R=g.arrivalVisitId,_=g.arrivalDateTime,w=y.handleChange,A=y.setFieldValue,N=kr(),L=f&&f.length>0,V=(r=(t={arrivalDateTimeField:{value:_,onChange:function(e){return A("arrivalDateTime",e)}},departureDateTimeField:{value:D,onChange:function(e){return A("departureDateTime",e)}}}).arrivalDateTimeField,n=r.value,i=r.onChange,o=t.departureDateTimeField,l=o.value,c=o.onChange,u=Object(Tr.a)(l,n),s=function(e,t){Dr(e,l)&&c(e),Dr(t,n)&&i(t)},p=function(e){var t=u?Cr({timeFrom:n,dateFrom:e}):n;s(e,t)},d=function(e){var t=u?Cr({timeFrom:l,dateFrom:e}):l;s(t,e)},{isSameDateField:{value:u,onChange:function(e){Boolean(u)!==Boolean(e)&&s(l,Cr({dateFrom:e?l:Object(jr.a)(l,1),timeFrom:n}))}},rideDepartureDateField:{value:l,onChange:function(e){p(Cr({dateFrom:e,timeFrom:l}))}},rideArrivalDateField:{value:n,onChange:function(e){d(Cr({dateFrom:e,timeFrom:n}))}},rideDepartureTimeField:{value:l,onChange:function(e){p(Cr({dateFrom:l,timeFrom:e}))}},rideArrivalTimeField:{value:n,onChange:function(e){d(Cr({dateFrom:n,timeFrom:e}))}}}),x=V.rideArrivalDateField,k=V.rideArrivalTimeField,Y=V.rideDepartureDateField,H=V.rideDepartureTimeField,F=V.isSameDateField;return a.a.createElement(v.a,{container:!0,spacing:3,alignItems:"center"},L&&a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"RIDE_EDIT_FORM_SECTION.DEPARTURE_VISIT_SELECT",name:"departureVisitId",caption:"Отправление из",inputId:"RideEditCard-departureVisitId",optionRender:Ar(m),hasNullOption:!1,options:[wr].concat(Rr(f)),value:C,onChange:w})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"RIDE_EDIT_FORM_SECTION.ARRIVAL_VISIT_SELECT",name:"arrivalVisitId",caption:"Прибытие в",inputId:"RideEditCard-arrivalVisitId",hasNullOption:!1,optionRender:Ar(m),options:[].concat(Rr(f),[wr]),onChange:w,value:R}))),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"RIDE_EDIT_FORM_SECTION.VEHICLE_TYPE_SELECT",name:"vehicleType",caption:"Транспорт",inputId:"RideEditCard-VehicleTypeOptions",optionRender:Nr,options:Object.values(Or.VEHICLE_TYPES),onChange:w,value:I})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"RIDE_EDIT_FORM_SECTION.RIDE_TYPE_SELECT",name:"rideType",caption:"Тип поездки",inputId:"RideEditCard-RideTypeOptions",optionRender:Lr,options:Object.values(Or.RIDE_TYPES),onChange:w,value:h})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"RIDE_EDIT_FORM_SECTION.RIDE_CLASS_SELECT",name:"rideClass",caption:"Класс поездки",inputId:"RideEditCard-RideClassOptions",optionRender:Vr,options:Object.values(Or.RIDE_CLASSES),onChange:w,value:P})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"RIDE_EDIT_FORM_SECTION.RIDE_OCCUPATION_SELECT",name:"rideOccupation",caption:"Роль",inputId:"RideEditCard-RideOccupationOptions",optionRender:xr,options:Object.values(Or.RIDE_OCCUPATION),onChange:w,value:j})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(lr.a,{"data-locator":"RIDE_EDIT_FORM_SECTION.DEPARTURE_DATE_PICKER",name:"departureDateTime",autoOk:!0,className:N.option,label:"Дата отправления",value:Y.value,onChange:Y.onChange,format:"dd/MM/yyyy"})),a.a.createElement(v.a,{item:!0,xs:6},F.value?a.a.createElement(b.a,{control:a.a.createElement(O.a,{checked:F.value,onChange:function(e){return F.onChange(e.target.checked)}}),label:"Прибытие в тот же день"}):a.a.createElement(lr.a,{"data-locator":"RIDE_EDIT_FORM_SECTION.ARRIVAL_DATE_PICKER",name:"arrivalDateTime",autoOk:!0,className:N.option,label:"Дата прибытия",value:x.value,onChange:x.onChange,format:"dd/MM/yyyy"})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(cr.a,{name:"departureDateTime",ampm:!1,autoOk:!0,className:N.option,label:"Время отправления",value:H.value,onChange:H.onChange})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(cr.a,{name:"arrivalDateTime",ampm:!1,autoOk:!0,className:N.option,label:"Время прибытия",value:k.value,onChange:k.onChange})),a.a.createElement(v.a,{item:!0,xs:12},a.a.createElement(E.a,{name:"rideComment",className:N.option,label:"Комментарий",multiline:!0,onChange:w,rows:1,rowsMax:12,value:T})))};Yr.propTypes={},Yr.defaultProps={};var Hr=Yr,Fr=["isCreation","tripVisitsIds","visitsDict"];function Mr(){return(Mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Br(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ur(e){var t=e.isCreation,r=e.tripVisitsIds,n=e.visitsDict,i=Br(e,Fr);return(a.a.createElement(or,Mr({"data-locator":"TRIP_EDIT_PAGE.RIDE_DIALOG",title:t?"Создание маршрута":"Редактирование маршрута"},i),a.a.createElement(Hr,{tripVisitsIds:r,visitsDict:n,formikProps:null})))}var Gr,qr=r(937);function zr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kr=(zr(Gr={},gt.VISIT_TYPES.TRANSIT,"Транзит"),zr(Gr,gt.VISIT_TYPES.REGULAR,"Посещение"),zr(Gr,gt.VISIT_TYPES.BASE_CAMP,"Базовый лагерь"),zr(Gr,gt.VISIT_TYPES.RELOCATION,"Переезд"),Gr),$r=function(e){return function(t){var r=t.option;return(a.a.createElement(qr.a,{ride:e[r],isLong:!0}))}},Wr=function(e){var t=e.option;return t?Kr[t]:"Не указан"},Jr=Object(f.a)({option:{width:"100%"}});function Xr(e){var t=e.tripRidesIds,r=e.ridesDict,n=e.formikProps,i=n.values,o=i.locationName,l=i.visitType,c=i.visitComment,u=i.arrivalRideId,s=i.departureRideId,p=n.handleChange,d=n.handleBlur,f=n.setFieldValue,m=Jr(),b=t&&t.length>0;return a.a.createElement(v.a,{container:!0,spacing:3,alignItems:"center"},a.a.createElement(v.a,{item:!0,xs:12},a.a.createElement(de,{"data-locator":"VISIT_EDIT_FORM_SECTION.LOCATION_SUGGEST",inputProps:{placeholder:"Место посещения..."},initialInputValue:o,onChange:function(e){var t=e.suggestion.geonameId;return f("geonameId",t)},onBlur:d,sourceProps:{domain:"visitEditFormSection.geoname",modelName:"geonames",filterField:"locationName",queryFormat:re},transformSuggestionToOption:Qr,triggerProps:{label:"Место посещения"}})),b&&a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{name:"arrivalRideId",caption:"Прибытие",inputId:"RideEditCard-arrivalVisitId",hasNullOption:!1,optionRender:$r(r),options:t,onChange:p,value:u})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{name:"departureRideId",caption:"Отправление",inputId:"RideEditCard-departureVisitId",optionRender:$r(r),hasNullOption:!1,options:t,value:s,onChange:p}))),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"VISIT_EDIT_FORM_SECTION.VISIT_TYPE_SELECT",name:"visitType",value:l,onChange:p,caption:"Тип посещения",inputId:"VisitEditCard-VisitTypeOptions",optionRender:Wr,options:Object.values(gt.VISIT_TYPES),hasNullOption:!0})),a.a.createElement(v.a,{item:!0,xs:12},a.a.createElement(E.a,{className:m.option,name:"visitComment",value:c,onChange:p,label:"Комментарий",fullWidth:!0,multiline:!0,rows:1,rowsMax:12})))}function Qr(e){return{label:e.locationName,details:[e.countryName,e.regionName].filter(Boolean).join(", "),suggestion:e}}Xr.propTypes={},Xr.defaultProps={};var Zr=["isCreation","tripRidesIds","ridesDict"];function en(){return(en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function tn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rn(e){var t=e.isCreation,r=e.tripRidesIds,n=e.ridesDict,i=tn(e,Zr);return(a.a.createElement(or,en({"data-locator":"TRIP_EDIT_PAGE.VISIT_DIALOG",title:t?"Создание посещения":"Редактирование посещения"},i),a.a.createElement(Xr,{tripRidesIds:r,ridesDict:n,formikProps:null})))}var nn=["visit","onSubmit","onReset"];function an(){return(an=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function on(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ln(e){var t=e.visit,r=e.onSubmit,n=e.onReset,i=on(e,nn);return(a.a.createElement(ir,an({title:"Удалить посещение",description:"Вы действительно хотите удалить посещение",primaryButtonCaption:"Да",primaryButtonHandler:function(e){return r(e,t)},secondaryButtonCaption:"Нет",secondaryButtonHandler:n},i),a.a.createElement(br,{visit:t})))}function cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(r),!0).forEach((function(t){sn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pn(e){var t=e.provision,r=e.dialogsState,i=e.hideDialog,o=e.handleSubmitRide,l=e.handleSubmitVisit,c=e.handleDeleteVisit,u=e.trip,s=t.ridesDict,p=t.visitsDict,d=u.tripId,f=u.visits,m=u.rides,v=r.dialogName,b=r.dialogParams,O=void 0===b?{}:b,E=Object(n.useMemo)((function(){var e=O.rideId;return un(un(un({},e?s[e]:Object(Qt.b)()),O),{},{tripId:d})}),[s,d,O]),y=Object(n.useMemo)((function(){var e=O.visitId;return un(un(un({},e?p[e]:Object(Zt.b)()),O),{},{tripId:d})}),[p,d,O]),g=function(e){return e===He||e===Ye}(v),I=function(e){return e===Me||e===Fe}(v),h=v===Be;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ur,{initialValues:E,tripVisitsIds:f,isOpen:g,onSubmit:function(e){o(e),i()},onReset:i,isCreation:v===Ye,visitsDict:p}),a.a.createElement(rn,{initialValues:y,tripRidesIds:m,isOpen:I,onSubmit:function(e){l(e),i()},onReset:i,isCreation:v===Fe,ridesDict:s}),a.a.createElement(ln,{visit:p[O.visitId],isOpen:h,onSubmit:function(e,t){var r=t.visitId;c(r),i()},onReset:i}))}r(106),r(533);function dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(e){var t=e.orderResolver}({orderResolver:function(e){return e.orderInTrip}});function mn(e){var t=e.match.params,r=t.userAlias,i=t.strTripId,o=t.action,f=Object(u.d)().travel.tripEdit,m=Object(l.g)(),v="create"===o,b=Object(s.b)(),O=b.isAuthenticated,E=b.userAlias,y=i&&parseInt(i,10),g=Object(p.b)({userAlias:r,tripsIds:y?[y]:[]}),I=g.tripsDict,h=g.tripsProvision,T=v?Object(d.b)():I[y],P=function(e){var t=dn(Object(ee.h)({domain:"".concat("travel.TripEditPage",".rides"),modelName:"rides"}),1)[0],r=Object(n.useCallback)((function(r){return t({query:{id:r.rideId,body:r}}).then(e)}),[]),a=dn(Object(ee.h)({domain:"".concat("travel.TripEditPage",".trips"),modelName:"trips"}),1)[0],i=Object(n.useCallback)((function(t){return a({query:{id:t.tripId,body:t}}).finally(e)}),[]),o=dn(Object(ee.h)({domain:"".concat("travel.TripEditPage",".visits"),modelName:"visits"}),1)[0],l=Object(n.useCallback)((function(t){return o({query:{id:t.visitId,body:t}}).then(e)}),[]),c=dn(Object(ee.h)({domain:"".concat("travel.TripEditPage",".visits"),modelName:"visits"}),1)[0];return{handleSubmitRide:r,handleSubmitTrip:i,handleSubmitVisit:l,handleDeleteVisit:Object(n.useCallback)((function(t){return c({method:"DELETE",query:{id:t}}).then(e)}),[])}}(h.invalidate),j=P.handleSubmitRide,S=P.handleSubmitTrip,C=P.handleSubmitVisit,D=P.handleDeleteVisit,R=function(){var e=xe(Object(n.useState)({name:null}),2),t=e[0],r=e[1];return{showDialog:function(e,t){r({dialogName:e,dialogParams:t})},hideDialog:function(){r({name:null})},dialogsState:t}}(),_=R.showDialog,w=R.hideDialog,A=R.dialogsState,N=g.isError,L=g.isReady,V=g.isPending;return y&&(!L||T)||v?O&&E===r?N?a.a.createElement("div",null,"...Error"):V?a.a.createElement("div",null,"...Loading"):T?a.a.createElement(a.a.Fragment,null,a.a.createElement(c.c,{initialValues:{trip:T},onSubmit:function(e){return S(e.trip).then((function(e){if(!y&&e){var t=f.toUrl({userAlias:r,strTripId:String(e)});m.push(t)}}))}},(function(e){return a.a.createElement(Xt,{isCreation:v,showDialog:_,formikProps:e,provision:g})})),a.a.createElement(pn,{provision:g,dialogsState:A,hideDialog:w,handleSubmitRide:j,handleSubmitVisit:C,handleDeleteVisit:D,trip:T})):a.a.createElement("div",null,"...Error, no trip is provided"):a.a.createElement("div",null,"У вас не достаочно прав для просмотра данной страницы"):a.a.createElement("div",null,"Запрашиваемая вами страница не найдена")}mn.propTypes={match:o.a.shape({params:o.a.shape({userAlias:o.a.string.isRequired}).isRequired}).isRequired};t.default=mn},837:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));r(23),r(35),r(14),r(50),r(37),r(44),r(45),r(46),r(51),r(49),r(89),r(26),r(12),r(27),r(22),r(28),r(353),r(64),r(79),r(71),r(72),r(73),r(41),r(20),r(17),r(356),r(357),r(358),r(360),r(359),r(361),r(362),r(363),r(364),r(365),r(366),r(367),r(368),r(369),r(370),r(371),r(372),r(18),r(872),r(873),r(874),r(875);var n=r(0),a=r(116),i=r(863),o=r.n(i),l=r(855),c=r.n(l),u=r(136),s=r(48),p=(r(378),r(379),r(380),r(375),r(376),r(377),r(868),r(869),r(870),r(934)),d=r.n(p);var f=r(876),m=r(845),v=r(864),b=["user"];function O(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e){var t=e.userAlias,r=e.tripsIds,n=function(e){var t=e.userAlias,r=e.tripsIds,n=Object(a.c)((function(e){return{tripsDict:Object(u.c)(e,"trips")||{}}})).tripsDict,i=!r,o=!i&&r.filter((function(e){return!n[e]})),l=o?o.join(","):"*",c=i?{}:{id:{comparator:"in",value:o}};return Object(u.g)({domain:"travel.trips-".concat(t,"-").concat(l),isProvision:!0,modelName:"trips",observe:t,condition:i||o.length>0,query:{userAlias:t,navigation:{isDisabled:!0},filter:y({user_alias:{comparator:"=",value:t}},c)}})}({userAlias:t,tripsIds:r}),i=Object(f.a)({domain:"travel.trips-".concat(t,".user"),userAlias:t}),o=i.user,l=(o=void 0===o?{}:o).locationsRating,c=void 0===l?{}:l,p=O(i,b),E=(r?{data:r}:Object(s.o)(n)||{}).data,g=void 0===E?[]:E,I=Object(a.c)((function(e){return{tripsDict:Object(u.c)(e,"trips")||{},visitsDict:Object(u.c)(e,"visits")||{},ridesDict:Object(u.c)(e,"rides")||{},countriesDict:Object(u.c)(e,"countries")||{},locationsDict:Object(u.c)(e,"locations")||{}}})),P=I.tripsDict,j=I.visitsDict,S=I.ridesDict,C=I.countriesDict,D=I.locationsDict,R=T(g,P,"visits"),_=T(g,P,"rides"),w=T(R,j,"countryId"),A=T(R,j,"locationId"),N=Object(m.a)(),L=Object(v.a)({domain:"travel.locations-".concat(t),locationsIds:A}),V=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{updatesCounter:d()(t.map(s.p)),isReady:t.every(s.i),isPending:t.some(s.h),isValid:t.every(s.k),error:t.find(s.g),errors:t.map(s.f).filter(Boolean),invalidate:function(){return t.forEach((function(e){return(0,e.invalidate)()}))}}}(n,p,N,L);return{userProvision:p,tripsProvision:n,countriesProvision:N,locationsProvision:L,isError:V.isError,isValid:V.isValid,isReady:V.isReady,isPending:V.isPending,tripsIds:g,tripsDict:P,visitsIds:R,visitsDict:j,ridesIds:_,ridesDict:S,ridesStats:h(_,S),locationsIds:A,locationsDict:D,locationsRating:c,countriesIds:w,countriesDict:C}}function h(e,t){return{earliestDeparture:new Date(c()(e.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.departureDateTime.getTime()})))),latestArrival:new Date(o()(e.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.arrivalDateTime.getTime()}))))}}function T(e,t,r){return Object(n.useMemo)((function(){return Array.from(new Set(e.flatMap((function(e){var n;return(null===(n=t[e])||void 0===n?void 0:n[r])||[]}))))}),[e,t,r])}},841:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));r(35),r(89),r(14),r(105);var n=r(0),a=r.n(n),i=r(122),o=r(826),l=r(219),c=["optional","children"];function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function p(e){var t=e.optional,r=e.children,n=s(e,c);return Boolean(!t||n.href||n.to||n.onClick)?a.a.createElement(o.a,u({},n,{component:i.b}),r):a.a.createElement(l.a,n,r)}p.defaultProps={optional:!1}},842:function(e,t,r){"use strict";r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return v})),r.d(t,"a",(function(){return b}));r(64);var n=r(226),a=r(893),i=r(894),o=r(847),l=r(852),c="d MMMM yyyy",u="LLLL yyyy",s="LLLL",p="d MMMM",d="d";function f(e,t,r){var f=r?u:c,m=Object(l.a)(t,f,{locale:o.a});if(Object(n.a)(e,t))return m;var v="";if(Object(a.a)(e,t))r||(v=Object(l.a)(e,d,{locale:o.a}));else if(Object(i.a)(e,t)){var b=r?s:p;v=Object(l.a)(e,b,{locale:o.a})}else v=Object(l.a)(e,f,{locale:o.a});return"".concat(v,"—").concat(m)}function m(e,t){return f(e.departureDateTime,e.arrivalDateTime,t)}function v(e,t){var r=e.departureDateTime;return f(e.arrivalDateTime,r,t)}function b(e){var t=e.periodStart,r=e.periodEnd,n=e.isObscure,a=e.placeholder;if(!r){var i=n?u:c,s=Object(l.a)(t,i,{locale:o.a});return"".concat(s,"—").concat(a)}return f(t,r,n)}},845:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(136);function a(){return Object(n.g)({domain:"travel.countries",isProvision:!0,modelName:"countries",query:{navigation:{isDisabled:!0}}})}},852:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r(64);var n=r(87),a=r(853);function i(e){if(!Object(a.a)(e))return"?";for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n.a.apply(void 0,[e].concat(r))}},853:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r(79),r(882),r(284);function n(e){return e instanceof Date&&!Number.isNaN(e.getTime())}},864:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return p}));r(26),r(12),r(27),r(22),r(28),r(43),r(14),r(29),r(30),r(17),r(20),r(18),r(40),r(42),r(41),r(24),r(36),r(23),r(35),r(50),r(37),r(44),r(45),r(46),r(51),r(49);var n=r(116),a=r(136);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){var t=e.domain,r=e.locationsIds,i=Object(n.c)((function(e){return Object(a.c)(e,"locations")||{}})),o=r.filter((function(e){return!i[e]}));return Object(a.g)({domain:t,isProvision:!0,modelName:"locations",observe:r,condition:Boolean(o.length),query:{filter:{id:{comparator:"in",value:o}},navigation:{isDisabled:!0}}})}function p(e){var t=e.domain,r=c(Object(a.h)({domain:t,modelName:"locations",method:"POST"}),2),n=r[0];return o(o({},r[1]),{},{submitLocationRating:n})}},865:function(e,t,r){"use strict";r.d(t,"b",(function(){return n.a})),r.d(t,"c",(function(){return p})),r.d(t,"a",(function(){return d}));var n=r(837),a=(r(845),r(64),r(23),r(35),r(14),r(26),r(12),r(27),r(22),r(28),r(50),r(37),r(44),r(45),r(46),r(51),r(49),r(43),r(29),r(30),r(17),r(20),r(18),r(40),r(42),r(41),r(24),r(36),r(116)),i=r(136);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=e.userAlias,r=e.visitId,n=Object(a.c)((function(e){return{visitsDict:Object(i.c)(e,"visits")||{}}})).visitsDict[r];return u({visit:n},Object(i.g)({domain:"travel.visit".concat(r,"-").concat(t),isProvision:!0,modelName:"visits",observe:r,condition:!n,query:{userAlias:t,filter:{visit_id:{comparator:"=",value:r}},navigation:{isDisabled:!0}}}))}function d(e){var t=e.domain,r=o(Object(i.h)({domain:t,modelName:"visits",method:"POST",contentType:"multipart/form-data"}),2),n=r[0];return u(u({},r[1]),{},{submitVisitPhoto:n})}},876:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r(23),r(35),r(14),r(26),r(12),r(27),r(22),r(28),r(50),r(37),r(44),r(45),r(46),r(51),r(49);var n=r(116),a=r(136);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=e.domain,r=e.userAlias,i=Object(n.c)((function(e){return Object(a.e)(e,"users",r)}));return o(o({},Object(a.g)({domain:t,applicableSchemaName:"item",isProvision:!0,modelName:"users",observe:r,condition:Boolean(r),query:{id:r}})),{},{user:i})}},910:function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));var n=r(0),a=r.n(n),i=r(1014),o=r.n(i),l=r(1013),c=r.n(l),u=r(1011),s=r.n(u),p=r(1008),d=r.n(p),f=r(1022),m=r.n(f),v=r(1010),b=r.n(v),O=r(1016),E=r.n(O),y=r(1017),g=r.n(y),I=r(1009),h=r.n(I),T=r(938),P=r.n(T),j=r(1012),S=r.n(j),C=r(1015),D=r.n(C),R=r(1018),_=r.n(R),w=r(1019),A=r.n(w),N=r(1020),L=r.n(N),V=r(1021),x=r.n(V),k=r(1023),Y=r.n(k),H=r(128);function F(e){var t=e.ride.vehicleType,r=e.className,n=function(e){switch(e){case H.VEHICLE_TYPES.CAR:return d.a;case H.VEHICLE_TYPES.TRAIN:return h.a;case H.VEHICLE_TYPES.AIRCRAFT:return b.a;case H.VEHICLE_TYPES.BUS:case H.VEHICLE_TYPES.TROLLEY:case H.VEHICLE_TYPES.CITY_BUS:return s.a;case H.VEHICLE_TYPES.MOTORHOME:case H.VEHICLE_TYPES.JITNEY:return S.a;case H.VEHICLE_TYPES.LOCAL_TRAIN:return h.a;case H.VEHICLE_TYPES.FERRY:return c.a;case H.VEHICLE_TYPES.BIKE:return o.a;case H.VEHICLE_TYPES.BY_FEET:return D.a;case H.VEHICLE_TYPES.MOTORBIKE:return E.a;case H.VEHICLE_TYPES.TRUCK:return P.a;case H.VEHICLE_TYPES.ALL_TERRAIN_VEHICLE:return g.a;case H.VEHICLE_TYPES.TRAM:return _.a;case H.VEHICLE_TYPES.TAXI:return A.a;case H.VEHICLE_TYPES.SUBWAY:return L.a;case H.VEHICLE_TYPES.PUBLIC_TRANSPORT:return x.a;case H.VEHICLE_TYPES.ROPEWAY:case H.VEHICLE_TYPES.FUNICULAR:return m.a;default:return Y.a}}(t);return a.a.createElement(n,{className:r})}},937:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(0),a=r.n(n),i=r(815),o=r(1024),l=r.n(o),c=r(842),u=r(128),s=r(910),p=Object(i.a)({icon:{color:"gray",fontSize:16,height:16},absoluteIcon:{color:"gray",fontSize:16,height:16,position:"absolute"},detail:{color:"gray",fontSize:12}});function d(e){var t=e.ride,r=e.ride,n=(r=void 0===r?{}:r).rideType,i=e.className,o=e.isLong,d=p();return t?a.a.createElement("div",{className:i},a.a.createElement(s.a,{ride:t,className:d.icon}),n===u.RIDE_TYPES.HITCH_HIKING&&a.a.createElement(l.a,{className:d.absoluteIcon}),o&&Object(c.b)(t)):null}},946:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));r(866),r(71),r(72),r(73),r(35),r(26),r(12),r(27),r(22),r(28),r(64),r(284);var n=r(1005),a=r(1006),i=r(935),o=r.n(i),l=(r(353),r(40),r(936)),c=r.n(l),u=function(e,t){var r=t.maxLength,n=t.separator,a=void 0===n?", ":n,i=c()(e),o=i.slice(0,r).join(a);return i.length>r?"".concat(o,"..."):o},s=r(293),p=r(842);function d(e,t,r,i){var l,c=e||{},d=c.visits,f=c.originLocationId,m=c.tripName,v=c.hasAutogeneratedTripName,b=null===(l=i[f])||void 0===l?void 0:l.countryId;if(!v)return m||"Без названия";if(!d.length)return"Без названия";var O=Object(p.c)({arrivalDateTime:Object(n.a)(d.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.arrivalDateTime}))),departureDateTime:Object(a.a)(d.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.departureDateTime})))}),E=Object.keys(o()(d.filter((function(e){var r;return(null===(r=t[e])||void 0===r?void 0:r.visitType)!==s.VISIT_TYPES.TRANSIT})),"countryId"));if(1===E.length){var y=u(d.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.locationName})),{maxLength:4});return"".concat(y||"Без названия",", ").concat(O)}var g=u(E.map((function(e){return Number(e)!==b&&r[e]&&r[e].countryName})).filter(Boolean),{maxLength:4});return"".concat(g||"Без названия",", ").concat(O)}}}]);
//# sourceMappingURL=travel-TripEditPage-0f9150ab03e8926d0612.js.map