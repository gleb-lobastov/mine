(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1100:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(2),o=r.n(i),c=r(21),l=r(839),s=r(35),u=r(132),p=r(818),d=r(313),f=r(791),m=r(1033),v=r(1089),b=r(1090),O=r(1103),E=r(1107),g=r(9),y=r(1109),h=r(1086),I=r(1088),P=r(1102),j=function(e){var t=e["data-locator"],r=e.caption,n=e.classes,i=e.hasNullOption,o=e.inputId,c=e.name,l=e.onChange,s=e.optionRender,u=e.options,p=e.value;return a.a.createElement("div",{"data-locator":t,className:n.container},a.a.createElement(y.a,{component:"label",shrink:!0,htmlFor:o},r),a.a.createElement(P.a,{name:c,value:p,displayEmpty:!0,onChange:l,input:a.a.createElement(h.a,{id:o}),className:n.selectRoot,MenuProps:{"data-locator":"options-".concat(o)}},i&&a.a.createElement(I.a,{"data-locator":"option-null",key:null,value:null},s({option:null,index:-1,options:u})),u.map((function(e,t){return a.a.createElement(I.a,{"data-locator":"option-".concat(e),key:e,value:e},s({option:e,index:t,options:u}))}))))},T=o.a.oneOfType([o.a.number,o.a.string]);j.propTypes={name:o.a.string,caption:o.a.string.isRequired,classes:o.a.objectOf(o.a.string).isRequired,hasNullOption:o.a.bool,inputId:o.a.string.isRequired,onChange:o.a.func.isRequired,optionRender:o.a.func,options:o.a.arrayOf(T),value:T},j.defaultProps={name:void 0,hasNullOption:!0,optionRender:function(e){return e.option||""},options:[],value:void 0};var S=Object(g.a)({container:{display:"block"},selectRoot:{display:"block"}})(j),C=r(1072),D=r(799),R=r(797);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function A(e){var t=e.isHighlighted,r=e.isSelected,n=e.option,i=_(e,["isHighlighted","isSelected","option"]);return a.a.createElement(I.a,w({component:"div",selected:t,style:{fontWeight:r?500:400}},i),a.a.createElement(R.a,{primary:n.label,secondary:n.details}))}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function x(e){var t=e.isOpen,r=e.options,n=e.classes,i=e.getMenuProps,o=e.getItemProps,c=e.selectedItem,l=e.highlightedIndex;return a.a.createElement("div",i(),t&&a.a.createElement(D.a,{className:n.paper,square:!0},r.map((function(e,t){return a.a.createElement(A,N({key:e.label},o({item:e}),{isHighlighted:l===t,isSelected:Boolean(c)&&c.label===e.label,option:e}))}))))}var V=r(1054),L=r.n(V);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){var t=e.classes,r=e.triggerProps,n=e.triggerInputProps;return a.a.createElement(E.a,k({InputProps:Y({classes:{root:t.inputRoot,input:t.inputInput}},n),fullWidth:!0,classes:L()(t,"inputRoot","inputInput")},r))}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var G=Object(f.a)((function(e){return{root:{},container:{},paper:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0},inputRoot:{},inputInput:{}}})),$=function(e){return(e||{}).label};function W(e){var t=e["data-locator"],r=e.classes,n=e.options,i=e.inputProps,o=e.triggerProps,c=q(e,["data-locator","classes","options","inputProps","triggerProps"]),l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},G(),{},r);return a.a.createElement("div",{"data-locator":t,className:l.root},a.a.createElement(C.a,B({itemToString:$},c),(function(e){var t=e.getInputProps,r=e.getItemProps,c=e.getMenuProps,s=e.highlightedIndex,u=e.inputValue,p=e.isOpen,d=e.selectedItem;return a.a.createElement("div",{className:l.container},a.a.createElement(M,{classes:l,inputValue:u,triggerProps:o,triggerInputProps:t(i)}),a.a.createElement(x,{isOpen:p,options:n,classes:l,getMenuProps:c,getItemProps:r,selectedItem:d,highlightedIndex:s}))})))}var K=r(71),X=r(17),J=r(149);var Q="FILTER",Z="SEARCH";function ee(e){var t,r,n,a=e.queryFormat,i=e.filterField,o=e.inputValue,c={pageSize:e.numberOfItemsToRequest};switch(a){case Z:return{navigation:c,search:o};case Q:default:return{navigation:c,filter:(t={},r=i,n={comparator:"~",value:"%".concat(o,"%")},r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t)}}}function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function oe(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ce(e){var t=e.classes,r=e.inputProps,i=e.triggerProps,o=e.sourceProps,c=e.transformSuggestionToOption,l=void 0===c?function(e){return e}:c,s=oe(e,["classes","inputProps","triggerProps","sourceProps","transformSuggestionToOption"]),u=ie(Object(n.useState)(""),2),p=u[0],d=u[1],f=function(e){var t=e.domain,r=e.modelName,n=e.inputValue,a=e.queryFormat,i=e.filterField,o=e.numberOfItemsToRequest,c=e.debounceRequestDelayMs,l=void 0===c?400:c,s=Object(J.f)({debounceRequest:l,domain:t,isProvision:!0,modelName:r,observe:n,query:ee({queryFormat:a,filterField:i,inputValue:n,numberOfItemsToRequest:o})}),u=(Object(X.o)(s)||{}).data,p=void 0===u?[]:u,d=Object(K.c)((function(e){return Object(J.c)(e,r)||{}}));return{provision:s,suggestions:p.map((function(e){return d[e]})).filter(Boolean)}}(ne({},o,{inputValue:p})).suggestions,m=Object(n.useCallback)((function(e){var t;d(null===(t=e.target)||void 0===t?void 0:t.value)})),v=Object(n.useMemo)((function(){return ne({},r,{onChange:m})}),[r,m]),b=Object(n.useMemo)((function(){return f.map(l)}),[f]);return a.a.createElement(W,te({classes:t,inputProps:v,triggerProps:i,options:b},s))}var le,se=r(164);function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pe=(ue(le={},se.TRIP_TYPES.LEISURE,"Отдых"),ue(le,se.TRIP_TYPES.BUSINESS,"Работа"),ue(le,se.TRIP_TYPES.MIXED,"Смешанный"),ue(le,se.TRIP_TYPES.RELOCATION,"Переезд"),ue(le,se.TRIP_TYPES.OTHER,"Другой"),le);var de=function(e){var t=e.option;return t?pe[t]:"Не указан"},fe=Object(f.a)({optionGroup:{display:"flex",minWidth:"400px"},suggest:{flexGrow:1}});function me(e){var t,r,n,i,o=e.provision,c=(o=void 0===o?{}:o).locationsDict,l=void 0===c?{}:c,s=e.formikProps,u=fe(),p=s.handleChange,d=s.setFieldValue,f=s.handleBlur,m=s.errors,g=s.touched,y=s.values.trip,h=void 0===y?{}:y,I=(l[h.originLocationId]||{}).locationName;return a.a.createElement(v.a,{container:!0,spacing:3,alignItems:"center"},a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(b.a,{control:a.a.createElement(O.a,{"data-locator":"TRIP_EDIT_PAGE.AUTOGENERATED_NAME_CHECKBOX",fullWidth:!0,helperText:(null===(t=g.trip)||void 0===t?void 0:t.hasAutogeneratedTripName)&&(null===(r=m.trip)||void 0===r?void 0:r.hasAutogeneratedTripName),name:"trip.hasAutogeneratedTripName",onBlur:f,onChange:p,checked:h.hasAutogeneratedTripName}),label:"Автогенерируемое название"})),a.a.createElement(v.a,{item:!0,xs:6},!h.hasAutogeneratedTripName&&a.a.createElement(E.a,{"data-locator":"TRIP_EDIT_PAGE.TRIP_NAME_INPUT",className:u.textField,fullWidth:!0,helperText:(null===(n=g.trip)||void 0===n?void 0:n.tripName)&&(null===(i=m.trip)||void 0===i?void 0:i.tripName),label:"Название поездки",margin:"normal",name:"trip.tripName",onBlur:f,onChange:p,value:h.tripName})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(ce,{"data-locator":"TRIP_EDIT_PAGE.ORIGIN_LOCATION_SUGGEST",classes:{root:u.suggest},inputProps:{placeholder:"Пункт отправления..."},initialInputValue:I,onChange:function(e){var t=e.suggestion.geonameId;return d("trip.originGeonameId",t)},onBlur:f,sourceProps:{domain:"tripEditCard.geoname",modelName:"geonames",filterField:"locationName",queryFormat:Z,resolveDetails:function(e){return[e.countryName,e.regionName].filter(Boolean).join(", ")}},transformSuggestionToOption:ve,triggerProps:{label:"Старт из"}})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"TRIP_EDIT_PAGE.TRIP_TYPE_SELECT",caption:"Тип поездки",name:"trip.tripType",inputId:"TripEditCard-TripTypeOptions",onChange:p,onBlur:f,optionRender:de,options:Object.values(se.TRIP_TYPES),hasNullOption:!0,value:h.tripType})))}function ve(e){return{label:e.locationName,detail:e.countryName,suggestion:e}}me.propTypes={},me.defaultProps={};var be=r(150),Oe=r.n(be),Ee=function(e,t){return!e||!t||e.departureRideId===t.arrivalRideId},ge=r(1065),ye=function(e){for(var t=e.target;t;){var r=t.dataset;if(r){var n=r.sortHandler;if("enabled"===n)return!1;if("disabled"===n)return!0}t=t.parentNode}return!0};function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ie(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Pe=Object(ge.SortableContainer)((function(e){var t=e.children,r=e.className;return a.a.createElement("div",{className:r},t)})),je=Object(ge.SortableElement)((function(e){return e.node}));function Te(e){var t=e.children,r=Ie(e,["children"]);return a.a.createElement(Pe,he({shouldCancelStart:ye,lockAxis:"y",lockToContainerEdges:!0},r),a.a.Children.map(t,(function(e,t){return a.a.createElement(je,{node:e,index:t})})))}var Se=r(1066),Ce=r.n(Se),De=Object(f.a)({dragHandler:{cursor:"grab"}});function Re(e){var t=e.className,r=De();return a.a.createElement(Ce.a,{className:Oe()(t,r.dragHandler),"data-sort-handler":"enabled"})}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Re.propTypes={className:o.a.string},Re.defaultProps={className:void 0};var _e="RIDE_CREATE_DIALOG",Ae="RIDE_EDIT_DIALOG",Ne="VISIT_CREATE_DIALOG",xe="VISIT_EDIT_DIALOG",Ve="VISIT_DELETE_DIALOG";var Le=Object(f.a)({container:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"12px 0",cursor:"grab",background:"#fff",padding:"12px",border:"1px solid #ccc",boxShadow:"0 2px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.2)",position:"relative","&:hover $visibleOnlyOnHover":{visibility:"visible"}},visibleOnlyOnHover:{visibility:"hidden"}});function ke(e){var t=e.showDialog,r=Le();return a.a.createElement("div",{className:r.container,"data-sort-handler":"enabled"},a.a.createElement(m.a,{"data-locator":"TRIP_EDIT_PAGE.ADD_VISIT_BUTTON","data-sort-handler":"disabled",size:"small",variant:"outlined",color:"primary",onClick:function(){return t(Ne)}},a.a.createElement("span",null,"Добавить посещение")),a.a.createElement(Re,{className:r.visibleOnlyOnHover}))}ke.propTypes={showDialog:o.a.func.isRequired},ke.defaultProps={};var He=r(801),Ye=r(1067),Fe=r.n(Ye);function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Be(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ue(e){var t=e.onClick,r=Be(e,["onClick"]);return a.a.createElement(He.a,Me({"data-locator":"ACTIONS.CREATE_BUTTON",size:"small",variant:"outlined",color:"primary",component:"button",onClick:t},r),a.a.createElement(Fe.a,null))}Ue.propTypes={},Ue.defaultProps={};var ze=r(918),qe=r.n(ze);function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function $e(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function We(e){var t=e.onClick,r=$e(e,["onClick"]);return a.a.createElement(He.a,Ge({"data-locator":"ACTIONS.EDIT_BUTTON",size:"small",variant:"outlined",color:"primary",component:"button",onClick:t},r),a.a.createElement(qe.a,null))}We.propTypes={},We.defaultProps={};var Ke=r(1068),Xe=r.n(Ke);function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qe(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ze(e){var t=e.onClick,r=Qe(e,["onClick"]);return a.a.createElement(He.a,Je({"data-locator":"ACTIONS.DELETE_BUTTON",size:"small",variant:"outlined",color:"primary",component:"button",onClick:t},r),a.a.createElement(Xe.a,null))}Ze.propTypes={},Ze.defaultProps={};var et=Object(f.a)({actions:{display:"inline-block"}});function tt(e){var t=e["data-locator"],r=e.className,n=e.isEntityExist,i=e.onEditClick,o=e.onDeleteClick,c=e.onCreateClick,l=et(),s=!n&&Boolean(c),u=n&&Boolean(i),p=n&&Boolean(o);return a.a.createElement("div",{"data-locator":t,"data-sort-handler":"disabled",className:Oe()(l.actions,r)},s&&a.a.createElement(Ue,{onClick:c}),u&&a.a.createElement(We,{onClick:i}),p&&a.a.createElement(Ze,{onClick:o}))}var rt=r(919),nt=r(237),at=Object(f.a)({container:{display:"inline-block",marginRight:"4px","&:hover $visibleOnHover":{visibility:"visible"}},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"},visibleOnHover:{visibility:"hidden"}}),it=function(e){var t=e.visit,r=e.showDialog,n=at();if(!t)return"Не указано";var i=t.locationName;return a.a.createElement("div",{className:n.container},a.a.createElement(rt.a,{visit:t,className:n.icon}),i,a.a.createElement(tt,{className:n.visibleOnHover,isEntityExist:!0,onEditClick:function(){return r(xe,t)},onDeleteClick:function(){return r(Ve,t)}}))};it.propTypes={visit:o.a.shape(nt.default)},it.defaultProps={visit:{}};var ot=it,ct=r(808),lt=r(293),st=r(837);var ut=Object(f.a)({container:{"&:hover $visibleOnHover":{visibility:"visible"}},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"},details:{marginRight:"4px"},visibleOnHover:{visibility:"hidden"}}),pt=function(e){var t,r,n,i=e.className,o=e.ride,c=e.showDialog,l=ut(),s=o||{},u=s.rideId,p=s.arrivalDateTime,d=s.departureDateTime,f=Boolean(u);return a.a.createElement("div",{className:Oe()(i,l.container)},f&&a.a.createElement(a.a.Fragment,null,a.a.createElement(st.a,{ride:o,className:l.icon}),a.a.createElement("span",{className:l.details},Object(ct.a)({departureDateTime:d,arrivalDateTime:p}))),a.a.createElement(tt,{"data-locator":"TRIP_EDIT_PAGE.RIDE_ACTIONS",className:Oe()((t={},r=l.visibleOnHover,n=f,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t)),isEntityExist:f,onCreateClick:function(){return c(_e)},onEditClick:function(){return c(Ae,o)}}))};pt.propTypes={className:o.a.string,ride:o.a.shape(lt.default)},pt.defaultProps={className:void 0,ride:{}};var dt=pt;function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){vt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bt=Object(f.a)({alwaysVisible:{},container:{margin:"12px 0",cursor:"grab",background:"#fff",padding:"12px",border:"1px solid #ccc",boxShadow:"0 2px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.2)",position:"relative","&:hover $editDialogTrigger":{visibility:"visible"},"&:hover $visibleOnlyOnHover":{visibility:"visible"}},editDialogTrigger:{marginLeft:"4px",position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-block",visibility:"hidden"},visibleOnlyOnHover:{visibility:"hidden"},ride:{},warning:{color:"red"}});function Ot(e){var t=e.style,r=e.className,n=e.prevVisit,i=e.visit,o=e.nextVisit,c=e.showDialog,l=e.isArrivalRideMatch,s=e.isDepartureRideMatch,u=(e.tripId,e.provision),p=bt(),d=u.ridesDict,f=i||{},m=f.visitId,v=f.arrivalRideId,b=f.departureRideId,O=(n||{}).visitId,E=(o||{}).visitId;return a.a.createElement("div",{className:Oe()(p.container,r),style:t,"data-sort-handler":"enabled"},a.a.createElement(dt,{showDialog:function(e,t){return c(e,mt({},t,{departureVisitId:l?O:void 0,arrivalVisitId:m}))},className:Oe()(p.ride,vt({},p.warning,!l)),ride:d[v],provision:u}),a.a.createElement(ot,{showDialog:c,classes:{editIcon:p.visibleOnlyOnHover},visit:i,provision:u}),a.a.createElement(dt,{showDialog:function(e,t){return c(e,mt({},t,{departureVisitId:m,arrivalVisitId:s?E:void 0}))},visitId:m,className:Oe()(p.ride,vt({},p.warning,!s)),ride:d[b],provision:u}))}function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Ot.propTypes={},Ot.defaultProps={};var ht=Object(f.a)({creatorsContainer:{display:"flex",justifyContent:"space-between"},isCompact:{marginTop:"-52px"},resetFlow:{transform:"translate(0, 0)"}});function It(e){var t=e.showDialog,r=e.provision,i=e.formikProps,o=i.values.trip.visits,c=r.visitsDict,s=ht(),u=yt(Object(n.useState)(o.length),2),p=u[0],d=u[1],f=yt(Object(n.useState)(!1),2),m=f[0],v=f[1],b=function(e,r){var n=yt(jt(o,p).map((function(e){return e&&c[e]||null})),2),a=n[0],i=n[1];t(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r,{orderInTrip:Pt(a,i)}))};return o.length?a.a.createElement(l.a,{name:"trip.visits",render:function(e){return a.a.createElement(Te,{className:s.resetFlow,updateBeforeSortStart:function(){return v(!0)},onSortEnd:function(t){v(!1);var r=t.oldIndex,n=t.newIndex;r===p?d(n):e.move(r,n)}},o.flatMap((function(e,n){var l=yt(jt(o,n).map((function(e){return e&&c[e]||null})),3),u=l[0],d=l[1],f=l[2],v=function(e,t,r){var n=Ee(e,t);return{isDepartureRideMatch:Ee(t,r),isArrivalRideMatch:n}}(u,d,f),O=v.isArrivalRideMatch,E=v.isDepartureRideMatch,g=n>=1&&!m&&O&&p!==n,y=a.a.createElement(Ot,{key:"v".concat(e),index:n,style:{zIndex:o.length-n},className:Oe()(gt({},s.isCompact,g)),showDialog:t,isArrivalRideMatch:O,isDepartureRideMatch:E,prevVisit:u,visit:d,nextVisit:f,formikProps:i,provision:r}),h=p===n,I=p===o.length&&p===n+1;if(!h&&!I)return y;var P=a.a.createElement("div",{style:{zIndex:o.length+1}},a.a.createElement(ke,{key:"visitCreator",showDialog:b}));return h?[P,y]:[y,P]})))}}):a.a.createElement(ke,{key:"visitCreator",showDialog:b})}function Pt(e,t){var r=(e||{}).orderInTrip,n=(t||{}).orderInTrip;return e?t?(r+n)/2+(Math.random()-.5)*(n-r)/2:r+1:n-1}function jt(e,t){return[e[t-1]||null,e[t]||null,e[t+1]||null]}It.propTypes={},It.defaultProps={};var Tt=r(169),St=r(873);function Ct(e){var t=e.isCreation,r=e.className,n=e.provision,i=e.formikProps.values.trip,o=n.visitsDict,c=n.countriesDict,l=n.locationsDict,s=t?"Создание поездки":"Редактирование поездки",u=Object(St.a)(i,o,c,l),p="".concat(s,': "').concat(u,'"');return a.a.createElement(Tt.a,{variant:"h6",className:r},p)}var Dt=Object(f.a)({container:{"&:hover $visibleOnlyOnHover":{visibility:"visible"}},visibleOnlyOnHover:{visibility:"hidden"},actionButton:{marginTop:"24px"},hint:{color:"gray",fontSize:12,paddingLeft:"8px"}}),Rt=function(e){var t=e.isCreation,r=e.showDialog,n=e.provision,i=e.formikProps,o=Dt();return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ct,{className:o.container,formikProps:i,isCreation:t,provision:n}),a.a.createElement(l.b,null,a.a.createElement(me,{formikProps:i,provision:n}),!t&&a.a.createElement(It,{classes:o,showDialog:r,formikProps:i,provision:n}),a.a.createElement(m.a,{"data-locator":"TRIP_EDIT_PAGE.SUBMIT_TRIP_BUTTON",className:o.actionButton,type:"submit",color:"primary"},t?"Создать":"Сохранить"),t&&a.a.createElement("div",{className:o.hint},"После создания поездки в нее можно будет добавить места посещения и маршрут")))};Rt.propTypes={isCreation:o.a.bool.isRequired},Rt.defaultProps={};var wt,_t,At,Nt,xt=Rt,Vt=r(316),Lt=r(315),kt=r(1091),Ht=r(1095),Yt=r(1093),Ft=r(1094),Mt=r(1092),Bt=function(e){var t=e["data-locator"],r=e.isOpen,n=e.title,i=e.description,o=e.children,c=e.primaryButtonCaption,l=e.primaryButtonHandler,s=e.secondaryButtonCaption,u=e.secondaryButtonHandler,p=e.onClose;return a.a.createElement(kt.a,{"data-locator":t,transitionDuration:500,open:r,onClose:p,"aria-labelledby":"form-dialog"},a.a.createElement(Mt.a,{id:"form-dialog-title"},n),a.a.createElement(Yt.a,null,a.a.createElement(Ft.a,null,i),o),a.a.createElement(Ht.a,null,u&&a.a.createElement(m.a,{"data-locator":"DIALOG.RESET_BUTTON",onClick:u,color:"secondary"},s),l&&a.a.createElement(m.a,{"data-locator":"DIALOG.SUBMIT_BUTTON",onClick:l,color:"primary"},c)))},Ut=function(e){var t=e["data-locator"],r=e.initialValues,n=e.isOpen,i=e.onSubmit,o=e.onReset,c=e.title,s=e.description,u=e.children;return a.a.createElement(l.c,{initialValues:r,enableReinitialize:!0,onSubmit:i},(function(e){return a.a.createElement(Bt,{"data-locator":t,description:s,onClose:o,isOpen:n,primaryButtonCaption:"Сохранить",primaryButtonHandler:e.handleSubmit,secondaryButtonCaption:"Отмена",secondaryButtonHandler:o,title:c},a.a.cloneElement(u,{formikProps:e}))}))},zt=r(1096),qt=r(1106),Gt=r(867),$t=r(89);function Wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kt=(Wt(wt={},$t.RIDE_CLASSES.ECONOMY,"Эконом"),Wt(wt,$t.RIDE_CLASSES.COMFORT,"Комфорт"),Wt(wt,$t.RIDE_CLASSES.BUSINESS,"Бизнес"),Wt(wt,$t.RIDE_CLASSES.FIRST,"Первый"),Wt(wt,$t.RIDE_CLASSES.PRIVATE,"Частный"),wt),Xt=(Wt(_t={},$t.RIDE_OCCUPATION.PASSENGER,"Пассажир"),Wt(_t,$t.RIDE_OCCUPATION.STUFF,"Персонал"),Wt(_t,$t.RIDE_OCCUPATION.DRIVER,"Водитель"),_t),Jt=(Wt(At={},$t.RIDE_TYPES.SELF_DRIVE,"Самостоятельная поездка"),Wt(At,$t.RIDE_TYPES.SCHEDULED,"Регулярный рейс"),Wt(At,$t.RIDE_TYPES.CHARTER,"Чартерный рейс"),Wt(At,$t.RIDE_TYPES.TOUR,"Тур"),Wt(At,$t.RIDE_TYPES.CARPOOL,"Попутный автомобиль"),Wt(At,$t.RIDE_TYPES.HITCH_HIKING,"Автостоп"),Wt(At,$t.RIDE_TYPES.DROP_OFF,"Подбросили до места"),At),Qt=(Wt(Nt={},$t.VEHICLE_TYPES.CAR,"Автомобиль"),Wt(Nt,$t.VEHICLE_TYPES.TRAIN,"Поезд"),Wt(Nt,$t.VEHICLE_TYPES.AIRCRAFT,"Самолет"),Wt(Nt,$t.VEHICLE_TYPES.BUS,"Автобус"),Wt(Nt,$t.VEHICLE_TYPES.MOTORHOME,"Дом на колесах"),Wt(Nt,$t.VEHICLE_TYPES.LOCAL_TRAIN,"Электричка"),Wt(Nt,$t.VEHICLE_TYPES.FERRY,"Паром"),Wt(Nt,$t.VEHICLE_TYPES.BIKE,"Велосипед"),Wt(Nt,$t.VEHICLE_TYPES.BY_FEET,"Пешком"),Wt(Nt,$t.VEHICLE_TYPES.ROPEWAY,"Канатная дорога"),Wt(Nt,$t.VEHICLE_TYPES.FUNICULAR,"Фуникулер"),Wt(Nt,$t.VEHICLE_TYPES.MOTORBIKE,"Мотоцикл"),Wt(Nt,$t.VEHICLE_TYPES.TRUCK,"Грузовик"),Wt(Nt,$t.VEHICLE_TYPES.ALL_TERRAIN_VEHICLE,"Вездеход"),Wt(Nt,$t.VEHICLE_TYPES.TRAM,"Трамвай"),Wt(Nt,$t.VEHICLE_TYPES.TROLLEY,"Троллейбус"),Wt(Nt,$t.VEHICLE_TYPES.TAXI,"Такси"),Wt(Nt,$t.VEHICLE_TYPES.CITY_BUS,"Муниципальный автобус"),Wt(Nt,$t.VEHICLE_TYPES.JITNEY,"Маршрутное такси"),Wt(Nt,$t.VEHICLE_TYPES.SUBWAY,"Метро"),Wt(Nt,$t.VEHICLE_TYPES.PUBLIC_TRANSPORT,"Общественный транспорт"),Nt),Zt=r(306),er=r(348),tr=r(290),rr=r(208),nr=function(e){var t=e.dateFrom,r=e.timeFrom;return new Date(t.getFullYear(),t.getMonth(),t.getDate(),r.getHours(),r.getMinutes(),r.getSeconds())},ar=function(e){var t=e.values,r=t.rideDeparture,n=t.rideArrival,a=e.setFieldValue,i=Object(Zt.a)(r,n),o=function(e,t){var i,o,c=(i=e,o=t,Object(rr.a)(i,o)),l=c?t:e,s=c?e:t;Object(er.a)(r,l)||function(e){a("departureDateTime",e)}(l),Object(er.a)(n,s)||function(e){a("arrivalDateTime",e)}(s)};return{isSameDateField:{value:i,onChange:function(e){Boolean(i)!==Boolean(e)&&o(r,nr({dateFrom:e?r:Object(tr.a)(r,1),timeFrom:n}))}},rideDepartureField:{value:r,onChange:function(e){var t=i?nr({timeFrom:n,dateFrom:e}):n;o(e,t)}},rideArrivalField:{value:n,onChange:function(e){var t=i?nr({timeFrom:r,dateFrom:e}):r;o(t,e)}}}};function ir(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var or=null,cr=function(e){return function(t){var r=t.option;return r===or?"Пункт отправления":a.a.createElement(Gt.a,{visit:e[r]})}},lr=function(e){var t=e.option;return t?Qt[t]:"Не указан"},sr=function(e){var t=e.option;return t?Jt[t]:"Не указан"},ur=function(e){var t=e.option;return t?Kt[t]:"Не указан"},pr=function(e){var t=e.option;return t?Xt[t]:"Не указан"},dr=Object(f.a)({option:{width:"100%"}}),fr=function(e){var t=e.tripVisitsIds,r=e.visitsDict,n=e.formikProps,i=n.values,o=i.vehicleType,c=i.rideType,l=i.rideComment,s=i.rideClass,u=i.rideOccupation,p=i.departureVisitId,d=i.departureDateTime,f=i.arrivalVisitId,m=i.arrivalDateTime,g=n.handleChange,y=n.setFieldValue,h=dr(),I=t&&t.length>0,P=ar({values:{rideDeparture:d,rideArrival:m},setFieldValue:y}),j=P.rideArrivalField,T=P.rideDepartureField,C=P.isSameDateField;return a.a.createElement(v.a,{container:!0,spacing:3,alignItems:"center"},I&&a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"RIDE_EDIT_FORM_SECTION.DEPARTURE_VISIT_SELECT",name:"departureVisitId",caption:"Отправление из",inputId:"RideEditCard-departureVisitId",optionRender:cr(r),hasNullOption:!1,options:[or].concat(ir(t)),value:p,onChange:g})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"RIDE_EDIT_FORM_SECTION.ARRIVAL_VISIT_SELECT",name:"arrivalVisitId",caption:"Прибытие в",inputId:"RideEditCard-arrivalVisitId",hasNullOption:!1,optionRender:cr(r),options:[].concat(ir(t),[or]),onChange:g,value:f}))),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"RIDE_EDIT_FORM_SECTION.VEHICLE_TYPE_SELECT",name:"vehicleType",caption:"Транспорт",inputId:"RideEditCard-VehicleTypeOptions",optionRender:lr,options:Object.values($t.VEHICLE_TYPES),onChange:g,value:o})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"RIDE_EDIT_FORM_SECTION.RIDE_TYPE_SELECT",name:"rideType",caption:"Тип поездки",inputId:"RideEditCard-RideTypeOptions",optionRender:sr,options:Object.values($t.RIDE_TYPES),onChange:g,value:c})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"RIDE_EDIT_FORM_SECTION.RIDE_CLASS_SELECT",name:"rideClass",caption:"Класс поездки",inputId:"RideEditCard-RideClassOptions",optionRender:ur,options:Object.values($t.RIDE_CLASSES),onChange:g,value:s})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"RIDE_EDIT_FORM_SECTION.RIDE_OCCUPATION_SELECT",name:"rideOccupation",caption:"Роль",inputId:"RideEditCard-RideOccupationOptions",optionRender:pr,options:Object.values($t.RIDE_OCCUPATION),onChange:g,value:u})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(zt.a,{"data-locator":"RIDE_EDIT_FORM_SECTION.DEPARTURE_DATE_PICKER",name:"departureDateTime",autoOk:!0,className:h.option,label:"Дата отправления",value:T.value,onChange:T.onChange,format:"dd/MM/yyyy"})),a.a.createElement(v.a,{item:!0,xs:6},C.value?a.a.createElement(b.a,{control:a.a.createElement(O.a,{checked:C.value,onChange:function(e){return C.onChange(e.target.checked)}}),label:"Прибытие в тот же день"}):a.a.createElement(zt.a,{"data-locator":"RIDE_EDIT_FORM_SECTION.ARRIVAL_DATE_PICKER",name:"arrivalDateTime",autoOk:!0,className:h.option,label:"Дата прибытия",value:j.value,onChange:j.onChange,format:"dd/MM/yyyy"})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(qt.a,{name:"departureDateTime",ampm:!1,autoOk:!0,className:h.option,label:"Время отправления",value:T.value,onChange:T.onChange})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(qt.a,{name:"arrivalDateTime",ampm:!1,autoOk:!0,className:h.option,label:"Время прибытия",value:j.value,onChange:j.onChange})),a.a.createElement(v.a,{item:!0,xs:12},a.a.createElement(E.a,{name:"rideComment",className:h.option,label:"Комментарий",multiline:!0,onChange:g,rows:1,rowsMax:12,value:l})))};fr.propTypes={},fr.defaultProps={};var mr=fr;function vr(){return(vr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function br(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Or(e){var t=e.isCreation,r=e.tripVisitsIds,n=e.visitsDict,i=br(e,["isCreation","tripVisitsIds","visitsDict"]);return a.a.createElement(Ut,vr({"data-locator":"TRIP_EDIT_PAGE.RIDE_DIALOG",title:t?"Создание маршрута":"Редактирование маршрута"},i),a.a.createElement(mr,{tripVisitsIds:r,visitsDict:n,formikProps:null}))}var Er,gr=r(836),yr=r(233);function hr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ir=(hr(Er={},yr.VISIT_TYPES.TRANSIT,"Транзит"),hr(Er,yr.VISIT_TYPES.REGULAR,"Посещение"),hr(Er,yr.VISIT_TYPES.BASE_CAMP,"Базовый лагерь"),hr(Er,yr.VISIT_TYPES.RELOCATION,"Переезд"),Er),Pr=function(e){return function(t){var r=t.option;return a.a.createElement(gr.a,{ride:e[r],isLong:!0})}},jr=function(e){var t=e.option;return t?Ir[t]:"Не указан"},Tr=Object(f.a)({option:{width:"100%"}});function Sr(e){var t=e.tripRidesIds,r=e.ridesDict,n=e.formikProps,i=n.values,o=i.locationName,c=i.visitType,l=i.visitComment,s=i.arrivalRideId,u=i.departureRideId,p=n.handleChange,d=n.handleBlur,f=n.setFieldValue,m=Tr(),b=t&&t.length>0;return a.a.createElement(v.a,{container:!0,spacing:3,alignItems:"center"},a.a.createElement(v.a,{item:!0,xs:12},a.a.createElement(ce,{"data-locator":"VISIT_EDIT_FORM_SECTION.LOCATION_SUGGEST",inputProps:{placeholder:"Место посещения..."},initialInputValue:o,onChange:function(e){var t=e.suggestion.geonameId;return f("geonameId",t)},onBlur:d,sourceProps:{domain:"visitEditFormSection.geoname",modelName:"geonames",filterField:"locationName",queryFormat:Z},transformSuggestionToOption:Cr,triggerProps:{label:"Место посещения"}})),b&&a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{name:"arrivalRideId",caption:"Прибытие",inputId:"RideEditCard-arrivalVisitId",hasNullOption:!1,optionRender:Pr(r),options:t,onChange:p,value:s})),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{name:"departureRideId",caption:"Отправление",inputId:"RideEditCard-departureVisitId",optionRender:Pr(r),hasNullOption:!1,options:t,value:u,onChange:p}))),a.a.createElement(v.a,{item:!0,xs:6},a.a.createElement(S,{"data-locator":"VISIT_EDIT_FORM_SECTION.VISIT_TYPE_SELECT",name:"visitType",value:c,onChange:p,caption:"Тип посещения",inputId:"VisitEditCard-VisitTypeOptions",optionRender:jr,options:Object.values(yr.VISIT_TYPES),hasNullOption:!0})),a.a.createElement(v.a,{item:!0,xs:12},a.a.createElement(E.a,{className:m.option,name:"visitComment",value:l,onChange:p,label:"Комментарий",fullWidth:!0,multiline:!0,rows:1,rowsMax:12})))}function Cr(e){return{label:e.locationName,details:[e.countryName,e.regionName].filter(Boolean).join(", "),suggestion:e}}function Dr(){return(Dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Rr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wr(e){var t=e.isCreation,r=e.tripRidesIds,n=e.ridesDict,i=Rr(e,["isCreation","tripRidesIds","ridesDict"]);return a.a.createElement(Ut,Dr({"data-locator":"TRIP_EDIT_PAGE.VISIT_DIALOG",title:t?"Создание посещения":"Редактирование посещения"},i),a.a.createElement(Sr,{tripRidesIds:r,ridesDict:n,formikProps:null}))}function _r(){return(_r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ar(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Nr(e){var t=e.visit,r=e.onSubmit,n=e.onReset,i=Ar(e,["visit","onSubmit","onReset"]);return a.a.createElement(Bt,_r({title:"Удалить посещение",description:"Вы действительно хотите удалить посещение",primaryButtonCaption:"Да",primaryButtonHandler:function(e){return r(e,t)},secondaryButtonCaption:"Нет",secondaryButtonHandler:n},i),a.a.createElement(Gt.a,{visit:t}))}function xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(r),!0).forEach((function(t){Lr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kr(e){var t=e.provision,r=e.dialogsState,i=e.hideDialog,o=e.handleSubmitRide,c=e.handleSubmitVisit,l=e.handleDeleteVisit,s=e.trip,u=t.ridesDict,p=t.visitsDict,d=s.tripId,f=s.visits,m=s.rides,v=r.dialogName,b=r.dialogParams,O=void 0===b?{}:b,E=Object(n.useMemo)((function(){var e=O.rideId;return Vr({},e?u[e]:Object(Vt.b)(),{},O,{tripId:d})}),[u,d,O]),g=Object(n.useMemo)((function(){var e=O.visitId;return Vr({},e?p[e]:Object(Lt.b)(),{},O,{tripId:d})}),[p,d,O]),y=function(e){return e===Ae||e===_e}(v),h=function(e){return e===xe||e===Ne}(v),I=v===Ve;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Or,{initialValues:E,tripVisitsIds:f,isOpen:y,onSubmit:function(e){o(e),i()},onReset:i,isCreation:v===_e,visitsDict:p}),a.a.createElement(wr,{initialValues:g,tripRidesIds:m,isOpen:h,onSubmit:function(e){c(e),i()},onReset:i,isCreation:v===Ne,ridesDict:u}),a.a.createElement(Nr,{visit:p[O.visitId],isOpen:I,onSubmit:function(e,t){var r=t.visitId;l(r),i()},onReset:i}))}Sr.propTypes={},Sr.defaultProps={};function Hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}!function(e){var t=e.orderResolver}({orderResolver:function(e){return e.orderInTrip}});function Yr(e){var t=e.match.params,r=t.userAlias,i=t.strTripId,o=t.action,f=Object(s.d)().travel.tripEdit,m=Object(c.g)(),v="create"===o,b=Object(u.c)(),O=b.isAuthenticated,E=b.userAlias,g=i&&parseInt(i,10),y=Object(p.b)({userAlias:r,tripsIds:g?[g]:[]}),h=y.tripsDict,I=y.tripsProvision,P=v?Object(d.b)():h[g],j=function(e){var t=Hr(Object(J.g)({domain:"".concat("travel.TripEditPage",".rides"),modelName:"rides"}),1)[0],r=Object(n.useCallback)((function(r){return t({query:{id:r.rideId,body:r}}).then(e)}),[]),a=Hr(Object(J.g)({domain:"".concat("travel.TripEditPage",".trips"),modelName:"trips"}),1)[0],i=Object(n.useCallback)((function(t){return a({query:{id:t.tripId,body:t}}).finally(e)}),[]),o=Hr(Object(J.g)({domain:"".concat("travel.TripEditPage",".visits"),modelName:"visits"}),1)[0],c=Object(n.useCallback)((function(t){return o({query:{id:t.visitId,body:t}}).then(e)}),[]),l=Hr(Object(J.g)({domain:"".concat("travel.TripEditPage",".visits"),modelName:"visits"}),1)[0];return{handleSubmitRide:r,handleSubmitTrip:i,handleSubmitVisit:c,handleDeleteVisit:Object(n.useCallback)((function(t){return l({method:"DELETE",query:{id:t}}).then(e)}),[])}}(I.invalidate),T=j.handleSubmitRide,S=j.handleSubmitTrip,C=j.handleSubmitVisit,D=j.handleDeleteVisit,R=function(){var e=we(Object(n.useState)({name:null}),2),t=e[0],r=e[1];return{showDialog:function(e,t){r({dialogName:e,dialogParams:t})},hideDialog:function(){r({name:null})},dialogsState:t}}(),w=R.showDialog,_=R.hideDialog,A=R.dialogsState,N=y.isError,x=y.isReady,V=y.isPending;return g&&(!x||P)||v?O&&E===r?N?a.a.createElement("div",null,"...Error"):V?a.a.createElement("div",null,"...Loading"):P?a.a.createElement(a.a.Fragment,null,a.a.createElement(l.c,{initialValues:{trip:P},onSubmit:function(e){return S(e.trip).then((function(e){if(!g&&e){var t=f.toUrl({userAlias:r,strTripId:String(e)});m.push(t)}}))}},(function(e){return a.a.createElement(xt,{isCreation:v,showDialog:w,formikProps:e,provision:y})})),a.a.createElement(kr,{provision:y,dialogsState:A,hideDialog:_,handleSubmitRide:T,handleSubmitVisit:C,handleDeleteVisit:D,trip:P})):a.a.createElement("div",null,"...Error, no trip is provided"):a.a.createElement("div",null,"У вас не достаочно прав для просмотра данной страницы"):a.a.createElement("div",null,"Запрашиваемая вами страница не найдена")}Yr.propTypes={match:o.a.shape({params:o.a.shape({userAlias:o.a.string.isRequired}).isRequired}).isRequired};t.default=Yr},1114:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return S}));var n=r(0),a=r.n(n),i=r(2),o=r.n(i),c=r(150),l=r.n(c),s=r(1069),u=r(791),p=r(132),d=r(818),f=r(867);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),n=r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),a:t}:{r:0,g:0,b:0,a:0};return"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(n.a,")")}var E=80*Math.cos(45/360*2*Math.PI);function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,r=O(e,t);return{background:"repeating-linear-gradient(\n      ".concat(45,"deg,\n      ").concat("#FFF",",\n      ").concat("#FFF"," ").concat(20,"px,\n      ").concat(r," ").concat(20,"px,\n      ").concat(r," ").concat(40,"px\n    )"),backgroundSize:"calc(100% + ".concat(E,"px)")}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=Object(u.a)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({container:{fontSize:"16px",lineHeight:"1.5"},photosContainer:{display:"flex",flexWrap:"wrap"},photoContainer:{margin:"4px 12px 12px",minWidth:"150px",maxHeight:"100px",textAlign:"center"},photo:{maxWidth:"150px",borderRadius:"4px"}},function(e){return{dropzoneContainer:{display:"flex",flexDirection:"column",justifyContent:"space-around",height:"100%",minHeight:"144px",padding:"0 12px",margin:"12px 0",cursor:"pointer"},dropzoneStandby:{"& $dropzoneContainer":v({border:"2px dashed ".concat(e.palette.primary.dark),borderRadius:"4px"},g(e.palette.primary.light,.2)),"& $dropzoneUpload":v({borderColor:e.palette.disabled.dark},g(e.palette.disabled.main,.2),{animation:"$slide 2s infinite linear forwards"})},dropzoneActive:v({border:"2px dashed ".concat(e.palette.secondary.dark),animation:"$slide 2s infinite linear forwards"},g(e.palette.secondary.light),{"&$dropzoneAccept":v({borderColor:e.palette.secondary.dark},g(e.palette.secondary.main),{animation:"$slide 2s infinite linear forwards"}),"&$dropzoneReject":v({borderColor:e.palette.error.dark},g(e.palette.error.main),{animation:"$slide 2s infinite linear forwards"})}),dropzoneAccept:{},dropzoneReject:{},dropzoneUpload:{},"@keyframes slide":{"0%":{backgroundPositionX:"-".concat(E,"px")},"100%":{backgroundPositionX:0}}}}(e))})),T="travel.VisitEditPage";function S(e){var t,r=e.match.params,i=r.userAlias,o=r.strVisitId,c=j(),u=h(Object(n.useState)(null),2),m=u[0],v=u[1],b=h(Object(n.useState)([]),2),O=b[0],E=b[1],g=null!==m,I=Object(p.c)(),S=I.isAuthenticated,C=I.userAlias,D=Object(d.c)({domain:T,userAlias:i,visitId:Number(o)}),R=D.isError,w=D.isPending,_=D.visit,A=Object(d.a)({domain:T,userAlias:i,visitId:Number(o)}).submitVisitPhoto,N=Object(n.useCallback)((function(e,t){return t&&E(t),v(1),A({id:Number(o),data:e}).finally((function(){return v(null)}))}),A),x=Object(s.a)({accept:"image/*",disabled:g,onDrop:N,maxSize:5242880,minSize:51200}),V=x.getRootProps,L=x.getInputProps,k=x.isDragActive,H=x.isDragAccept,Y=x.isDragReject;if(!(S&&C===i))return a.a.createElement("div",null,"Ошибка. Нет доступа");if(R)return a.a.createElement("div",null,"...Error");if(w)return a.a.createElement("div",null,"...Loading");if(!_)return a.a.createElement("div",null,"...Не найдено посещение");var F=_.photos;return a.a.createElement("div",y({},V(),{className:l()((t={},P(t,c.dropzoneStandby,!k),P(t,c.dropzoneActive,k),P(t,c.dropzoneAccept,H),P(t,c.dropzoneReject,Y),t))}),a.a.createElement(f.a,{visit:_,isLong:!0}),a.a.createElement("div",{className:l()(c.dropzoneContainer,P({},c.dropzoneUpload,g))},a.a.createElement("input",L()),function(e){var t=e.isDragActive;switch(!0){case e.isUploadInProgress:return"Идет загрузка, пожалуйста не закрывайте браузер";case t:return"Загрузить фотографии";default:return"Перенесите сюда фотографии для загрузки или кликните, что-бы выбрать файлы"}}({isDragActive:k,isUploadInProgress:g}),O.length>0&&a.a.createElement("div",null,"Не удалось загрузить следующие файлы:",O.map((function(e){return a.a.createElement("div",{key:e.path},(r=(t=e).file,n=t.errors.map((function(e){return e.message})).join(", "),"".concat(r.path," - ").concat(r.size," bytes, reason: ").concat(n)));var t,r,n})))),a.a.createElement("div",{className:c.photosContainer},F.map((function(e){var t=e.thumbnailUrl;return a.a.createElement("div",{key:t,className:c.photoContainer},a.a.createElement("img",{className:c.photo,src:t}))}))))}S.propTypes={match:o.a.shape({params:o.a.shape({userAlias:o.a.string.isRequired,strVisitId:o.a.string}).isRequired}).isRequired}},804:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r(0),a=r(71),i=r(824),o=r.n(i),c=r(825),l=r.n(c),s=r(834),u=r.n(s),p=r(158),d=r.n(p),f=r(149),m=r(17),v=r(812),b=r(806),O=r(813);function E(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function g(e){var t=e.userAlias,r=function(e){var t=e.userAlias,r=e.tripsIds,n=Object(a.c)((function(e){return{tripsDict:Object(f.c)(e,"trips")||{}}})).tripsDict,i=!r,o=!i&&r.filter((function(e){return!n[e]}));return Object(f.f)({domain:"travel.trips-".concat(t),isProvision:!0,modelName:"trips",observe:t,query:{userAlias:t,navigation:{isDisabled:!0},filter:i?{}:{id:{comparator:"in",value:o}}}})}({userAlias:t,tripsIds:e.tripsIds}),i=Object(v.a)({domain:"travel.trips-".concat(t,".user"),userAlias:t}),c=i.user,l=(c=void 0===c?{}:c).locationsRating,s=void 0===l?{}:l,p=E(i,["user"]),g=(Object(m.o)(r)||{}).data,h=void 0===g?[]:g,I=Object(a.c)((function(e){return{tripsDict:Object(f.c)(e,"trips")||{},visitsDict:Object(f.c)(e,"visits")||{},ridesDict:Object(f.c)(e,"rides")||{},countriesDict:Object(f.c)(e,"countries")||{},locationsDict:Object(f.c)(e,"locations")||{}}})),P=I.tripsDict,j=I.visitsDict,T=I.ridesDict,S=I.countriesDict,C=I.locationsDict,D=Object(n.useMemo)((function(){return Array.from(new Set(h.flatMap((function(e){var t;return(null===(t=P[e])||void 0===t?void 0:t.visits)||[]}))))}),[h,P]),R=Object(n.useMemo)((function(){return Array.from(new Set(h.flatMap((function(e){var t;return(null===(t=P[e])||void 0===t?void 0:t.rides)||[]}))))}),[h,P]),w=Object(n.useMemo)((function(){return Array.from(new Set(D.flatMap((function(e){var t;return(null===(t=j[e])||void 0===t?void 0:t.countryId)||[]}))))}),[D,j]),_=Object(n.useMemo)((function(){return Array.from(new Set(D.flatMap((function(e){var t;return(null===(t=j[e])||void 0===t?void 0:t.locationId)||[]}))))}),[D,j]),A=Object(b.a)(),N=Object(O.a)({domain:"travel.locations-".concat(t),locationsIds:_}),x=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{updatesCounter:u()(t.map(m.p)),isReady:t.every(m.i),isPending:t.some(m.h),isValid:t.every(m.k),error:t.find(m.g),errors:t.map(m.f).filter(Boolean),invalidate:function(){return t.forEach((function(e){return(0,e.invalidate)()}))}}}(r,p,A,N),V=x.isError,L=x.isValid,k=x.isReady,H=x.isPending,Y=function(e,t,r){var n=e.reduce((function(e,n){var a=t[n];if(!a)return e;var i=r[n],o=a.countryId;return e[o]||(e[o]=[]),e[o].push(i),e}),{});return d()(n,(function(e){return function(e){if(!e.length)return 1/0;var t=e.length/e.map((function(e){return 1/e})).reduce((function(e,t){return e+t})),r=o()(e),n=Math.log(e.length);return 1/(1/t+n/r)}(e)}))}(_,C,s);return{tripsProvision:r,countriesProvision:A,locationsProvision:N,isError:V,isValid:L,isReady:k,isPending:H,tripsIds:h,tripsDict:P,visitsIds:D,visitsDict:j,ridesIds:R,ridesDict:T,ridesStats:y(R,T),locationsIds:_,locationsDict:C,locationsRating:s,countriesIds:w,countriesDict:S,countriesRating:Y}}function y(e,t){return{earliestDeparture:new Date(l()(e.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.departureDateTime.getTime()})))),latestArrival:new Date(o()(e.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.arrivalDateTime.getTime()}))))}}},806:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(149);r(17);function a(){return Object(n.f)({domain:"travel.countries",isProvision:!0,modelName:"countries",query:{navigation:{isDisabled:!0}}})}},808:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return m}));var n=r(306),a=r(895),i=r(896),o=r(55),c=r(823),l=r.n(c),s="d MMMM yyyy",u="d MMMM",p="d";function d(e,t){var r=Object(o.a)(t,s,{locale:l.a});if(Object(n.a)(e,t))return r;var c="";return c=Object(a.a)(e,t)?Object(o.a)(e,p,{locale:l.a}):Object(i.a)(e,t)?Object(o.a)(e,u,{locale:l.a}):Object(o.a)(e,s,{locale:l.a}),"".concat(c,"—").concat(r)}function f(e){return d(e.departureDateTime,e.arrivalDateTime)}function m(e){var t=e.departureDateTime;return d(e.arrivalDateTime,t)}},812:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(71),a=r(149);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=e.domain,r=e.userAlias,c=Object(n.c)((function(e){return Object(a.e)(e,"users",r)}));return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(a.f)({domain:t,applicableSchemaName:"item",isProvision:!0,modelName:"users",observe:r,condition:Boolean(r),query:{id:r}}),{user:c})}},813:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return s}));var n=r(71),a=r(149);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){var t=e.domain,r=e.locationsIds,i=Object(n.c)((function(e){return Object(a.c)(e,"locations")||{}})),o=r.filter((function(e){return!i[e]}));return Object(a.f)({domain:t,isProvision:!0,modelName:"locations",observe:r,condition:Boolean(o.length),query:{filter:{id:{comparator:"in",value:o}},navigation:{isDisabled:!0}}})}function s(e){var t=e.domain,r=c(Object(a.g)({domain:t,modelName:"locations",method:"POST"}),2),n=r[0];return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r[1],{submitLocationRating:n})}},818:function(e,t,r){"use strict";r.d(t,"b",(function(){return n.a})),r.d(t,"c",(function(){return u})),r.d(t,"a",(function(){return p}));var n=r(804),a=(r(806),r(71)),i=r(149);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=e.userAlias,r=e.visitId,n=Object(a.c)((function(e){return{visitsDict:Object(i.c)(e,"visits")||{}}})).visitsDict[r];return l({visit:n},Object(i.f)({domain:"travel.visit".concat(r,"-").concat(t),isProvision:!0,modelName:"visits",observe:r,condition:!n,query:{userAlias:t,filter:{visit_id:{comparator:"=",value:r}},navigation:{isDisabled:!0}}}))}function p(e){var t=e.domain,r=o(Object(i.g)({domain:t,modelName:"visits",method:"POST",contentType:"multipart/form-data"}),2),n=r[0];return l({},r[1],{submitVisitPhoto:n})}},836:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(0),a=r.n(n),i=r(791),o=r(913),c=r.n(o),l=r(808),s=r(89),u=r(837),p=Object(i.a)({icon:{color:"gray",fontSize:16,height:16},absoluteIcon:{color:"gray",fontSize:16,height:16,position:"absolute"},detail:{color:"gray",fontSize:12}});function d(e){var t=e.ride,r=e.ride,n=(r=void 0===r?{}:r).rideType,i=e.className,o=e.isLong,d=p();return t?a.a.createElement("div",{className:i},a.a.createElement(u.a,{ride:t,className:d.icon}),n===s.RIDE_TYPES.HITCH_HIKING&&a.a.createElement(c.a,{className:d.absoluteIcon}),o&&Object(l.a)(t)):null}},837:function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));var n=r(0),a=r.n(n),i=r(903),o=r.n(i),c=r(902),l=r.n(c),s=r(900),u=r.n(s),p=r(897),d=r.n(p),f=r(911),m=r.n(f),v=r(899),b=r.n(v),O=r(905),E=r.n(O),g=r(906),y=r.n(g),h=r(898),I=r.n(h),P=r(866),j=r.n(P),T=r(901),S=r.n(T),C=r(904),D=r.n(C),R=r(907),w=r.n(R),_=r(908),A=r.n(_),N=r(909),x=r.n(N),V=r(910),L=r.n(V),k=r(912),H=r.n(k),Y=r(89);function F(e){var t=e.ride.vehicleType,r=e.className,n=function(e){switch(e){case Y.VEHICLE_TYPES.CAR:return d.a;case Y.VEHICLE_TYPES.TRAIN:return I.a;case Y.VEHICLE_TYPES.AIRCRAFT:return b.a;case Y.VEHICLE_TYPES.BUS:case Y.VEHICLE_TYPES.TROLLEY:case Y.VEHICLE_TYPES.CITY_BUS:return u.a;case Y.VEHICLE_TYPES.MOTORHOME:case Y.VEHICLE_TYPES.JITNEY:return S.a;case Y.VEHICLE_TYPES.LOCAL_TRAIN:return I.a;case Y.VEHICLE_TYPES.FERRY:return l.a;case Y.VEHICLE_TYPES.BIKE:return o.a;case Y.VEHICLE_TYPES.BY_FEET:return D.a;case Y.VEHICLE_TYPES.MOTORBIKE:return E.a;case Y.VEHICLE_TYPES.TRUCK:return j.a;case Y.VEHICLE_TYPES.ALL_TERRAIN_VEHICLE:return y.a;case Y.VEHICLE_TYPES.TRAM:return w.a;case Y.VEHICLE_TYPES.TAXI:return A.a;case Y.VEHICLE_TYPES.SUBWAY:return x.a;case Y.VEHICLE_TYPES.PUBLIC_TRANSPORT:return L.a;case Y.VEHICLE_TYPES.ROPEWAY:case Y.VEHICLE_TYPES.FUNICULAR:return m.a;default:return H.a}}(t);return a.a.createElement(n,{className:r})}},867:function(e,t,r){"use strict";var n=r(0),a=r.n(n),i=r(2),o=r.n(i),c=r(791),l=r(919),s=r(237),u=r(808),p=Object(c.a)({container:{display:"inline-block",marginRight:"4px"},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"},period:{display:"inline",color:"gray",fontSize:12}}),d=function(e){var t=e.visit,r=e.isLong,n=p();if(!t)return"Не указано";var i=t.locationName;return a.a.createElement("div",{className:n.container},a.a.createElement(l.a,{visit:t,className:n.icon}),"".concat(i).concat(r?", ":""),a.a.createElement("div",{className:n.period},r&&Object(u.b)(t)))};d.propTypes={visit:o.a.shape(s.default)},d.defaultProps={visit:{}},t.a=d},873:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(916),a=r(917),i=r(914),o=r.n(i),c=r(915),l=r.n(c),s=function(e,t){var r=t.maxLength,n=t.separator,a=void 0===n?", ":n,i=l()(e),o=i.slice(0,r).join(a);return i.length>r?"".concat(o,"..."):o},u=r(233),p=r(808);function d(e,t,r,i){var c,l=e||{},d=l.visits,f=l.originLocationId,m=l.tripName,v=l.hasAutogeneratedTripName,b=null===(c=i[f])||void 0===c?void 0:c.countryId;if(!v)return m||"Без названия";if(!d.length)return"Без названия";var O=Object(p.b)({arrivalDateTime:Object(n.a)(d.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.arrivalDateTime}))),departureDateTime:Object(a.a)(d.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.departureDateTime})))}),E=Object.keys(o()(d.filter((function(e){var r;return(null===(r=t[e])||void 0===r?void 0:r.visitType)!==u.VISIT_TYPES.TRANSIT})),"countryId"));if(1===E.length){var g=s(d.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.locationName})),{maxLength:4});return"".concat(g||"Без названия",", ").concat(O)}var y=s(E.map((function(e){return Number(e)!==b&&r[e]&&r[e].countryName})).filter(Boolean),{maxLength:4});return"".concat(y||"Без названия",", ").concat(O)}},919:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r(0),a=r.n(n),i=r(1051),o=r.n(i),c=r(1049),l=r.n(c),s=r(866),u=r.n(s),p=r(1050),d=r.n(p),f=r(233);function m(e){var t=e.visit.visitType,r=e.className,n=function(e){switch(e){case f.VISIT_TYPES.TRANSIT:return l.a;case f.VISIT_TYPES.BASE_CAMP:return d.a;case f.VISIT_TYPES.RELOCATION:return u.a;case f.VISIT_TYPES.REGULAR:default:return o.a}}(t);return a.a.createElement(n,{className:r})}}}]);
//# sourceMappingURL=travel-TripEditPage-7d034f17d5d0c0ce1d1b.js.map