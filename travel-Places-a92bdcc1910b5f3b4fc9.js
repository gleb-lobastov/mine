(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1025:function(e,t,n){"use strict";var r=n(7),i=n(223),a=n(109),o=n(65),l=n(31),c=n(534),u=n(38),s=l("toStringTag"),f=function(){i(this,c)};f.prototype=c,o(c,s)||a(c,s,"AsyncIterator"),!u&&o(c,"constructor")&&c.constructor!==Object||a(c,"constructor",f),r({global:!0,forced:u},{AsyncIterator:f})},1026:function(e,t,n){"use strict";var r=n(7),i=n(288).toArray;r({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return i(this,void 0,[])}})},1027:function(e,t,n){"use strict";var r=n(7),i=n(52),a=n(13),o=[].push;r({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return i(a(this),o,{that:e,IS_ITERATOR:!0}),e}})},1028:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}}},1029:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));const r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],i=e=>{let t=0;for(let n=0;n<e.length;n++){const i=e[n];t=83*t+r.indexOf(i)}return t},a=(e,t)=>{var n="";for(let i=1;i<=t;i++){let a=Math.floor(e)/Math.pow(83,t-i)%83;n+=r[Math.floor(a)]}return n}},1030:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));const r=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},i=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.round(12.92*t*255+.5):Math.round(255*(1.055*Math.pow(t,1/2.4)-.055)+.5)},a=(e,t)=>(e<0?-1:1)*Math.pow(Math.abs(e),t)},1031:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchScrollable=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=n(911),l=n(912);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.TouchScrollable=function(e){function t(){var e,n,r;c(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.getScrollableArea=function(e){r.scrollableArea=e},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){o.canUseEventListeners&&(this.scrollableArea.addEventListener("touchstart",l.preventInertiaScroll,l.listenerOptions),this.scrollableArea.addEventListener("touchmove",l.allowTouchMove,l.listenerOptions))}},{key:"componentWillUnmount",value:function(){o.canUseEventListeners&&(this.scrollableArea.removeEventListener("touchstart",l.preventInertiaScroll,l.listenerOptions),this.scrollableArea.removeEventListener("touchmove",l.allowTouchMove,l.listenerOptions))}},{key:"render",value:function(){var e=this.props,t=e.children,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children"]);return"function"==typeof t?t(this.getScrollableArea):(0,a.cloneElement)(t,r({ref:this.getScrollableArea},n))}}]),t}(a.PureComponent)},1181:function(e,t,n){"use strict";var r=n(7),i=n(1182);r({target:"String",proto:!0,forced:n(1183)("link")},{link:function(e){return i(this,"a","href",e)}})},1182:function(e,t,n){var r=n(16),i=n(108),a=n(77),o=/"/g,l=r("".replace);e.exports=function(e,t,n,r){var c=a(i(e)),u="<"+t;return""!==n&&(u+=" "+n+'="'+l(a(r),o,"&quot;")+'"'),u+">"+c+"</"+t+">"}},1183:function(e,t,n){var r=n(21);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},1184:function(e,t,n){var r=n(1185),i=n(396);e.exports=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=i(n))==n?n:0),void 0!==t&&(t=(t=i(t))==t?t:0),r(i(e),t,n)}},1185:function(e,t){e.exports=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}},1191:function(e,t,n){var r=n(139),i=n(1004);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},1192:function(e,t,n){"use strict";var r=n(102),i=n(103);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(0)),o=(0,r(n(104)).default)(a.createElement("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Event");t.default=o},1193:function(e,t,n){var r=n(909),i=n(139),a=n(995);e.exports=function(e,t){return e&&e.length?r(e,i(t,2),a):void 0}},1194:function(e,t,n){var r=n(909),i=n(994),a=n(139);e.exports=function(e,t){return e&&e.length?r(e,a(t,2),i):void 0}},1195:function(e,t,n){"use strict";var r=n(102),i=n(103);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(0)),o=(0,r(n(104)).default)(a.createElement("path",{d:"M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"}),"Flag");t.default=o},1196:function(e,t,n){"use strict";var r=n(102),i=n(103);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(0)),o=(0,r(n(104)).default)(a.createElement("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}),"Place");t.default=o},1197:function(e,t,n){"use strict";var r=n(102),i=n(103);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(0)),o=(0,r(n(104)).default)(a.createElement("path",{d:"M16.24 7.76C15.07 6.59 13.54 6 12 6v6l-4.24 4.24c2.34 2.34 6.14 2.34 8.49 0 2.34-2.34 2.34-6.14-.01-8.48zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"Timelapse");t.default=o},1198:function(e,t,n){"use strict";var r=n(102),i=n(103);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(0)),o=(0,r(n(104)).default)(a.createElement("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zM8.5 15H7.3l-2.55-3.5V15H3.5V9h1.25l2.5 3.5V9H8.5v6zm5-4.74H11v1.12h2.5v1.26H11v1.11h2.5V15h-4V9h4v1.26zm7 3.74c0 .55-.45 1-1 1h-4c-.55 0-1-.45-1-1V9h1.25v4.51h1.13V9.99h1.25v3.51h1.12V9h1.25v5z"}),"FiberNew");t.default=o},1199:function(e,t,n){var r=n(562),i=n(57);e.exports=function(e,t,n,a){return null==e?[]:(i(t)||(t=null==t?[]:[t]),i(n=a?void 0:n)||(n=null==n?[]:[n]),r(e,t,n))}},1200:function(e,t,n){(function(t){var r;e.exports=(r=n(0),(()=>{var e={703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},590:e=>{var t="undefined"!=typeof Element,n="function"==typeof Map,r="function"==typeof Set,i="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var l,c,u,s;if(Array.isArray(e)){if((l=e.length)!=o.length)return!1;for(c=l;0!=c--;)if(!a(e[c],o[c]))return!1;return!0}if(n&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(s=e.entries();!(c=s.next()).done;)if(!o.has(c.value[0]))return!1;for(s=e.entries();!(c=s.next()).done;)if(!a(c.value[1],o.get(c.value[0])))return!1;return!0}if(r&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(s=e.entries();!(c=s.next()).done;)if(!o.has(c.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((l=e.length)!=o.length)return!1;for(c=l;0!=c--;)if(e[c]!==o[c])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((l=(u=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(c=l;0!=c--;)if(!Object.prototype.hasOwnProperty.call(o,u[c]))return!1;if(t&&e instanceof Element)return!1;for(c=l;0!=c--;)if(("_owner"!==u[c]&&"__v"!==u[c]&&"__o"!==u[c]||!e.$$typeof)&&!a(e[u[c]],o[u[c]]))return!1;return!0}return e!=e&&o!=o}e.exports=function(e,t){try{return a(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},37:function(e,t,n){!function(e,t){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var r="Left",i="Right",a="Down",o={delta:10,preventDefaultTouchmoveEvent:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0},l={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},c="mousemove",u="mouseup";function s(e,t){if(0===t)return e;var n=Math.PI/180*t;return[e[0]*Math.cos(n)+e[1]*Math.sin(n),e[1]*Math.cos(n)-e[0]*Math.sin(n)]}function f(e,t){var o=function(t){t&&"touches"in t&&t.touches.length>1||e((function(e,r){r.trackMouse&&(document.addEventListener(c,f),document.addEventListener(u,p));var i="touches"in t?t.touches[0]:t,a=s([i.clientX,i.clientY],r.rotationAngle);return n({},e,l,{initial:[].concat(a),xy:a,start:t.timeStamp||0})}))},f=function(t){e((function(e,o){if("touches"in t&&t.touches.length>1)return e;var l="touches"in t?t.touches[0]:t,c=s([l.clientX,l.clientY],o.rotationAngle),u=c[0],f=c[1],d=u-e.xy[0],p=f-e.xy[1],v=Math.abs(d),h=Math.abs(p),m=(t.timeStamp||0)-e.start,b=Math.sqrt(v*v+h*h)/(m||1),y=[d/(m||1),p/(m||1)];if(v<o.delta&&h<o.delta&&!e.swiping)return e;var g=function(e,t,n,o){return e>t?n>0?i:r:o>0?a:"Up"}(v,h,d,p),O={absX:v,absY:h,deltaX:d,deltaY:p,dir:g,event:t,first:e.first,initial:e.initial,velocity:b,vxvy:y};o.onSwiping&&o.onSwiping(O);var E=!1;return(o.onSwiping||o.onSwiped||"onSwiped"+g in o)&&(E=!0),E&&o.preventDefaultTouchmoveEvent&&o.trackTouch&&t.cancelable&&t.preventDefault(),n({},e,{first:!1,eventData:O,swiping:!0})}))},d=function(t){e((function(e,r){var i;if(e.swiping&&e.eventData){i=n({},e.eventData,{event:t}),r.onSwiped&&r.onSwiped(i);var a="onSwiped"+i.dir;a in r&&r[a](i)}else r.onTap&&r.onTap({event:t});return n({},e,l,{eventData:i})}))},p=function(e){document.removeEventListener(c,f),document.removeEventListener(u,p),d(e)},v=function(e,t){var n=function(){};if(e&&e.addEventListener){var r=[["touchstart",o],["touchmove",f],["touchend",d]];r.forEach((function(n){var r=n[0],i=n[1];return e.addEventListener(r,i,{passive:t})})),n=function(){return r.forEach((function(t){var n=t[0],r=t[1];return e.removeEventListener(n,r)}))}}return n},h={ref:function(t){null!==t&&e((function(e,r){if(e.el===t)return e;var i={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),i.cleanUpTouch=void 0),r.trackTouch&&t&&(i.cleanUpTouch=v(t,!r.preventDefaultTouchmoveEvent)),n({},e,{el:t},i)}))}};return t.trackMouse&&(h.onMouseDown=o),[h,v]}e.DOWN=a,e.LEFT=r,e.RIGHT=i,e.UP="Up",e.useSwipeable=function(e){var r=e.trackMouse,i=t.useRef(n({},l)),a=t.useRef(n({},o));a.current=n({},o,e);var c=t.useMemo((function(){return f((function(e){return i.current=e(i.current,a.current)}),{trackMouse:r})}),[r]),u=c[0],s=c[1];return i.current=function(e,t,r){var i={};return!t.trackTouch&&e.cleanUpTouch?(e.cleanUpTouch(),i.cleanUpTouch=void 0):t.trackTouch&&!e.cleanUpTouch&&e.el&&(i.cleanUpTouch=r(e.el,!t.preventDefaultTouchmoveEvent)),n({},e,i)}(i.current,a.current,s),u}}(t,n(888))},888:e=>{"use strict";e.exports=r}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var a=n[t]={exports:{}};return e[t].call(a.exports,a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{"use strict";function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r);else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function n(){for(var t,n,r=0,i="";r<arguments.length;)(t=arguments[r++])&&(n=e(t))&&(i&&(i+=" "),i+=n);return i}i.r(a),i.d(a,{default:()=>_e});var r=i(888),o=i.n(r);const l=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},c="object"==typeof t&&t&&t.Object===Object&&t;var u="object"==typeof self&&self&&self.Object===Object&&self;const s=c||u||Function("return this")(),f=function(){return s.Date.now()};var d=/\s/,p=/^\s+/;const v=s.Symbol;var h=Object.prototype,m=h.hasOwnProperty,b=h.toString,y=v?v.toStringTag:void 0,g=Object.prototype.toString,O=v?v.toStringTag:void 0,E=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,S=/^0o[0-7]+$/i,T=parseInt;const I=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":O&&O in Object(e)?function(e){var t=m.call(e,y),n=e[y];try{e[y]=void 0;var r=!0}catch(e){}var i=b.call(e);return r&&(t?e[y]=n:delete e[y]),i}(e):function(e){return g.call(e)}(e)}(e)}(e))return NaN;if(l(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=l(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&d.test(e.charAt(t)););return t}(e)+1).replace(p,""):e}(e);var n=w.test(e);return n||S.test(e)?T(e.slice(2),n?2:8):E.test(e)?NaN:+e};var j=Math.max,A=Math.min;const _=function(e,t,n){var r,i,a,o,c,u,s=0,d=!1,p=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=r,a=i;return r=i=void 0,s=t,o=e.apply(a,n)}function m(e){return s=e,c=setTimeout(y,t),d?h(e):o}function b(e){var n=e-u;return void 0===u||n>=t||n<0||p&&e-s>=a}function y(){var e=f();if(b(e))return g(e);c=setTimeout(y,function(e){var n=t-(e-u);return p?A(n,a-(e-s)):n}(e))}function g(e){return c=void 0,v&&r?h(e):(r=i=void 0,o)}function O(){var e=f(),n=b(e);if(r=arguments,i=this,u=e,n){if(void 0===c)return m(u);if(p)return clearTimeout(c),c=setTimeout(y,t),h(u)}return void 0===c&&(c=setTimeout(y,t)),o}return t=I(t)||0,l(n)&&(d=!!n.leading,a=(p="maxWait"in n)?j(I(n.maxWait)||0,t):a,v="trailing"in n?!!n.trailing:v),O.cancel=function(){void 0!==c&&clearTimeout(c),s=0,r=u=i=c=void 0},O.flush=function(){return void 0===c?o:g(f())},O},P=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return l(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),_(e,t,{leading:r,maxWait:t,trailing:i})};var C=i(590),R=i.n(C),L=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),N="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,x=void 0!==i.g&&i.g.Math===Math?i.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),D="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(x):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},k=["top","right","bottom","left","width","height","size","weight"],M="undefined"!=typeof MutationObserver,z=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function a(){n&&(n=!1,e()),r&&l()}function o(){D(a)}function l(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(o,20);i=e}return l}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){N&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),M?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){N&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;k.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),F=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},V=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||x},B=G(0,0,0,0);function U(e){return parseFloat(e)||0}function H(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+U(e["border-"+n+"-width"])}),0)}var Y="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof V(e).SVGGraphicsElement}:function(e){return e instanceof V(e).SVGElement&&"function"==typeof e.getBBox};function G(e,t,n,r){return{x:e,y:t,width:n,height:r}}var W=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=G(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=function(e){return N?Y(e)?function(e){var t=e.getBBox();return G(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return B;var r=V(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],a=e["padding-"+i];t[i]=U(a)}return t}(r),a=i.left+i.right,o=i.top+i.bottom,l=U(r.width),c=U(r.height);if("border-box"===r.boxSizing&&(Math.round(l+a)!==t&&(l-=H(r,"left","right")+a),Math.round(c+o)!==n&&(c-=H(r,"top","bottom")+o)),!function(e){return e===V(e).document.documentElement}(e)){var u=Math.round(l+a)-t,s=Math.round(c+o)-n;1!==Math.abs(u)&&(l-=u),1!==Math.abs(s)&&(c-=s)}return G(i.left,i.top,l,c)}(e):B}(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),q=function(e,t){var n,r,i,a,o,l,c,u=(r=(n=t).x,i=n.y,a=n.width,o=n.height,l="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(l.prototype),F(c,{x:r,y:i,width:a,height:o,top:i,right:r+a,bottom:o+i,left:r}),c);F(this,{target:e,contentRect:u})},K=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new L,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof V(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new W(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof V(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new q(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),$="undefined"!=typeof WeakMap?new WeakMap:new L,X=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=z.getInstance(),r=new K(t,n,this);$.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){X.prototype[e]=function(){var t;return(t=$.get(this))[e].apply(t,arguments)}}));const J=void 0!==x.ResizeObserver?x.ResizeObserver:X;var Z=i(37),Q=i(697),ee=o().memo((function(e){var t=e.description,n=e.fullscreen,r=e.handleImageLoaded,i=e.isFullscreen,a=e.onImageError,l=e.original,c=e.originalAlt,u=e.originalHeight,s=e.originalWidth,f=e.originalTitle,d=e.sizes,p=e.srcSet,v=i&&n||l;return o().createElement(o().Fragment,null,o().createElement("img",{className:"image-gallery-image",src:v,alt:c,srcSet:p,height:u,width:s,sizes:d,title:f,onLoad:function(e){return r(e,l)},onError:a}),t&&o().createElement("span",{className:"image-gallery-description"},t))}));ee.displayName="Item",ee.propTypes={description:Q.string,fullscreen:Q.string,handleImageLoaded:Q.func.isRequired,isFullscreen:Q.bool,onImageError:Q.func.isRequired,original:Q.string.isRequired,originalAlt:Q.string,originalHeight:Q.string,originalWidth:Q.string,originalTitle:Q.string,sizes:Q.string,srcSet:Q.string},ee.defaultProps={description:"",fullscreen:"",isFullscreen:!1,originalAlt:"",originalHeight:"",originalWidth:"",originalTitle:"",sizes:"",srcSet:""};const te=ee;var ne={left:o().createElement("polyline",{points:"15 18 9 12 15 6"}),right:o().createElement("polyline",{points:"9 18 15 12 9 6"}),maximize:o().createElement("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"}),minimize:o().createElement("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"}),play:o().createElement("polygon",{points:"5 3 19 12 5 21 5 3"}),pause:o().createElement(o().Fragment,null,o().createElement("rect",{x:"6",y:"4",width:"4",height:"16"}),o().createElement("rect",{x:"14",y:"4",width:"4",height:"16"}))},re=function(e){var t=e.strokeWidth,n=e.viewBox,r=e.icon;return o().createElement("svg",{className:"image-gallery-svg",xmlns:"http://www.w3.org/2000/svg",viewBox:n,fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round"},ne[r])};re.propTypes={strokeWidth:Q.number,viewBox:Q.string,icon:(0,Q.oneOf)(["left","right","maximize","minimize","play","pause"]).isRequired},re.defaultProps={strokeWidth:1,viewBox:"0 0 24 24"};const ie=re;var ae=o().memo((function(e){var t=e.isFullscreen,n=e.onClick;return o().createElement("button",{type:"button",className:"image-gallery-icon image-gallery-fullscreen-button",onClick:n,"aria-label":"Open Fullscreen"},o().createElement(ie,{strokeWidth:2,icon:t?"minimize":"maximize"}))}));ae.displayName="Fullscreen",ae.propTypes={isFullscreen:Q.bool.isRequired,onClick:Q.func.isRequired};const oe=ae;var le=o().memo((function(e){var t=e.disabled,n=e.onClick;return o().createElement("button",{type:"button",className:"image-gallery-icon image-gallery-left-nav",disabled:t,onClick:n,"aria-label":"Previous Slide"},o().createElement(ie,{icon:"left",viewBox:"6 0 12 24"}))}));le.displayName="LeftNav",le.propTypes={disabled:Q.bool.isRequired,onClick:Q.func.isRequired};const ce=le;var ue=o().memo((function(e){var t=e.disabled,n=e.onClick;return o().createElement("button",{type:"button",className:"image-gallery-icon image-gallery-right-nav",disabled:t,onClick:n,"aria-label":"Next Slide"},o().createElement(ie,{icon:"right",viewBox:"6 0 12 24"}))}));ue.displayName="RightNav",ue.propTypes={disabled:Q.bool.isRequired,onClick:Q.func.isRequired};const se=ue;var fe=o().memo((function(e){var t=e.isPlaying,n=e.onClick;return o().createElement("button",{type:"button",className:"image-gallery-icon image-gallery-play-button",onClick:n,"aria-label":"Play or Pause Slideshow"},o().createElement(ie,{strokeWidth:2,icon:t?"pause":"play"}))}));fe.displayName="PlayPause",fe.propTypes={isPlaying:Q.bool.isRequired,onClick:Q.func.isRequired};const de=fe;function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ve=function(e){var t=e.children,n=e.className,r=e.delta,i=e.onSwiping,a=e.onSwiped,l=(0,Z.useSwipeable)({delta:r,onSwiping:i,onSwiped:a});return o().createElement("div",pe({},l,{className:n}),t)};ve.propTypes={children:Q.node.isRequired,className:Q.string,delta:Q.number,onSwiped:Q.func,onSwiping:Q.func},ve.defaultProps={className:"",delta:0,onSwiping:function(){},onSwiped:function(){}};const he=ve;function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?we(e):t}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Te=["fullscreenchange","MSFullscreenChange","mozfullscreenchange","webkitfullscreenchange"],Ie=(0,Q.arrayOf)((0,Q.shape)({srcSet:Q.string,media:Q.string}));function je(e){var t=parseInt(e.keyCode||e.which||0,10);return 66===t||62===t}var Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(l,e);var t,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Se(r);if(i){var n=Se(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ee(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).state={currentIndex:e.startIndex,thumbsTranslate:0,thumbsSwipedTranslate:0,currentSlideOffset:0,galleryWidth:0,thumbnailsWrapperWidth:0,thumbnailsWrapperHeight:0,thumbsStyle:{transition:"all ".concat(e.slideDuration,"ms ease-out")},isFullscreen:!1,isSwipingThumbnail:!1,isPlaying:!1},t.loadedImages={},t.imageGallery=o().createRef(),t.thumbnailsWrapper=o().createRef(),t.thumbnails=o().createRef(),t.imageGallerySlideWrapper=o().createRef(),t.handleImageLoaded=t.handleImageLoaded.bind(we(t)),t.handleKeyDown=t.handleKeyDown.bind(we(t)),t.handleMouseDown=t.handleMouseDown.bind(we(t)),t.handleTouchMove=t.handleTouchMove.bind(we(t)),t.handleOnSwiped=t.handleOnSwiped.bind(we(t)),t.handleScreenChange=t.handleScreenChange.bind(we(t)),t.handleSwiping=t.handleSwiping.bind(we(t)),t.handleThumbnailSwiping=t.handleThumbnailSwiping.bind(we(t)),t.handleOnThumbnailSwiped=t.handleOnThumbnailSwiped.bind(we(t)),t.onThumbnailMouseLeave=t.onThumbnailMouseLeave.bind(we(t)),t.handleImageError=t.handleImageError.bind(we(t)),t.pauseOrPlay=t.pauseOrPlay.bind(we(t)),t.renderThumbInner=t.renderThumbInner.bind(we(t)),t.renderItem=t.renderItem.bind(we(t)),t.slideLeft=t.slideLeft.bind(we(t)),t.slideRight=t.slideRight.bind(we(t)),t.toggleFullScreen=t.toggleFullScreen.bind(we(t)),t.togglePlay=t.togglePlay.bind(we(t)),t.unthrottledSlideToIndex=t.slideToIndex,t.slideToIndex=P(t.unthrottledSlideToIndex,e.slideDuration,{trailing:!1}),e.lazyLoad&&(t.lazyLoaded=[]),t}return(t=[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoPlay,n=e.useWindowKeyDown;t&&this.play(),n?window.addEventListener("keydown",this.handleKeyDown):this.imageGallery.current.addEventListener("keydown",this.handleKeyDown),window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),this.initResizeObserver(this.imageGallerySlideWrapper),this.addScreenChangeEvent()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.items,i=n.lazyLoad,a=n.slideDuration,o=n.slideInterval,l=n.startIndex,c=n.thumbnailPosition,u=n.showThumbnails,s=n.useWindowKeyDown,f=this.state.currentIndex,d=e.items.length!==r.length,p=!R()(e.items,r),v=e.startIndex!==l,h=e.thumbnailPosition!==c,m=e.showThumbnails!==u;o===e.slideInterval&&a===e.slideDuration||(this.pause(),this.play()),h&&(this.removeResizeObserver(),this.initResizeObserver(this.imageGallerySlideWrapper)),(d||m)&&this.handleResize(),t.currentIndex!==f&&this.slideThumbnailBar(),e.slideDuration!==a&&(this.slideToIndex=P(this.unthrottledSlideToIndex,a,{trailing:!1})),!i||e.lazyLoad&&!p||(this.lazyLoaded=[]),s!==e.useWindowKeyDown&&(s?(this.imageGallery.current.removeEventListener("keydown",this.handleKeyDown),window.addEventListener("keydown",this.handleKeyDown)):(window.removeEventListener("keydown",this.handleKeyDown),this.imageGallery.current.addEventListener("keydown",this.handleKeyDown))),(v||p)&&this.setState({currentIndex:l})}},{key:"componentWillUnmount",value:function(){var e=this.props.useWindowKeyDown;window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("touchmove",this.handleTouchMove),this.removeScreenChangeEvent(),this.removeResizeObserver(),this.playPauseIntervalId&&(window.clearInterval(this.playPauseIntervalId),this.playPauseIntervalId=null),this.transitionTimer&&window.clearTimeout(this.transitionTimer),e?window.removeEventListener("keydown",this.handleKeyDown):this.imageGallery.current.removeEventListener("keydown",this.handleKeyDown)}},{key:"onSliding",value:function(){var e=this,t=this.state,n=t.currentIndex,r=t.isTransitioning,i=this.props,a=i.onSlide,o=i.slideDuration;this.transitionTimer=window.setTimeout((function(){r&&(e.setState({isTransitioning:!r,isSwipingThumbnail:!1}),a&&a(n))}),o+50)}},{key:"onThumbnailClick",value:function(e,t){var n=this.props.onThumbnailClick;e.target.parentNode.parentNode.blur(),this.slideToIndex(t,e),n&&n(e,t)}},{key:"onThumbnailMouseOver",value:function(e,t){var n=this;this.thumbnailMouseOverTimer&&(window.clearTimeout(this.thumbnailMouseOverTimer),this.thumbnailMouseOverTimer=null),this.thumbnailMouseOverTimer=window.setTimeout((function(){n.slideToIndex(t),n.pause()}),300)}},{key:"onThumbnailMouseLeave",value:function(){if(this.thumbnailMouseOverTimer){var e=this.props.autoPlay;window.clearTimeout(this.thumbnailMouseOverTimer),this.thumbnailMouseOverTimer=null,e&&this.play()}}},{key:"setThumbsTranslate",value:function(e){this.setState({thumbsTranslate:e})}},{key:"setModalFullscreen",value:function(e){var t=this.props.onScreenChange;this.setState({modalFullscreen:e}),t&&t(e)}},{key:"getThumbsTranslate",value:function(e){var t,n=this.props,r=n.disableThumbnailScroll,i=n.items,a=this.state,o=a.thumbnailsWrapperWidth,l=a.thumbnailsWrapperHeight,c=this.thumbnails&&this.thumbnails.current;if(r)return 0;if(c){if(this.isThumbnailVertical()){if(c.scrollHeight<=l)return 0;t=c.scrollHeight-l}else{if(c.scrollWidth<=o||o<=0)return 0;t=c.scrollWidth-o}return e*(t/(i.length-1))}return 0}},{key:"getAlignmentClassName",value:function(e){var t=this.state.currentIndex,n=this.props,r=n.infinite,i=n.items,a="",o="left",l="right";switch(e){case t-1:a=" ".concat(o);break;case t:a=" ".concat("center");break;case t+1:a=" ".concat(l)}return i.length>=3&&r&&(0===e&&t===i.length-1?a=" ".concat(l):e===i.length-1&&0===t&&(a=" ".concat(o))),a}},{key:"getTranslateXForTwoSlide",value:function(e){var t=this.state,n=t.currentIndex,r=t.currentSlideOffset,i=t.previousIndex,a=n!==i,o=0===e&&0===i,l=1===e&&1===i,c=0===e&&1===n,u=1===e&&0===n,s=0===r,f=-100*n+100*e+r;return r>0?this.direction="left":r<0&&(this.direction="right"),u&&r>0&&(f=-100+r),c&&r<0&&(f=100+r),a?o&&s&&"left"===this.direction?f=100:l&&s&&"right"===this.direction&&(f=-100):(u&&s&&"left"===this.direction&&(f=-100),c&&s&&"right"===this.direction&&(f=100)),f}},{key:"getThumbnailBarHeight",value:function(){return this.isThumbnailVertical()?{height:this.state.gallerySlideWrapperHeight}:{}}},{key:"getSlideStyle",value:function(e){var t=this.state,n=t.currentIndex,r=t.currentSlideOffset,i=t.slideStyle,a=this.props,o=a.infinite,l=a.items,c=a.useTranslate3D,u=a.isRTL,s=-100*n,f=l.length-1,d=(s+100*e)*(u?-1:1)+r;o&&l.length>2&&(0===n&&e===f?d=-100*(u?-1:1)+r:n===f&&0===e&&(d=100*(u?-1:1)+r)),o&&2===l.length&&(d=this.getTranslateXForTwoSlide(e));var p="translate(".concat(d,"%, 0)");return c&&(p="translate3d(".concat(d,"%, 0, 0)")),ye({display:this.isSlideVisible(e)?"inherit":"none",WebkitTransform:p,MozTransform:p,msTransform:p,OTransform:p,transform:p},i)}},{key:"getCurrentIndex",value:function(){return this.state.currentIndex}},{key:"getThumbnailStyle",value:function(){var e,t=this.props,n=t.useTranslate3D,r=t.isRTL,i=this.state,a=i.thumbsTranslate,o=i.thumbsStyle,l=r?-1*a:a;return this.isThumbnailVertical()?(e="translate(0, ".concat(a,"px)"),n&&(e="translate3d(0, ".concat(a,"px, 0)"))):(e="translate(".concat(l,"px, 0)"),n&&(e="translate3d(".concat(l,"px, 0, 0)"))),ye({WebkitTransform:e,MozTransform:e,msTransform:e,OTransform:e,transform:e},o)}},{key:"getSlideItems",value:function(){var e=this,t=this.state.currentIndex,r=this.props,i=r.items,a=r.slideOnThumbnailOver,l=r.onClick,c=r.lazyLoad,u=r.onTouchMove,s=r.onTouchEnd,f=r.onTouchStart,d=r.onMouseOver,p=r.onMouseLeave,v=r.renderItem,h=r.renderThumbInner,m=r.showThumbnails,b=r.showBullets,y=[],g=[],O=[];return i.forEach((function(r,i){var E=e.getAlignmentClassName(i),w=r.originalClass?" ".concat(r.originalClass):"",S=r.thumbnailClass?" ".concat(r.thumbnailClass):"",T=r.renderItem||v||e.renderItem,I=r.renderThumbInner||h||e.renderThumbInner,j=!c||E||e.lazyLoaded[i];j&&c&&!e.lazyLoaded[i]&&(e.lazyLoaded[i]=!0);var A=e.getSlideStyle(i),_=o().createElement("div",{"aria-label":"Go to Slide ".concat(i+1),key:"slide-".concat(i),tabIndex:"-1",className:"image-gallery-slide ".concat(E," ").concat(w),style:A,onClick:l,onKeyUp:e.handleSlideKeyUp,onTouchMove:u,onTouchEnd:s,onTouchStart:f,onMouseOver:d,onFocus:d,onMouseLeave:p,role:"button"},j?T(r):o().createElement("div",{style:{height:"100%"}}));if(y.push(_),m&&r.thumbnail){var P=n("image-gallery-thumbnail",S,{active:t===i});g.push(o().createElement("button",{key:"thumbnail-".concat(i),type:"button",tabIndex:"0","aria-pressed":t===i?"true":"false","aria-label":"Go to Slide ".concat(i+1),className:P,onMouseLeave:a?e.onThumbnailMouseLeave:null,onMouseOver:function(t){return e.handleThumbnailMouseOver(t,i)},onFocus:function(t){return e.handleThumbnailMouseOver(t,i)},onKeyUp:function(t){return e.handleThumbnailKeyUp(t,i)},onClick:function(t){return e.onThumbnailClick(t,i)}},I(r)))}if(b){var C=n("image-gallery-bullet",r.bulletClass,{active:t===i});O.push(o().createElement("button",{type:"button",key:"bullet-".concat(i),className:C,onClick:function(n){return r.bulletOnClick&&r.bulletOnClick({item:r,itemIndex:i,currentIndex:t}),n.target.blur(),e.slideToIndex.call(e,i,n)},"aria-pressed":t===i?"true":"false","aria-label":"Go to Slide ".concat(i+1)}))}})),{slides:y,thumbnails:g,bullets:O}}},{key:"ignoreIsTransitioning",value:function(){var e=this.props.items,t=this.state,n=t.previousIndex,r=t.currentIndex,i=e.length-1;return Math.abs(n-r)>1&&!(0===n&&r===i)&&!(n===i&&0===r)}},{key:"isFirstOrLastSlide",value:function(e){return e===this.props.items.length-1||0===e}},{key:"slideIsTransitioning",value:function(e){var t=this.state,n=t.isTransitioning,r=t.previousIndex,i=t.currentIndex;return n&&!(e===r||e===i)}},{key:"isSlideVisible",value:function(e){return!this.slideIsTransitioning(e)||this.ignoreIsTransitioning()&&!this.isFirstOrLastSlide(e)}},{key:"slideThumbnailBar",value:function(){var e=this.state,t=e.currentIndex,n=e.isSwipingThumbnail,r=-this.getThumbsTranslate(t);n||(0===t?this.setState({thumbsTranslate:0,thumbsSwipedTranslate:0}):this.setState({thumbsTranslate:r,thumbsSwipedTranslate:r}))}},{key:"canSlide",value:function(){return this.props.items.length>=2}},{key:"canSlideLeft",value:function(){var e=this.props,t=e.infinite,n=e.isRTL;return t||(n?this.canSlideNext():this.canSlidePrevious())}},{key:"canSlideRight",value:function(){var e=this.props,t=e.infinite,n=e.isRTL;return t||(n?this.canSlidePrevious():this.canSlideNext())}},{key:"canSlidePrevious",value:function(){return this.state.currentIndex>0}},{key:"canSlideNext",value:function(){return this.state.currentIndex<this.props.items.length-1}},{key:"handleSwiping",value:function(e){var t=e.event,n=e.absX,r=e.dir,i=this.props,a=i.disableSwipe,o=i.stopPropagation,l=this.state,c=l.galleryWidth,u=l.isTransitioning,s=l.swipingUpDown,f=l.swipingLeftRight;if(r!==Z.UP&&r!==Z.DOWN&&!s||f){if(r!==Z.LEFT&&r!==Z.RIGHT||f||this.setState({swipingLeftRight:!0}),!a){var d=this.props.swipingTransitionDuration;if(o&&t.preventDefault(),u)this.setState({currentSlideOffset:0});else{var p=r===Z.RIGHT?1:-1,v=n/c*100;Math.abs(v)>=100&&(v=100);var h={transition:"transform ".concat(d,"ms ease-out")};this.setState({currentSlideOffset:p*v,slideStyle:h})}}}else s||this.setState({swipingUpDown:!0})}},{key:"handleThumbnailSwiping",value:function(e){var t=e.event,n=e.absX,r=e.absY,i=e.dir,a=this.props,o=a.stopPropagation,l=a.swipingThumbnailTransitionDuration,c=this.state,u=c.thumbsSwipedTranslate,s=c.thumbnailsWrapperHeight,f=c.thumbnailsWrapperWidth,d=c.swipingUpDown,p=c.swipingLeftRight;if(this.isThumbnailVertical()){if((i===Z.LEFT||i===Z.RIGHT||p)&&!d)return void(p||this.setState({swipingLeftRight:!0}));i!==Z.UP&&i!==Z.DOWN||d||this.setState({swipingUpDown:!0})}else{if((i===Z.UP||i===Z.DOWN||d)&&!p)return void(d||this.setState({swipingUpDown:!0}));i!==Z.LEFT&&i!==Z.RIGHT||p||this.setState({swipingLeftRight:!0})}var v,h,m,b,y,g=this.thumbnails&&this.thumbnails.current;if(this.isThumbnailVertical()?(v=u+(i===Z.DOWN?r:-r),h=g.scrollHeight-s+20,m=Math.abs(v)>h,b=v>20,y=g.scrollHeight<=s):(v=u+(i===Z.RIGHT?n:-n),h=g.scrollWidth-f+20,m=Math.abs(v)>h,b=v>20,y=g.scrollWidth<=f),!y&&(i!==Z.LEFT&&i!==Z.UP||!m)&&(i!==Z.RIGHT&&i!==Z.DOWN||!b)){o&&t.stopPropagation();var O={transition:"transform ".concat(l,"ms ease-out")};this.setState({thumbsTranslate:v,thumbsStyle:O})}}},{key:"handleOnThumbnailSwiped",value:function(){var e=this.state.thumbsTranslate,t=this.props.slideDuration;this.resetSwipingDirection(),this.setState({isSwipingThumbnail:!0,thumbsSwipedTranslate:e,thumbsStyle:{transition:"all ".concat(t,"ms ease-out")}})}},{key:"sufficientSwipe",value:function(){var e=this.state.currentSlideOffset,t=this.props.swipeThreshold;return Math.abs(e)>t}},{key:"resetSwipingDirection",value:function(){var e=this.state,t=e.swipingUpDown,n=e.swipingLeftRight;t&&this.setState({swipingUpDown:!1}),n&&this.setState({swipingLeftRight:!1})}},{key:"handleOnSwiped",value:function(e){var t=e.event,n=e.dir,r=e.velocity,i=this.props,a=i.disableSwipe,o=i.stopPropagation,l=i.flickThreshold;if(!a){var c=this.props.isRTL;o&&t.stopPropagation(),this.resetSwipingDirection();var u=(n===Z.LEFT?1:-1)*(c?-1:1),s=n===Z.UP||n===Z.DOWN,f=r>l&&!s;this.handleOnSwipedTo(u,f)}}},{key:"handleOnSwipedTo",value:function(e,t){var n=this.state,r=n.currentIndex,i=n.isTransitioning,a=r;!this.sufficientSwipe()&&!t||i||(a+=e),(-1===e&&!this.canSlideLeft()||1===e&&!this.canSlideRight())&&(a=r),this.unthrottledSlideToIndex(a)}},{key:"handleTouchMove",value:function(e){this.state.swipingLeftRight&&e.preventDefault()}},{key:"handleMouseDown",value:function(){this.imageGallery.current.classList.add("image-gallery-using-mouse")}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.disableKeyDown,r=t.useBrowserFullscreen,i=this.state.isFullscreen;if(this.imageGallery.current.classList.remove("image-gallery-using-mouse"),!n)switch(parseInt(e.keyCode||e.which||0,10)){case 37:this.canSlideLeft()&&!this.playPauseIntervalId&&this.slideLeft(e);break;case 39:this.canSlideRight()&&!this.playPauseIntervalId&&this.slideRight(e);break;case 27:i&&!r&&this.exitFullScreen()}}},{key:"handleImageError",value:function(e){var t=this.props.onErrorImageURL;t&&-1===e.target.src.indexOf(t)&&(e.target.src=t)}},{key:"removeResizeObserver",value:function(){this.resizeObserver&&this.imageGallerySlideWrapper&&this.imageGallerySlideWrapper.current&&(this.resizeObserver.unobserve(this.imageGallerySlideWrapper.current),this.resizeObserver=null)}},{key:"handleResize",value:function(){var e=this.state.currentIndex;this.resizeObserver&&(this.imageGallery&&this.imageGallery.current&&this.setState({galleryWidth:this.imageGallery.current.offsetWidth}),this.imageGallerySlideWrapper&&this.imageGallerySlideWrapper.current&&this.setState({gallerySlideWrapperHeight:this.imageGallerySlideWrapper.current.offsetHeight}),this.thumbnailsWrapper&&this.thumbnailsWrapper.current&&(this.isThumbnailVertical()?this.setState({thumbnailsWrapperHeight:this.thumbnailsWrapper.current.offsetHeight}):this.setState({thumbnailsWrapperWidth:this.thumbnailsWrapper.current.offsetWidth})),this.setThumbsTranslate(-this.getThumbsTranslate(e)))}},{key:"initResizeObserver",value:function(e){var t=this;this.resizeObserver=new J(_((function(e){e&&e.forEach((function(){t.handleResize()}))}),300)),this.resizeObserver.observe(e.current)}},{key:"toggleFullScreen",value:function(){this.state.isFullscreen?this.exitFullScreen():this.fullScreen()}},{key:"togglePlay",value:function(){this.playPauseIntervalId?this.pause():this.play()}},{key:"handleScreenChange",value:function(){var e=this.props,t=e.onScreenChange,n=e.useBrowserFullscreen,r=document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,i=this.imageGallery.current===r;t&&t(i),n&&this.setState({isFullscreen:i})}},{key:"slideToIndex",value:function(e,t){var n=this.state,r=n.currentIndex,i=n.isTransitioning,a=this.props,o=a.items,l=a.slideDuration,c=a.onBeforeSlide;if(!i){t&&this.playPauseIntervalId&&(this.pause(!1),this.play(!1));var u=o.length-1,s=e;e<0?s=u:e>u&&(s=0),c&&s!==r&&c(s),this.setState({previousIndex:r,currentIndex:s,isTransitioning:s!==r,currentSlideOffset:0,slideStyle:{transition:"all ".concat(l,"ms ease-out")}},this.onSliding)}}},{key:"slideLeft",value:function(e){var t=this.props.isRTL;this.slideTo(e,t?"right":"left")}},{key:"slideRight",value:function(e){var t=this.props.isRTL;this.slideTo(e,t?"left":"right")}},{key:"slideTo",value:function(e,t){var n=this,r=this.state,i=r.currentIndex,a=r.currentSlideOffset,o=r.isTransitioning,l=this.props.items,c=i+("left"===t?-1:1);o||(2===l.length?this.setState({currentSlideOffset:a+("left"===t?.001:-.001),slideStyle:{transition:"none"}},(function(){window.setTimeout((function(){return n.slideToIndex(c,e)}),25)})):this.slideToIndex(c,e))}},{key:"handleThumbnailMouseOver",value:function(e,t){this.props.slideOnThumbnailOver&&this.onThumbnailMouseOver(e,t)}},{key:"handleThumbnailKeyUp",value:function(e,t){je(e)&&this.onThumbnailClick(e,t)}},{key:"handleSlideKeyUp",value:function(e){je(e)&&(0,this.props.onClick)(e)}},{key:"isThumbnailVertical",value:function(){var e=this.props.thumbnailPosition;return"left"===e||"right"===e}},{key:"addScreenChangeEvent",value:function(){var e=this;Te.forEach((function(t){document.addEventListener(t,e.handleScreenChange)}))}},{key:"removeScreenChangeEvent",value:function(){var e=this;Te.forEach((function(t){document.removeEventListener(t,e.handleScreenChange)}))}},{key:"fullScreen",value:function(){var e=this.props.useBrowserFullscreen,t=this.imageGallery.current;e?t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():this.setModalFullscreen(!0):this.setModalFullscreen(!0),this.setState({isFullscreen:!0})}},{key:"exitFullScreen",value:function(){var e=this.state.isFullscreen,t=this.props.useBrowserFullscreen;e&&(t?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this.setModalFullscreen(!1):this.setModalFullscreen(!1),this.setState({isFullscreen:!1}))}},{key:"pauseOrPlay",value:function(){var e=this.props.infinite,t=this.state.currentIndex;e||this.canSlideRight()?this.slideToIndex(t+1):this.pause()}},{key:"play",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props,n=t.onPlay,r=t.slideInterval,i=t.slideDuration,a=this.state.currentIndex;this.playPauseIntervalId||(this.setState({isPlaying:!0}),this.playPauseIntervalId=window.setInterval(this.pauseOrPlay,Math.max(r,i)),n&&e&&n(a))}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props.onPause,n=this.state.currentIndex;this.playPauseIntervalId&&(window.clearInterval(this.playPauseIntervalId),this.playPauseIntervalId=null,this.setState({isPlaying:!1}),t&&e&&t(n))}},{key:"isImageLoaded",value:function(e){return!!this.loadedImages[e.original]||(this.loadedImages[e.original]=!0,!1)}},{key:"handleImageLoaded",value:function(e,t){var n=this.props.onImageLoad;!this.loadedImages[t]&&n&&(this.loadedImages[t]=!0,n(e))}},{key:"renderItem",value:function(e){var t=this.state.isFullscreen,n=this.props.onImageError||this.handleImageError;return o().createElement(te,{description:e.description,fullscreen:e.fullscreen,handleImageLoaded:this.handleImageLoaded,isFullscreen:t,onImageError:n,original:e.original,originalAlt:e.originalAlt,originalHeight:e.originalHeight,originalWidth:e.originalWidth,originalTitle:e.originalTitle,sizes:e.sizes,srcSet:e.srcSet})}},{key:"renderThumbInner",value:function(e){var t=this.props.onThumbnailError||this.handleImageError;return o().createElement("span",{className:"image-gallery-thumbnail-inner"},o().createElement("img",{className:"image-gallery-thumbnail-image",src:e.thumbnail,height:e.thumbnailHeight,width:e.thumbnailWidth,alt:e.thumbnailAlt,title:e.thumbnailTitle,onError:t}),e.thumbnailLabel&&o().createElement("div",{className:"image-gallery-thumbnail-label"},e.thumbnailLabel))}},{key:"render",value:function(){var e=this.state,t=e.currentIndex,r=e.isFullscreen,i=e.modalFullscreen,a=e.isPlaying,l=this.props,c=l.additionalClass,u=l.disableThumbnailSwipe,s=l.indexSeparator,f=l.isRTL,d=l.items,p=l.thumbnailPosition,v=l.renderFullscreenButton,h=l.renderCustomControls,m=l.renderLeftNav,b=l.renderRightNav,y=l.showBullets,g=l.showFullscreenButton,O=l.showIndex,E=l.showThumbnails,w=l.showNav,S=l.showPlayButton,T=l.renderPlayPauseButton,I=this.getThumbnailStyle(),j=this.getSlideItems(),A=j.slides,_=j.thumbnails,P=j.bullets,C=n("image-gallery-slide-wrapper",p,{"image-gallery-rtl":f}),R=o().createElement("div",{ref:this.imageGallerySlideWrapper,className:C},h&&h(),this.canSlide()?o().createElement(o().Fragment,null,w&&o().createElement(o().Fragment,null,m(this.slideLeft,!this.canSlideLeft()),b(this.slideRight,!this.canSlideRight())),o().createElement(he,{className:"image-gallery-swipe",delta:0,onSwiping:this.handleSwiping,onSwiped:this.handleOnSwiped},o().createElement("div",{className:"image-gallery-slides"},A))):o().createElement("div",{className:"image-gallery-slides"},A),S&&T(this.togglePlay,a),y&&o().createElement("div",{className:"image-gallery-bullets"},o().createElement("div",{className:"image-gallery-bullets-container",role:"navigation","aria-label":"Bullet Navigation"},P)),g&&v(this.toggleFullScreen,r),O&&o().createElement("div",{className:"image-gallery-index"},o().createElement("span",{className:"image-gallery-index-current"},t+1),o().createElement("span",{className:"image-gallery-index-separator"},s),o().createElement("span",{className:"image-gallery-index-total"},d.length))),L=n("image-gallery",c,{"fullscreen-modal":i}),N=n("image-gallery-content",p,{fullscreen:r}),x=n("image-gallery-thumbnails-wrapper",p,{"thumbnails-wrapper-rtl":!this.isThumbnailVertical()&&f},{"thumbnails-swipe-horizontal":!this.isThumbnailVertical()&&!u},{"thumbnails-swipe-vertical":this.isThumbnailVertical()&&!u});return o().createElement("div",{ref:this.imageGallery,className:L,"aria-live":"polite"},o().createElement("div",{className:N},("bottom"===p||"right"===p)&&R,E&&_.length>0?o().createElement(he,{className:x,delta:0,onSwiping:!u&&this.handleThumbnailSwiping,onSwiped:!u&&this.handleOnThumbnailSwiped},o().createElement("div",{className:"image-gallery-thumbnails",ref:this.thumbnailsWrapper,style:this.getThumbnailBarHeight()},o().createElement("div",{ref:this.thumbnails,className:"image-gallery-thumbnails-container",style:I,"aria-label":"Thumbnail Navigation"},_))):null,("top"===p||"left"===p)&&R))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(l.prototype,t),l}(o().Component);Ae.propTypes={flickThreshold:Q.number,items:(0,Q.arrayOf)((0,Q.shape)({bulletClass:Q.string,bulletOnClick:Q.func,description:Q.string,original:Q.string,originalHeight:Q.number,originalWidth:Q.number,thumbnailHeight:Q.number,thumbnailWidth:Q.number,fullscreen:Q.string,originalAlt:Q.string,originalTitle:Q.string,thumbnail:Q.string,thumbnailAlt:Q.string,thumbnailLabel:Q.string,thumbnailTitle:Q.string,originalClass:Q.string,thumbnailClass:Q.string,renderItem:Q.func,renderThumbInner:Q.func,imageSet:Ie,srcSet:Q.string,sizes:Q.string})).isRequired,showNav:Q.bool,autoPlay:Q.bool,lazyLoad:Q.bool,infinite:Q.bool,showIndex:Q.bool,showBullets:Q.bool,showThumbnails:Q.bool,showPlayButton:Q.bool,showFullscreenButton:Q.bool,disableThumbnailScroll:Q.bool,disableKeyDown:Q.bool,disableSwipe:Q.bool,disableThumbnailSwipe:Q.bool,useBrowserFullscreen:Q.bool,onErrorImageURL:Q.string,indexSeparator:Q.string,thumbnailPosition:(0,Q.oneOf)(["top","bottom","left","right"]),startIndex:Q.number,slideDuration:Q.number,slideInterval:Q.number,slideOnThumbnailOver:Q.bool,swipeThreshold:Q.number,swipingTransitionDuration:Q.number,swipingThumbnailTransitionDuration:Q.number,onSlide:Q.func,onBeforeSlide:Q.func,onScreenChange:Q.func,onPause:Q.func,onPlay:Q.func,onClick:Q.func,onImageLoad:Q.func,onImageError:Q.func,onTouchMove:Q.func,onTouchEnd:Q.func,onTouchStart:Q.func,onMouseOver:Q.func,onMouseLeave:Q.func,onThumbnailError:Q.func,onThumbnailClick:Q.func,renderCustomControls:Q.func,renderLeftNav:Q.func,renderRightNav:Q.func,renderPlayPauseButton:Q.func,renderFullscreenButton:Q.func,renderItem:Q.func,renderThumbInner:Q.func,stopPropagation:Q.bool,additionalClass:Q.string,useTranslate3D:Q.bool,isRTL:Q.bool,useWindowKeyDown:Q.bool},Ae.defaultProps={onErrorImageURL:"",additionalClass:"",showNav:!0,autoPlay:!1,lazyLoad:!1,infinite:!0,showIndex:!1,showBullets:!1,showThumbnails:!0,showPlayButton:!0,showFullscreenButton:!0,disableThumbnailScroll:!1,disableKeyDown:!1,disableSwipe:!1,disableThumbnailSwipe:!1,useTranslate3D:!0,isRTL:!1,useBrowserFullscreen:!0,flickThreshold:.4,stopPropagation:!1,indexSeparator:" / ",thumbnailPosition:"bottom",startIndex:0,slideDuration:450,swipingTransitionDuration:0,swipingThumbnailTransitionDuration:0,onSlide:null,onBeforeSlide:null,onScreenChange:null,onPause:null,onPlay:null,onClick:null,onImageLoad:null,onImageError:null,onTouchMove:null,onTouchEnd:null,onTouchStart:null,onMouseOver:null,onMouseLeave:null,onThumbnailError:null,onThumbnailClick:null,renderCustomControls:null,renderThumbInner:null,renderItem:null,slideInterval:3e3,slideOnThumbnailOver:!1,swipeThreshold:30,renderLeftNav:function(e,t){return o().createElement(ce,{onClick:e,disabled:t})},renderRightNav:function(e,t){return o().createElement(se,{onClick:e,disabled:t})},renderPlayPauseButton:function(e,t){return o().createElement(de,{onClick:e,isPlaying:t})},renderFullscreenButton:function(e,t){return o().createElement(oe,{onClick:e,isFullscreen:t})},useWindowKeyDown:!0};const _e=Ae})(),a})())}).call(this,n(137))},1201:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=p(i),o=p(n(3)),l=n(39),c=n(1202),u=p(n(1203)),s=p(n(1204)),f=p(n(1205)),d=p(n(1206));function p(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.lazyLoadHandler=n.lazyLoadHandler.bind(n),e.throttle>0&&(e.debounce?n.lazyLoadHandler=(0,u.default)(n.lazyLoadHandler,e.throttle):n.lazyLoadHandler=(0,s.default)(n.lazyLoadHandler,e.throttle)),n.state={visible:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this._mounted=!0;var e=this.getEventNode();this.lazyLoadHandler(),this.lazyLoadHandler.flush&&this.lazyLoadHandler.flush(),(0,c.add)(window,"resize",this.lazyLoadHandler),(0,c.add)(e,"scroll",this.lazyLoadHandler),e!==window&&(0,c.add)(window,"scroll",this.lazyLoadHandler)}},{key:"componentWillReceiveProps",value:function(){this.state.visible||this.lazyLoadHandler()}},{key:"shouldComponentUpdate",value:function(e,t){return t.visible}},{key:"componentWillUnmount",value:function(){this._mounted=!1,this.lazyLoadHandler.cancel&&this.lazyLoadHandler.cancel(),this.detachListeners()}},{key:"getEventNode",value:function(){return(0,f.default)((0,l.findDOMNode)(this))}},{key:"getOffset",value:function(){var e=this.props,t=e.offset,n=e.offsetVertical,r=e.offsetHorizontal,i=e.offsetTop,a=e.offsetBottom,o=e.offsetLeft,l=e.offsetRight,c=e.threshold||t,u=n||c,s=r||c;return{top:i||u,bottom:a||u,left:o||s,right:l||s}}},{key:"lazyLoadHandler",value:function(){if(this._mounted){var e=this.getOffset(),t=(0,l.findDOMNode)(this),n=this.getEventNode();if((0,d.default)(t,n,e)){var r=this.props.onContentVisible;this.setState({visible:!0},(function(){r&&r()})),this.detachListeners()}}}},{key:"detachListeners",value:function(){var e=this.getEventNode();(0,c.remove)(window,"resize",this.lazyLoadHandler),(0,c.remove)(e,"scroll",this.lazyLoadHandler),e!==window&&(0,c.remove)(window,"scroll",this.lazyLoadHandler)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.height,o=e.width,l=this.state.visible,c={height:r,width:o},u="LazyLoad"+(l?" is-visible":"")+(n?" "+n:"");return a.default.createElement(this.props.elementType,{className:u,style:c},l&&i.Children.only(t))}}]),t}(i.Component);t.default=v,v.propTypes={children:o.default.node.isRequired,className:o.default.string,debounce:o.default.bool,elementType:o.default.string,height:o.default.oneOfType([o.default.string,o.default.number]),offset:o.default.number,offsetBottom:o.default.number,offsetHorizontal:o.default.number,offsetLeft:o.default.number,offsetRight:o.default.number,offsetTop:o.default.number,offsetVertical:o.default.number,threshold:o.default.number,throttle:o.default.number,width:o.default.oneOfType([o.default.string,o.default.number]),onContentVisible:o.default.func},v.defaultProps={elementType:"div",debounce:!0,offset:0,offsetBottom:0,offsetHorizontal:0,offsetLeft:0,offsetRight:0,offsetTop:0,offsetVertical:0,throttle:250}},1202:function(e,t,n){var r,i;void 0===(i="function"==typeof(r=function(){function e(e,t){return function(n,r,i,a){n[e]?n[e](r,i,a):n[t]&&n[t]("on"+r,i)}}return{add:e("addEventListener","attachEvent"),remove:e("removeEventListener","detachEvent")}})?r.call(t,n,t,e):r)||(e.exports=i)},1203:function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,l="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),s=Object.prototype.toString,f=Math.max,d=Math.min,p=function(){return u.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var l=i.test(e);return l||a.test(e)?o(e.slice(2),l?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,a,o,l,c,u=0,s=!1,m=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,a=i;return r=i=void 0,u=t,o=e.apply(a,n)}function g(e){return u=e,l=setTimeout(E,t),s?y(e):o}function O(e){var n=e-c;return void 0===c||n>=t||n<0||m&&e-u>=a}function E(){var e=p();if(O(e))return w(e);l=setTimeout(E,function(e){var n=t-(e-c);return m?d(n,a-(e-u)):n}(e))}function w(e){return l=void 0,b&&r?y(e):(r=i=void 0,o)}function S(){var e=p(),n=O(e);if(r=arguments,i=this,c=e,n){if(void 0===l)return g(c);if(m)return l=setTimeout(E,t),y(c)}return void 0===l&&(l=setTimeout(E,t)),o}return t=h(t)||0,v(n)&&(s=!!n.leading,a=(m="maxWait"in n)?f(h(n.maxWait)||0,t):a,b="trailing"in n?!!n.trailing:b),S.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=c=i=l=void 0},S.flush=function(){return void 0===l?o:w(p())},S}}).call(this,n(137))},1204:function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,l="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),s=Object.prototype.toString,f=Math.max,d=Math.min,p=function(){return u.Date.now()};function v(e,t,n){var r,i,a,o,l,c,u=0,s=!1,v=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,a=i;return r=i=void 0,u=t,o=e.apply(a,n)}function g(e){return u=e,l=setTimeout(E,t),s?y(e):o}function O(e){var n=e-c;return void 0===c||n>=t||n<0||v&&e-u>=a}function E(){var e=p();if(O(e))return w(e);l=setTimeout(E,function(e){var n=t-(e-c);return v?d(n,a-(e-u)):n}(e))}function w(e){return l=void 0,b&&r?y(e):(r=i=void 0,o)}function S(){var e=p(),n=O(e);if(r=arguments,i=this,c=e,n){if(void 0===l)return g(c);if(v)return l=setTimeout(E,t),y(c)}return void 0===l&&(l=setTimeout(E,t)),o}return t=m(t)||0,h(n)&&(s=!!n.leading,a=(v="maxWait"in n)?f(m(n.maxWait)||0,t):a,b="trailing"in n?!!n.trailing:b),S.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=c=i=l=void 0},S.flush=function(){return void 0===l?o:w(p())},S}function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return NaN;if(h(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=h(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var l=i.test(e);return l||a.test(e)?o(e.slice(2),l?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return h(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),v(e,t,{leading:r,maxWait:t,trailing:i})}}).call(this,n(137))},1205:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return"undefined"!=typeof getComputedStyle?getComputedStyle(e,null).getPropertyValue(t):e.style[t]},i=function(e){return r(e,"overflow")+r(e,"overflow-y")+r(e,"overflow-x")};t.default=function(e){if(!(e instanceof HTMLElement))return window;for(var t=e;t&&t!==document.body&&t!==document.documentElement&&t.parentNode;){if(/(scroll|auto)/.test(i(t)))return t;t=t.parentNode}return window}},1206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n,r){if(function(e){return null===e.offsetParent}(t))return!1;var i=void 0,o=void 0,l=void 0,c=void 0;if(void 0===n||n===window)i=window.pageYOffset,l=window.pageXOffset,o=i+window.innerHeight,c=l+window.innerWidth;else{if(!e(n,window,r))return!1;var u=(0,a.default)(n);i=u.top,l=u.left,o=i+n.offsetHeight,c=l+n.offsetWidth}var s=(0,a.default)(t);return i<=s.top+t.offsetHeight+r.top&&o>=s.top-r.bottom&&l<=s.left+t.offsetWidth+r.left&&c>=s.left-r.right};var r,i=n(1207),a=(r=i)&&r.__esModule?r:{default:r}},1207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}}},1208:function(e,t,n){"use strict";var r=n(102),i=n(103);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(0)),o=(0,r(n(104)).default)(a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}),"ZoomOut");t.default=o},1209:function(e,t,n){"use strict";var r=n(102),i=n(103);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(0)),o=(0,r(n(104)).default)(a.createElement(a.Fragment,null,a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),a.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})),"ZoomIn");t.default=o},1210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1211);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}});var i=n(1031);Object.defineProperty(t,"TouchScrollable",{enumerable:!0,get:function(){return i.TouchScrollable}})},1211:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=f(i),o=n(911),l=n(1031),c=f(n(1212)),u=f(n(1213)),s=n(912);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){return d(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){o.canUseDOM&&(this.initialHeight=window.innerHeight)}},{key:"componentWillUnmount",value:function(){var e=window.innerHeight-this.initialHeight;e&&window.scrollTo(0,window.pageYOffset+e),this.initialHeight=window.innerHeight}},{key:"render",value:function(){var e=this.props.children;return e?a.default.createElement(l.TouchScrollable,null,e):null}}]),t}(i.PureComponent),h=(0,s.pipe)(u.default,c.default)(v),m=function(e){return e.isActive?a.default.createElement(h,e):e.children};m.defaultProps={accountForScrollbars:!0,children:null,isActive:!0},t.default=m},1212:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return function(t){function n(){var e,t,r;c(this,n);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=r=u(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),r.addSheet=function(){var e=r.getStyles(),t=(0,l.makeStyleTag)();t&&((0,l.injectStyles)(t,e),(0,l.insertStyleTag)(t),r.sheet=t)},r.getStyles=function(){var e=r.props.accountForScrollbars,t=(0,l.getDocumentHeight)(),n=e?(0,l.getPadding)():null;return"body {\n        box-sizing: border-box !important;\n        overflow: hidden !important;\n        position: relative !important;\n        "+(t?"height: "+t+"px !important;":"")+"\n        "+(n?"padding-right: "+n+"px !important;":"")+"\n      }"},u(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),r(n,[{key:"componentDidMount",value:function(){this.addSheet()}},{key:"removeSheet",value:function(){this.sheet&&(this.sheet.parentNode.removeChild(this.sheet),this.sheet=null)}},{key:"componentWillUnmount",value:function(){this.removeSheet()}},{key:"render",value:function(){return o.default.createElement(e,this.props)}}]),n}(a.PureComponent)};var i,a=n(0),o=(i=a)&&i.__esModule?i:{default:i},l=n(912);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}},1213:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return function(t){function n(){return u(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),r(n,[{key:"componentDidMount",value:function(){l.canUseDOM&&(0,c.isTouchDevice)()&&document.addEventListener("touchmove",c.preventTouchMove,c.listenerOptions)}},{key:"componentWillUnmount",value:function(){l.canUseDOM&&(0,c.isTouchDevice)()&&document.removeEventListener("touchmove",c.preventTouchMove,c.listenerOptions)}},{key:"render",value:function(){return o.default.createElement(e,this.props)}}]),n}(a.PureComponent)};var i,a=n(0),o=(i=a)&&i.__esModule?i:{default:i},l=n(911),c=n(912);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}},1214:function(e,t,n){e.exports=n(1215)()},1215:function(e,t,n){"use strict";var r=n(1216);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},1216:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1217:function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=e.type||"",a=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):t.endsWith("/*")?a===t.replace(/\/.*$/,""):i===t}))}return!0}}])},1218:function(e,t,n){"use strict";var r=n(7),i=n(1219),a=n(546),o=n(287);r({target:"Array",proto:!0},{groupBy:function(e){var t=arguments.length>1?arguments[1]:void 0;return i(this,e,t,a)}}),o("groupBy")},1219:function(e,t,n){var r=n(9),i=n(84),a=n(16),o=n(192),l=n(90),c=n(228),u=n(138),s=n(91),f=n(1220),d=r.Array,p=a([].push);e.exports=function(e,t,n,r){for(var a,v,h,m=l(e),b=o(m),y=i(t,n),g=s(null),O=u(b),E=0;O>E;E++)h=b[E],(v=c(y(h,E,m)))in g?p(g[v],h):g[v]=[h];if(r&&(a=r(m))!==d)for(v in g)g[v]=f(a,g[v]);return g}},1220:function(e,t){e.exports=function(e,t){for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i}},1287:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));n(24),n(190),n(856),n(71),n(72),n(73),n(26),n(12),n(27),n(22),n(28),n(43),n(14),n(29),n(30),n(17),n(20),n(18),n(40),n(42),n(41),n(36);var r=n(0),i=n.n(r),a=n(826),o=n(221),l=n(865),c=n(857),u=n(877);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){var t=e.match.params,n=t.userAlias,f=t.strTripId,d=s(Object(r.useState)(!1),2),p=d[0],v=d[1],h=Object(o.b)(),m=h.isAuthenticated,b=h.userAlias,y=parseInt(f,10),g=Object(l.b)({domain:"travel.VisitPage",userAlias:n,tripsIds:y?[y]:[]}),O=g.visitsIds,E=g.isReady,w=g.visitsDict,S=g.isError,T=g.isPending,I=m&&b===n,j=Object(u.a)({editable:I,userAlias:n,section:"trips"});return S?i.a.createElement("div",null,"...Error"):T||!E?i.a.createElement("div",null,"...Loading"):i.a.createElement(c.e,{visitsList:O.map((function(e){return w[e]})),provision:g,groupsOrder:[c.b.TRIPS,p&&c.b.COUNTRIES,c.b.JUST_VISITS].filter(Boolean),adaptHeadersSize:[!1,!0,!0],photosSectionLevel:-1,mapSectionLevel:0,sortingOrder:[c.c.LAST_VISIT],filteringOption:c.a.ANY,isObscure:!I,urls:j,config:{YearVisitsGroup:{hyperlinks:{year:!1}}}},(function(e){var t=e.level,n=e.index;return 0===t&&0===n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(a.a,{variant:"body2",onClick:function(){return v((function(e){return!e}))}},p?"Убрать группировку по странам":"Сгруппировать по странам"))}))}},1292:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return De}));n(24),n(190),n(856),n(12),n(106),n(533),n(26),n(27),n(22),n(28),n(43),n(14),n(29),n(30),n(17),n(20),n(18),n(40),n(42),n(41),n(36);var r=n(0),i=n.n(r),a=n(219),o=n(826),l=n(221),c=n(877),u=n(857),s=(n(71),n(72),n(73),n(220),n(23),n(815)),f=n(822),d=n(833),p=n(1279),v=n(1296),h=n(96),m=n(2),b=(n(3),n(262));var y=function(e){var t=function(t){var n=e(t);return t.css?Object(m.a)(Object(m.a)({},Object(b.a)(n,e(Object(m.a)({theme:t.theme},t.css)))),function(e,t){var n={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}(t.css,[e.filterProps])):n};return t.propTypes={},t.filterProps=["css"].concat(Object(h.a)(e.filterProps)),t};var g=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(e){return t.reduce((function(t,n){var r=n(e);return r?Object(b.a)(t,r):t}),{})};return r.propTypes={},r.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),r},O=n(53),E=n(450);function w(e,t){return t&&"string"==typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}var S=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,a=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=w(e.theme,i)||{};return Object(E.a)(e,n,(function(e){var t;return"function"==typeof o?t=o(e):Array.isArray(o)?t=o[e]||e:(t=w(o,e)||e,a&&(t=a(t))),!1===r?t:Object(O.a)({},r,t)}))};return o.propTypes={},o.filterProps=[t],o};function T(e){return"number"!=typeof e?e:"".concat(e,"px solid")}var I=g(S({prop:"border",themeKey:"borders",transform:T}),S({prop:"borderTop",themeKey:"borders",transform:T}),S({prop:"borderRight",themeKey:"borders",transform:T}),S({prop:"borderBottom",themeKey:"borders",transform:T}),S({prop:"borderLeft",themeKey:"borders",transform:T}),S({prop:"borderColor",themeKey:"palette"}),S({prop:"borderRadius",themeKey:"shape"})),j=g(S({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),S({prop:"display"}),S({prop:"overflow"}),S({prop:"textOverflow"}),S({prop:"visibility"}),S({prop:"whiteSpace"})),A=g(S({prop:"flexBasis"}),S({prop:"flexDirection"}),S({prop:"flexWrap"}),S({prop:"justifyContent"}),S({prop:"alignItems"}),S({prop:"alignContent"}),S({prop:"order"}),S({prop:"flex"}),S({prop:"flexGrow"}),S({prop:"flexShrink"}),S({prop:"alignSelf"}),S({prop:"justifyItems"}),S({prop:"justifySelf"})),_=g(S({prop:"gridGap"}),S({prop:"gridColumnGap"}),S({prop:"gridRowGap"}),S({prop:"gridColumn"}),S({prop:"gridRow"}),S({prop:"gridAutoFlow"}),S({prop:"gridAutoColumns"}),S({prop:"gridAutoRows"}),S({prop:"gridTemplateColumns"}),S({prop:"gridTemplateRows"}),S({prop:"gridTemplateAreas"}),S({prop:"gridArea"})),P=g(S({prop:"position"}),S({prop:"zIndex",themeKey:"zIndex"}),S({prop:"top"}),S({prop:"right"}),S({prop:"bottom"}),S({prop:"left"})),C=g(S({prop:"color",themeKey:"palette"}),S({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"})),R=S({prop:"boxShadow",themeKey:"shadows"});function L(e){return e<=1?"".concat(100*e,"%"):e}var N=S({prop:"width",transform:L}),x=S({prop:"maxWidth",transform:L}),D=S({prop:"minWidth",transform:L}),k=S({prop:"height",transform:L}),M=S({prop:"maxHeight",transform:L}),z=S({prop:"minHeight",transform:L}),F=(S({prop:"size",cssProperty:"width",transform:L}),S({prop:"size",cssProperty:"height",transform:L}),g(N,x,D,k,M,z,S({prop:"boxSizing"}))),V=n(832),B=g(S({prop:"fontFamily",themeKey:"typography"}),S({prop:"fontSize",themeKey:"typography"}),S({prop:"fontStyle",themeKey:"typography"}),S({prop:"fontWeight",themeKey:"typography"}),S({prop:"letterSpacing"}),S({prop:"lineHeight"}),S({prop:"textAlign"})),U=n(5),H=n(8),Y=n(86),G=n.n(Y),W=n(774);function q(e,t){var n={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}var K=n(182),$=function(e){var t=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name,a=Object(U.a)(n,["name"]);var o,l=r,c="function"==typeof t?function(e){return{root:function(n){return t(Object(m.a)({theme:e},n))}}}:{root:t},u=Object(W.a)(c,Object(m.a)({Component:e,name:r||e.displayName,classNamePrefix:l},a));t.filterProps&&(o=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var s=i.a.forwardRef((function(t,n){var r=t.children,a=t.className,l=t.clone,c=t.component,s=Object(U.a)(t,["children","className","clone","component"]),f=u(t),d=Object(H.a)(f.root,a),p=s;if(o&&(p=q(p,o)),l)return i.a.cloneElement(r,Object(m.a)({className:Object(H.a)(r.props.className,d)},p));if("function"==typeof r)return r(Object(m.a)({className:d},p));var v=c||e;return(i.a.createElement(v,Object(m.a)({ref:n,className:d},p),r))}));return G()(s,e),s}}(e);return function(e,n){return t(e,Object(m.a)({defaultTheme:K.a},n))}},X=y(g(I,j,A,_,P,C,R,F,V.b,B)),J=$("div")(X,{name:"MuiBox"}),Z=n(222),Q=n(69),ee=n(10),te=n(399),ne=n(373),re=n(177),ie=n(34),ae=n(15),oe=n(123),le=Object(oe.a)(r.createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");function ce(e,t){if(null==e)return e;var n,r=Math.round(e/t)*t;return Number(r.toFixed((n=t.toString().split(".")[1])?n.length:0))}function ue(e){e.value;var t=Object(U.a)(e,["value"]);return(r.createElement("span",t))}var se=r.createElement(le,{fontSize:"inherit"});function fe(e){return"".concat(e," Star").concat(1!==e?"s":"")}var de,pe=r.forwardRef((function(e,t){var n=e.classes,i=e.className,a=e.defaultValue,o=void 0===a?null:a,l=e.disabled,c=void 0!==l&&l,u=e.emptyIcon,s=e.emptyLabelText,f=void 0===s?"Empty":s,d=e.getLabelText,p=void 0===d?fe:d,v=e.icon,h=void 0===v?se:v,b=e.IconContainerComponent,y=void 0===b?ue:b,g=e.max,O=void 0===g?5:g,E=e.name,w=e.onChange,S=e.onChangeActive,T=e.onMouseLeave,I=e.onMouseMove,j=e.precision,A=void 0===j?1:j,_=e.readOnly,P=void 0!==_&&_,C=e.size,R=void 0===C?"medium":C,L=e.value,N=Object(U.a)(e,["classes","className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"]),x=Object(te.a)(E),D=Object(ne.a)({controlled:L,default:o,name:"Rating"}),k=Object(Z.a)(D,2),M=k[0],z=k[1],F=ce(M,A),V=Object(Q.a)(),B=r.useState({hover:-1,focus:-1}),Y=B[0],G=Y.hover,W=Y.focus,q=B[1],K=F;-1!==G&&(K=G),-1!==W&&(K=W);var $=Object(re.a)(),X=$.isFocusVisible,J=$.onBlurVisible,ee=$.ref,oe=r.useState(!1),le=oe[0],de=oe[1],pe=r.useRef(),ve=Object(ie.a)(ee,pe),he=Object(ie.a)(ve,t),me=function(e){var t=parseFloat(e.target.value);z(t),w&&w(e,t)},be=function(e){0===e.clientX&&0===e.clientY||(q({hover:-1,focus:-1}),z(null),w&&parseFloat(e.target.value)===F&&w(e,null))},ye=function(e){X(e)&&de(!0);var t=parseFloat(e.target.value);q((function(e){return{hover:e.hover,focus:t}})),S&&W!==t&&S(e,t)},ge=function(e){if(-1===G){!1!==le&&(de(!1),J());q((function(e){return{hover:e.hover,focus:-1}})),S&&-1!==W&&S(e,-1)}},Oe=function(e,t){var i="".concat(x,"-").concat(String(e.value).replace(".","-")),a=r.createElement(y,{value:e.value,className:Object(H.a)(n.icon,e.filled?n.iconFilled:n.iconEmpty,e.hover&&n.iconHover,e.focus&&n.iconFocus,e.active&&n.iconActive)},u&&!e.filled?u:h);return P?r.createElement("span",Object(m.a)({key:e.value},t),a):r.createElement(r.Fragment,{key:e.value},r.createElement("label",Object(m.a)({className:n.label,htmlFor:i},t),a,r.createElement("span",{className:n.visuallyhidden},p(e.value))),r.createElement("input",{onFocus:ye,onBlur:ge,onChange:me,onClick:be,disabled:c,value:e.value,id:i,type:"radio",name:x,checked:e.checked,className:n.visuallyhidden}))};return r.createElement("span",Object(m.a)({ref:he,onMouseMove:function(e){I&&I(e);var t,n=pe.current,r=n.getBoundingClientRect(),i=r.right,a=r.left,o=n.firstChild.getBoundingClientRect().width;t="rtl"===V.direction?(i-e.clientX)/(o*O):(e.clientX-a)/(o*O);var l=ce(O*t+A/2,A);l=function(e,t,n){return e<t?t:e>n?n:e}(l,A,O),q((function(e){return e.hover===l&&e.focus===l?e:{hover:l,focus:l}})),de(!1),S&&G!==l&&S(e,l)},onMouseLeave:function(e){T&&T(e);q({hover:-1,focus:-1}),S&&-1!==G&&S(e,-1)},className:Object(H.a)(n.root,i,"medium"!==R&&n["size".concat(Object(ae.a)(R))],c&&n.disabled,le&&n.focusVisible,P&&n.readOnly),role:P?"img":null,"aria-label":P?p(K):null},N),Array.from(new Array(O)).map((function(e,t){var i=t+1;if(A<1){var a=Array.from(new Array(1/A));return(r.createElement("span",{key:i,className:Object(H.a)(n.decimal,i===Math.ceil(K)&&(-1!==G||-1!==W)&&n.iconActive)},a.map((function(e,t){var n=ce(i-1+(t+1)*A,A);return Oe({value:n,filled:n<=K,hover:n<=G,focus:n<=W,checked:n===F},{style:a.length-1===t?{}:{width:n===K?"".concat((t+1)*A*100,"%"):"0%",overflow:"hidden",zIndex:1,position:"absolute"}})}))))}return Oe({value:i,active:i===K&&(-1!==G||-1!==W),filled:i<=K,hover:i<=G,focus:i<=W,checked:i===F})})),!P&&!c&&null==F&&r.createElement(r.Fragment,null,r.createElement("input",{value:"",id:"".concat(x,"-empty"),type:"radio",name:x,defaultChecked:!0,className:n.visuallyhidden}),r.createElement("label",{className:n.pristine,htmlFor:"".concat(x,"-empty")},r.createElement("span",{className:n.visuallyhidden},f))))})),ve=Object(ee.a)((function(e){return{root:{display:"inline-flex",position:"relative",fontSize:e.typography.pxToRem(24),color:"#ffb400",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent","&$disabled":{opacity:.5,pointerEvents:"none"},"&$focusVisible $iconActive":{outline:"1px solid #999"}},sizeSmall:{fontSize:e.typography.pxToRem(18)},sizeLarge:{fontSize:e.typography.pxToRem(30)},readOnly:{pointerEvents:"none"},disabled:{},focusVisible:{},visuallyhidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,color:"#000",overflow:"hidden",padding:0,position:"absolute",top:20,width:1},pristine:{"input:focus + &":{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"}},label:{cursor:"inherit"},icon:{display:"flex",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),pointerEvents:"none"},iconEmpty:{color:e.palette.action.disabled},iconFilled:{},iconHover:{},iconFocus:{},iconActive:{transform:"scale(1.2)"},decimal:{position:"relative"}}}),{name:"MuiRating"})(pe),he=n(285);function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge=(ye(de={},he.LOCATION_RATING.PLACE_TO_LIVE,"Готов тут жить"),ye(de,he.LOCATION_RATING.FEW_PER_YEAR,"Готов бывать по нескольку раз в год"),ye(de,he.LOCATION_RATING.ONCE_PER_YEAR,"Приезжал бы каждый год"),ye(de,he.LOCATION_RATING.ONCE_PER_TWO_YEARS,"Приезжал бы раз в пару лет"),ye(de,he.LOCATION_RATING.ONCE_PER_FIVE_YEARS,"Приезжал бы раз в пять лет"),ye(de,he.LOCATION_RATING.ONCE_PER_DECADE,"Можно заглянуть раз в десятилетие"),ye(de,he.LOCATION_RATING.TWICE_PER_LIVE,"Пары посещений за всю жизнь достаточно"),ye(de,he.LOCATION_RATING.ONCE_PER_LIVE,"Одного посещения достаточно"),ye(de,he.LOCATION_RATING.NEVER,"Лучше бы тут и не бывать"),de),Oe=Object(s.a)({container:{display:"flex",alignItems:"center"},formControl:{display:"block",margin:"24px 12px",width:"100%"}});function Ee(e){var t=e.locationId,n=e.locationRating,a=e.isEditable,o=e.onSubmitLocationRating,l=Oe(),c=me(i.a.useState(n),2),u=c[0],s=c[1],h=Object(r.useCallback)((function(e){var r=e.target.value;r&&r!==n&&(s(r),o(t,e.target.value))}),[t,n]);return i.a.createElement("div",{className:l.container},Boolean(u)&&i.a.createElement(ve,{name:"locationRating",readOnly:!0,size:"large",value:we(u),precision:.5}),Boolean(!a&&u)&&i.a.createElement(J,{ml:2},ge[u]),a&&i.a.createElement(f.a,{className:l.formControl},i.a.createElement(d.a,{shrink:!0,id:"select-location-rating-label"},"Задать рейтинг"),i.a.createElement(v.a,{labelId:"select-location-rating-label",id:"select-location-rating",value:n,onChange:h},Object.values(he.LOCATION_RATING).map((function(e){return i.a.createElement(p.a,{key:e,value:e},ge[e])})))))}function we(e){return e>=7?9-Math.ceil(e):5-(e-1)/2}n(35),n(89),n(50),n(37),n(44),n(45),n(46),n(51),n(49),n(354),n(355);var Se=n(116),Te=n(136);var Ie=n(837),je=n(864),Ae=["isError","isPending","isReady"];function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Le(e){var t=e.domain,n=e.userAlias,r=e.locationId,i=Object(Ie.a)({userAlias:n}),a=i.isError,o=i.isPending,l=i.isReady,c=i.locationsIds,u=i.visitsDict,s=i.visitsIds,f=i.locationsRating,d=function(e){var t=e.domain,n=e.locationId;return{location:Object(Se.c)((function(e){return Object(Te.e)(e,"locations",n)||{}})),provision:Object(Te.g)({domain:t,isProvision:!0,modelName:"locations",observe:n,condition:Boolean(n),query:{id:n}})}}({domain:t,locationId:r}),p=d.location,v=d.provision,h=v.isError,m=v.isPending,b=v.isReady,y=Re(v,Ae),g=Object(je.b)({domain:t}).submitLocationRating,O=c.includes(r);return{provision:Pe({isError:h||a,isPending:m||o,isReady:b||l},y),location:p,isVisited:O,visitsList:O?s.map((function(e){return u[e]})).filter((function(e){return e.locationId===r})):[],locationRating:O&&f[r]||null,submitLocationRating:g,tripsStatsProvision:i}}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(e){var t=e.match.params,n=t.userAlias,s=t.strLocationId,f=t.section,d=Ne(Object(r.useState)(!1),2),p=d[0],v=d[1],h=Object(l.b)(),m=h.isAuthenticated,b=h.userAlias,y=n===b,g=n!==b,O=Object(c.a)({editable:y,userAlias:n,section:f}),E=parseInt(s,10),w=Le({domain:"travel.LocationPage",userAlias:n,locationId:E}),S=w.location,T=w.provision,I=T.isError,j=T.isPending,A=T.isReady,_=w.isVisited,P=w.visitsList,C=w.tripsStatsProvision,R=w.tripsStatsProvision.userProvision,L=w.locationRating,N=w.submitLocationRating,x=Object(r.useCallback)((function(e,t){N({query:{rating:t,id:String(e)},condition:Boolean(e)}).finally(R.invalidate)}));if(I)return i.a.createElement("div",null,"...Error");if(j||!A)return i.a.createElement("div",null,"...Loading");if(!S)return null;var D=m&&b===n;return _?i.a.createElement(u.e,{visitsList:P,provision:C,groupsOrder:[u.b.LOCATIONS,p&&u.b.YEARS,u.b.JUST_VISITS].filter(Boolean),photosSectionLevel:1,mapSectionLevel:0,sortingOrder:[u.c.LAST_VISIT],filteringOption:u.a.ANY,isObscure:g,urls:O,config:{LocationVisitsGroup:{hyperlinks:{location:!1}},StatsPanel:{appearance:{CountriesStats:!1}}}},(function(e){var t=e.level,n=e.index;return 0===t&&0===n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{variant:"body2",onClick:function(){return v((function(e){return!e}))}},p?"Убрать группировку по годам":"Сгруппировать по годам"),i.a.createElement(Ee,{locationId:E,locationRating:L,isEditable:D,onSubmitLocationRating:x}))})):i.a.createElement(a.a,{variant:"h2",component:"span"},S.locationName)}},1294:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ce}));n(24),n(190),n(856),n(12),n(106),n(533);var r=n(0),i=n.n(r),a=n(841),o=n(221),l=n(865),c=n(857),u=n(877),s=(n(537),n(17),n(20),n(18),n(71),n(72),n(73),n(353),n(64),n(43),n(953),n(921),n(14),n(29),n(30),n(40),n(42),n(41),n(36),n(23),n(105),n(115)),f=n.n(s),d=n(1029),p=n(1030),v=n(1028);const h=(e,t,n,r)=>{let i=0,a=0,o=0;const l=4*t;for(let c=0;c<t;c++)for(let t=0;t<n;t++){const n=r(c,t);i+=n*Object(p.b)(e[4*c+0+t*l]),a+=n*Object(p.b)(e[4*c+1+t*l]),o+=n*Object(p.b)(e[4*c+2+t*l])}let c=1/(t*n);return[i*c,a*c,o*c]};var m=(e,t,n,r,i)=>{if(r<1||r>9||i<1||i>9)throw new v.a("BlurHash must have between 1 and 9 components");if(t*n*4!==e.length)throw new v.a("Width and height must match the pixels array");let a=[];for(let o=0;o<i;o++)for(let i=0;i<r;i++){const r=0==i&&0==o?1:2,l=h(e,t,n,(e,a)=>r*Math.cos(Math.PI*i*e/t)*Math.cos(Math.PI*o*a/n));a.push(l)}const o=a[0],l=a.slice(1);let c,u="",s=r-1+9*(i-1);if(u+=Object(d.b)(s,1),l.length>0){let e=Math.max(...l.map(e=>Math.max(...e))),t=Math.floor(Math.max(0,Math.min(82,Math.floor(166*e-.5))));c=(t+1)/166,u+=Object(d.b)(t,1)}else c=1,u+=Object(d.b)(0,1);var f;return u+=Object(d.b)((f=o,(Object(p.a)(f[0])<<16)+(Object(p.a)(f[1])<<8)+Object(p.a)(f[2])),4),l.forEach(e=>{u+=Object(d.b)(((e,t)=>19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*Object(p.c)(e[0]/t,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*Object(p.c)(e[1]/t,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*Object(p.c)(e[2]/t,.5)+9.5)))))(e,c),2)}),u},b=n(1214),y=n.n(b);function g(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function l(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((r=r.apply(e,t||[])).next())}))}function O(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function E(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}var w=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function S(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=w.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!=typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof t?t:"string"==typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var T=[".DS_Store","Thumbs.db"];function I(e){return g(this,void 0,void 0,(function(){return O(this,(function(t){return[2,(n=e,n.dataTransfer&&e.dataTransfer?A(e.dataTransfer,e.type):j(e))];var n}))}))}function j(e){return(null!==e.target&&e.target.files?P(e.target.files):[]).map((function(e){return S(e)}))}function A(e,t){return g(this,void 0,void 0,(function(){var n;return O(this,(function(r){switch(r.label){case 0:return e.items?(n=P(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(C))]):[3,2];case 1:return[2,_(R(r.sent()))];case 2:return[2,_(P(e.files).map((function(e){return S(e)})))]}}))}))}function _(e){return e.filter((function(e){return-1===T.indexOf(e.name)}))}function P(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function C(e){if("function"!=typeof e.webkitGetAsEntry)return L(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?x(t):L(e)}function R(e){return e.reduce((function(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(E(arguments[t]));return e}(e,Array.isArray(t)?R(t):[t])}),[])}function L(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=S(t);return Promise.resolve(n)}function N(e){return g(this,void 0,void 0,(function(){return O(this,(function(t){return[2,e.isDirectory?x(e):D(e)]}))}))}function x(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function i(){var a=this;t.readEntries((function(t){return g(a,void 0,void 0,(function(){var a,o,l;return O(this,(function(c){switch(c.label){case 0:if(t.length)return[3,5];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return a=c.sent(),e(a),[3,4];case 3:return o=c.sent(),n(o),[3,4];case 4:return[3,6];case 5:l=Promise.all(t.map(N)),r.push(l),i(),c.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function D(e){return g(this,void 0,void 0,(function(){return O(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=S(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var k=n(1217),M=n.n(k);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var F=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:"file-invalid-type",message:"File type must be ".concat(t)}},V=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," bytes")}},B=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," bytes")}},U={code:"too-many-files",message:"Too many files"};function H(e,t){var n="application/x-moz-file"===e.type||M()(e,t);return[n,n?null:F(t)]}function Y(e,t,n){if(G(e.size))if(G(t)&&G(n)){if(e.size>n)return[!1,V(n)];if(e.size<t)return[!1,B(t)]}else{if(G(t)&&e.size<t)return[!1,B(t)];if(G(n)&&e.size>n)return[!1,V(n)]}return[!0,null]}function G(e){return null!=e}function W(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize;return!(!e.multiple&&t.length>1)&&t.every((function(e){var t=z(H(e,n),1)[0],a=z(Y(e,r,i),1)[0];return t&&a}))}function q(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function K(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function $(e){e.preventDefault()}function X(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function J(e){return-1!==e.indexOf("Edge/")}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return X(e)||J(e)}function Q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some((function(t){return!q(e)&&t&&t.apply(void 0,[e].concat(r)),q(e)}))}}function ee(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var oe=Object(r.forwardRef)((function(e,t){var n=e.children,a=ce(ae(e,["children"])),o=a.open,l=ae(a,["open"]);return Object(r.useImperativeHandle)(t,(function(){return{open:o}}),[o]),i.a.createElement(r.Fragment,null,n(re({},l,{open:o})))}));oe.displayName="Dropzone",oe.propTypes={children:y.a.func,accept:y.a.oneOfType([y.a.string,y.a.arrayOf(y.a.string)]),multiple:y.a.bool,preventDropOnDocument:y.a.bool,noClick:y.a.bool,noKeyboard:y.a.bool,noDrag:y.a.bool,noDragEventsBubbling:y.a.bool,minSize:y.a.number,maxSize:y.a.number,disabled:y.a.bool,getFilesFromEvent:y.a.func,onFileDialogCancel:y.a.func,onDragEnter:y.a.func,onDragLeave:y.a.func,onDragOver:y.a.func,onDrop:y.a.func,onDropAccepted:y.a.func,onDropRejected:y.a.func};var le={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.accept,n=e.disabled,i=void 0!==n&&n,a=e.getFilesFromEvent,o=void 0===a?I:a,l=e.maxSize,c=void 0===l?1/0:l,u=e.minSize,s=void 0===u?0:u,f=e.multiple,d=void 0===f||f,p=e.onDragEnter,v=e.onDragLeave,h=e.onDragOver,m=e.onDrop,b=e.onDropAccepted,y=e.onDropRejected,g=e.onFileDialogCancel,O=e.preventDropOnDocument,E=void 0===O||O,w=e.noClick,S=void 0!==w&&w,T=e.noKeyboard,j=void 0!==T&&T,A=e.noDrag,_=void 0!==A&&A,P=e.noDragEventsBubbling,C=void 0!==P&&P,R=Object(r.useRef)(null),L=Object(r.useRef)(null),N=Object(r.useReducer)(ue,le),x=te(N,2),D=x[0],k=x[1],M=D.isFocused,z=D.isFileDialogActive,F=D.draggedFiles,V=Object(r.useCallback)((function(){L.current&&(k({type:"openDialog"}),L.current.value=null,L.current.click())}),[k]),B=function(){z&&setTimeout((function(){L.current&&(L.current.files.length||(k({type:"closeDialog"}),"function"==typeof g&&g()))}),300)};Object(r.useEffect)((function(){return window.addEventListener("focus",B,!1),function(){window.removeEventListener("focus",B,!1)}}),[L,z,g]);var G=Object(r.useCallback)((function(e){R.current&&R.current.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),V()))}),[R,L]),X=Object(r.useCallback)((function(){k({type:"focus"})}),[]),J=Object(r.useCallback)((function(){k({type:"blur"})}),[]),ne=Object(r.useCallback)((function(){S||(Z()?setTimeout(V,0):V())}),[L,S]),oe=Object(r.useRef)([]),ce=function(e){R.current&&R.current.contains(e.target)||(e.preventDefault(),oe.current=[])};Object(r.useEffect)((function(){return E&&(document.addEventListener("dragover",$,!1),document.addEventListener("drop",ce,!1)),function(){E&&(document.removeEventListener("dragover",$),document.removeEventListener("drop",ce))}}),[R,E]);var se=Object(r.useCallback)((function(e){e.preventDefault(),e.persist(),be(e),oe.current=[].concat(ee(oe.current),[e.target]),K(e)&&Promise.resolve(o(e)).then((function(t){q(e)&&!C||(k({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),p&&p(e))}))}),[o,p,C]),fe=Object(r.useCallback)((function(e){if(e.preventDefault(),e.persist(),be(e),e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return K(e)&&h&&h(e),!1}),[h,C]),de=Object(r.useCallback)((function(e){e.preventDefault(),e.persist(),be(e);var t=oe.current.filter((function(e){return R.current&&R.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),oe.current=t,t.length>0||(k({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),K(e)&&v&&v(e))}),[R,v,C]),pe=Object(r.useCallback)((function(e){e.preventDefault(),e.persist(),be(e),oe.current=[],K(e)&&Promise.resolve(o(e)).then((function(n){if(!q(e)||C){var r=[],i=[];n.forEach((function(e){var n=te(H(e,t),2),a=n[0],o=n[1],l=te(Y(e,s,c),2),u=l[0],f=l[1];if(a&&u)r.push(e);else{var d=[o,f].filter((function(e){return e}));i.push({file:e,errors:d})}})),!d&&r.length>1&&(r.forEach((function(e){i.push({file:e,errors:[U]})})),r.splice(0)),k({acceptedFiles:r,fileRejections:i,type:"setFiles"}),m&&m(r,i,e),i.length>0&&y&&y(i,e),r.length>0&&b&&b(r,e)}})),k({type:"reset"})}),[d,t,s,c,o,m,b,y,C]),ve=function(e){return i?null:e},he=function(e){return j?null:ve(e)},me=function(e){return _?null:ve(e)},be=function(e){C&&e.stopPropagation()},ye=Object(r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onKeyDown,a=e.onFocus,o=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,s=e.onDragLeave,f=e.onDrop,d=ae(e,["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return re(ie({onKeyDown:he(Q(r,G)),onFocus:he(Q(a,X)),onBlur:he(Q(o,J)),onClick:ve(Q(l,ne)),onDragEnter:me(Q(c,se)),onDragOver:me(Q(u,fe)),onDragLeave:me(Q(s,de)),onDrop:me(Q(f,pe))},n,R),i||j?{}:{tabIndex:0},{},d)}}),[R,G,X,J,ne,se,fe,de,pe,j,_,i]),ge=Object(r.useCallback)((function(e){e.stopPropagation()}),[]),Oe=Object(r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refKey,r=void 0===n?"ref":n,i=e.onChange,a=e.onClick,o=ae(e,["refKey","onChange","onClick"]),l=ie({accept:t,multiple:d,type:"file",style:{display:"none"},onChange:ve(Q(i,pe)),onClick:ve(Q(a,ge)),autoComplete:"off",tabIndex:-1},r,L);return re({},l,{},o)}}),[L,t,d,pe,i]),Ee=F.length,we=Ee>0&&W({files:F,accept:t,minSize:s,maxSize:c,multiple:d}),Se=Ee>0&&!we;return re({},D,{isDragAccept:we,isDragReject:Se,isFocused:M&&!i,getRootProps:ye,getInputProps:Oe,rootRef:R,inputRef:L,open:ve(V)})}function ue(e,t){switch(t.type){case"focus":return re({},e,{isFocused:!0});case"blur":return re({},e,{isFocused:!1});case"openDialog":return re({},e,{isFileDialogActive:!0});case"closeDialog":return re({},e,{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive;return re({},e,{draggedFiles:t.draggedFiles,isDragActive:n});case"setFiles":return re({},e,{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return re({},e,{isFileDialogActive:!1,isDragActive:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]});default:return e}}var se=n(815);n(35),n(26),n(27),n(22),n(28),n(50),n(37),n(44),n(45),n(46),n(51),n(49);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),r=n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),a:t}:{r:0,g:0,b:0,a:0};return"rgba(".concat(r.r,",").concat(r.g,",").concat(r.b,",").concat(r.a,")")}var he=80*Math.cos(45/360*2*Math.PI);function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=ve(e,t);return{background:"repeating-linear-gradient(\n      ".concat(45,"deg,\n      ").concat("#FFF",",\n      ").concat("#FFF"," ").concat(20,"px,\n      ").concat(n," ").concat(20,"px,\n      ").concat(n," ").concat(40,"px\n    )"),backgroundSize:"calc(100% + ".concat(he,"px)")}}function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t,n,r,i,a,o){try{var l=e[a](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function Oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ge(a,r,i,o,l,"next",e)}function l(e){ge(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Se=Object(se.a)((function(e){return{dropzoneContainer:{display:"flex",flexDirection:"column",justifyContent:"space-around",height:"100%",minHeight:"144px",padding:"0 12px",margin:"12px 0",cursor:"pointer"},dropzoneStandby:{"& $dropzoneContainer":de({border:"2px dashed ".concat(e.palette.primary.dark),borderRadius:"4px"},me(e.palette.primary.light,.2)),"& $dropzoneUpload":de(de({borderColor:e.palette.disabled.dark},me(e.palette.disabled.main,.2)),{},{animation:"$slide 2s infinite linear forwards"})},dropzoneActive:de(de({border:"2px dashed ".concat(e.palette.secondary.dark),animation:"$slide 2s infinite linear forwards"},me(e.palette.secondary.light)),{},{"&$dropzoneAccept":de(de({borderColor:e.palette.secondary.dark},me(e.palette.secondary.main)),{},{animation:"$slide 2s infinite linear forwards"}),"&$dropzoneReject":de(de({borderColor:e.palette.error.dark},me(e.palette.error.main)),{},{animation:"$slide 2s infinite linear forwards"})}),dropzoneAccept:{},dropzoneReject:{},dropzoneUpload:{},"@keyframes slide":{"0%":{backgroundPositionX:"-".concat(he,"px")},"100%":{backgroundPositionX:0}}}}));function Te(e){var t,n=e.onUpload,a=e.visit,o=Se(),l=Ee(Object(r.useState)(null),2),c=l[0],u=l[1],s=Ee(Object(r.useState)([]),2),d=s[0],p=s[1],v=null!==c,h=a.visitId,m=ce({accept:"image/jpeg, image/png",disabled:v,onDrop:Object(r.useCallback)(function(){var e=Oe(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r&&p(r),u(1),e.t0=n,e.t1=h,e.t2=t,e.next=7,Promise.all(t.map(Ae));case 7:return e.t3=e.sent,e.t4={id:e.t1,data:e.t2,meta:e.t3,isAsset:!0},e.abrupt("return",(0,e.t0)(e.t4).finally((function(){return u(null)})));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),maxSize:5242880,minSize:51200}),b=m.getRootProps,y=m.getInputProps,g=m.isDragActive,O=m.isDragAccept,E=m.isDragReject;return i.a.createElement("div",be({},b(),{className:f()((t={},ye(t,o.dropzoneStandby,!g),ye(t,o.dropzoneActive,g),ye(t,o.dropzoneAccept,O),ye(t,o.dropzoneReject,E),t))}),i.a.createElement("div",{className:f()(o.dropzoneContainer,ye({},o.dropzoneUpload,v))},i.a.createElement("input",y()),function(e){var t=e.isDragActive;switch(!0){case e.isUploadInProgress:return"Идет загрузка, пожалуйста не закрывайте браузер";case t:return"Загрузить фотографии";default:return"Перенесите сюда фотографии для загрузки или кликните, что-бы выбрать файлы"}}({isDragActive:g,isUploadInProgress:v}),d.length>0&&i.a.createElement("div",null,"Не удалось загрузить следующие файлы:",d.map((function(e){return i.a.createElement("div",{key:e.path},(n=(t=e).file,r=t.errors.map((function(e){return e.message})).join(", "),"".concat(n.path," - ").concat(n.size," bytes, reason: ").concat(r)));var t,n,r})))))}function Ie(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height)}function je(e,t){var n=Math.abs(e),r=Math.abs(t),i=n;for(r>n&&(i=n,n=r,r=i);;){if(0===r)return e;if(0===(n%=r))return t;r%=n}}function Ae(e){return _e.apply(this,arguments)}function _e(){return(_e=Oe(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=URL.createObjectURL(t),r=new Image;r.onload=function(){var t=je(r.width,r.height),n=Ee(t?[r.width/t,r.height/t]:[r.width,r.height],2),i=n[0],a=n[1];try{var o=Ie(r);e({aspect_ratio:"".concat(i,":").concat(a),blurhash:m(o.data,o.width,o.height,4,4)})}catch(t){e({aspect_ratio:"".concat(i,":").concat(a),blurhash:null})}},r.src=n})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pe="travel.VisitPage";function Ce(e){var t=e.match.params,n=t.userAlias,r=t.strVisitId,s=t.section,f=Object(o.b)(),d=f.isAuthenticated,p=f.userAlias,v=parseInt(r,10),h=Object(l.c)({domain:Pe,userAlias:n,visitId:v}),m=h.isError,b=h.isPending,y=h.visit,g=h.invalidate,O=Object(l.b)({domain:Pe,userAlias:n,tripsIds:null!=y&&y.tripId?[y.tripId]:[]}),E=Object(l.a)({domain:Pe,userAlias:n,visitId:v}).submitVisitPhoto,w=d&&p===n,S=Object(u.a)({editable:w,userAlias:n,section:s});return m?i.a.createElement("div",null,"...Error"):b?i.a.createElement("div",null,"...Loading"):y?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.e,{visitsList:[y],provision:O,groupsOrder:[c.b.JUST_VISITS],adaptHeadersSize:!0,photosSectionLevel:0,mapSectionLevel:0,sortingOrder:[c.c.LAST_VISIT],filteringOption:c.a.ANY,isObscure:!w,urls:S,config:{YearVisitsGroup:{hyperlinks:{year:!1}}}},(function(e){var t=e.level,n=e.index,r=e.className;return 0===t&&0===n&&i.a.createElement(a.a,{className:r,variant:"body2",to:S.resolveTripUrl({tripId:y.tripId})},"вся поездка")})),w&&i.a.createElement(Te,{visit:y,userAlias:n,onUpload:function(e){return E(e).finally(g)}})):i.a.createElement("div",null,"...Не найдено посещение")}},1295:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return le}));n(24),n(190),n(1218),n(71),n(72),n(73);var r=n(0),i=n.n(r),a=n(865),o=n(828),l=n(1280),c=n(815),u=Object(c.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function s(){var e=u();return(i.a.createElement(o.a,{className:e.backdrop,open:!0},i.a.createElement(l.a,{color:"inherit"})))}var f,d,p=n(178),v=n(221),h=(n(354),n(355),n(220),n(868),n(12),n(869),n(22),n(870),n(43),n(14),n(29),n(30),n(17),n(20),n(18),n(40),n(42),n(41),n(36),n(23),n(819)),m=n(820),b=n(822),y=n(833),g=n(1296),O=n(1279),E=n(231),w=n(857);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T,I,j="loc",A="c",_="yr",P="yr_c",C="c_yr",R="t",L="t_c",N=(S(f={},j,w.b.LOCATIONS),S(f,A,w.b.COUNTRIES),S(f,_,w.b.YEARS),S(f,R,w.b.TRIPS),f),x={RATING_ALPHABET:"r_a",VISITS_ALPHABET:"v_a",FIRST_VISIT_ALPHABET:"fv_a",LAST_VISIT_ALPHABET:"lv_a",ALPHABET:"a"},D=x.ALPHABET,k={a:w.c.ALPHABET,r:w.c.RATING,fv:w.c.FIRST_VISIT,lv:w.c.LAST_VISIT,v:w.c.VISITS_COUNT},M={ANY:"a",FOREIGN:"f",DOMESTIC:"d"},z=M.ANY,F=(S(d={},M.ANY,w.a.ANY),S(d,M.FOREIGN,w.a.FOREIGN),S(d,M.DOMESTIC,w.a.DOMESTIC),d);function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B={TRIPS:"trips",PLACES:"places"},U=B.TRIPS,H=(V(T={},B.PLACES,[{key:j,l10n:"По городам"},{key:A,l10n:"По странам"},{key:_,l10n:"По годам"},{key:P,l10n:"По годам и странам"},{key:C,l10n:"По странам и годам"}]),V(T,B.TRIPS,[{key:R,l10n:"По поездкам"},{key:L,l10n:"По поездкам и странам"}]),T),Y=(V(I={},B.PLACES,A),V(I,B.TRIPS,R),I);function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=Object(c.a)({formControl:{width:"100%"}}),$=function(e,t,n){var r=K(),a=t||{},o=a.group,l=a.sort,c=a.filter,u=function(e){return Object.values(x).includes(e)?e:D}(l),s=function(e){return Object.values(M).includes(e)?e:z}(c),f=W(function(e,t){var n=Object.values(B).includes(t)?t:U,r=H[n]||[];return[r.find((function(t){return t.key===e}))?e:Y[n],r]}(o,n),2),d=f[0],p=f[1];return Object(E.b)((function(t){var n=t.closeSidebar;return(i.a.createElement(h.a,null,i.a.createElement(m.a,null,i.a.createElement(b.a,{className:r.formControl},i.a.createElement(y.a,{shrink:!0,id:"select-groupBy-filter-label"},"Сгруппировать"),i.a.createElement(g.a,{labelId:"select-groupBy-filter-label",autoWidth:!0,id:"select-groupBy-filter",value:d,onChange:function(t){n(),e(G({},"group",t.target.value))}},p.map((function(e){return i.a.createElement(O.a,{key:e.key,value:e.key},e.l10n)}))))),d!==R&&i.a.createElement(m.a,null,i.a.createElement(b.a,{className:r.formControl},i.a.createElement(y.a,{shrink:!0,id:"select-sortBy-filter-label"},"Сортировать"),i.a.createElement(g.a,{labelId:"select-sortBy-filter-label",autoWidth:!0,id:"select-sortBy-filter",value:u,onChange:function(t){n(),e(G({},"sort",t.target.value))}},i.a.createElement(O.a,{value:x.ALPHABET},"По алфавиту"),i.a.createElement(O.a,{value:x.VISITS_ALPHABET},"По числу посещений"),i.a.createElement(O.a,{value:x.FIRST_VISIT_ALPHABET},"По первому посещению"),i.a.createElement(O.a,{value:x.LAST_VISIT_ALPHABET},"По последнему посещению"),i.a.createElement(O.a,{value:x.RATING_ALPHABET},"По рейтингу")))),i.a.createElement(m.a,null,i.a.createElement(b.a,{className:r.formControl},i.a.createElement(y.a,{shrink:!0,id:"select-filterBy-filter-label"},"Фильтровать"),i.a.createElement(g.a,{labelId:"select-filterBy-filter-label",autoWidth:!0,id:"select-filterBy-filter",value:s,onChange:function(t){n(),e(G({},"filter",t.target.value))}},i.a.createElement(O.a,{value:M.ANY},"Показать все"),i.a.createElement(O.a,{value:M.FOREIGN},"Только зарубежные"),i.a.createElement(O.a,{value:M.DOMESTIC},"Только местные"))))))}),[d,u,s]),{groupBy:d,sortBy:u,filterBy:s}};var X=n(877),J=n(122),Z=n(219),Q=n(826),ee=n(829),te=n(1032),ne=n.n(te);function re(e){var t=e.tripCreateUrl,n=e.locationsUrl,r=e.stats,a=r.locationsStats.total,o=r.countriesStats.total;return(i.a.createElement(Z.a,{variant:"h6",paragraph:!0},i.a.createElement("span",null,"Всего "),i.a.createElement(Q.a,{to:n,component:J.b},"".concat(a," городов ")),i.a.createElement("span",null,"из "),i.a.createElement("span",null,"".concat(o," стран")),t?i.a.createElement(ee.a,{href:t,"data-locator":"ADD_TRIP_BUTTON"},i.a.createElement(ne.a,null)):null))}n(289);function ie(e){var t=e.split("_").map((function(e){return N[e]})),n=t.includes(w.b.TRIPS),r=t[t.length-1];return n||r===w.b.LOCATIONS||t.push(w.b.LOCATIONS),n&&t.push(w.b.JUST_VISITS),t}function ae(e){return e.split("_").map((function(e){return k[e]}))}function oe(e){return F[e]}function le(e){var t=e.match.params,n=t.userAlias,r=t.section,o=Object(v.b)().userAlias,l=n===o,c=n!==o,u=Object(p.b)(),f=u.queryFilter,d=u.setQueryFilter,h=$(d,f,r),m=h.groupBy,b=h.sortBy,y=h.filterBy,g=Object(a.b)({userAlias:n}),O=g.isPending,E=g.isError,S=Object(X.a)({editable:l,userAlias:n,section:r});if(E)return i.a.createElement("div",null,"...Error");if(O)return i.a.createElement(s,null);var T=g.visitsIds,I=g.visitsDict,j=T.map((function(e){return I[e]})),A={visitsList:j,parent:null,field:null},_=Object(w.d)(A,g);return i.a.createElement(i.a.Fragment,null,i.a.createElement(re,{locationsUrl:S.locationsUrl,tripCreateUrl:S.tripCreateUrl,stats:_}),i.a.createElement(w.e,{visitsList:j,provision:g,groupsOrder:ie(m),sortingOrder:"trips"===r?[w.c.LAST_VISIT]:ae(b),filteringOption:oe(y),adaptHeadersSize:!0,isObscure:c,urls:S,virtualize:!0}))}},1299:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));n(24),n(190),n(856),n(354),n(355),n(71),n(72),n(73);var r,i=n(0),a=n.n(i),o=n(815),l=n(221),c=(n(23),n(3)),u=n.n(c),s=n(822),f=n(833),d=n(1296),p=n(1279),v=n(285);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=(h(r={},v.LOCATION_RATING.PLACE_TO_LIVE,"Жил бы здесь"),h(r,v.LOCATION_RATING.FEW_PER_YEAR,"Несколько раз в год"),h(r,v.LOCATION_RATING.ONCE_PER_YEAR,"Раз в год"),h(r,v.LOCATION_RATING.ONCE_PER_TWO_YEARS,"Раз в пару лет"),h(r,v.LOCATION_RATING.ONCE_PER_FIVE_YEARS,"Раз в пять лет"),h(r,v.LOCATION_RATING.ONCE_PER_DECADE,"Раз в десятилетие"),h(r,v.LOCATION_RATING.TWICE_PER_LIVE,"Пару раз в жизни"),h(r,v.LOCATION_RATING.ONCE_PER_LIVE,"Раз в жизни"),h(r,v.LOCATION_RATING.NEVER,"Никогда"),r),b=Object(o.a)({formControl:{width:"100%"}});function y(e){var t=e.locationId,n=e.locationRating,r=e.isEditable,i=e.onSubmitLocationRating,o=b();return r?a.a.createElement(s.a,{className:o.formControl},a.a.createElement(f.a,{shrink:!0,id:"select-location-rating-label"},"Я бы ездил сюда"),a.a.createElement(d.a,{labelId:"select-location-rating-label",id:"select-location-rating",value:n,onChange:function(e){i(e,t,e.target.value)}},a.a.createElement(p.a,{value:v.LOCATION_RATING.PLACE_TO_LIVE},m[v.LOCATION_RATING.PLACE_TO_LIVE]),a.a.createElement(p.a,{value:v.LOCATION_RATING.FEW_PER_YEAR},m[v.LOCATION_RATING.FEW_PER_YEAR]),a.a.createElement(p.a,{value:v.LOCATION_RATING.ONCE_PER_YEAR},m[v.LOCATION_RATING.ONCE_PER_YEAR]),a.a.createElement(p.a,{value:v.LOCATION_RATING.ONCE_PER_TWO_YEARS},m[v.LOCATION_RATING.ONCE_PER_TWO_YEARS]),a.a.createElement(p.a,{value:v.LOCATION_RATING.ONCE_PER_FIVE_YEARS},m[v.LOCATION_RATING.ONCE_PER_FIVE_YEARS]),a.a.createElement(p.a,{value:v.LOCATION_RATING.ONCE_PER_DECADE},m[v.LOCATION_RATING.ONCE_PER_DECADE]),a.a.createElement(p.a,{value:v.LOCATION_RATING.TWICE_PER_LIVE},m[v.LOCATION_RATING.TWICE_PER_LIVE]),a.a.createElement(p.a,{value:v.LOCATION_RATING.ONCE_PER_LIVE},m[v.LOCATION_RATING.ONCE_PER_LIVE]),a.a.createElement(p.a,{value:v.LOCATION_RATING.NEVER},m[v.LOCATION_RATING.NEVER]))):a.a.createElement("div",null,m[n])}y.propTypes={locationRating:u.a.number,locationId:u.a.number.isRequired,isEditable:u.a.bool.isRequired,onSubmitLocationRating:u.a.func.isRequired},y.defaultProps={locationRating:null};n(876);var g=n(837),O=n(864);var E=Object(o.a)({container:{fontSize:"16px",lineHeight:"1.5"},visitContainer:{margin:"20px 0"},location:{fontWeight:"bold",fontSize:"21px"},googleMapContainer:{margin:"12px 0",width:"800px",maxWidth:"100%",height:"400px",maxHeight:"100%"}});function w(e){var t=e.match.params,n=t.userAlias,r=t.strLocationId,o=E(),c=Object(l.b)(),u=c.isAuthenticated,s=c.userAlias,f=function(e){var t=e.domain,n=e.userAlias,r=Object(g.a)({userAlias:n}),i=r.isError,a=r.isPending,o=r.locationsDict,l=r.locationsIds;return{isError:i,isPending:a,locationsDict:o,locationsIds:void 0===l?[]:l,locationsRating:r.locationsRating,submitLocationRating:Object(O.b)({domain:t}).submitLocationRating}}({domain:"travel.LocationsPage",userAlias:n}),d=f.isError,p=f.isPending,v=f.locationsDict,h=f.locationsIds,m=f.locationsRating,b=f.submitLocationRating,w=parseInt(r,10),S=w?[w]:h,T=Object(i.useCallback)((function(e,t,n){b({query:{rating:n,id:String(t)},condition:Boolean(t)})}));if(d)return a.a.createElement("div",null,"...Error");if(p)return a.a.createElement("div",null,"...Loading");if(w&&!h.includes(w))return a.a.createElement("div",null,"Путешественик ".concat(n," еще не посетил данную локацию"));var I=u&&s===n;return(a.a.createElement("div",{className:o.container},S.map((function(e){var t=v[e];if(!t)return null;var n=t.locationName;return(a.a.createElement(a.a.Fragment,{key:e},a.a.createElement("h1",{className:o.location},n),a.a.createElement(y,{locationId:e,locationRating:m[e],isEditable:I,onSubmitLocationRating:T})))}))))}},1304:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));n(24),n(190),n(856),n(26),n(12),n(27),n(22),n(28),n(43),n(14),n(29),n(30),n(17),n(20),n(18),n(40),n(42),n(41),n(36);var r=n(0),i=n.n(r),a=n(219),o=n(826),l=n(221),c=n(877),u=n(857),s=(n(354),n(355),n(71),n(72),n(73),n(837));function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=e.match.params,n=t.userAlias,d=t.strCountryId,p=t.section,v=f(Object(r.useState)(!1),2),h=v[0],m=v[1],b=Object(l.b)().userAlias,y=Object(c.a)({editable:!1,userAlias:n,section:p}),g=n!==b,O=function(e){var t=e.userAlias,n=e.countryId,r=Object(s.a)({userAlias:t}),i=r.countriesIds,a=r.countriesDict,o=r.visitsDict,l=r.visitsIds,c=i.includes(n);return{provision:r,country:a[n],isVisited:c,visitsList:c?l.map((function(e){return o[e]})).filter((function(e){return e.countryId===n})):[]}}({userAlias:n,countryId:parseInt(d,10)}),E=O.country,w=O.provision,S=O.provision,T=S.isError,I=S.isPending,j=S.isReady,A=O.isVisited,_=O.visitsList;return T?i.a.createElement("div",null,"...Error"):I||!j?i.a.createElement("div",null,"...Loading"):E?A?i.a.createElement(u.e,{visitsList:_,provision:w,groupsOrder:[u.b.COUNTRIES,h&&u.b.YEARS,u.b.LOCATIONS].filter(Boolean),sortingOrder:[u.c.LAST_VISIT],filteringOption:u.a.ANY,isObscure:g,urls:y,config:{CountryVisitsGroup:{hyperlinks:{country:!1}}}},(function(e){var t=e.level,n=e.index;return 0===t&&0===n&&i.a.createElement(o.a,{variant:"body2",onClick:function(){return m((function(e){return!e}))}},h?"Убрать группировку по годам":"Сгруппировать по годам")})):i.a.createElement(a.a,{variant:"h2",component:"span"},E.countryName):null}},1305:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));n(24),n(190),n(856),n(26),n(12),n(27),n(22),n(28),n(43),n(14),n(29),n(30),n(17),n(20),n(18),n(40),n(42),n(41),n(36);var r=n(0),i=n.n(r),a=n(219),o=n(826),l=n(221),c=n(877),u=n(857),s=(n(71),n(72),n(73),n(837));function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=e.match.params,n=t.userAlias,d=t.strYear,p=t.section,v=f(Object(r.useState)(!1),2),h=v[0],m=v[1],b=Object(l.b)().userAlias,y=n===b,g=n!==b,O=Object(c.a)({editable:y,userAlias:n,section:p}),E=parseInt(d,10),w=function(e){var t=e.userAlias,n=e.year,r=Object(s.a)({userAlias:t}),i=r.visitsDict;return{provision:r,visitsList:r.visitsIds.map((function(e){return i[e]})).filter((function(e){var t=e.arrivalYear;return n===t}))}}({domain:"travel.LocationPage",userAlias:n,year:E}),S=w.provision,T=w.provision,I=T.isError,j=T.isPending,A=T.isReady,_=w.visitsList;return I?i.a.createElement("div",null,"...Error"):j||!A?i.a.createElement("div",null,"...Loading"):_.length?i.a.createElement(u.e,{visitsList:_,provision:S,groupsOrder:[u.b.YEARS,h&&u.b.COUNTRIES,u.b.JUST_VISITS].filter(Boolean),photosSectionLevel:1,mapSectionLevel:0,sortingOrder:[u.c.LAST_VISIT],filteringOption:u.a.ANY,isObscure:g,urls:O,config:{YearVisitsGroup:{hyperlinks:{year:!1}}}},(function(e){var t=e.level,n=e.index;return 0===t&&0===n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{variant:"body2",onClick:function(){return m((function(e){return!e}))}},h?"Убрать группировку по странам":"Сгруппировать по странам"))})):i.a.createElement(a.a,{variant:"h2",component:"span"},E)}},837:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));n(23),n(35),n(14),n(50),n(37),n(44),n(45),n(46),n(51),n(49),n(89),n(26),n(12),n(27),n(22),n(28),n(353),n(64),n(79),n(71),n(72),n(73),n(41),n(20),n(17),n(356),n(357),n(358),n(360),n(359),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(18),n(872),n(873),n(874),n(875);var r=n(0),i=n(116),a=n(863),o=n.n(a),l=n(855),c=n.n(l),u=n(136),s=n(48),f=(n(378),n(379),n(380),n(375),n(376),n(377),n(868),n(869),n(870),n(934)),d=n.n(f);var p=n(876),v=n(845),h=n(864),m=["user"];function b(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t=e.userAlias,n=e.tripsIds,r=function(e){var t=e.userAlias,n=e.tripsIds,r=Object(i.c)((function(e){return{tripsDict:Object(u.c)(e,"trips")||{}}})).tripsDict,a=!n,o=!a&&n.filter((function(e){return!r[e]})),l=o?o.join(","):"*",c=a?{}:{id:{comparator:"in",value:o}};return Object(u.g)({domain:"travel.trips-".concat(t,"-").concat(l),isProvision:!0,modelName:"trips",observe:t,condition:a||o.length>0,query:{userAlias:t,navigation:{isDisabled:!0},filter:g({user_alias:{comparator:"=",value:t}},c)}})}({userAlias:t,tripsIds:n}),a=Object(p.a)({domain:"travel.trips-".concat(t,".user"),userAlias:t}),o=a.user,l=(o=void 0===o?{}:o).locationsRating,c=void 0===l?{}:l,f=b(a,m),y=(n?{data:n}:Object(s.o)(r)||{}).data,O=void 0===y?[]:y,E=Object(i.c)((function(e){return{tripsDict:Object(u.c)(e,"trips")||{},visitsDict:Object(u.c)(e,"visits")||{},ridesDict:Object(u.c)(e,"rides")||{},countriesDict:Object(u.c)(e,"countries")||{},locationsDict:Object(u.c)(e,"locations")||{}}})),T=E.tripsDict,I=E.visitsDict,j=E.ridesDict,A=E.countriesDict,_=E.locationsDict,P=S(O,T,"visits"),C=S(O,T,"rides"),R=S(P,I,"countryId"),L=S(P,I,"locationId"),N=Object(v.a)(),x=Object(h.a)({domain:"travel.locations-".concat(t),locationsIds:L}),D=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{updatesCounter:d()(t.map(s.p)),isReady:t.every(s.i),isPending:t.some(s.h),isValid:t.every(s.k),error:t.find(s.g),errors:t.map(s.f).filter(Boolean),invalidate:function(){return t.forEach((function(e){return(0,e.invalidate)()}))}}}(r,f,N,x);return{userProvision:f,tripsProvision:r,countriesProvision:N,locationsProvision:x,isError:D.isError,isValid:D.isValid,isReady:D.isReady,isPending:D.isPending,tripsIds:O,tripsDict:T,visitsIds:P,visitsDict:I,ridesIds:C,ridesDict:j,ridesStats:w(C,j),locationsIds:L,locationsDict:_,locationsRating:c,countriesIds:R,countriesDict:A}}function w(e,t){return{earliestDeparture:new Date(c()(e.map((function(e){var n;return null===(n=t[e])||void 0===n?void 0:n.departureDateTime.getTime()})))),latestArrival:new Date(o()(e.map((function(e){var n;return null===(n=t[e])||void 0===n?void 0:n.arrivalDateTime.getTime()}))))}}function S(e,t,n){return Object(r.useMemo)((function(){return Array.from(new Set(e.flatMap((function(e){var r;return(null===(r=t[e])||void 0===r?void 0:r[n])||[]}))))}),[e,t,n])}},841:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(35),n(89),n(14),n(105);var r=n(0),i=n.n(r),a=n(122),o=n(826),l=n(219),c=["optional","children"];function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f(e){var t=e.optional,n=e.children,r=s(e,c);return Boolean(!t||r.href||r.to||r.onClick)?i.a.createElement(o.a,u({},r,{component:a.b}),n):i.a.createElement(l.a,r,n)}f.defaultProps={optional:!1}},842:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return m}));n(64);var r=n(226),i=n(893),a=n(894),o=n(847),l=n(852),c="d MMMM yyyy",u="LLLL yyyy",s="LLLL",f="d MMMM",d="d";function p(e,t,n){var p=n?u:c,v=Object(l.a)(t,p,{locale:o.a});if(Object(r.a)(e,t))return v;var h="";if(Object(i.a)(e,t))n||(h=Object(l.a)(e,d,{locale:o.a}));else if(Object(a.a)(e,t)){var m=n?s:f;h=Object(l.a)(e,m,{locale:o.a})}else h=Object(l.a)(e,p,{locale:o.a});return"".concat(h,"—").concat(v)}function v(e,t){return p(e.departureDateTime,e.arrivalDateTime,t)}function h(e,t){var n=e.departureDateTime;return p(e.arrivalDateTime,n,t)}function m(e){var t=e.periodStart,n=e.periodEnd,r=e.isObscure,i=e.placeholder;if(!n){var a=r?u:c,s=Object(l.a)(t,a,{locale:o.a});return"".concat(s,"—").concat(i)}return p(t,n,r)}},845:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(136);function i(){return Object(r.g)({domain:"travel.countries",isProvision:!0,modelName:"countries",query:{navigation:{isDisabled:!0}}})}},852:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(64);var r=n(87),i=n(853);function a(e){if(!Object(i.a)(e))return"?";for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return r.a.apply(void 0,[e].concat(n))}},853:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(79),n(882),n(284);function r(e){return e instanceof Date&&!Number.isNaN(e.getTime())}},857:function(e,t,n){"use strict";n.d(t,"b",(function(){return W})),n.d(t,"c",(function(){return We})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return me}));n(35),n(14),n(50),n(37),n(44),n(45),n(46),n(51),n(49),n(89),n(26),n(12),n(27),n(22),n(28),n(23);var r=n(0),i=n.n(r),a=n(815),o={ANY:"ANY",FOREIGN:"FOREIGN",DOMESTIC:"DOMESTIC"};function l(e,t){switch(t){case o.FOREIGN:case o.DOMESTIC:return function(e,t){var n=e.tripsDict,r=e.locationsDict,i=t===o.FOREIGN;if(!i&&t!==o.DOMESTIC)return c;return function(e){if(!e)return!1;var t=e.countryId,a=e.tripId;if(!t)return!0;var o=n[a];if(!o)return!0;var l=o.originLocationId,c=r[l];if(!c)return!0;var u=c.countryId;return!u||(i?t!==u:t===u)}}(e,t);case o.ANY:default:return c}}function c(e){return Boolean(e)}n(40),n(43),n(71),n(72),n(73),n(1181),n(42),n(64),n(29),n(30),n(17),n(20),n(18),n(41),n(24),n(36);var u=n(115),s=n.n(u),f=n(1184),d=n.n(f),p=(n(284),n(841));function v(e){var t=e.children,n=e.visitsGroup.field.value,r=e.classes,a=e.provision.countriesDict,o=e.urls,l=e.config.CountryVisitsGroup,c=(l=void 0===l?{}:l).hyperlinks,u=(c=void 0===c?{}:c).country,s=void 0===u||u;return i.a.createElement(h,{country:a[n],className:r.container,classes:r,countryUrl:s?null==o?void 0:o.resolveCountryUrl({countryId:n}):null},t)}function h(e){var t=e.variant,n=e.country.countryName,r=e.children,a=e.className,o=e.classes,l=e.countryUrl;return(i.a.createElement("div",{className:a},i.a.createElement(p.a,{to:l,optional:!0,display:"inline",variant:t,className:o.header},n),r))}function m(e,t){var n,r;return null===(n=function(e,t){var n=e;for(;n;){if(t===n.plainGroup)return n;n=n.parent}return null}(e,t))||void 0===n?void 0:null===(r=n.field)||void 0===r?void 0:r.value}function b(e){var t=e.children,n=e.visitsGroup,r=e.visitsGroup.field.value,a=e.classes,o=e.provision,l=e.provision.locationsDict,c=e.urls,u=e.config.LocationVisitsGroup,s=(u=void 0===u?{}:u).appearance,f=u.hyperlinks,d=(f=void 0===f?{}:f).location,p=void 0===d||d,v=f.country,h=void 0===v||v,b=l[r],g=m(n,W.COUNTRIES),O=null!=b?b:{},E=O.locationId,w=O.countryId,S=p?null==c?void 0:c.resolveLocationUrl({locationId:E}):null,T=h?null==c?void 0:c.resolveCountryUrl({countryId:w}):null;return i.a.createElement(y,{className:a.container,classes:a,location:b,provision:o,showCountry:!g,locationUrl:S,countryUrl:T,appearance:s},t)}function y(e){var t,n,r=e.children,a=e.variant,o=e.className,l=e.classes,c=void 0===l?{}:l,u=e.location,s=(u=void 0===u?{}:u).locationName,f=u.countryId,d=e.provision.countriesDict,v=e.showCountry,h=e.locationUrl,m=e.countryUrl,b=e.appearance.country,y=void 0===b||b,g=null===(t=d[f])||void 0===t?void 0:t.countryName,O=y&&g&&v?i.a.createElement(p.a,{to:m,optional:!0,display:"inline",variant:"body1"},null===(n=d[f])||void 0===n?void 0:n.countryName):null,E=i.a.createElement(p.a,{to:h,optional:!0,display:"inline",variant:a,className:c.header},s,O?",":"");return i.a.createElement("div",{className:o},i.a.createElement("div",null,E,O?" ":null,O),r)}v.defaultProps={config:{}},b.defaultProps={config:{}},y.defaultProps={appearance:{},classes:{}};var g=Object(a.a)({container:{}});function O(e){var t=e.children,n=e.variant,r=e.className,a=e.classes,o=e.year,l=e.yearUrl;return(i.a.createElement("div",{className:r},i.a.createElement(p.a,{to:o&&l||void 0,optional:!0,display:"inline",variant:n,className:a.header},o||"Без указания даты"),t))}var E=n(219),w=n(946),S=n(829),T=n(1007),I=n.n(T);function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.containerClassName,r=void 0===n?"hoverTrigger":n,i=t.contentClassName,o=void 0===i?"visibleOnHover":i;return Object(a.a)((j(e={},r,j({},"&:hover $".concat(o),{visibility:"visible"})),j(e,o,{visibility:"hidden"}),e))}();function _(e){var t=e.trip,n=e.visitsDict,r=e.countriesDict,a=e.locationsDict,o=e.children,l=e.className,c=e.variant,u=e.urls,f=A(),d=f.hoverTrigger,p=f.visibleOnHover,v=null==u?void 0:u.resolveTripEditUrl({tripId:t.tripId});return i.a.createElement(E.a,{variant:null!=c?c:void 0,className:s()(l,d),paragraph:!0},i.a.createElement("span",null,Object(w.a)(t,n,r,a)),o,v&&i.a.createElement(S.a,{className:p,href:v},i.a.createElement(I.a,null)))}_.defaultProps={variant:"h4"};var P=n(1191),C=n.n(P),R=n(842),L=n(122),N=n(1192),x=n.n(N),D=n(818),k=n(937),M=(n(106),n(1025),n(1026),n(1027),Object(a.a)({autoMargin:{marginLeft:"auto"}}));function z(e){var t=e.children,n=e.className,r=M(),a=i.a.Children.toArray(t);if(a.length<=1)return i.a.createElement(E.a,{className:n},t);var o=a.slice(-1),l=a.slice(0,-1);return i.a.createElement(D.a,{className:n,container:!0,justify:"space-between",alignItems:"center"},i.a.createElement(D.a,{item:!0},l),i.a.createElement(D.a,{item:!0,classes:{item:r.autoMargin}},o))}var F=Object(a.a)({halfDown:{position:"relative",top:12}});function V(e){var t=e.locationId,n=e.rideId,r=e.provision,a=e.provision,o=a.ridesDict,l=a.locationsDict,c=e.groupCountryId,u=e.children,s=e.locationInfoChildren,f=e.className,d=e.classes,p=e.urls,v=F(),h=l[t];return i.a.createElement(z,{className:f},i.a.createElement(y,{className:d.locationContainer,provision:r,location:h,showCountry:!c,locationUrl:null==p?void 0:p.resolveLocationUrl({locationId:t}),countryUrl:null==p?void 0:p.resolveCountryUrl({countryId:null==h?void 0:h.countryId})},s),c?u:i.a.createElement(D.a,{container:!0},i.a.createElement(D.a,{item:!0},u),i.a.createElement(D.a,{item:!0},i.a.createElement(k.a,{ride:o[n],className:v.halfDown}))))}V.defaultProps={classes:{}};var B=Object(a.a)({locationContainer:{position:"relative"},detail:{color:"gray",fontSize:12},editButton:{position:"absolute",top:"-50%",left:"100%"}});function U(e){var t=e.visit,n=t.visitId,r=t.locationId,a=t.departureRideId,o=e.provision,l=e.provision.visitsDict,c=e.urls,u=e.isObscure,f=e.groupCountryId,d=e.className,p=B(),v=A(),h=v.hoverTrigger,m=v.visibleOnHover,b=null==c?void 0:c.resolveVisitUrl({visitId:n});return i.a.createElement(V,{className:s()(d,h),classes:{locationContainer:p.locationContainer},locationId:r,rideId:a,provision:o,groupCountryId:f,urls:c,locationInfoChildren:b&&i.a.createElement(S.a,{className:s()(p.editButton,m),component:L.b,to:b},i.a.createElement(x.a,null))},i.a.createElement(E.a,{className:p.detail},Object(R.c)(l[n],u)))}var H,Y=Object(a.a)({placeDetails:{display:"inline-block",marginRight:"8px"}});function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W={LOCATIONS:"LOCATIONS",COUNTRIES:"COUNTRIES",YEARS:"YEARS",TRIPS:"TRIPS",JUST_VISITS:"JUST_VISITS"},q=(G(H={},W.TRIPS,{groupFieldName:"tripId",component:function(e){var t=e.classes,n=e.children,r=e.visitsGroup.field.value,a=e.provision,o=a.tripsDict,l=a.visitsDict,c=a.countriesDict,u=a.locationsDict,f=e.urls;return(i.a.createElement(_,{key:"t".concat(r),className:s()(t.container,t.header),classes:t,trip:o[r],visitsDict:l,countriesDict:c,locationsDict:u,variant:null,urls:f},n))},adapter:Number}),G(H,W.YEARS,{groupFieldName:function(e){return e.arrivalDateTime.getFullYear()},component:function(e){var t=e.children,n=e.visitsGroup.field.value,r=e.classes,a=e.urls,o=e.config,l=(o=void 0===o?{}:o).YearVisitsGroup,c=(l=void 0===l?{}:l).hyperlinks,u=(c=void 0===c?{}:c).year,f=void 0===u||u,d=g();return i.a.createElement(O,{className:s()(r.container,d.container),classes:r,year:n,yearUrl:f?null==a?void 0:a.resolveYearUrl({year:n}):null},t)},adapter:Number}),G(H,W.COUNTRIES,{groupFieldName:"countryId",component:v,adapter:Number}),G(H,W.LOCATIONS,{groupFieldName:"locationId",component:b,adapter:Number}),G(H,W.JUST_VISITS,{groupFieldName:"visitId",component:function(e){var t,n=e.visitsGroup,a=e.visitsGroup.visitsList,o=e.provision,l=e.provision,c=l.tripsDict,u=l.locationsDict,s=e.classes,f=e.urls,d=e.config,v=(d=void 0===d?{}:d).VisitsItselfGroup,h=(v=void 0===v?{}:v).appearance,b=(h=void 0===h?{}:h).country,g=void 0===b||b,O=h.location,E=void 0===O||O,w=Y(),S=m(n,W.TRIPS),T=m(n,W.COUNTRIES),I=m(n,W.LOCATIONS),j=Object(r.useMemo)((function(){return T?C()(a,"locationId"):a}),[T,a]);if(!S)return i.a.createElement(i.a.Fragment,null,a.map((function(e){var t=e.locationId,n=e.countryId,r=E&&!I?null==f?void 0:f.resolveLocationUrl({locationId:t}):null,a=g&&!I?null==f?void 0:f.resolveCountryUrl({countryId:n}):null;return i.a.createElement("div",{className:s.level},r&&i.a.createElement(y,{className:w.placeDetails,location:u[t],provision:o,showCountry:Boolean(a)&&!T,locationUrl:r,countryUrl:a}),i.a.createElement(p.a,{to:f.resolveVisitUrl({visitId:e.visitId}),optional:!0,display:"inline"},Object(R.c)(e,!1)))})));var A=null!==(t=c[S])&&void 0!==t?t:{},_=A.originLocationId,P=A.departureRideId,L=u[_];return i.a.createElement("div",{className:s.level},!T&&i.a.createElement(V,{locationId:_,rideId:P,provision:o,groupCountryId:T,className:s.header,urls:f}),j.map((function(e){return i.a.createElement(U,{className:s.header,key:"v".concat(e.visitId),visit:e,provision:o,isObscure:!1,groupCountryId:T,urls:f})})),!T&&i.a.createElement(y,{className:s.header,provision:o,location:L,showCountry:!T,locationUrl:null==f?void 0:f.resolveLocationUrl({locationId:_}),countryUrl:null==f?void 0:f.resolveCountryUrl({countryId:null==L?void 0:L.countryId})}))},adapter:Number}),H),K=(n(169),n(935)),$=n.n(K),X=n(173),J=n.n(X);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){var n=q[t],r=n.groupFieldName,i=n.adapter;return t===W.JUST_VISITS?[{field:{name:r,value:null},visitsList:e}]:function(e,t,n){return Object.entries($()(e,t)).map((function(e){var r=Z(e,2),i=r[0],a=r[1];return{field:{name:J()(t)?t.name:t,value:n?n(i):i},visitsList:a}}))}(e,r,i)}n(354),n(355);var te=n(1193),ne=n.n(te),re=n(1194),ie=n.n(re);n(356),n(357),n(358),n(360),n(359),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(153),n(154),n(155),n(220);function ae(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var oe=function(e,t){var n;void 0===t&&(t=ae);var r,i=[],a=!1;return function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return a&&n===this&&t(o,i)?r:(r=e.apply(this,o),a=!0,n=this,i=o,r)}},le=n(551),ce=n.n(le);function ue(e){var t=oe((function(t){return ce()((function(n){return function(t,n){return Object.values(n).reduce((function(n,r){var i=r[e];return r.arrivalYear<t&&n.add(i),n}),new Set)}(n,t)}))}));return{calcTotal:function(t){return{total:new Set(t.map((function(t){return t[e]}))).size}},calcByYear:function(n,r,i){var a=t(n)(i),o=r.reduce((function(t,n){var r=n.arrivalYear,a=n[e];return r===i&&t.add(a),t}),new Set),l=o.difference(a);return{totalAtYear:o.size,newAtYear:l.size,newbies:l}}}}var se=n(401),fe=n(495);function de(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(e,t,n){var r=t.visitsDict,i=t.ridesDict,a=n.considerRides,o=a?function(e,t,n){return function(r){var i,a,o=r.visitId,l=r.countryId,c=r.arrivalRideId,u=r.arrivalDateTime,s=r.departureRideId,f=r.departureDateTime,d=t[c];if(d){var p,v=d.departureVisitId,h=d.departureDateTime;("country"!==n||l&&l===(null===(p=e[v])||void 0===p?void 0:p.countryId))&&(i=h)}else i=u;var m=t[s];if(m){var b,y=m.arrivalVisitId,g=m.arrivalDateTime;("country"!==n||l&&l===(null===(b=e[y])||void 0===b?void 0:b.countryId))&&(a=g)}else a=f;return{startDate:i,endDate:a,stack:new Set([o])}}}(r,i,a):he,l=e.map(o),c=Object(fe.a)(de(l)).toArray().reduce((function(e,t){var n=t.startDate,r=t.endDate,i=t.stack,a=Object(se.a)(r,n)+1;return a>0&&e.push({stay:a,visitsIds:i,departureDateTime:r,arrivalDateTime:n}),e}),[]);return{detailedStats:c,totalStay:c.reduce((function(e,t){return e+t.stay}),0)}}function he(e){return{startDate:e.arrivalDateTime,endDate:e.departureDateTime}}function me(e,t){var n=m(e,W.LOCATIONS),r=m(e,W.COUNTRIES),i=m(e,W.YEARS),a=e.plainGroup,o=e.visitsList;return{visitsStats:Te(o),countriesStats:r?null:Oe(o,t,{year:i}),locationsStats:n?null:Ie(o,t,{year:i}),daysTravellingStats:ve(o,t,{considerRides:!![W.COUNTRIES,W.YEARS].includes(a)&&a})}}var be=ue("countryId"),ye=be.calcTotal,ge=be.calcByYear;function Oe(e,t,n){var r=t.visitsDict,i=n.year,a=i?ge(r,e,i):ye(e);return{year:i,newAtYear:a.newAtYear,totalAtYear:a.totalAtYear,total:a.total,newbies:a.newbies}}var Ee=ue("locationId"),we=Ee.calcTotal,Se=Ee.calcByYear;function Te(e){return{visitsCount:e.length,firstVisit:ne()(e,"arrivalDateTime"),lastVisit:ie()(e,"departureDateTime")}}function Ie(e,t,n){var r=t.visitsDict,i=n.year,a=i?Se(r,e,i):we(e);return{year:i,newAtYear:a.newAtYear,totalAtYear:a.totalAtYear,total:a.total,newbies:a.newbies}}var je=n(1198),Ae=n.n(je),_e=n(1195),Pe=n.n(_e),Ce=n(1309),Re=Object(a.a)({statsIndicator:{display:"inline-flex",alignItems:"center",marginRLeft:"2px",marginRight:"4px"}});function Le(e){var t=e.className,n=e.icon,r=e.children,a=e.hint,o=Re(),l=i.a.createElement(E.a,{variant:"subtitle1",className:s()(t,o.statsIndicator)},i.a.cloneElement(n,{fontSize:"inherit"}),r);return a?i.a.createElement(Ce.a,{title:a},l):l}function Ne(e){var t=e.countriesStats,n=t.year,r=t.newAtYear,a=t.totalAtYear,o=t.total,l=Boolean(n),c=function(e){var t=e.showByYear,n=e.year,r=e.newAtYear,a=e.totalAtYear,o=e.total;if(!t)return i.a.createElement("div",null,"Посещено ".concat(o," стран"));return(i.a.createElement("div",null,i.a.createElement("div",null,"За ".concat(n," год посещено ").concat(a," стран")),i.a.createElement("div",null,r?"Из них впервые ".concat(r," стран"):"Новых стран в этом году не было")))}({showByYear:l,year:n,newAtYear:r,totalAtYear:a,total:o}),u=xe({showByYear:l,newAtYear:r,totalAtYear:a,total:o});return i.a.createElement(Le,{hint:c,icon:i.a.createElement(Pe.a,null)},u)}function xe(e){var t=e.showByYear,n=e.newAtYear,r=e.totalAtYear,i=e.total;return t?n?r===n?"+".concat(n):"".concat(r," (+").concat(n,")"):String(r):String(i)}var De=n(1196),ke=n.n(De);function Me(e){var t=e.locationsStats,n=t.year,r=t.newAtYear,a=t.totalAtYear,o=t.total,l=Boolean(n),c=function(e){var t=e.showByYear,n=e.year,r=e.newAtYear,a=e.totalAtYear,o=e.total;if(!t)return i.a.createElement("div",null,"Посещено ".concat(o," мест"));return(i.a.createElement("div",null,i.a.createElement("div",null,"За ".concat(n," год посещено ").concat(a," мест")),i.a.createElement("div",null,r?"Из них впервые ".concat(r," мест"):"Новых мест в этом году не было")))}({showByYear:l,year:n,newAtYear:r,totalAtYear:a,total:o}),u=xe({showByYear:l,newAtYear:r,totalAtYear:a,total:o});return i.a.createElement(Le,{hint:c,icon:i.a.createElement(ke.a,null)},u)}n(353);var ze=n(1197),Fe=n.n(ze);function Ve(e){var t=e.className,n=e.daysTravellingStats,r=n.detailedStats,a=n.totalStay,o=e.provision.visitsDict;return a?i.a.createElement(Le,{className:t,hint:Be(r,a,o),icon:i.a.createElement(Fe.a,null)},a):null}function Be(e,t,n){var r="Всего ".concat(t," дней в этом месте");if(1===e.length){var a=e[0],o=a.visitsIds,l=a.departureDateTime,c=a.arrivalDateTime,u=Object(R.c)({departureDateTime:l,arrivalDateTime:c}),s=Ue(o,n);return i.a.createElement("div",null,"".concat(r," ").concat(u,". ").concat(s))}return(i.a.createElement("div",null,i.a.createElement("div",null,r),e.map((function(e,t){var r=e.stay,a=e.visitsIds,o=e.departureDateTime,l=e.arrivalDateTime,c=Object(R.c)({departureDateTime:o,arrivalDateTime:l}),u=Ue(a,n);return i.a.createElement("div",{key:"v".concat(t)},"".concat(r," дней, ").concat(c,". ").concat(u))}))))}function Ue(e,t){var n,r;return null!==(n=null==e?void 0:null===(r=e.map((function(e){var n,r;return null!==(n=null===(r=t[e])||void 0===r?void 0:r.locationName)&&void 0!==n?n:""})))||void 0===r?void 0:r.join(", "))&&void 0!==n?n:""}function He(e){var t=e.plainGroup,n=e.field.value;switch(t){case W.COUNTRIES:return function(e,t){var n,r,i,a;return null===(n=m(e,W.YEARS))||void 0===n?void 0:null===(r=n.stats)||void 0===r?void 0:null===(i=r.countriesStats)||void 0===i?void 0:null===(a=i.newbies)||void 0===a?void 0:a.has(t)}(e,n);case W.LOCATIONS:return function(e,t){var n,r,i,a,o=m(e,W.YEARS),l=m(e,W.COUNTRIES),c=null==l?void 0:null===(n=l.stats)||void 0===n?void 0:n.locationsStats;return!(!c||!c.newAtYear||!c.totalAtYear||c.newAtYear===c.totalAtYear)&&(null==o?void 0:null===(r=o.stats)||void 0===r?void 0:null===(i=r.locationsStats)||void 0===i?void 0:null===(a=i.newbies)||void 0===a?void 0:a.has(t))}(e,n);default:return!1}}var Ye=Object(a.a)({container:{color:"gray",display:"inline-flex",alignItems:"center",marginLeft:"4px"}});function Ge(e){var t,n,r,a=e.provision,o=e.visitsGroup,l=e.visitsGroup.stats,c=l.countriesStats,u=l.locationsStats,f=l.daysTravellingStats,d=e.config.StatsPanel,p=(d=void 0===d?{}:d).appearance,v=(p=void 0===p?{}:p).CountriesStats,h=void 0===v||v,b=p.LocationsStats,y=void 0===b||b,g=p.DaysTravellingStats,O=void 0===g||g,w=e.isObscure,S=Ye(),T=o.plainGroup===W.LOCATIONS,I=Boolean(m(o,W.COUNTRIES)),j=Boolean(m(o,W.LOCATIONS)),A=Boolean(m(o,W.YEARS)),_=O&&f&&!w?i.a.createElement(Ve,{className:s()((t={},n=S.visibleOnlyOnHover,r=T,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)),daysTravellingStats:f,provision:a}):null;return i.a.createElement(E.a,{variant:"body1",className:S.container},A&&He(o)&&i.a.createElement(Ae.a,null),h&&!I&&i.a.createElement(Ne,{countriesStats:c}),y&&!j&&i.a.createElement(Me,{locationsStats:u}),_)}Ge.defaultProps={config:{}};var We={ALPHABET:"ALPHABET",RATING:"RATING",FIRST_VISIT:"FIRST_VISIT",LAST_VISIT:"LAST_VISIT",VISITS_COUNT:"VISITS_COUNT"},qe=(n(872),n(873),n(874),n(875),n(375),n(376),n(377),n(539)),Ke=n.n(qe),$e=n(1199),Xe=n.n($e),Je=n(557),Ze=n.n(Je),Qe=n(536),et=n.n(Qe);function tt(e){return function(e){if(Array.isArray(e))return nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rt(e,t,n,r){var i=t.flatMap((function(e){switch(e){case We.FIRST_VISIT:return at("stats.visitsStats.firstVisit.arrivalDateTime");case We.LAST_VISIT:return{iteratee:it(at("stats.visitsStats.lastVisit.departureDateTime")),order:"desc"};case We.RATING:return function(e,t){switch(e){case W.LOCATIONS:return n=t.locationsRating,function(e){var t,r=e.field.value;return null!==(t=n[r])&&void 0!==t?t:10};default:return function(){return 0}}var n}(n,r);case We.VISITS_COUNT:return{iteratee:"stats.locationsStats.total",order:"desc"};case We.ALPHABET:default:return function(e,t){switch(e){case W.YEARS:return[{iteratee:it("stats.visitsStats.firstVisit.arrivalYear"),order:"desc"}];case W.COUNTRIES:return r=t.countriesDict,function(e){var t,n=e.field.value;return(null!==(t=r[n])&&void 0!==t?t:{}).countryName};case W.LOCATIONS:return n=t.locationsDict,function(e){var t,r=e.field.value;return(null!==(t=n[r])&&void 0!==t?t:{}).locationName};default:return function(){return 0}}var n;var r}(n,r)}}));return i.some(et()("order"))?Xe.a.apply(void 0,[e].concat(tt(function(e){return Object.values(e.reduce((function(e,t){var n=t.order?t:{iteratee:t},r=n.iteratee,i=void 0===r?[]:r,a=n.order,o=void 0===a?"asc":a;return e.iteratee.push(i),e.order.push(o),e}),{iteratee:[],order:[]}))}(i)))):Ke()(e,i)}function it(e){var t=Ze()(e);return function(e){return t(e)||""}}function at(e){var t=Ze()(e);return function(e){return(t(e)||"").valueOf()}}n(105);var ot=n(830),lt=n(1200),ct=n.n(lt),ut=n(827),st=n(1201),ft=n.n(st),dt=["placeholder","children"];function pt(){return(pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function bt(e){var t=e.placeholder,n=e.children,a=mt(e,dt),o=vt(Object(r.useState)(!1),2),l=o[0],c=o[1],u=Object(r.useCallback)((function(){return c(!0)}),[]);return i.a.createElement(i.a.Fragment,null,!l&&t,i.a.createElement(ft.a,pt({},a,{onContentVisible:u}),n))}var yt=n(490);var gt=n(1209),Ot=n.n(gt),Et=n(1208),wt=n.n(Et),St=["alt","src","onSwipeLock"];function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function It(){return(It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _t(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Pt,Ct=Object(a.a)({container:{position:"relative"},"@global":{".image-gallery-slide-wrapper:hover .MINE-image-gallery-zoom-not-touchscreen":{opacity:1}},touchscreenZoom:{opacity:1},zoom:{backgroundPosition:"".concat(50,"% ").concat(50,"%"),backgroundRepeat:"no-repeat",position:"absolute",top:0,bottom:0,left:0,right:0,margin:0,padding:0,opacity:0,transition:"opacity 0.5s"},zoomButton:{position:"absolute",bottom:"10px",left:"calc(50% - 20px)",zIndex:4},zoomIcon:{height:"28px",width:"28px",color:"white",transition:"all 0.3s ease-out",border:0,cursor:"pointer",outline:"none",filter:"drop-shadow(0 2px 2px #1a1a1a)"}}),Rt=(Pt=function(e,t){var n,a=e.alt,o=e.src,l=e.onSwipeLock,c=_t(e,St),u=window.matchMedia("(any-pointer: coarse)").matches,f=jt(Object(r.useState)(!1),2),d=f[0],p=f[1],v=Ct(),h=jt(Object(r.useState)("".concat(50,"% ").concat(50,"%")),2),m=h[0],b=h[1],y=Object(r.useRef)();Object(r.useEffect)((function(){l(d)}),[d]);var g=Object(r.useCallback)((function(e){var n,r,i,a,o=e.nativeEvent,l=t.current.getBoundingClientRect(),c=l.top,u=l.left,s=l.width,f=l.height,d=(null!==(n=o.clientX)&&void 0!==n?n:null===(r=o.touches[0])||void 0===r?void 0:r.clientX)-u,p=(null!==(i=o.clientY)&&void 0!==i?i:null===(a=o.touches[0])||void 0===a?void 0:a.clientY)-c;if(d&&p){var v=s<t.current.naturalWidth||f<t.current.naturalHeight,h=y.current.getBoundingClientRect().width<t.current.naturalWidth;if(v){var m=v&&h?Lt(d/s*100):50,g=v?Lt(p/f*100):50;b("".concat(m,"% ").concat(g,"%"))}}}),[]),O=Object(r.useCallback)((function(e){d&&g(e)}),[d]),E=d?wt.a:Ot.a;return i.a.createElement("div",{className:v.container,ref:y},i.a.createElement("img",It({ref:t,alt:a,src:o},c)),i.a.createElement("figure",{className:s()(v.zoom,(n={},Tt(n,"MINE-image-gallery-zoom-not-touchscreen",!u),Tt(n,v.touchscreenZoom,d),n)),style:{backgroundPosition:m,backgroundImage:"url(".concat(o,")")},onMouseMove:u?void 0:g,onTouchMove:d?O:void 0}),u&&i.a.createElement(S.a,{className:v.zoomButton,onClick:function(){return p((function(e){return!e}))}},i.a.createElement(E,{className:v.zoomIcon})))},Object(r.forwardRef)((function(e,t){var n=function(e){var t=Object(r.useRef)(e&&e.current);return Object(r.useEffect)((function(){e&&(e.current=t.current)}),[e]),t}(t);return Pt(e,n)})));function Lt(e){return Math.min(Math.max(e,0),100)||50}var Nt=n(1029),xt=n(1030),Dt=n(1028);const kt=e=>{if(!e||e.length<6)throw new Dt.a("The blurhash string must be at least 6 characters");const t=Object(Nt.a)(e[0]),n=Math.floor(t/9)+1,r=t%9+1;if(e.length!==4+2*r*n)throw new Dt.a(`blurhash length mismatch: length is ${e.length} but it should be ${4+2*r*n}`)},Mt=e=>{const t=e>>16,n=e>>8&255,r=255&e;return[Object(xt.b)(t),Object(xt.b)(n),Object(xt.b)(r)]},zt=(e,t)=>{const n=Math.floor(e/361),r=Math.floor(e/19)%19,i=e%19;return[Object(xt.c)((n-9)/9,2)*t,Object(xt.c)((r-9)/9,2)*t,Object(xt.c)((i-9)/9,2)*t]};var Ft,Vt=(e,t,n,r)=>{kt(e),r|=1;const i=Object(Nt.a)(e[0]),a=Math.floor(i/9)+1,o=i%9+1,l=(Object(Nt.a)(e[1])+1)/166,c=new Array(o*a);for(let t=0;t<c.length;t++)if(0===t){const n=Object(Nt.a)(e.substring(2,6));c[t]=Mt(n)}else{const n=Object(Nt.a)(e.substring(4+2*t,6+2*t));c[t]=zt(n,l*r)}const u=4*t,s=new Uint8ClampedArray(u*n);for(let e=0;e<n;e++)for(let r=0;r<t;r++){let i=0,l=0,f=0;for(let u=0;u<a;u++)for(let a=0;a<o;a++){const s=Math.cos(Math.PI*r*a/t)*Math.cos(Math.PI*e*u/n);let d=c[a+u*o];i+=d[0]*s,l+=d[1]*s,f+=d[2]*s}let d=Object(xt.a)(i),p=Object(xt.a)(l),v=Object(xt.a)(f);s[4*r+0+e*u]=d,s[4*r+1+e*u]=p,s[4*r+2+e*u]=v,s[4*r+3+e*u]=255}return s},Bt=(Ft=function(e,t){return(Ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Ft(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ut=function(){return(Ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ht=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Yt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.canvas=null,t.handleRef=function(e){t.canvas=e,t.draw()},t.draw=function(){var e=t.props,n=e.hash,r=e.height,i=e.punch,a=e.width;if(t.canvas){var o=Vt(n,a,r,i),l=t.canvas.getContext("2d"),c=l.createImageData(a,r);c.data.set(o),l.putImageData(c,0,0)}},t}return Bt(t,e),t.prototype.componentDidUpdate=function(){this.draw()},t.prototype.render=function(){var e=this.props,t=(e.hash,e.height),n=e.width,i=Ht(e,["hash","height","width"]);return r.createElement("canvas",Ut({},i,{height:t,width:n,ref:this.handleRef}))},t.defaultProps={height:128,width:128},t}(r.PureComponent),Gt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wt=function(){return(Wt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},qt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Kt={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},$t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gt(t,e),t.prototype.componentDidUpdate=function(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")},t.prototype.render=function(){var e=this.props,t=e.hash,n=e.height,i=e.width,a=e.punch,o=e.resolutionX,l=e.resolutionY,c=e.style,u=qt(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return r.createElement("div",Wt({},u,{style:Wt(Wt({display:"inline-block",height:n,width:i},c),{position:"relative"})}),r.createElement(Yt,{hash:t,height:l,width:o,punch:a,style:Kt}))},t.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32},t}(r.PureComponent),Xt=n(855),Jt=n.n(Xt),Zt=["aspectRatio","className","component","require","tag","src","alt","blurhash","constraints","height","width","onLoad","children","zoomable"];function Qt(){return(Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var rn="IDLE",an="LOADING",on="SUCCESS",ln="ERROR",cn=rn;function un(e){var t,n=e.aspectRatio,a=e.className,o=e.component,l=e.require,c=e.tag,u=e.src,s=e.alt,f=e.blurhash,d=e.constraints,p=e.height,v=e.width,h=e.onLoad,m=e.children,b=(e.zoomable,nn(e,Zt)),y=en(Object(r.useState)(cn),2),g=y[0],O=y[1],E=Object(r.useCallback)((function(){O(ln)}),[]),w=Object(r.useRef)(),S=Object(r.useCallback)((function(){O(on),h&&h({aspectRatio:w.current.naturalWidth/w.current.naturalHeight})}),[]);Object(r.useEffect)((function(){l&&g===rn&&O(an)}),[l,g]);var T=g===on||g===ln,I=function(e,t){var n=e.aspectRatio,r=e.height,i=e.width;if(!t)return{imageHeight:r||i/n,imageWidth:i||r*n};var a=Jt()([t.height,r]),o=Jt()([t.width,i]),l=en(a*n<o?[a*n,a]:[o,o/n],2),c=l[0];return{imageHeight:l[1],imageWidth:c}}({height:p,width:v,aspectRatio:n},d),j=I.imageWidth,A=I.imageHeight,_=en(Object(r.useState)(j),2),P=_[0],C=_[1];return Object(r.useLayoutEffect)((function(){w.current&&C(w.current.getBoundingClientRect().width)}),[j]),i.a.createElement(i.a.Fragment,null,!T&&i.a.createElement($t,{hash:f,width:P,height:null!==(t=P/n)&&void 0!==t?t:A,resolutionX:32,resolutionY:32,punch:1}),g!==ln?i.a.createElement(o,Qt({key:"ok","data-tag":c,ref:w,className:a,alt:s,src:sn(u,g),style:{width:j,height:T?A:0,maxWidth:"100%"},onLoad:S,onError:E,loading:void 0},b)):i.a.createElement("img",{key:"error",alt:"error",className:a,src:"https://res.cloudinary.com/dc2eke0gj/image/upload/minetravel/common/img_placeholder.png",style:{width:j,height:A,maxWidth:"100%"}}),m)}function sn(e,t){switch(t){case rn:return null;default:return e}}un.defaultProps={component:"img"};var fn=n(492),dn=n.n(fn),pn=n(2),vn=n(5),hn=n(8),mn=(n(3),n(56)),bn=n(10),yn=r.forwardRef((function(e,t){var n=e.animation,i=void 0===n?"pulse":n,a=e.classes,o=e.className,l=e.component,c=void 0===l?"span":l,u=e.height,s=e.variant,f=void 0===s?"text":s,d=e.width,p=Object(vn.a)(e,["animation","classes","className","component","height","variant","width"]),v=Boolean(p.children);return r.createElement(c,Object(pn.a)({ref:t,className:Object(hn.a)(a.root,a[f],o,v&&[a.withChildren,!d&&a.fitContent,!u&&a.heightAuto],!1!==i&&a[i])},p,{style:Object(pn.a)({width:d,height:u},p.style)}))})),gn=Object(bn.a)((function(e){return{root:{display:"block",backgroundColor:Object(mn.c)(e.palette.text.primary,"light"===e.palette.type?.11:.13),height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:e.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(e.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}},withChildren:{"& > *":{visibility:"hidden"}},fitContent:{maxWidth:"fit-content"},heightAuto:{height:"auto"}}}),{name:"MuiSkeleton"})(yn),On=Object(a.a)({container:{display:"flex"},imageSkeleton:{flexGrow:"1"},thumbsContainer:{overflow:"hidden"},thumbSkeleton:{margin:"0 5px 10px 5px"}});function En(e){var t=e.height,n=On(),r=Math.ceil(t/40);return i.a.createElement("div",{className:n.container},i.a.createElement(gn,{variant:"rect",height:t,className:n.imageSkeleton}),i.a.createElement("div",{className:n.thumbsContainer,style:{height:t}},dn()(r).map((function(){return i.a.createElement(gn,{variant:"rect",height:60,width:100,className:n.thumbSkeleton})}))))}var wn=n(39),Sn=n.n(wn),Tn=n(1210),In=n.n(Tn),jn=Object(a.a)((function(e){return{top:{zIndex:"".concat(e.zIndex.drawer+1," !important")}}}));function An(e){var t=e.children,n=e.fullscreen,a=e.uniqKey,o=e.inlineGalleryRef,l=jn(),c=Object(r.useRef)();return Object(r.useEffect)((function(){var e=document.createElement("div");return e.id="imageGalleryPortal-".concat(a),document.body.append(e),function(){return e.remove()}}),[]),Object(r.useEffect)((function(){o.current&&o.current.setState({isFullscreen:!1,modalFullscreen:!1}),n&&c.current.setState({isFullscreen:!0,modalFullscreen:!0})}),[n]),n?Sn.a.createPortal(i.a.createElement(In.a,null,i.a.createElement("div",null,i.a.cloneElement(t,{ref:c,additionalClass:l.top}))),window.document.getElementById("imageGalleryPortal-".concat(a))):null}function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){Cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nn=document.fullscreenEnabled||document.mozFullScreenEnabled||document.documentElement.webkitRequestFullScreen,xn=Object(a.a)({photoContainer:{minHeight:"200px",margin:"24px 0","& .image-gallery-thumbnails":{overflowY:"auto","-ms-overflow-style":"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},photo:{display:"block",width:"100%"}});function Dn(e){var t=e.className,n=e.photos,a=Object(r.useMemo)((function(){return Object(ot.a)()}),[]),o=xn(),l=Object(ut.a)((function(e){return e.breakpoints.down("sm")})),c=window.matchMedia("(any-pointer: coarse)").matches,u=Rn(Object(r.useState)(!1),2),f=u[0],d=u[1],p=Object(yt.b)(),v=p.vw,h=p.vh,m=Rn(Object(r.useState)(!1),2),b=m[0],y=m[1],g=Rn(Object(r.useState)({}),2),O=g[0],E=g[1],w=Rn(Object(r.useState)(0),2),S=w[0],T=w[1],I=Object(r.useMemo)((function(){return function(e,t){var n=t.vh,r=t.vw,i=e?kn.FULLSCREEN:kn.DEFAULT,a=i.HEIGHT,o=i.WIDTH;return{height:l(a,n),width:l(o,r)};function l(e,t){return Math.min(e.PERCENT*t,e.MAX_PX)}}(b,{vh:h,vw:v})}),[b,h,v]);Object(r.useEffect)((function(){var e,t=null===(e=window.document.querySelector('[data-tag="photos-gallery-thumb-'.concat(a,"-").concat(S,'"]')))||void 0===e?void 0:e.closest(".image-gallery-thumbnail");t&&t.scrollIntoView({block:"nearest",behavior:"smooth"})}),[S]);var j=n.map((function(e,t){var n=e.fullSizePhotoUrl,r=e.thumbnailUrl,i=e.previewUrl,a=e.blurhash,l=e.aspectRatio,c=e.description;return{original:i,originalClass:o.photo,thumbnail:r,fullscreen:n,description:c,blurhash:a,aspectRatio:l,index:t}}));if(!j.length)return null;var A=!l||b,_=!c||b,P=Object(r.useRef)(),C=i.a.createElement(ct.a,{ref:P,useBrowserFullscreen:Nn,startIndex:0,disableSwipe:f,showIndex:!0,showThumbnails:A,items:j,thumbnailPosition:A?"right":void 0,onScreenChange:function(e){return y(e)},onBeforeSlide:function(e){return T(e)},disableKeyDown:!0,disableThumbnailScroll:!0,renderItem:function(e){var t;return(i.a.createElement(un,{className:"image-gallery-image",aspectRatio:O[e.index]||(null===(t=e.aspectRatio)||void 0===t?void 0:t.ratio)||1,component:_&&S===e.index?Rt:"img",description:e.description,src:b?e.fullscreen:e.original,alt:e.originalAlt,constraints:I,title:e.originalTitle,blurhash:e.blurhash,require:Math.abs(S-e.index)<=1,onSwipeLock:d},e.description&&i.a.createElement("span",{className:"image-gallery-description"},e.description)))},renderThumbInner:function(e){return i.a.createElement("span",{className:"image-gallery-thumbnail-inner"},i.a.createElement(un,{tag:"photos-gallery-thumb-".concat(a,"-").concat(e.index),className:"image-gallery-thumbnail-image",aspectRatio:O[e.index]||e.aspectRatio||1,src:e.thumbnail,width:92,alt:e.thumbnailAlt,title:e.thumbnailTitle,blurhash:e.blurhash,require:!0,onLoad:function(t){var n=t.aspectRatio;return E((function(t){return Pn(Pn({},t),{},Cn({},e.index,n))}))}}))}});return i.a.createElement("div",{className:s()(t,o.photoContainer),style:{height:I.height}},i.a.createElement(bt,{offset:1e3,placeholder:i.a.createElement(En,{height:I.height})},C),!Nn&&i.a.createElement(An,{fullscreen:b,uniqKey:a,inlineGalleryRef:P},C))}var kn={FULLSCREEN:{HEIGHT:{PERCENT:100,MAX_PX:1/0},WIDTH:{PERCENT:100,MAX_PX:1/0}},DEFAULT:{HEIGHT:{PERCENT:50,MAX_PX:1024},WIDTH:{PERCENT:100,MAX_PX:1024}}};function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){Fn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vn(e){var t=e.className,n=e.visitsGroup,r=e.provision,a=n.visitsList.flatMap((function(e){return e.photos.map((function(t){return zn(zn({},t),{},{description:Bn(e,n,r)})}))}));return i.a.createElement(Dn,{className:t,photos:a})}function Bn(e,t,n){var r=n.countriesDict,i=e.locationName,a=e.countryId,o=e.arrivalYear,l="",c=Boolean(m(t,W.LOCATIONS)),u=c||Boolean(m(t,W.COUNTRIES)),s=Boolean(m(t,W.YEARS));if(c||(l+=i),!u){var f,d=(null!==(f=r[a])&&void 0!==f?f:{}).countryName;d&&(l+=", ".concat(d))}return s||(l+="/".concat(o)),l}var Un=n(936),Hn=n.n(Un),Yn=n(826),Gn=n(943);function Wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kn=Object(a.a)({container:{fontSize:"16px",lineHeight:"1.5"},visitContainer:{margin:"20px 0"},mapVisibilityToggle:{marginLeft:"8px",cursor:"pointer"},googleMapContainer:{margin:"12px 0",width:"800px",maxWidth:"100%",height:"400px",maxHeight:"100%"}});function $n(e){var t=e.className,n=e.visitsGroup,a=e.provision,o=a.visitsDict,l=a.locationsDict,c=a.locationsRating,u=e.onToggle,s=Kn(),f=Wn(Object(r.useState)(!1),2),d=f[0],p=f[1],v=Hn()(n.visitsList.map((function(e){return e.locationId}))),h=Object(r.useRef)(!1);return Object(r.useEffect)((function(){h.current?u&&u(d):h.current=!0}),[d]),i.a.createElement("div",{className:t},i.a.createElement("div",null,i.a.createElement(Yn.a,{variant:"body2",onClick:function(){p((function(e){return!e}))}},d?"скрыть карту":"на карте")),d&&i.a.createElement(Gn.b,{className:s.mapContainer,locationsDict:l,visitsDict:o,locationsRating:c,locationsIds:v,minHeight:300,scaleBy:Gn.a.BY_LAST_VISIT,ratingLevel:null}))}function Xn(){return(Xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jn(e){var t=e.children,n=e.classes,a=e.config,o=e.forwardingProps,l=e.isObscure,c=e.showMap,u=e.showPhotos,s=e.provision,f=e.urls,d=e.visitsGroup,p=e.VisitsGroupComponent,v=e.onHeightChange;return(i.a.createElement(r.Fragment,{key:d.field.value},i.a.createElement(p,Xn({visitsGroup:d,classes:n,provision:s,urls:f,config:a},o),i.a.createElement(Ge,{visitsGroup:d,provision:s,isObscure:l,config:a})),t,c&&i.a.createElement($n,{className:n.nextLevel,visitsGroup:d,provision:s,onToggle:v}),u&&i.a.createElement(Vn,{className:n.nextLevel,visitsGroup:d,provision:s})))}var Zn=i.a.memo(Jn);function Qn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tr(e,t){var n=t.rect;return e&&e.height===n.height&&e.width===n.width?e:n}n(385);function nr(e,t){for(var n=e.measurements,r=e.outerSize,i=e.scrollOffset,a=n.length-1,o=function(e,t,n,r){for(;e<=t;){var i=(e+t)/2|0,a=n(i);if(a<r)e=i+1;else{if(!(a>r))return i;t=i-1}}return e>0?e-1:0}(0,a,(function(e){return n[e].start}),i),l=o;l<a&&n[l].end<i+r;)l++;return t.start!==o||t.end!==l?{start:o,end:l}:t}function rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ar=["align"];function or(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){ur(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sr(e){return function(e){if(Array.isArray(e))return pr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||dr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(e,t){if(e){if("string"==typeof e)return pr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pr(e,t):void 0}}function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vr=function(){return 50},hr=function(e){return e};function mr(e){var t,n=e.size,a=void 0===n?0:n,o=e.estimateSize,l=void 0===o?vr:o,c=e.overscan,u=void 0===c?1:c,s=e.paddingStart,f=void 0===s?0:s,d=e.paddingEnd,p=void 0===d?0:d,v=e.parentRef,h=e.keyExtractor,m=void 0===h?hr:h,b=function(){var e=Qn(i.a.useReducer(tr,{}),2),t=e[0],n=e[1];return Object(r.useLayoutEffect)((function(){n({rect:{height:window.innerHeight,width:window.innerWidth}})}),[]),Object(r.useEffect)((function(){var e=function(){n({rect:{height:window.innerHeight,width:window.innerWidth}})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),t}().height,y=i.a.useRef({scrollOffset:0,measurements:[],outerSize:void 0,totalSize:void 0});y.current.outerSize=b;var g=fr(i.a.useState({}),2),O=g[0],E=g[1],w=fr(i.a.useReducer((function(e){return e+1}),0),2),S=w[0],T=w[1],I=i.a.useRef([]),j=i.a.useMemo((function(){var e=I.current.length>0?Math.min.apply(Math,sr(I.current)):0;I.current=[];for(var t=y.current.measurements.slice(0,e),n=e;n<a;n++){var r=m(n),i=O[r],o=t[n-1]?t[n-1].end:f,c="number"==typeof i?i:l(n),u=o+c;t[n]={index:n,start:o,size:c,end:u,key:r}}return t}),[l,O,f,a,m]),A=((null===(t=j[a-1])||void 0===t?void 0:t.end)||0)+p;y.current.measurements=j,y.current.totalSize=A;var _=function(e){var t=e.measurements,n=e.outerSize,a=e.latestRef,o=e.parentRef,l=rr(i.a.useState({start:0,end:0}),2),c=l[0],u=l[1],s=i.a.useRef(null),f=i.a.useCallback((function(){null!==s.current&&(clearTimeout(s.current),s.current=null)}),[]);return Object(r.useLayoutEffect)((function(){return s.current=setTimeout((function(){u((function(e){return nr(a.current,e)}))})),function(){return f()}}),[t,n,f]),Object(r.useLayoutEffect)((function(){var e=function(){a.current.scrollOffset=o.current?function(e){return-1*e.current.getBoundingClientRect().top}(o):0,f(),u((function(e){return nr(a.current,e)}))};return e(),window.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){window.removeEventListener("scroll",e)}}),[f]),c}({measurements:j,outerSize:b,latestRef:y,parentRef:v}),P=i.a.useMemo((function(){for(var e=function(e){for(var t=Math.max(e.start-e.overscan,0),n=Math.min(e.end+e.overscan,e.size-1),r=[],i=t;i<=n;i++)r.push(i);return r}({start:_.start,end:_.end,overscan:u,size:j.length}),t=[],n=function(n,r){var i=e[n],a=cr(cr({},j[i]),{},{measureRef:function(e){if(e){var t=e.offsetHeight;if(t!==a.size){var n=y.current.scrollOffset;a.start<n&&br(n+(t-a.size)),I.current.push(i),E((function(e){return cr(cr({},e),{},ur({},a.key,t))}))}}}});t.push(a)},r=0,i=e.length;r<i;r++)n(r);return t}),[j,u,_.end,_.start,S]),C=i.a.useRef();Object(r.useLayoutEffect)((function(){C.current&&l&&E({}),C.current=!0}),[l]);var R=i.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.align,r=void 0===n?"start":n,i=y.current,a=i.scrollOffset,o=i.outerSize;"auto"===r&&(r=e<=a?"start":e>=a+o?"end":"start"),"start"===r?br(e):"end"===r?br(e-o):"center"===r&&br(e-o/2)}),[]),L=i.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.align,r=void 0===n?"auto":n,i=or(t,ar),o=y.current,l=o.measurements,c=o.scrollOffset,u=o.outerSize,s=l[Math.max(0,Math.min(e,a-1))];if(s){if("auto"===r)if(s.end>=c+u)r="end";else{if(!(s.start<=c))return;r="start"}var f="center"===r?s.start+s.size/2:"end"===r?s.end:s.start;R(f,cr({align:r},i))}}),[R,a]),N=i.a.useCallback((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];L.apply(void 0,t),requestAnimationFrame((function(){L.apply(void 0,t)}))}),[L]);return{virtualItems:P,totalSize:A,scrollToOffset:R,scrollToIndex:N,measure:T}}function br(e){window.scrollY=e}var yr=Object(r.forwardRef)((function(e,t){var n=e.children,a=e.items,o=e.overscan,l=Object(r.useRef)(),c=mr({parentRef:l,size:a.length,estimateSize:gr,overscan:o}),u=c.virtualItems,s=c.totalSize,f=c.measure;return Object(r.useImperativeHandle)(t,(function(){return{measure:f}})),i.a.createElement("div",{ref:l,style:{height:s}},i.a.createElement("div",{style:{height:s,position:"relative"}},u.map((function(e){return i.a.createElement("div",{key:e.index,ref:e.measureRef,style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY(".concat(e.start,"px)")}},n({item:a[e.index],virtualItem:e,index:e.index,measure:f}))}))))}));function gr(){return 500}var Or=Object(r.forwardRef)((function(e,t){var n=e.children,a=e.items;return Object(r.useImperativeHandle)(t,(function(){return{measure:Er}})),i.a.createElement(i.a.Fragment,null,a.map((function(e,t){return n({item:e,virtualItem:null,index:t,measure:Er})})))}));function Er(){return null}var wr=["children","items","bypass"];function Sr(){return(Sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Ir=Object(r.forwardRef)((function(e,t){var n=e.children,r=e.items,a=e.bypass,o=Tr(e,wr),l=a?Or:yr;return i.a.createElement(l,Sr({ref:t,items:r},o),n)}));function jr(e){var t=e.className,n=e.onExpand,r=e.onExpandAll,a=e.diffCount;return(i.a.createElement(E.a,{className:t,variant:"body2"},i.a.createElement(Yn.a,{onClick:n},"показать еще ".concat(a)),Boolean(r)&&i.a.createElement(i.a.Fragment,null,", ",i.a.createElement(Yn.a,{onClick:r},"раскрыть все"))))}function Ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pr(e){var t=e.classes,n=e.collapsible,a=e.children,o=e.items,l=e.onExpand,c=e.onExpandAll,u=e.alwaysExpandedItemsCount,s=e.collapsibleThreshold,f=Ar(Object(r.useState)(!0),2),d=f[0],p=f[1],v=n&&o.length>u+s&&d,h=v?o.slice(0,u):o;return i.a.createElement(i.a.Fragment,null,a({items:h}),v&&i.a.createElement(jr,{className:t.actions,diffCount:o.length-h.length,onExpand:function(e){l&&l(e),p(!1)},onExpandAll:c}))}function Cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(n),!0).forEach((function(t){Lr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nr(e){return zr(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||kr(e)||Dr()}function xr(e,t){return zr(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||kr(e,t)||Dr()}function Dr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kr(e,t){if(e){if("string"==typeof e)return Mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mr(e,t):void 0}}function Mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zr(e){if(Array.isArray(e))return e}function Fr(e){var t=e.classes,n=e.children,a=e.provision,o=e.urls,l=e.config,c=e.visitsList,u=e.groupsOrder,f=e.sortingOrder,p=e.isObscure,v=e.adaptHeadersSize,h=e.mapSectionLevel,m=e.photosSectionLevel,b=e.forwardingProps,y=e.virtualize,g=Object(r.useRef)(),O=xr(Object(r.useState)(!0),2),E=O[0],w=O[1],S=Object(r.useCallback)((function(){return w(!1)}),[]);Object(r.useEffect)((function(){var e;return null===(e=g.current)||void 0===e?void 0:e.measure()}),[E]);var T=!y;return function e(r,c){var u,y=Nr(c),O=y[0],w=y.slice(1);if(!O)return null;var I=q[O].component,j=r.visitsList,A=function(e){var t=e,n=0;for(;t;)n+=1,t=t.parent;return Math.max(0,n-1)}(r),_=A+c.length,P=(Array.isArray(v)?v[A]:v)?function(e,t){return d()(3-t+e,0,2)}(A,_):A,C=rt(ee(j,O).map((function(e){var t=Rr(Rr({},e),{},{plainGroup:O,parent:r});return t.stats=me(t,a),t})),f,O,a),R=T;T||(T=!0);return(i.a.createElement(i.a.Fragment,null,i.a.createElement(Pr,{classes:{actions:s()(t.link,t["level".concat(A)])},collapsible:E&&O===W.LOCATIONS,items:C,onExpand:null===(u=g.current)||void 0===u?void 0:u.measure,onExpandAll:S},(function(r){var c=r.items;return(i.a.createElement(Ir,{items:c,bypass:R,ref:R?void 0:g,overscan:3},(function(r){var c,u,s,f,d,v=r.item,y=r.index;return i.a.createElement(Zn,{key:(u=v.field,s=null!=u?u:{},f=s.name,d=s.value,"".concat(f,":").concat(d)),classes:Vr(t,{nestingLevel:A,sectionLevel:P,isFirstChild:0===y}),visitsGroup:v,VisitsGroupComponent:I,config:l,isObscure:p,provision:a,urls:o,forwardingProps:b,showMap:A===h,showPhotos:A===m,onHeightChange:null===(c=g.current)||void 0===c?void 0:c.measure},null==n?void 0:n({level:A,className:t["level".concat(A+1)],index:y,visitsGroup:v}),e(v,w))})))}))))}({visitsList:c,parent:null,field:null},u)}Pr.defaultProps={alwaysExpandedItemsCount:10,collapsibleThreshold:2};function Vr(e,t){var n=t.nestingLevel,r=t.sectionLevel,i=t.isFirstChild;return{level:e["level".concat(n)],nextLevel:e["level".concat(n+1)],container:s()(e["level".concat(n)],e["container".concat(r)],Lr({},e.noMarginTop,i&&0===n)),header:e["header".concat(r)]}}var Br=["visitsList","groupsOrder","sortingOrder","filteringOption","provision","urls","config","adaptHeadersSize","mapSectionLevel","photosSectionLevel","children","virtualize"];function Ur(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){Gr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wr=Object(a.a)((function(e){return{noMarginTop:{},link:{cursor:"pointer"},header0:Yr(Yr({},e.typography.h2),{},{wordBreak:"break-word"}),container0:{display:"flex",alignItems:"self-start","&:not($noMarginTop)":{marginTop:"64px"}},level0:{},header1:Yr(Yr({},e.typography.h4),{},{wordBreak:"break-word"}),container1:{display:"flex",alignItems:"self-start",marginTop:"18px",marginBottom:"6px"},level1:Gr({},e.breakpoints.up("sm"),{paddingLeft:"32px"}),header2:Yr(Yr({},e.typography.body1),{},{wordBreak:"break-word"}),container2:{display:"flex",alignItems:"center"},level2:Gr({},e.breakpoints.up("sm"),{paddingLeft:"96px"})}}));function qr(e){var t=e.visitsList,n=e.groupsOrder,r=e.sortingOrder,i=e.filteringOption,a=e.provision,o=e.urls,c=e.config,u=e.adaptHeadersSize,s=e.mapSectionLevel,f=e.photosSectionLevel,d=e.children,p=e.virtualize,v=Ur(e,Br);return Fr({classes:Wr(),children:d,provision:a,urls:o,config:c,visitsList:t.filter(l(a,i)),groupsOrder:n,sortingOrder:r,adaptHeadersSize:u,mapSectionLevel:s,photosSectionLevel:f,virtualize:p,forwardingProps:v})}qr.defaultProps={mapSectionLevel:0,photosSectionLevel:0};t.e=qr},864:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return f}));n(26),n(12),n(27),n(22),n(28),n(43),n(14),n(29),n(30),n(17),n(20),n(18),n(40),n(42),n(41),n(24),n(36),n(23),n(35),n(50),n(37),n(44),n(45),n(46),n(51),n(49);var r=n(116),i=n(136);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t=e.domain,n=e.locationsIds,a=Object(r.c)((function(e){return Object(i.c)(e,"locations")||{}})),o=n.filter((function(e){return!a[e]}));return Object(i.g)({domain:t,isProvision:!0,modelName:"locations",observe:n,condition:Boolean(o.length),query:{filter:{id:{comparator:"in",value:o}},navigation:{isDisabled:!0}}})}function f(e){var t=e.domain,n=c(Object(i.h)({domain:t,modelName:"locations",method:"POST"}),2),r=n[0];return o(o({},n[1]),{},{submitLocationRating:r})}},865:function(e,t,n){"use strict";n.d(t,"b",(function(){return r.a})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return d}));var r=n(837),i=(n(845),n(64),n(23),n(35),n(14),n(26),n(12),n(27),n(22),n(28),n(50),n(37),n(44),n(45),n(46),n(51),n(49),n(43),n(29),n(30),n(17),n(20),n(18),n(40),n(42),n(41),n(24),n(36),n(116)),a=n(136);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=e.userAlias,n=e.visitId,r=Object(i.c)((function(e){return{visitsDict:Object(a.c)(e,"visits")||{}}})).visitsDict[n];return u({visit:r},Object(a.g)({domain:"travel.visit".concat(n,"-").concat(t),isProvision:!0,modelName:"visits",observe:n,condition:!r,query:{userAlias:t,filter:{visit_id:{comparator:"=",value:n}},navigation:{isDisabled:!0}}}))}function d(e){var t=e.domain,n=o(Object(a.h)({domain:t,modelName:"visits",method:"POST",contentType:"multipart/form-data"}),2),r=n[0];return u(u({},n[1]),{},{submitVisitPhoto:r})}},876:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(23),n(35),n(14),n(26),n(12),n(27),n(22),n(28),n(50),n(37),n(44),n(45),n(46),n(51),n(49);var r=n(116),i=n(136);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){var t=e.domain,n=e.userAlias,a=Object(r.c)((function(e){return Object(i.e)(e,"users",n)}));return o(o({},Object(i.g)({domain:t,applicableSchemaName:"item",isProvision:!0,modelName:"users",observe:n,condition:Boolean(n),query:{id:n}})),{},{user:a})}},877:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i=n(68);function a(e){var t=e.editable,n=e.userAlias,a=e.section,o=Object(i.d)().travel;return Object(r.useMemo)((function(){return{hyperlinks:function(){},locationsUrl:o.locations.toUrl({userAlias:n,section:a}),tripCreateUrl:t?o.tripCreate.toUrl({userAlias:n}):null,resolveLocationUrl:function(e){var t=e.locationId;return o.location.toUrl({userAlias:n,section:a,strLocationId:String(t)})},resolveCountryUrl:function(e){var t=e.countryId;return o.country.toUrl({userAlias:n,section:a,strCountryId:String(t)})},resolveYearUrl:function(e){var t=e.year;return t?o.year.toUrl({userAlias:n,section:a,strYear:String(t)}):null},resolveTripEditUrl:function(e){var r=e.tripId;return t?o.tripEdit.toUrl({strTripId:String(r),userAlias:n}):null},resolveTripUrl:function(e){var t=e.tripId;return o.trip.toUrl({strTripId:String(t),userAlias:n})},resolveVisitUrl:function(e){var t=e.visitId;return o.visit.toUrl({userAlias:n,section:a,strVisitId:String(t)})}}}),[t,o])}},910:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var r=n(0),i=n.n(r),a=n(1014),o=n.n(a),l=n(1013),c=n.n(l),u=n(1011),s=n.n(u),f=n(1008),d=n.n(f),p=n(1022),v=n.n(p),h=n(1010),m=n.n(h),b=n(1016),y=n.n(b),g=n(1017),O=n.n(g),E=n(1009),w=n.n(E),S=n(938),T=n.n(S),I=n(1012),j=n.n(I),A=n(1015),_=n.n(A),P=n(1018),C=n.n(P),R=n(1019),L=n.n(R),N=n(1020),x=n.n(N),D=n(1021),k=n.n(D),M=n(1023),z=n.n(M),F=n(128);function V(e){var t=e.ride.vehicleType,n=e.className,r=function(e){switch(e){case F.VEHICLE_TYPES.CAR:return d.a;case F.VEHICLE_TYPES.TRAIN:return w.a;case F.VEHICLE_TYPES.AIRCRAFT:return m.a;case F.VEHICLE_TYPES.BUS:case F.VEHICLE_TYPES.TROLLEY:case F.VEHICLE_TYPES.CITY_BUS:return s.a;case F.VEHICLE_TYPES.MOTORHOME:case F.VEHICLE_TYPES.JITNEY:return j.a;case F.VEHICLE_TYPES.LOCAL_TRAIN:return w.a;case F.VEHICLE_TYPES.FERRY:return c.a;case F.VEHICLE_TYPES.BIKE:return o.a;case F.VEHICLE_TYPES.BY_FEET:return _.a;case F.VEHICLE_TYPES.MOTORBIKE:return y.a;case F.VEHICLE_TYPES.TRUCK:return T.a;case F.VEHICLE_TYPES.ALL_TERRAIN_VEHICLE:return O.a;case F.VEHICLE_TYPES.TRAM:return C.a;case F.VEHICLE_TYPES.TAXI:return L.a;case F.VEHICLE_TYPES.SUBWAY:return x.a;case F.VEHICLE_TYPES.PUBLIC_TRANSPORT:return k.a;case F.VEHICLE_TYPES.ROPEWAY:case F.VEHICLE_TYPES.FUNICULAR:return v.a;default:return z.a}}(t);return i.a.createElement(r,{className:n})}},911:function(e,t,n){var r;
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),a={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pipe=t.listenerOptions=void 0,t.preventTouchMove=function(e){return e.preventDefault(),!1},t.allowTouchMove=function(e){var t=e.currentTarget;if(t.scrollHeight>t.clientHeight)return e.stopPropagation(),!0;return e.preventDefault(),!1},t.preventInertiaScroll=function(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)},t.isTouchDevice=function(){return!!r.canUseDOM&&("ontouchstart"in window||navigator.maxTouchPoints)},t.camelToKebab=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},t.parse=function(e){return isNaN(e)?e:e+"px"},t.getPadding=function(){if(!r.canUseDOM)return 0;var e=parseInt(window.getComputedStyle(document.body).paddingRight,10),t=window.innerWidth-document.documentElement.clientWidth;return e+t},t.getWindowHeight=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(r.canUseDOM)return window.innerHeight*e},t.getDocumentHeight=function(){if(r.canUseDOM)return document.body.clientHeight},t.makeStyleTag=function(){if(!r.canUseDOM)return;var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-react-scrolllock",""),e},t.injectStyles=function(e,t){if(!r.canUseDOM)return;e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))},t.insertStyleTag=function(e){if(!r.canUseDOM)return;(document.head||document.getElementsByTagName("head")[0]).appendChild(e)};var r=n(911);t.listenerOptions={capture:!1,passive:!1};var i=function(e,t){return function(){return t(e.apply(void 0,arguments))}};t.pipe=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(i)}},937:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),i=n.n(r),a=n(815),o=n(1024),l=n.n(o),c=n(842),u=n(128),s=n(910),f=Object(a.a)({icon:{color:"gray",fontSize:16,height:16},absoluteIcon:{color:"gray",fontSize:16,height:16,position:"absolute"},detail:{color:"gray",fontSize:12}});function d(e){var t=e.ride,n=e.ride,r=(n=void 0===n?{}:n).rideType,a=e.className,o=e.isLong,d=f();return t?i.a.createElement("div",{className:a},i.a.createElement(s.a,{ride:t,className:d.icon}),r===u.RIDE_TYPES.HITCH_HIKING&&i.a.createElement(l.a,{className:d.absoluteIcon}),o&&Object(c.b)(t)):null}},943:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"c",(function(){return K})),n.d(t,"b",(function(){return Q}));n(71),n(72),n(73),n(354),n(355),n(220),n(23),n(35),n(14),n(26),n(12),n(27),n(22),n(28),n(50),n(37),n(44),n(45),n(46),n(51),n(49);var r,i=n(0),a=n.n(i),o=n(3),l=n.n(o),c=n(115),u=n.n(c),s=n(996),f=n.n(s),d=n(815),p=n(294),v=n(295),h=(n(153),n(154),n(155),n(855)),m=n.n(h),b=n(863),y=n.n(b);function g(e){var t=e.locationsIds,n=e.locationsDict,r=e.visitsDict,i=e.locationsRating;return t.map((function(e){var t,a=n[e];if(!a)return null;var o=a.lon,l=a.lat,c=a.locationName,u=a.visitsIds,s=function(e,t){return e.reduce((function(e,n){var r=t[n];if(r){var i=r.arrivalDateTime,a=r.departureDateTime;e.firstVisitDateTime=m()([e.firstVisitDateTime,i]),e.lastVisitDateTime=y()([e.lastVisitDateTime,a])}return e}),{firstVisitDateTime:null,lastVisitDateTime:null})}(null!=u?u:[],r);return{locationName:c,lat:l,lon:o,firstVisitDateTime:s.firstVisitDateTime,lastVisitDateTime:s.lastVisitDateTime,locationRating:i[e],visitsCount:null===(t=a.visitsIds)||void 0===t?void 0:t.length}}))}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={BY_FIRST_VISIT:"fv",BY_LAST_VISIT:"lv",BY_VISITS_COUNT:"vc",BY_RATING:"r"},w=E.BY_LAST_VISIT,S=["step_by_time_1_zjtrlw.png","step_by_time_2_tvotvg.png","step_by_time_3_ylj1vi.png","step_by_time_4_uovfrs.png","step_by_time_5_s4jq0u.png","step_by_time_6_lmihnf.png"],T=(O(r={},E.BY_FIRST_VISIT,S),O(r,E.BY_LAST_VISIT,S),O(r,E.BY_VISITS_COUNT,["step_by_visits_1_zv3tba.png","step_by_visits_2_qthjqa.png","step_by_visits_3_xcjyla.png","step_by_visits_4_kwdwka.png","step_by_visits_5_xnnipa.png"]),O(r,E.BY_RATING,["step_by_rating_1_id2qgb.png","step_by_rating_2_iiqvik.png","step_by_rating_3_x2gzsd.png","step_by_rating_4_cbqdcn.png","step_by_rating_5_viyhls.png","step_by_rating_6_zzfgki.png","step_by_rating_7_pjjhhq.png","step_by_rating_8_vgetsd.png","step_by_rating_9_t6tenz.png","step_by_rating_10_yjywr0.png"]),r),I={ALL:"all",WANT_COME_BACK:"good",LOVE_THIS_PLACE:"best"},j=I.ALL,A=n(285);function _(e){var t=e.visitsCount;switch(!0){case t>10:return 5;case t>5:return 4;case t>2:return 3;case t>1:return 2;default:return 1}}function P(e){switch(e.locationRating){case A.LOCATION_RATING.PLACE_TO_LIVE:return 1;case A.LOCATION_RATING.FEW_PER_YEAR:case A.LOCATION_RATING.ONCE_PER_YEAR:return 3;case A.LOCATION_RATING.ONCE_PER_TWO_YEARS:case A.LOCATION_RATING.ONCE_PER_FIVE_YEARS:return 4;case A.LOCATION_RATING.ONCE_PER_DECADE:case A.LOCATION_RATING.TWICE_PER_LIVE:return 7;case A.LOCATION_RATING.ONCE_PER_LIVE:return 9;case A.LOCATION_RATING.NEVER:return 10;default:return 6}}function C(e){return{resolveStep:function(t,n){var r=(t[e]-n.minTime)/n.diff*6;return Math.min(Math.max(Math.floor(r),0),6)},resolveOptions:function(t){var n=t.map((function(t){return t[e]&&t[e].getTime()})).filter(Boolean),r=m()(n);return{minTime:r,diff:y()(n)+1-r}}}}n(353);var R=n(847),L=n(852);function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"eeeeee, d MMMM yyyy";return Object(L.a)(e,t,{locale:R.a})}function x(e){switch(e){case A.LOCATION_RATING.PLACE_TO_LIVE:return"Жил бы здесь";case A.LOCATION_RATING.FEW_PER_YEAR:case A.LOCATION_RATING.ONCE_PER_YEAR:return"Готов ездить сюда постоянно";case A.LOCATION_RATING.ONCE_PER_TWO_YEARS:case A.LOCATION_RATING.ONCE_PER_FIVE_YEARS:return"Приезжал бы иногда";case A.LOCATION_RATING.ONCE_PER_DECADE:case A.LOCATION_RATING.TWICE_PER_LIVE:return"Заглянул бы еще разок";case A.LOCATION_RATING.ONCE_PER_LIVE:return"Одного посещения достаточно";case A.LOCATION_RATING.NEVER:return"Тут нечего делать";default:return"?"}}n(64);function D(e,t){if(!t)return"".concat("https://res.cloudinary.com/dc2eke0gj/image/upload/markers/").concat(S[0]);var n=T[t],r=n[e-1]||n[0];return"".concat("https://res.cloudinary.com/dc2eke0gj/image/upload/markers/").concat(r)}n(43),n(29),n(30),n(17),n(20),n(18),n(40),n(42),n(41),n(24),n(36);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=n(231),F=n(819),V=n(820),B=n(822),U=n(833),H=n(1296),Y=n(1279);function G(e){var t=e.classes,n=e.scaleBy,r=e.onClose,i=e.onChange;return(a.a.createElement(F.a,null,a.a.createElement(V.a,null,a.a.createElement(B.a,{className:t.formControl},a.a.createElement(U.a,{shrink:!0,id:"select-scaleBy-filter-label"},"Раскрасить маркеры"),a.a.createElement(H.a,{labelId:"select-scaleBy-filter-label",autoWidth:!0,id:"select-scaleBy-filter",value:n,onChange:function(e){r();var t,n,a,o=e.target.value,l=(a=o,(n="scale")in(t={})?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t);o!==E.BY_RATING&&(l.rating=void 0),i(l)}},a.a.createElement(Y.a,{key:E.BY_FIRST_VISIT,value:E.BY_FIRST_VISIT},"По первому посещению"),a.a.createElement(Y.a,{key:E.BY_LAST_VISIT,value:E.BY_LAST_VISIT},"По последнему посещению"),a.a.createElement(Y.a,{key:E.BY_VISITS_COUNT,value:E.BY_VISITS_COUNT},"По числу посещений"),a.a.createElement(Y.a,{key:E.BY_RATING,value:E.BY_RATING},"По рейтингу"))))))}function W(e){var t=e.classes,n=e.ratingLevel,r=e.onClose,i=e.onChange;return(a.a.createElement(F.a,null,a.a.createElement(V.a,null,a.a.createElement(B.a,{className:t.formControl},a.a.createElement(U.a,{shrink:!0,id:"select-ratingLevel-filter-label"},"Фильтр по рейтингу"),a.a.createElement(H.a,{labelId:"select-ratingLevel-filter-label",autoWidth:!0,id:"select-ratingLevel-filter",value:n,onChange:function(e){var t,n,a;r(),i((t={},n="rating",a=e.target.value,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}},a.a.createElement(Y.a,{key:I.ALL,value:I.ALL},"Все"),a.a.createElement(Y.a,{key:I.WANT_COME_BACK,value:I.WANT_COME_BACK},"Куда бы вернулся"),a.a.createElement(Y.a,{key:I.LOVE_THIS_PLACE,value:I.LOVE_THIS_PLACE},"Лучшие места"))))))}G.propTypes={classes:l.a.shape({formControl:l.a.string.isRequired}).isRequired,scaleBy:l.a.oneOf(Object.values(E)).isRequired,onClose:l.a.func.isRequired,onChange:l.a.func.isRequired},W.propTypes={classes:l.a.shape({formControl:l.a.string.isRequired}).isRequired,ratingLevel:l.a.oneOf(Object.values(I)).isRequired,onClose:l.a.func.isRequired,onChange:l.a.func.isRequired};var q=Object(d.a)({formControl:{width:"100%"}}),K=function(e,t){var n=q(),r=t||{},i=r.scale,o=r.rating,l=function(e){return Object.values(E).includes(e)?e:w}(i),c=function(e){return Object.values(I).includes(e)?e:j}(o);return Object(z.b)((function(t){var r=t.closeSidebar;return(a.a.createElement(a.a.Fragment,null,a.a.createElement(G,{classes:n,onClose:r,scaleBy:l,onChange:e}),l===E.BY_RATING&&a.a.createElement(W,{classes:n,onClose:r,ratingLevel:c,onChange:e})))}),[l,c]),{scaleBy:l,ratingLevel:c}};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=Object(d.a)({googleMapContainer:{margin:"12px 0",maxWidth:"100%",flexGrow:1,minHeight:function(e){return e.minHeight},position:"relative"},googleMapPosition:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0"}});function Q(e){var t=e.className,n=e.locationsDict,r=e.visitsDict,o=e.locationsRating,l=e.locationsIds,c=e.minHeight,s=e.scaleBy,d=e.ratingLevel,p=Z({minHeight:c}),v=function(e){var t=k(Object(i.useState)(null),2),n=t[0],r=t[1],a=Object(i.useRef)(!0);return Object(i.useEffect)((function(){if(n){var t=n.map,r=n.maps,i=new r.LatLngBounds,o=e.map((function(e){var n=e.lat,a=e.lon,o=e.iconUrl,l=e.title,c=e.zIndex,u=new r.Marker({map:t,position:{lat:n,lng:a},icon:{url:o,scaledSize:new r.Size(24,24)},scale:.5,title:l,zIndex:c});return i.extend(u.position),u}));return a.current&&(t.setOptions({maxZoom:11,minZoom:2}),t.fitBounds(i),t.setOptions({maxZoom:null,minZoom:null}),a.current=!1),function(){o.forEach((function(e){e.setMap(null),e.setVisible(!1)})),o.length=0}}}),[n,e]),{handleGoogleApiLoaded:function(e){return r(e)}}}(Object(i.useMemo)((function(){var e=function(e,t){var n=t.ratingLevel,r=e.filter(Boolean);return Object.values(I).includes(n)&&n!==I.ALL?r.filter((function(e){var t=e.locationRating,r=e.visitsCount;switch(n){case I.WANT_COME_BACK:return r<2?t<=A.LOCATION_RATING.TWICE_PER_LIVE:t<=A.LOCATION_RATING.ONCE_PER_DECADE;case I.LOVE_THIS_PLACE:return t<=A.LOCATION_RATING.ONCE_PER_YEAR;default:return!0}})):r}(g({locationsDict:n,visitsDict:r,locationsRating:o,locationsIds:l}),{ratingLevel:d}),t=function(e){switch(e){case E.BY_VISITS_COUNT:return{resolveStep:_};case E.BY_RATING:return{resolveStep:P};case E.BY_LAST_VISIT:return C("lastVisitDateTime");case E.BY_FIRST_VISIT:return C("firstVisitDateTime");default:return{resolveStep:function(){return 1}}}}(s),i=t.resolveStep,a=t.resolveOptions,c=a&&a(e);return e.map((function(e){var t,n,r,a,o,l,u=i(e,c);return X(X({},e),{},{zIndex:[E.BY_RATING,E.BY_FIRST_VISIT].includes(s)?10-u:u,iconUrl:D(u,s),title:(t=e,n=t.locationName,r=t.locationRating,a=t.visitsCount,o=t.firstVisitDateTime,l=t.lastVisitDateTime,[n,"Посещено ".concat(a," раз"),"Впервые ".concat(N(o)),a>1&&"Прошлое посешение ".concat(N(l)),"Рейтинг: ".concat(x(r))].filter(Boolean).join("\n"))})}))}),[n,r,o,l,s,d])).handleGoogleApiLoaded;return a.a.createElement("div",{className:u()(t,p.googleMapContainer)},a.a.createElement("div",{className:p.googleMapPosition},a.a.createElement(f.a,{bootstrapURLKeys:{key:"AIzaSyCvP0e64ui7WpXKBdzOyEmkb4l5RuGy3Zs"},center:{lat:0,lng:0},zoom:11,onGoogleApiLoaded:v})))}Q.propTypes={className:l.a.string,visitsDict:l.a.objectOf(l.a.shape(v.default)).isRequired,locationsDict:l.a.objectOf(l.a.shape(p.default)).isRequired,locationsIds:l.a.arrayOf(l.a.number).isRequired,locationsRating:l.a.objectOf(l.a.number).isRequired,minHeight:l.a.number,scaleBy:l.a.oneOf(Object.values(E)).isRequired,ratingLevel:l.a.oneOf(Object.values(I)).isRequired},Q.defaultProps={className:void 0,minHeight:"400px"}},946:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(866),n(71),n(72),n(73),n(35),n(26),n(12),n(27),n(22),n(28),n(64),n(284);var r=n(1005),i=n(1006),a=n(935),o=n.n(a),l=(n(353),n(40),n(936)),c=n.n(l),u=function(e,t){var n=t.maxLength,r=t.separator,i=void 0===r?", ":r,a=c()(e),o=a.slice(0,n).join(i);return a.length>n?"".concat(o,"..."):o},s=n(293),f=n(842);function d(e,t,n,a){var l,c=e||{},d=c.visits,p=c.originLocationId,v=c.tripName,h=c.hasAutogeneratedTripName,m=null===(l=a[p])||void 0===l?void 0:l.countryId;if(!h)return v||"Без названия";if(!d.length)return"Без названия";var b=Object(f.c)({arrivalDateTime:Object(r.a)(d.map((function(e){var n;return null===(n=t[e])||void 0===n?void 0:n.arrivalDateTime}))),departureDateTime:Object(i.a)(d.map((function(e){var n;return null===(n=t[e])||void 0===n?void 0:n.departureDateTime})))}),y=Object.keys(o()(d.filter((function(e){var n;return(null===(n=t[e])||void 0===n?void 0:n.visitType)!==s.VISIT_TYPES.TRANSIT})),"countryId"));if(1===y.length){var g=u(d.map((function(e){var n;return null===(n=t[e])||void 0===n?void 0:n.locationName})),{maxLength:4});return"".concat(g||"Без названия",", ").concat(b)}var O=u(y.map((function(e){return Number(e)!==m&&n[e]&&n[e].countryName})).filter(Boolean),{maxLength:4});return"".concat(O||"Без названия",", ").concat(b)}}}]);
//# sourceMappingURL=travel-Places-a92bdcc1910b5f3b4fc9.js.map