(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{796:function(n,t,e){"use strict";var r=e(0),a=e.n(r),i=e(262),o=function(n){return function(t){var e=t.provision,r=(e=void 0===e?{}:e).isComplete,o=void 0!==r&&r,u=e.isPending;return!o||(void 0===u||u)?a.a.createElement(i.a,null):a.a.createElement(n,t)}},u=e(127);t.a=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(n){return function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(n){return t.reduceRight(function(n,t){return t(n)},n)}}(u.a.apply(void 0,t),o)(n)}}},798:function(n,t,e){var r=e(804),a=e(138);n.exports=function(n,t){return n&&r(n,t,a)}},799:function(n,t,e){var r=e(261),a=e(800),i=Object.prototype.hasOwnProperty,o=a(function(n,t,e){i.call(n,e)?n[e].push(t):r(n,e,[t])});n.exports=o},800:function(n,t,e){var r=e(801),a=e(802),i=e(373),o=e(28);n.exports=function(n,t){return function(e,u){var s=o(e)?r:a,c=t?t():{};return s(e,n,i(u,2),c)}}},801:function(n,t){n.exports=function(n,t,e,r){for(var a=-1,i=null==n?0:n.length;++a<i;){var o=n[a];t(r,o,e(o),n)}return r}},802:function(n,t,e){var r=e(803);n.exports=function(n,t,e,a){return r(n,function(n,r,i){t(a,n,e(n),i)}),a}},803:function(n,t,e){var r=e(798),a=e(806)(r);n.exports=a},804:function(n,t,e){var r=e(805)();n.exports=r},805:function(n,t){n.exports=function(n){return function(t,e,r){for(var a=-1,i=Object(t),o=r(t),u=o.length;u--;){var s=o[n?u:++a];if(!1===e(i[s],s,i))break}return t}}},806:function(n,t,e){var r=e(263);n.exports=function(n,t){return function(e,a){if(null==e)return e;if(!r(e))return n(e,a);for(var i=e.length,o=t?i:-1,u=Object(e);(t?o--:++o<i)&&!1!==a(u[o],o,u););return e}}},808:function(n,t,e){var r=e(379),a=e(377),i=e(809),o=e(380),u=e(810),s=e(374),c=200;n.exports=function(n,t,e){var l=-1,v=a,f=n.length,p=!0,d=[],m=d;if(e)p=!1,v=i;else if(f>=c){var h=t?null:u(n);if(h)return s(h);p=!1,v=o,m=new r}else m=t?[]:d;n:for(;++l<f;){var g=n[l],y=t?t(g):g;if(g=e||0!==g?g:0,p&&y==y){for(var b=m.length;b--;)if(m[b]===y)continue n;t&&m.push(y),d.push(g)}else v(m,y,e)||(m!==d&&m.push(y),d.push(g))}return d}},809:function(n,t){n.exports=function(n,t,e){for(var r=-1,a=null==n?0:n.length;++r<a;)if(e(t,n[r]))return!0;return!1}},810:function(n,t,e){var r=e(378),a=e(376),i=e(374),o=r&&1/i(new r([,-0]))[1]==1/0?function(n){return new r(n)}:a;n.exports=o},811:function(n,t,e){"use strict";var r=e(0),a=e.n(r),i=e(2),o=e.n(i),u=e(176),s=e(38),c=e(260),l=e.n(c),v=e(113),f=e(27),p=function(n){var t=n.children,e=n.match.params.userAlias,r=n.namedPaths,i=(r=void 0===r?{}:r).travel,o=(i=void 0===i?{}:i).trips,s=n.shouldShowLinkToTrips;return a.a.createElement("div",null,a.a.createElement("span",null,"Нам пока ничего не известно о ваших путешествиях. Но очень интересно узнать.")," ",s?a.a.createElement(u.b,{to:o.toUrl({userAlias:e})},"Создайте"):a.a.createElement("span",null,"Создайте")," ",a.a.createElement("span",null,"вашу первую поездку, а мы подготовим по ней отчет"),t)};p.propTypes={children:o.a.node,match:o.a.shape({params:o.a.shape({userAlias:o.a.string})}).isRequired,namedPaths:o.a.shape({travel:o.a.shape({trips:o.a.instanceOf(v.a)})}).isRequired,shouldShowLinkToTrips:o.a.bool},p.defaultProps={children:null,shouldShowLinkToTrips:!0},t.a=l()(s.g,f.f)(p)},823:function(n,t,e){var r=e(808);n.exports=function(n){return n&&n.length?r(n):[]}},956:function(n,t,e){"use strict";e.r(t);var r=e(0),a=e.n(r),i=e(799),o=e.n(i),u=e(823),s=e.n(u),c=e(381),l=e.n(c),v=e(2),f=e.n(v),p=e(796),d=e(127),m=e(811),h=e(244),g=e(174),y=function(n,t){var e=n.countryName,r=void 0===e?"":e,a=n.visitsCount,i=void 0===a?0:a,o=n.locations,u=void 0===o?[]:o,s=t.countryName,c=void 0===s?"":s,l=t.visitsCount,v=void 0===l?0:l,f=t.locations;return v-i||(void 0===f?[]:f).length-u.length||r.localeCompare(c)},b=function(n,t){var e=n.locationName,r=void 0===e?"":e,a=n.visitsCount,i=void 0===a?0:a,o=t.locationName,u=void 0===o?"":o,s=t.visitsCount;return(void 0===s?0:s)-i||r.localeCompare(u)},E=function(n){var t=n.countriesDict,e=n.visits,i=(e=void 0===e?{}:e).data,u=void 0===i?[]:i;if(!u.length)return a.a.createElement(m.a,null);var c=Object(r.useMemo)(function(){return Object.values(o()(u,l()("countryId"))).map(function(n){var e=n[0].countryId;return{countryId:e,countryName:(t[e]||{}).countryName,visitsCount:s()(n.map(l()("tripId"))).length,locations:Object.values(o()(n,l()("locationId"))).map(function(n){var t=n[0];return{locationId:t.locationId,locationName:t.locationName,visitsCount:s()(n.map(l()("tripId"))).length}}).sort(b)}}).sort(y)},[u,t]);return a.a.createElement("div",null,c.map(function(n,t){var e=n.countryId,r=n.countryName,i=n.locations,o=n.visitsCount;return a.a.createElement("div",{key:"id".concat(e)},a.a.createElement("h2",null,a.a.createElement("span",null,"".concat(t+1,". ")),a.a.createElement("span",null,r),o>1&&a.a.createElement("span",null," x".concat(o))),a.a.createElement("div",null,i.map(function(n,t){var e=n.locationId,r=n.locationName,i=n.visitsCount;return a.a.createElement("div",{key:"id".concat(e)},a.a.createElement("span",null,"".concat(t+1,". ")),a.a.createElement("span",null,r),i>1&&a.a.createElement("span",null," x".concat(i)))})))}))};E.propTypes={countriesDict:f.a.shape(h.default),visits:f.a.shape({data:f.a.arrayOf(f.a.shape(g.default))})},E.defaultProps={countriesDict:{},visits:{data:[]}};t.default=Object(p.a)(function(n,t){var e=t.countriesDict,r=t.match.params.userAlias,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.userAlias,o=a.userTripsIds,u=(Object(d.e)(n,"countries.trips")||{}).fallback,s=((void 0===u?{}:u)[0]||{}).data,c=void 0===s?[]:s,l=i!==r,v=(!o||!o.length)&&Boolean(c.length);return{identity:{userAlias:r,userTripsIds:c},require:{countries:{isMissingIf:!e||!Object.keys(e).length,modelName:"countries",query:{navigation:{isDisabled:!0}}},trips:{modelName:"trips",isMissingIf:l,query:{userAlias:r,navigation:{isDisabled:!0}}},visits:{modelName:"visits",isMissingIf:v,query:{filter:{trip_id:{comparator:"in",value:c}},navigation:{isDisabled:!0}}}},meta:{domain:"countries"}}},function(n){return{countriesDict:Object(d.d)(n,"countries")}})(E)}}]);
//# sourceMappingURL=travel-Countries-902d5739251ec5a9ee3e.js.map