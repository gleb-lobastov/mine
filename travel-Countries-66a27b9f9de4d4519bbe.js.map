{"version":3,"sources":["webpack:///./src/packages/travel/pages/RidesPage/RidesPage.jsx","webpack:///./src/modules/components/loaders/ProvisionLoader.jsx","webpack:///./src/core/connection/withProvision.jsx","webpack:///./node_modules/lodash/groupBy.js","webpack:///./node_modules/lodash/uniq.js","webpack:///./src/packages/travel/components/common/WelcomeScreen/WelcomeScreen.jsx","webpack:///./src/packages/travel/components/common/withTripsData/withTripsData.jsx","webpack:///./src/packages/travel/components/common/withTripsData/selectors.js","webpack:///./node_modules/lodash/_createAggregator.js","webpack:///./node_modules/lodash/_arrayAggregator.js","webpack:///./node_modules/lodash/_baseAggregator.js","webpack:///./node_modules/lodash/_baseEach.js","webpack:///./node_modules/lodash/_createBaseEach.js","webpack:///./node_modules/lodash/_baseUniq.js","webpack:///./node_modules/lodash/_arrayIncludesWith.js","webpack:///./node_modules/lodash/_createSet.js","webpack:///./src/packages/travel/components/models/rides/RideEditDialog/localization.js"],"names":["byRidesCount","_ref","_ref2","ridesA","_slicedToArray","length","RidesPage","_ref5","isRidesComplete","_ref5$userRides","userRides","_ref5$userRides$data","data","ridesList","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","travel_components_common_WelcomeScreen__WEBPACK_IMPORTED_MODULE_5__","ridesByType","Object","entries","groupBy","sort","map","_ref6","text","counter","_ref7","vehicleType","rides","key","concat","VEHICLE_NAMES","propTypes","PropTypes","bool","isRequired","shape","arrayOf","ridesPropTypes","defaultProps","withTripsData","domain","mapStateToProps","state","selectIsReady","requirementsConfig","_requirementsConfig","_defineProperty","DATA_CHUNKS","USER","TRIPS","RIDES","withLoader","Component","props","_props$provision","provision","_props$provision$isPe","isPending","hasFallback","react_default","PlainLoader","__webpack_exports__","_len2","arguments","provisionParams","Array","_key2","ExtendableComponent","_len","funcsArray","_key","arg","reduceRight","composed","func","compose","provide","apply","baseAssignValue","__webpack_require__","createAggregator","hasOwnProperty","prototype","result","value","call","push","module","exports","baseUniq","array","react__WEBPACK_IMPORTED_MODULE_0__","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","react_router_dom__WEBPACK_IMPORTED_MODULE_2__","modules_packages__WEBPACK_IMPORTED_MODULE_4__","core_context_AuthContext__WEBPACK_IMPORTED_MODULE_5__","WelcomeScreen","children","visitedUserAlias","match","params","userAlias","tripsPath","usePaths","travel","trips","authenticatedUserAlias","useAuthContext","Message","useCallback","path","toUrl","component","to","node","string","withRouter","d","COMMON","COUNTRIES","LOCATIONS","VISITS","mapStateToRequirementsConfig","ProvisionedComponent","withProvision","countriesDict","userTripsIds","selectPlaceholder","selectUserTripsIds","isFunction","request","countries","modelName","condition","keys","query","navigation","isDisabled","userTrips","observe","_selectLocationsIds","tripsDict","selectDict","locationsDict","requiredLocationsIds","uniq","reduce","memo","tripId","trip","originLocationId","missingLocationsIds","filter","requiredLocationId","selectLocationsIds","userLocations","id","comparator","year","actualYear","parseInt","test","String","undefined","userVisits","trip_id","departure_date_time","arrival_date_time","arrayAggregator","baseAggregator","baseIteratee","isArray","setter","initializer","collection","iteratee","accumulator","index","baseEach","baseForOwn","createBaseEach","isArrayLike","eachFunc","fromRight","iterable","SetCache","arrayIncludes","arrayIncludesWith","cacheHas","createSet","setToArray","LARGE_ARRAY_SIZE","includes","isCommon","seen","set","outer","computed","seenIndex","Set","noop","values","RIDE_CLASSES_NAMES","_RIDE_CLASSES_NAMES","RIDE_CLASSES","ECONOMY","COMFORT","BUSINESS","FIRST","PRIVATE","RIDE_OCCUPATION_NAMES","_RIDE_OCCUPATION_NAME","RIDE_OCCUPATION","PASSENGER","STUFF","DRIVER","RIDE_TYPES_NAMES","_RIDE_TYPES_NAMES","RIDE_TYPES","SELF_DRIVE","SCHEDULED","CHARTER","TOUR","CARPOOL","HITCH_HIKING","DROP_OFF","_VEHICLE_NAMES","VEHICLE_TYPES","CAR","TRAIN","AIRCRAFT","BUS","MOTORHOME","LOCAL_TRAIN","FERRY","BIKE","BY_FEET","ROPEWAY","FUNICULAR","MOTORBIKE","TRUCK","ALL_TERRAIN_VEHICLE","TRAM","TROLLEY","TAXI","CITY_BUS","JITNEY","SUBWAY","PUBLIC_TRANSPORT"],"mappings":"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","file":"travel-Countries-66a27b9f9de4d4519bbe.js","sourcesContent":["import React from 'react';\nimport groupBy from 'lodash/groupBy';\nimport PropTypes from 'prop-types';\nimport withTripsData, {\n  DATA_CHUNKS,\n} from 'travel/components/common/withTripsData/withTripsData';\nimport { selectIsReady } from 'core/connection';\nimport WelcomeScreen from 'travel/components/common/WelcomeScreen';\nimport ridesPropTypes from 'travel/models/rides/propTypes';\nimport { VEHICLE_NAMES } from 'travel/components/models/rides/RideEditDialog/localization';\n\nconst withCounter = (text, counter) => {\n  if (!counter || counter === 1) {\n    return text;\n  }\n  return `${text} x${counter}`;\n};\n\nconst byRidesCount = ([, ridesA], [, ridesB]) => ridesB.length - ridesA.length;\n\nconst RidesPage = ({\n  isRidesComplete,\n  userRides: { data: ridesList = [] } = {},\n}) => {\n  if (isRidesComplete && !ridesList.length) {\n    return <WelcomeScreen />;\n  }\n\n  const ridesByType = Object.entries(groupBy(ridesList, 'vehicleType')).sort(\n    byRidesCount,\n  );\n\n  return (\n    <div>\n      {ridesByType.map(([vehicleType, rides]) => (\n        <div key={`id${vehicleType}`}>\n          <span>{withCounter(VEHICLE_NAMES[vehicleType], rides.length)}</span>\n        </div>\n      ))}\n    </div>\n  );\n};\nRidesPage.propTypes = {\n  isRidesComplete: PropTypes.bool.isRequired,\n  rides: PropTypes.shape({\n    data: PropTypes.arrayOf(PropTypes.shape(ridesPropTypes)),\n  }),\n};\nRidesPage.defaultProps = {\n  rides: { data: [] },\n};\n\nconst mapStateToProps = state => ({\n  isRidesComplete: selectIsReady(state, 'ridesPage.rides'),\n});\n\nexport default withTripsData({\n  domain: 'ridesPage',\n  mapStateToProps,\n  requirementsConfig: {\n    [DATA_CHUNKS.USER.TRIPS]: true,\n    [DATA_CHUNKS.USER.RIDES]: true,\n  },\n})(RidesPage);\n","/* eslint-disable import/prefer-default-export */\nimport React from 'react';\nimport PlainLoader from 'modules/components/loaders/PlainLoader';\n\n// todo implement logic, which loader to show for each request, etc.\nexport const withLoader = Component => props => {\n  const { provision: { isPending = true, hasFallback } = {} } = props;\n  if (isPending && !hasFallback) {\n    return <PlainLoader />;\n  }\n  return <Component {...props} />;\n};\n","import { withLoader } from 'modules/components/loaders/ProvisionLoader';\nimport { provide } from 'core/connection';\n\nconst compose = (...funcsArray) => arg =>\n  funcsArray.reduceRight((composed, func) => func(composed), arg);\n\nexport default (...provisionParams) => ExtendableComponent =>\n  compose(\n    provide(...provisionParams),\n    withLoader,\n  )(ExtendableComponent);\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","import React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Route, Redirect, Switch } from 'react-router-dom';\nimport Path from 'modules/utilities/routing/Path';\nimport { usePaths } from 'modules/packages';\nimport { useAuthContext } from 'core/context/AuthContext';\n\nconst WelcomeScreen = ({\n  children,\n  match: {\n    params: { userAlias: visitedUserAlias },\n  },\n}) => {\n  const {\n    travel: { trips: tripsPath },\n  } = usePaths();\n\n  const { userAlias: authenticatedUserAlias } = useAuthContext();\n  if (visitedUserAlias !== authenticatedUserAlias) {\n    return (\n      <span>Пользователь пока еще не внес информацию о своих поездках</span>\n    );\n  }\n  const Message = useCallback(\n    () => (\n      <div>\n        <span>\n          Нам пока ничего не известно о ваших путешествиях. Но очень интересно\n          узнать. Создайте вашу первую поездку, а мы подготовим по ней отчет\n        </span>\n        {children}\n      </div>\n    ),\n    [children],\n  );\n  return (\n    <Switch>\n      <Route\n        path={tripsPath.toUrl({ userAlias: authenticatedUserAlias })}\n        component={Message}\n      />\n      <Redirect to={tripsPath.toUrl({ userAlias: authenticatedUserAlias })} />\n    </Switch>\n  );\n};\n\nWelcomeScreen.propTypes = {\n  children: PropTypes.node,\n  match: PropTypes.shape({\n    params: PropTypes.shape({ userAlias: PropTypes.string }),\n  }).isRequired,\n};\n\nWelcomeScreen.defaultProps = {\n  children: null,\n};\n\nexport default withRouter(WelcomeScreen);\n","import React from 'react';\nimport { withRouter } from 'react-router';\nimport isFunction from 'lodash/isFunction';\nimport compose from 'lodash/fp/compose';\nimport withProvision from 'core/connection/withProvision';\nimport { selectUserTripsIds, selectLocationsIds } from './selectors';\n\nexport const DATA_CHUNKS = {\n  COMMON: {\n    COUNTRIES: 'COMMON.COUNTRIES',\n  },\n  USER: {\n    TRIPS: 'USER.TRIPS',\n    LOCATIONS: 'USER.LOCATIONS',\n    VISITS: 'USER.VISITS',\n    RIDES: 'USER.RIDES',\n  },\n};\n\nexport default ({\n  domain,\n  mapStateToProps,\n  requirementsConfig: mapStateToRequirementsConfig,\n}) => Component => {\n  const mapStateToRequirements = (state, props) => {\n    const {\n      countriesDict,\n      match: {\n        params: { userAlias },\n      },\n    } = props;\n    const userTripsIds = selectUserTripsIds(state, domain);\n\n    const requirementsConfig = isFunction(mapStateToRequirementsConfig)\n      ? mapStateToRequirementsConfig(state, props)\n      : mapStateToRequirementsConfig;\n\n    const request = {};\n    if (requirementsConfig[DATA_CHUNKS.COMMON.COUNTRIES]) {\n      request.countries = {\n        modelName: 'countries',\n        condition: !countriesDict || !Object.keys(countriesDict).length,\n        query: { navigation: { isDisabled: true } },\n      };\n    }\n    if (requirementsConfig[DATA_CHUNKS.USER.TRIPS]) {\n      request.userTrips = {\n        modelName: 'trips',\n        observe: userAlias,\n        query: { userAlias, navigation: { isDisabled: true } },\n      };\n    }\n    if (requirementsConfig[DATA_CHUNKS.USER.LOCATIONS]) {\n      const { requiredLocationsIds, missingLocationsIds } = selectLocationsIds(\n        state,\n        userTripsIds,\n      );\n\n      request.userLocations = {\n        modelName: 'locations',\n        observe: requiredLocationsIds,\n        condition: missingLocationsIds.length,\n        query: {\n          filter: { id: { comparator: 'in', value: missingLocationsIds } },\n          navigation: { isDisabled: true },\n        },\n      };\n    }\n    if (requirementsConfig[DATA_CHUNKS.USER.VISITS]) {\n      const { year } = requirementsConfig[DATA_CHUNKS.USER.VISITS];\n      const actualYear = parseInt(\n        /^\\d{4}$/.test(String(year)) ? year : undefined,\n        10,\n      );\n      request.userVisits = {\n        modelName: 'visits',\n        observe: { userTripsIds, year },\n        condition: userTripsIds && userTripsIds.length,\n        query: {\n          filter: {\n            trip_id: { comparator: 'in', value: userTripsIds },\n            departure_date_time: actualYear\n              ? { comparator: '>=', value: `${actualYear}-01-01` }\n              : undefined,\n            arrival_date_time: actualYear\n              ? { comparator: '<', value: `${actualYear + 1}-01-01` }\n              : undefined,\n          },\n          navigation: { isDisabled: true },\n        },\n      };\n    }\n    if (requirementsConfig[DATA_CHUNKS.USER.RIDES]) {\n      request.userRides = {\n        modelName: 'rides',\n        observe: userTripsIds,\n        condition: userTripsIds && userTripsIds.length,\n        query: {\n          filter: { trip_id: { comparator: 'in', value: userTripsIds } },\n          navigation: { isDisabled: true },\n        },\n      };\n    }\n\n    return {\n      domain,\n      request,\n    };\n  };\n\n  const ProvisionedComponent = compose(\n    withRouter,\n    withProvision(mapStateToRequirements, mapStateToProps),\n  )(Component);\n\n  return props => <ProvisionedComponent {...props} />;\n};\n","import uniq from 'lodash/uniq';\nimport { selectDict, selectPlaceholder } from 'core/connection';\n\nexport const selectUserTripsIds = (state, domain) => {\n  const { data: userTripsIds } =\n    selectPlaceholder(state, `${domain}.userTrips`) || {};\n  return userTripsIds;\n};\n\nexport const selectLocationsIds = (state, userTripsIds) => {\n  const tripsDict = selectDict(state, 'trips');\n  const locationsDict = selectDict(state, 'locations');\n\n  const requiredLocationsIds = userTripsIds\n    ? uniq(\n        userTripsIds.reduce((memo, tripId) => {\n          const trip = tripsDict[tripId];\n          if (trip) {\n            const { originLocationId } = trip;\n            if (originLocationId) {\n              memo.push(originLocationId);\n            }\n          }\n          return memo;\n        }, []),\n      )\n    : [];\n  const missingLocationsIds = requiredLocationsIds.filter(\n    requiredLocationId => !locationsDict[requiredLocationId],\n  );\n  return { requiredLocationsIds, missingLocationsIds };\n};\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","// todo use localization library\nimport {\n  RIDE_CLASSES,\n  RIDE_OCCUPATION,\n  RIDE_TYPES,\n  VEHICLE_TYPES,\n} from 'travel/models/rides/consts';\n\nexport const RIDE_CLASSES_NAMES = {\n  [RIDE_CLASSES.ECONOMY]: 'Эконом',\n  [RIDE_CLASSES.COMFORT]: 'Комфорт',\n  [RIDE_CLASSES.BUSINESS]: 'Бизнес',\n  [RIDE_CLASSES.FIRST]: 'Первый',\n  [RIDE_CLASSES.PRIVATE]: 'Частный',\n};\n\nexport const RIDE_OCCUPATION_NAMES = {\n  [RIDE_OCCUPATION.PASSENGER]: 'Пассажир',\n  [RIDE_OCCUPATION.STUFF]: 'Персонал', // todo кроме персонального транспорта\n  [RIDE_OCCUPATION.DRIVER]: 'Водитель', // todo только для персонального транспорта\n};\n\nexport const RIDE_TYPES_NAMES = {\n  [RIDE_TYPES.SELF_DRIVE]: 'Самостоятельная поездка',\n  [RIDE_TYPES.SCHEDULED]: 'Регулярный рейс',\n  [RIDE_TYPES.CHARTER]: 'Чартерный рейс', // todo only for aircrafts\n  [RIDE_TYPES.TOUR]: 'Тур', // todo except aircrafts\n  [RIDE_TYPES.CARPOOL]: 'Попутный автомобиль',\n  [RIDE_TYPES.HITCH_HIKING]: 'Автостоп',\n  [RIDE_TYPES.DROP_OFF]: 'Подбросили до места',\n};\n\nexport const VEHICLE_NAMES = {\n  [VEHICLE_TYPES.CAR]: 'Автомобиль',\n  [VEHICLE_TYPES.TRAIN]: 'Поезд',\n  [VEHICLE_TYPES.AIRCRAFT]: 'Самолет',\n  [VEHICLE_TYPES.BUS]: 'Автобус',\n  [VEHICLE_TYPES.MOTORHOME]: 'Дом на колесах',\n  [VEHICLE_TYPES.LOCAL_TRAIN]: 'Электричка',\n  [VEHICLE_TYPES.FERRY]: 'Паром',\n  [VEHICLE_TYPES.BIKE]: 'Велосипед',\n  [VEHICLE_TYPES.BY_FEET]: 'Пешком',\n  [VEHICLE_TYPES.ROPEWAY]: 'Канатная дорога',\n  [VEHICLE_TYPES.FUNICULAR]: 'Фуникулер',\n  [VEHICLE_TYPES.MOTORBIKE]: 'Мотоцикл',\n  [VEHICLE_TYPES.TRUCK]: 'Грузовик',\n  [VEHICLE_TYPES.ALL_TERRAIN_VEHICLE]: 'Вездеход',\n  [VEHICLE_TYPES.TRAM]: 'Трамвай',\n  [VEHICLE_TYPES.TROLLEY]: 'Троллейбус',\n  [VEHICLE_TYPES.TAXI]: 'Такси',\n  [VEHICLE_TYPES.CITY_BUS]: 'Муниципальный автобус',\n  [VEHICLE_TYPES.JITNEY]: 'Маршрутное такси',\n  [VEHICLE_TYPES.SUBWAY]: 'Метро',\n  [VEHICLE_TYPES.PUBLIC_TRANSPORT]: 'Общественный транспорт',\n};\n"],"sourceRoot":""}