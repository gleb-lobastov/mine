{"version":3,"sources":["webpack:///./src/packages/literature/pages/Article/Article.jsx","webpack:///./src/packages/literature/pages/Articles/blocks/Article/Article.jsx","webpack:///./src/packages/literature/pages/Articles/Articles.jsx","webpack:///./src/packages/code/pages/CodeDashboard/CodeDashboard.jsx","webpack:///./src/modules/components/muiExtended/ConnectedLink/ConnectedLink.jsx","webpack:///./src/packages/literature/dataSource/articles.js","webpack:///./src/modules/MineEditor/useEditorState.js","webpack:///./src/modules/MineEditor/createStateFromContent.js","webpack:///./src/modules/MineEditor/RenderContent.jsx","webpack:///./src/modules/MineEditor/exportContentFromState.js","webpack:///./src/modules/MineEditor/MineEditor.jsx"],"names":["Article","slug","useAuthContext","isAuthenticated","authenticatedUserId","userId","article","useArticle","domain","usePaths","literaturePaths","literature","codePaths","code","selfPaths","Typography","variant","body","title","isDraft","isEditable","ConnectedLink","to","editArticle","toUrl","data","withRouter","ArticleComponent","React","lazy","DBArticle","selectArticle","compose","withStyles","container","display","iconHome","padding","slugList","flex","classes","match","params","tag","authenticatedUserAlias","userAlias","articlesList","useArticles","hasSummaryTag","hasCodeTag","entry","className","List","component","aria-label","root","ListItem","button","articles","ListItemText","primary","map","currentSlug","caption","createArticle","CodeDashboard","codeArticlesPath","articlesPath","href","target","rel","color","Link","props","RouterLink","articlesProvision","useProvision","isProvision","modelName","observe","query","navigation","isDisabled","selectResult","articlesIds","useSelector","state","selectList","condition","Boolean","id","selectItem","useSubmitArticle","useRequest","method","submitArticle","provision","isSubmitting","includes","readyState","useEditorState","initialContent","useState","rawContent","EditorState","createWithContent","convertFromRaw","createEmpty","editorState","setEditorState","RenderContent","html","useMemo","stateToHTML","dangerouslySetInnerHTML","__html","toString","draftJSState","convertToRaw","getCurrentContent","MineEditor","handleChange","useCallback","nextState","handleKeyCommand","command","newState","RichUtils","onChange"],"mappings":"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","file":"code-Dashboard-57b50c03281e5d574ee3.js","sourcesContent":["import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { usePaths } from 'modules/packages';\nimport ConnectedLink from 'modules/components/muiExtended/ConnectedLink';\nimport { useAuthContext } from 'core/context/AuthContext';\nimport { useArticle } from '../../dataSource/articles';\nimport { RenderContent } from 'modules/MineEditor';\n\nconst domain = 'ArticleEditor';\n\nexport default function Article({ slug }) {\n  const { isAuthenticated, userId: authenticatedUserId } = useAuthContext();\n  const { article } = useArticle({ slug, domain });\n  const { literature: literaturePaths, code: codePaths } = usePaths();\n  const selfPaths = literaturePaths || codePaths;\n  if (slug && !article) {\n    return (\n      <Typography variant=\"body\">\n        Статья еще не опубликована или недоступна для чтения\n      </Typography>\n    );\n  }\n  const { body, title, userId, isDraft } = article;\n  const isEditable = isAuthenticated && authenticatedUserId === userId;\n  if ((!isEditable && isDraft) || !body) {\n    return (\n      <Typography variant=\"body\">\n        Статья еще не опубликована или недоступна для чтения\n      </Typography>\n    );\n  }\n  return (\n    <>\n      <Typography variant=\"h6\">{title}</Typography>\n      {isEditable && (\n        <ConnectedLink to={selfPaths.editArticle.toUrl({ slug })}>\n          Редактировать\n        </ConnectedLink>\n      )}\n      <RenderContent data={body} />\n    </>\n  );\n}\n","import React from 'react';\nimport { withRouter } from 'react-router';\nimport DBArticle from '../../../Article';\n\nconst selectArticle = slug => {\n  switch (slug) {\n    case 'chaldini':\n      return React.lazy(() =>\n        import(/* webpackChunkName: 'literature-Chaldini' */ './designed/Chaldini'),\n      );\n    case 'blackSwan':\n      return React.lazy(() =>\n        import(/* webpackChunkName: 'literature-BlackSwan' */ './designed/BlackSwan'),\n      );\n    case 'importThis':\n      return React.lazy(() =>\n        import(/* webpackChunkName: 'literature-ImportThis' */ './designed/ImportThis'),\n      );\n    default:\n      return DBArticle;\n  }\n};\n\nconst Article = ({ slug }) => {\n  const ArticleComponent = selectArticle(slug);\n  if (!ArticleComponent) {\n    return <div>Статья не найдена</div>;\n  }\n  return <ArticleComponent slug={slug} />;\n};\n\nexport default withRouter(Article);\n","import React from 'react';\nimport { withRouter } from 'react-router';\nimport compose from 'lodash/fp/compose';\nimport { withStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconHome from '@material-ui/icons/Home';\nimport { usePaths } from 'modules/packages';\nimport ConnectedLink from 'modules/components/muiExtended/ConnectedLink';\nimport { useAuthContext } from 'core/context/AuthContext';\nimport useArticles from '../../dataSource/articles';\nimport Article from './blocks/Article';\n\nfunction Articles({\n  classes,\n  match: {\n    params: { slug, tag },\n  },\n}) {\n  const {\n    isAuthenticated,\n    userAlias: authenticatedUserAlias,\n    userId: authenticatedUserId,\n  } = useAuthContext();\n\n  const { articlesList } = useArticles({ userAlias: authenticatedUserAlias });\n\n  const { literature: literaturePaths, code: codePaths } = usePaths();\n  const hasSummaryTag = !tag || tag === 'summary';\n  const hasCodeTag = !tag || tag === 'code';\n  const selfPaths = literaturePaths || codePaths;\n  return (\n    <>\n      {!literaturePaths && (\n        <ConnectedLink\n          to={selfPaths.entry.toUrl()}\n          className={classes.iconHome}\n        >\n          <IconHome />\n        </ConnectedLink>\n      )}\n      <div className={classes.container}>\n        <List\n          component=\"nav\"\n          aria-label=\"articles\"\n          classes={{ root: classes.slugList }}\n        >\n          {hasSummaryTag && (\n            <ListItem\n              button={true}\n              component={ConnectedLink}\n              to={selfPaths.articles.toUrl({ slug: 'chaldini' })}\n            >\n              <ListItemText primary=\"&laquo;Психология убеждения&raquo; Чалдини\" />\n            </ListItem>\n          )}\n          {hasSummaryTag && (\n            <ListItem\n              button={true}\n              component={ConnectedLink}\n              to={selfPaths.articles.toUrl({ slug: 'blackSwan' })}\n            >\n              <ListItemText primary=\"&laquo;Черный лебедь&raquo; Талеба\" />\n            </ListItem>\n          )}\n          {hasCodeTag && (\n            <ListItem\n              button={true}\n              component={ConnectedLink}\n              to={selfPaths.articles.toUrl({ slug: 'importThis' })}\n            >\n              <ListItemText primary=\"19 принципов достижения дзена при написании компьютерных программ\" />\n            </ListItem>\n          )}\n          {articlesList.map(article => {\n            const { userId, isDraft, title, slug: currentSlug } = article;\n            if (\n              isDraft &&\n              (!isAuthenticated || authenticatedUserId !== userId)\n            ) {\n              return null;\n            }\n            const caption = isDraft ? `Черновик: ${title}` : title;\n            return (\n              <ListItem\n                button={true}\n                component={ConnectedLink}\n                to={selfPaths.articles.toUrl({ slug: currentSlug })}\n              >\n                <ListItemText primary={caption} />\n              </ListItem>\n            );\n          })}\n          {isAuthenticated && (\n            <ListItem\n              button={true}\n              component={ConnectedLink}\n              to={selfPaths.createArticle.toUrl({\n                userAlias: authenticatedUserAlias,\n              })}\n            >\n              <ListItemText primary=\"Добавить статью\" />\n            </ListItem>\n          )}\n        </List>\n        {slug && (\n          <div>\n            <Article slug={slug} />\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nconst styles = {\n  container: {\n    display: 'flex',\n  },\n  iconHome: {\n    padding: '0 16px',\n  },\n  slugList: {\n    flex: '0 1 350px',\n  },\n};\n\nexport default compose(\n  withRouter,\n  withStyles(styles),\n)(Articles);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Typography from '@material-ui/core/Typography';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { usePaths } from 'modules/packages';\n\nexport default function CodeDashboard() {\n  const {\n    code: { articles: codeArticlesPath },\n    literature: { articles: articlesPath = codeArticlesPath } = {},\n  } = usePaths();\n\n  return (\n    <>\n      <Typography variant=\"h4\">\n        Работаю техлидом в{' '}\n        <a\n          href=\"https://www.onetwotrip.com\"\n          target=\"_blank\"\n          rel=\"nofollow noreferrer noopener\"\n        >\n          OneTwoTrip\n        </a>\n      </Typography>\n      <Typography variant=\"subtitle2\" color=\"textSecondary\">\n        JavaScript, ES6+, React, Redux, Restful API, Jest, Git, HTML5, CSS3,\n        Sass, Npm, Webpack, Babel, ESLint, Prettier\n      </Typography>\n      <List>\n        <ListItem\n          button={true}\n          component=\"a\"\n          target=\"_blank\"\n          rel=\"nofollow noreferrer noopener\"\n          href=\"https://github.com/gleb-lobastov\"\n        >\n          <ListItemText primary=\"Гитхаб\" />\n        </ListItem>\n        <ListItem\n          button={true}\n          component=\"a\"\n          target=\"_blank\"\n          rel=\"nofollow noreferrer noopener\"\n          href=\"https://www.linkedin.com/in/glebin\"\n        >\n          <ListItemText primary=\"Linkedin\" />\n        </ListItem>\n        <ListItem\n          button={true}\n          component={Link}\n          to={articlesPath.toUrl({ slug: 'importThis' })}\n        >\n          <ListItemText primary=\"Статья &laquo;19 принципов достижения дзена при написании компьютерных программ&raquo;\" />\n        </ListItem>\n      </List>\n    </>\n  );\n}\n","import React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport MUILink from '@material-ui/core/Link';\n\nexport default function ConnectedLink(props) {\n  return <MUILink {...props} component={RouterLink} />;\n}\n","import { useSelector } from 'react-redux';\nimport {\n  useProvision,\n  useRequest,\n  selectItem,\n  selectList,\n} from 'core/connection';\nimport { selectResult } from 'core/connection/request/controllerRedux';\n\nexport default function useArticles() {\n  const articlesProvision = useProvision({\n    domain: 'articles',\n    isProvision: true,\n    modelName: 'articles',\n    observe: false,\n    query: {\n      navigation: { isDisabled: true },\n    },\n  });\n  const { data: articlesIds = [] } = selectResult(articlesProvision) || {};\n  const articlesList = useSelector(state =>\n    selectList(state, 'articles', articlesIds),\n  );\n  return { articlesList };\n}\n\nexport function useArticle({ slug, domain }) {\n  const articlesProvision = useProvision({\n    domain,\n    isProvision: true,\n    modelName: 'articles',\n    observe: slug,\n    condition: Boolean(slug),\n    query: {\n      id: slug,\n    },\n  });\n  const article = useSelector(state => selectItem(state, 'articles', slug));\n  return { ...articlesProvision, article };\n}\n\nexport function useSubmitArticle({ domain }) {\n  const [submitArticle, provision] = useRequest({\n    domain,\n    modelName: 'articles',\n    method: 'POST',\n  });\n\n  return {\n    ...provision,\n    isSubmitting: ![0, 4].includes(provision.readyState),\n    submitArticle,\n  };\n}\n","import { useState } from 'react';\nimport createStateFromContent from './createStateFromContent';\n\nexport default function useEditorState(initialContent) {\n  const [editorState, setEditorState] = useState(() =>\n    createStateFromContent(initialContent),\n  );\n\n  return { editorState, setEditorState };\n}\n","import { EditorState, convertFromRaw } from 'draft-js';\n\nexport default function createStateFromContent(rawContent) {\n  return rawContent\n    ? EditorState.createWithContent(convertFromRaw(rawContent))\n    : EditorState.createEmpty();\n}\n","import React, { useMemo } from 'react';\nimport { convertFromRaw } from 'draft-js';\nimport { stateToHTML } from 'draft-js-export-html';\n\nexport default function RenderContent({ data: rawContent }) {\n  const html = useMemo(() => stateToHTML(convertFromRaw(rawContent)), [\n    rawContent,\n  ]);\n  return <div dangerouslySetInnerHTML={{ __html: html }} />;\n}\n","import { convertToRaw } from 'draft-js';\n\nexport default function toString(draftJSState) {\n  return convertToRaw(draftJSState.getCurrentContent());\n}\n","import React, { useCallback } from 'react';\nimport { Editor, RichUtils } from 'draft-js';\nimport 'draft-js/dist/Draft.css';\n\nexport { default as useEditorState } from './useEditorState';\nexport { default as RenderContent } from './RenderContent';\nexport { default as exportContentFromState } from './exportContentFromState';\nexport { default as createStateFromContent } from './createStateFromContent';\n\nexport default function MineEditor({ editorState, setEditorState }) {\n  const handleChange = useCallback(nextState => {\n    setEditorState(nextState);\n  });\n\n  const handleKeyCommand = useCallback(\n    (command, nextState) => {\n      const newState = RichUtils.handleKeyCommand(nextState, command);\n\n      if (newState) {\n        handleChange(newState);\n        return 'handled';\n      }\n\n      return 'not-handled';\n    },\n    [handleChange],\n  );\n\n  return (\n    <Editor\n      editorState={editorState}\n      onChange={handleChange}\n      handleKeyCommand={handleKeyCommand}\n    />\n  );\n}\n"],"sourceRoot":""}