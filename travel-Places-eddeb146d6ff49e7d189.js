"use strict";(self.webpackChunkmine=self.webpackChunkmine||[]).push([[282],{40043:(e,t,r)=>{r.d(t,{Z:()=>u}),r(47941),r(82772),r(82526),r(19601);var n=r(67294),a=r(73727),o=r(89659),i=r(22318),l=["optional","children"];function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function u(e){var t=e.optional,r=e.children,u=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,l);return Boolean(!t||u.href||u.to||u.onClick)?n.createElement(o.Z,c({},u,{component:a.rU}),r):n.createElement(i.Z,u,r)}u.defaultProps={optional:!1}},81376:(e,t,r)=>{r.d(t,{xK:()=>f,JH:()=>d,Gd:()=>v}),r(92222);var n=r(3151),a=r(49160),o=r(60792),i=r(28523),l=r(41297),c="d MMMM yyyy",u="LLLL yyyy";function s(e,t,r){var s=r?u:c,f=(0,l.Z)(t,s,{locale:i.Z});if((0,n.Z)(e,t))return f;var d="";if((0,a.Z)(e,t))r||(d=(0,l.Z)(e,"d",{locale:i.Z}));else if((0,o.Z)(e,t)){var v=r?"LLLL":"d MMMM";d=(0,l.Z)(e,v,{locale:i.Z})}else d=(0,l.Z)(e,s,{locale:i.Z});return"".concat(d,"—").concat(f)}function f(e,t){return s(e.departureDateTime,e.arrivalDateTime,t)}function d(e,t){var r=e.departureDateTime;return s(e.arrivalDateTime,r,t)}function v(e){var t=e.periodStart,r=e.periodEnd,n=e.isObscure,a=e.placeholder;if(!r){var o=n?u:c,f=(0,l.Z)(t,o,{locale:i.Z});return"".concat(f,"—").concat(a)}return s(t,r,n)}},13090:(e,t,r)=>{r.d(t,{Z:()=>O});var n=r(67294),a=r(99930),o=r(85329),i=r(13200),l=r(78),c=r(85976),u=r(29509),s=r(30913),f=r(72106),d=r(56647),v=r(22074),p=r(83612),m=r(50429),y=r(83562),h=r(38756),g=r(97856),b=r(22940),E=r(23518),I=r(17493);function O(e){var t=e.ride.vehicleType,r=e.className,O=function(e){switch(e){case I.VEHICLE_TYPES.CAR:return l.Z;case I.VEHICLE_TYPES.TRAIN:return d.Z;case I.VEHICLE_TYPES.AIRCRAFT:return u.Z;case I.VEHICLE_TYPES.BUS:case I.VEHICLE_TYPES.TROLLEY:case I.VEHICLE_TYPES.CITY_BUS:return i.Z;case I.VEHICLE_TYPES.MOTORHOME:case I.VEHICLE_TYPES.JITNEY:return p.Z;case I.VEHICLE_TYPES.LOCAL_TRAIN:return d.Z;case I.VEHICLE_TYPES.FERRY:return o.Z;case I.VEHICLE_TYPES.BIKE:return a.Z;case I.VEHICLE_TYPES.BY_FEET:return m.Z;case I.VEHICLE_TYPES.MOTORBIKE:return s.Z;case I.VEHICLE_TYPES.TRUCK:return v.Z;case I.VEHICLE_TYPES.ALL_TERRAIN_VEHICLE:return f.Z;case I.VEHICLE_TYPES.TRAM:return y.Z;case I.VEHICLE_TYPES.TAXI:return h.Z;case I.VEHICLE_TYPES.SUBWAY:return g.Z;case I.VEHICLE_TYPES.PUBLIC_TRANSPORT:return b.Z;case I.VEHICLE_TYPES.ROPEWAY:case I.VEHICLE_TYPES.FUNICULAR:return c.Z;default:return E.Z}}(t);return n.createElement(O,{className:r})}},3807:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(67294),a=r(41120),o=r(45928),i=r(81376),l=r(17493),c=r(13090),u=(0,a.Z)({icon:{color:"gray",fontSize:16,height:16},absoluteIcon:{color:"gray",fontSize:16,height:16,position:"absolute"},detail:{color:"gray",fontSize:12}});function s(e){var t=e.ride,r=e.ride,a=(r=void 0===r?{}:r).rideType,s=e.className,f=e.isLong,d=u();return t?n.createElement("div",{className:s},n.createElement(c.Z,{ride:t,className:d.icon}),a===l.RIDE_TYPES.HITCH_HIKING&&n.createElement(o.Z,{className:d.absoluteIcon}),f&&(0,i.xK)(t)):null}},4555:(e,t,r)=>{r.d(t,{LT:()=>kr,gZ:()=>G,zg:()=>_e,vZ:()=>ce,ZP:()=>Jr}),r(47941),r(82526),r(38880),r(89554),r(15581),r(34514),r(54747),r(49337),r(33321),r(82772),r(79753),r(41817),r(32165),r(66992),r(78783),r(33948),r(91038),r(74916),r(77601),r(57327),r(41539),r(88449),r(2490),r(59849),r(47042),r(21249),r(57640),r(9924),r(29254),r(68309),r(92222),r(69070);var n=r(67294),a=r(41120),o=r(74691),i=r.n(o),l=r(94184),c=r.n(l);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(9653);var s=r(40043);function f(e){var t=e.children,r=e.visitsGroup.field.value,a=e.classes,o=e.provision.countriesDict,i=e.urls,l=e.config.CountryVisitsGroup,c=(l=void 0===l?{}:l).hyperlinks,u=(c=void 0===c?{}:c).country,s=void 0===u||u;return n.createElement(d,{country:o[r],className:a.container,classes:a,countryUrl:s?null==i?void 0:i.resolveCountryUrl({countryId:r}):null},t)}function d(e){var t=e.variant,r=e.country.countryName,a=e.children,o=e.className,i=e.classes,l=e.countryUrl;return n.createElement("div",{className:o},n.createElement(s.Z,{to:l,optional:!0,display:"inline",variant:t,className:i.header},r),a)}function v(e,t){var r,n;return null===(r=function(e,t){for(var r=e;r;){if(t===r.plainGroup)return r;r=r.parent}return null}(e,t))||void 0===r||null===(n=r.field)||void 0===n?void 0:n.value}function p(e){var t=e.children,r=e.visitsGroup,a=e.visitsGroup.field.value,o=e.classes,i=e.provision,l=e.provision.locationsDict,c=e.urls,u=e.config.LocationVisitsGroup,s=(u=void 0===u?{}:u).appearance,f=u.hyperlinks,d=(f=void 0===f?{}:f).location,p=void 0===d||d,y=f.country,h=void 0===y||y,g=l[a],b=v(r,G.COUNTRIES),E=null!=g?g:{},I=E.locationId,O=E.countryId,S=p?null==c?void 0:c.resolveLocationUrl({locationId:I}):null,A=h?null==c?void 0:c.resolveCountryUrl({countryId:O}):null;return n.createElement(m,{className:o.container,classes:o,location:g,provision:i,showCountry:!b,locationUrl:S,countryUrl:A,appearance:s},t)}function m(e){var t,r,a=e.children,o=e.variant,i=e.className,l=e.classes,c=void 0===l?{}:l,u=e.location,f=(u=void 0===u?{}:u).locationName,d=u.countryId,v=e.provision.countriesDict,p=e.showCountry,m=e.locationUrl,y=e.countryUrl,h=e.appearance.country,g=void 0===h||h,b=null===(t=v[d])||void 0===t?void 0:t.countryName,E=g&&b&&p?n.createElement(s.Z,{to:y,optional:!0,display:"inline",variant:"body1"},null===(r=v[d])||void 0===r?void 0:r.countryName):null,I=n.createElement(s.Z,{to:m,optional:!0,display:"inline",variant:o,className:c.header},f,E?",":"");return n.createElement("div",{className:i},n.createElement("div",null,I,E?" ":null,E),a)}f.defaultProps={config:{}},p.defaultProps={config:{}},m.defaultProps={appearance:{},classes:{}};var y=(0,a.Z)({container:{}});function h(e){var t=e.children,r=e.variant,a=e.className,o=e.classes,i=e.year,l=e.yearUrl;return n.createElement("div",{className:a},n.createElement(s.Z,{to:i&&l||void 0,optional:!0,display:"inline",variant:r,className:o.header},i||"Без указания даты"),t)}var g=r(22318),b=r(37587),E=r(17812),I=r(59067);function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.containerClassName,n=void 0===r?"hoverTrigger":r,o=t.contentClassName,i=void 0===o?"visibleOnHover":o;return(0,a.Z)((O(e={},n,O({},"&:hover $".concat(i),{visibility:"visible"})),O(e,i,{visibility:"hidden"}),e))}();function A(e){var t=e.trip,r=e.visitsDict,a=e.countriesDict,o=e.locationsDict,i=e.children,l=e.className,u=e.variant,s=e.urls,f=S(),d=f.hoverTrigger,v=f.visibleOnHover,p=null==s?void 0:s.resolveTripEditUrl({tripId:t.tripId});return n.createElement(g.Z,{variant:null!=u?u:void 0,className:c()(l,d),paragraph:!0},n.createElement("span",null,(0,b.w)(t,r,a,o)),i,p&&n.createElement(E.Z,{className:v,href:p},n.createElement(I.Z,null)))}A.defaultProps={variant:"h4"};var T=r(45578),w=r.n(T),C=r(81376),N=r(73727),R=r(97480),P=r(41749),L=r(3807),j=(r(88674),r(66342),r(62962),r(23748),(0,a.Z)({autoMargin:{marginLeft:"auto"}}));function _(e){var t=e.children,r=e.className,a=j(),o=n.Children.toArray(t);if(o.length<=1)return n.createElement(g.Z,{className:r},t);var i=o.slice(-1),l=o.slice(0,-1);return n.createElement(P.Z,{className:r,container:!0,justify:"space-between",alignItems:"center"},n.createElement(P.Z,{item:!0},l),n.createElement(P.Z,{item:!0,classes:{item:a.autoMargin}},i))}var Z=(0,a.Z)({halfDown:{position:"relative",top:12}});function x(e){var t=e.locationId,r=e.rideId,a=e.provision,o=e.provision,i=o.ridesDict,l=o.locationsDict,c=e.groupCountryId,u=e.children,s=e.locationInfoChildren,f=e.className,d=e.classes,v=e.urls,p=Z(),y=l[t];return n.createElement(_,{className:f},n.createElement(m,{className:d.locationContainer,provision:a,location:y,showCountry:!c,locationUrl:null==v?void 0:v.resolveLocationUrl({locationId:t}),countryUrl:null==v?void 0:v.resolveCountryUrl({countryId:null==y?void 0:y.countryId})},s),c?u:n.createElement(P.Z,{container:!0},n.createElement(P.Z,{item:!0},u),n.createElement(P.Z,{item:!0},n.createElement(L.Z,{ride:i[r],className:p.halfDown}))))}x.defaultProps={classes:{}};var D=(0,a.Z)({locationContainer:{position:"relative"},detail:{color:"gray",fontSize:12},editButton:{position:"absolute",top:"-50%",left:"100%"}});function Y(e){var t=e.visit,r=t.visitId,a=t.locationId,o=t.departureRideId,i=e.provision,l=e.provision.visitsDict,u=e.urls,s=e.isObscure,f=e.groupCountryId,d=e.className,v=D(),p=S(),m=p.hoverTrigger,y=p.visibleOnHover,h=null==u?void 0:u.resolveVisitUrl({visitId:r});return n.createElement(x,{className:c()(d,m),classes:{locationContainer:v.locationContainer},locationId:a,rideId:o,provision:i,groupCountryId:f,urls:u,locationInfoChildren:h&&n.createElement(E.Z,{className:c()(v.editButton,y),component:N.rU,to:h},n.createElement(R.Z,null))},n.createElement(g.Z,{className:v.detail},(0,C.JH)(l[r],s)))}var k,U=(0,a.Z)({placeDetails:{display:"inline-block",marginRight:"8px"}});function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G={LOCATIONS:"LOCATIONS",COUNTRIES:"COUNTRIES",YEARS:"YEARS",TRIPS:"TRIPS",JUST_VISITS:"JUST_VISITS"},z=(V(k={},G.TRIPS,{groupFieldName:"tripId",component:function(e){var t=e.classes,r=e.children,a=e.visitsGroup.field.value,o=e.provision,i=o.tripsDict,l=o.visitsDict,u=o.countriesDict,s=o.locationsDict,f=e.urls;return n.createElement(A,{key:"t".concat(a),className:c()(t.container,t.header),classes:t,trip:i[a],visitsDict:l,countriesDict:u,locationsDict:s,variant:null,urls:f},r)},adapter:Number}),V(k,G.YEARS,{groupFieldName:function(e){return e.arrivalDateTime.getFullYear()},component:function(e){var t=e.children,r=e.visitsGroup.field.value,a=e.classes,o=e.urls,i=e.config,l=(i=void 0===i?{}:i).YearVisitsGroup,u=(l=void 0===l?{}:l).hyperlinks,s=(u=void 0===u?{}:u).year,f=void 0===s||s,d=y();return n.createElement(h,{className:c()(a.container,d.container),classes:a,year:r,yearUrl:f?null==o?void 0:o.resolveYearUrl({year:r}):null},t)},adapter:Number}),V(k,G.COUNTRIES,{groupFieldName:"countryId",component:f,adapter:Number}),V(k,G.LOCATIONS,{groupFieldName:"locationId",component:p,adapter:Number}),V(k,G.JUST_VISITS,{groupFieldName:"visitId",component:function(e){var t,r=e.visitsGroup,a=e.visitsGroup.visitsList,o=e.provision,i=e.provision,l=i.tripsDict,c=i.locationsDict,u=e.classes,f=e.urls,d=e.config,p=(d=void 0===d?{}:d).VisitsItselfGroup,y=(p=void 0===p?{}:p).appearance,h=(y=void 0===y?{}:y).country,g=void 0===h||h,b=y.location,E=void 0===b||b,I=U(),O=v(r,G.TRIPS),S=v(r,G.COUNTRIES),A=v(r,G.LOCATIONS),T=(0,n.useMemo)((function(){return S?w()(a,"locationId"):a}),[S,a]);if(!O)return n.createElement(n.Fragment,null,a.map((function(e){var t=e.locationId,r=e.countryId,a=E&&!A?null==f?void 0:f.resolveLocationUrl({locationId:t}):null,i=g&&!A?null==f?void 0:f.resolveCountryUrl({countryId:r}):null;return n.createElement("div",{className:u.level},a&&n.createElement(m,{className:I.placeDetails,location:c[t],provision:o,showCountry:Boolean(i)&&!S,locationUrl:a,countryUrl:i}),n.createElement(s.Z,{to:f.resolveVisitUrl({visitId:e.visitId}),optional:!0,display:"inline"},(0,C.JH)(e,!1)))})));var N=null!==(t=l[O])&&void 0!==t?t:{},R=N.originLocationId,P=N.departureRideId,L=c[R];return n.createElement("div",{className:u.level},!S&&n.createElement(x,{locationId:R,rideId:P,provision:o,groupCountryId:S,className:u.header,urls:f}),T.map((function(e){return n.createElement(Y,{className:u.header,key:"v".concat(e.visitId),visit:e,provision:o,isObscure:!1,groupCountryId:S,urls:f})})),!S&&n.createElement(m,{className:u.header,provision:o,location:L,showCountry:!S,locationUrl:null==f?void 0:f.resolveLocationUrl({locationId:R}),countryUrl:null==f?void 0:f.resolveCountryUrl({countryId:null==L?void 0:L.countryId})}))},adapter:Number}),k),B=(r(69720),r(7739)),M=r.n(B),H=r(23560),F=r.n(H);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $(e,t){var r=z[t],n=r.groupFieldName,a=r.adapter;return t===G.JUST_VISITS?[{field:{name:n,value:null},visitsList:e}]:function(e,t,r){return Object.entries(M()(e,t)).map((function(e){var n,a,o=(a=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(n,a)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],l=o[1];return{field:{name:F()(t)?t.name:t,value:r?r(i):i},visitsList:l}}))}(e,n,a)}r(26699),r(32023);var X=r(22762),J=r.n(X),q=r(84753),K=r.n(q),Q=(r(70189),r(88921),r(96248),r(13599),r(11477),r(64362),r(15389),r(90401),r(45164),r(91238),r(54837),r(87485),r(56767),r(76651),r(61437),r(35285),r(39865),r(85827),r(25387),r(72608),r(26833),r(30845)),ee=r(88306),te=r.n(ee);function re(e){var t=(0,Q.Z)((function(t){return te()((function(r){return function(t,r){return Object.values(r).reduce((function(r,n){var a=n[e];return n.arrivalYear<t&&r.add(a),r}),new Set)}(r,t)}))}));return{calcTotal:function(t){return{total:new Set(t.map((function(t){return t[e]}))).size}},calcByYear:function(r,n,a){var o=t(r)(a),i=n.reduce((function(t,r){var n=r.arrivalYear,o=r[e];return n===a&&t.add(o),t}),new Set),l=i.difference(o);return{totalAtYear:i.size,newAtYear:l.size,newbies:l}}}}var ne=r(92300),ae=r(22370);function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ie(e,t,r){var n,a=t.visitsDict,o=t.ridesDict,i=r.considerRides,l=i?function(e,t,r){return function(n){var a,o,i=n.visitId,l=n.countryId,c=n.arrivalRideId,u=n.arrivalDateTime,s=n.departureRideId,f=n.departureDateTime,d=t[c];if(d){var v,p=d.departureVisitId,m=d.departureDateTime;("country"!==r||l&&l===(null===(v=e[p])||void 0===v?void 0:v.countryId))&&(a=m)}else a=u;var y=t[s];if(y){var h,g=y.arrivalVisitId,b=y.arrivalDateTime;("country"!==r||l&&l===(null===(h=e[g])||void 0===h?void 0:h.countryId))&&(o=b)}else o=f;return{startDate:a,endDate:o,stack:new Set([i])}}}(a,o,i):le,c=e.map(l),u=(0,ae.Z)((n=c,function(e){if(Array.isArray(e))return oe(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oe(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).toArray().reduce((function(e,t){var r=t.startDate,n=t.endDate,a=t.stack,o=(0,ne.Z)(n,r)+1;return o>0&&e.push({stay:o,visitsIds:a,departureDateTime:n,arrivalDateTime:r}),e}),[]);return{detailedStats:u,totalStay:u.reduce((function(e,t){return e+t.stay}),0)}}function le(e){return{startDate:e.arrivalDateTime,endDate:e.departureDateTime}}function ce(e,t){var r=v(e,G.LOCATIONS),n=v(e,G.COUNTRIES),a=v(e,G.YEARS),o=e.plainGroup,i=e.visitsList;return{visitsStats:ye(i),countriesStats:n?null:de(i,t,{year:a}),locationsStats:r?null:he(i,t,{year:a}),daysTravellingStats:ie(i,t,{considerRides:!![G.COUNTRIES,G.YEARS].includes(o)&&o})}}var ue=re("countryId"),se=ue.calcTotal,fe=ue.calcByYear;function de(e,t,r){var n=t.visitsDict,a=r.year,o=a?fe(n,e,a):se(e);return{year:a,newAtYear:o.newAtYear,totalAtYear:o.totalAtYear,total:o.total,newbies:o.newbies}}var ve=re("locationId"),pe=ve.calcTotal,me=ve.calcByYear;function ye(e){return{visitsCount:e.length,firstVisit:J()(e,"arrivalDateTime"),lastVisit:K()(e,"departureDateTime")}}function he(e,t,r){var n=t.visitsDict,a=r.year,o=a?me(n,e,a):pe(e);return{year:a,newAtYear:o.newAtYear,totalAtYear:o.totalAtYear,total:o.total,newbies:o.newbies}}var ge=r(3551),be=r(79584),Ee=r(82228),Ie=(0,a.Z)({statsIndicator:{display:"inline-flex",alignItems:"center",marginRLeft:"2px",marginRight:"4px"}});function Oe(e){var t=e.className,r=e.icon,a=e.children,o=e.hint,i=Ie(),l=n.createElement(g.Z,{variant:"subtitle1",className:c()(t,i.statsIndicator)},n.cloneElement(r,{fontSize:"inherit"}),a);return o?n.createElement(Ee.ZP,{title:o},l):l}function Se(e){var t=e.countriesStats,r=t.year,a=t.newAtYear,o=t.totalAtYear,i=t.total,l=Boolean(r),c=function(e){var t=e.year,r=e.newAtYear,a=e.totalAtYear,o=e.total;return e.showByYear?n.createElement("div",null,n.createElement("div",null,"За ".concat(t," год посещено ").concat(a," стран")),n.createElement("div",null,r?"Из них впервые ".concat(r," стран"):"Новых стран в этом году не было")):n.createElement("div",null,"Посещено ".concat(o," стран"))}({showByYear:l,year:r,newAtYear:a,totalAtYear:o,total:i}),u=Ae({showByYear:l,newAtYear:a,totalAtYear:o,total:i});return n.createElement(Oe,{hint:c,icon:n.createElement(be.Z,null)},u)}function Ae(e){var t=e.showByYear,r=e.newAtYear,n=e.totalAtYear,a=e.total;return t?r?n===r?"+".concat(r):"".concat(n," (+").concat(r,")"):String(n):String(a)}var Te=r(88543);function we(e){var t=e.locationsStats,r=t.year,a=t.newAtYear,o=t.totalAtYear,i=t.total,l=Boolean(r),c=function(e){var t=e.year,r=e.newAtYear,a=e.totalAtYear,o=e.total;return e.showByYear?n.createElement("div",null,n.createElement("div",null,"За ".concat(t," год посещено ").concat(a," мест")),n.createElement("div",null,r?"Из них впервые ".concat(r," мест"):"Новых мест в этом году не было")):n.createElement("div",null,"Посещено ".concat(o," мест"))}({showByYear:l,year:r,newAtYear:a,totalAtYear:o,total:i}),u=Ae({showByYear:l,newAtYear:a,totalAtYear:o,total:i});return n.createElement(Oe,{hint:c,icon:n.createElement(Te.Z,null)},u)}r(69600);var Ce=r(95054);function Ne(e){var t=e.className,r=e.daysTravellingStats,a=r.detailedStats,o=r.totalStay,i=e.provision.visitsDict;return o?n.createElement(Oe,{className:t,hint:Re(a,o,i),icon:n.createElement(Ce.Z,null)},o):null}function Re(e,t,r){var a="Всего ".concat(t," дней в этом месте");if(1===e.length){var o=e[0],i=o.visitsIds,l=o.departureDateTime,c=o.arrivalDateTime,u=(0,C.JH)({departureDateTime:l,arrivalDateTime:c}),s=Pe(i,r);return n.createElement("div",null,"".concat(a," ").concat(u,". ").concat(s))}return n.createElement("div",null,n.createElement("div",null,a),e.map((function(e,t){var a=e.stay,o=e.visitsIds,i=e.departureDateTime,l=e.arrivalDateTime,c=(0,C.JH)({departureDateTime:i,arrivalDateTime:l}),u=Pe(o,r);return n.createElement("div",{key:"v".concat(t)},"".concat(a," дней, ").concat(c,". ").concat(u))})))}function Pe(e,t){var r,n;return null!==(r=null==e||null===(n=e.map((function(e){var r,n;return null!==(r=null===(n=t[e])||void 0===n?void 0:n.locationName)&&void 0!==r?r:""})))||void 0===n?void 0:n.join(", "))&&void 0!==r?r:""}var Le=(0,a.Z)({container:{color:"gray",display:"inline-flex",alignItems:"center",marginLeft:"4px"}});function je(e){var t,r,a,o=e.provision,i=e.visitsGroup,l=e.visitsGroup.stats,u=l.countriesStats,s=l.locationsStats,f=l.daysTravellingStats,d=e.config.StatsPanel,p=(d=void 0===d?{}:d).appearance,m=(p=void 0===p?{}:p).CountriesStats,y=void 0===m||m,h=p.LocationsStats,b=void 0===h||h,E=p.DaysTravellingStats,I=void 0===E||E,O=e.isObscure,S=Le(),A=i.plainGroup===G.LOCATIONS,T=Boolean(v(i,G.COUNTRIES)),w=Boolean(v(i,G.LOCATIONS)),C=Boolean(v(i,G.YEARS)),N=I&&f&&!O?n.createElement(Ne,{className:c()((t={},r=S.visibleOnlyOnHover,a=A,r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t)),daysTravellingStats:f,provision:o}):null;return n.createElement(g.Z,{variant:"body1",className:S.container},C&&function(e){var t=e.plainGroup,r=e.field.value;switch(t){case G.COUNTRIES:return function(e,t){var r,n,a,o;return null===(r=v(e,G.YEARS))||void 0===r||null===(n=r.stats)||void 0===n||null===(a=n.countriesStats)||void 0===a||null===(o=a.newbies)||void 0===o?void 0:o.has(t)}(e,r);case G.LOCATIONS:return function(e,t){var r,n,a,o,i=v(e,G.YEARS),l=v(e,G.COUNTRIES),c=null==l||null===(r=l.stats)||void 0===r?void 0:r.locationsStats;return!(!c||!c.newAtYear||!c.totalAtYear||c.newAtYear===c.totalAtYear)&&(null==i||null===(n=i.stats)||void 0===n||null===(a=n.locationsStats)||void 0===a||null===(o=a.newbies)||void 0===o?void 0:o.has(t))}(e,r);default:return!1}}(i)&&n.createElement(ge.Z,null),y&&!T&&n.createElement(Se,{countriesStats:u}),b&&!w&&n.createElement(we,{locationsStats:s}),N)}je.defaultProps={config:{}};var _e={ALPHABET:"ALPHABET",RATING:"RATING",FIRST_VISIT:"FIRST_VISIT",LAST_VISIT:"LAST_VISIT",VISITS_COUNT:"VISITS_COUNT"},Ze=(r(86535),r(99244),r(74326),r(82499),r(5212),r(64211),r(41874),r(89734)),xe=r.n(Ze),De=r(75472),Ye=r.n(De),ke=r(72594),Ue=r.n(ke),Ve=r(39601),Ge=r.n(Ve);function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Be(e,t,r,n){var a,o=t.flatMap((function(e){switch(e){case _e.FIRST_VISIT:return He("stats.visitsStats.firstVisit.arrivalDateTime");case _e.LAST_VISIT:return{iteratee:Me(He("stats.visitsStats.lastVisit.departureDateTime")),order:"desc"};case _e.RATING:return function(e,t){return e===G.LOCATIONS?(r=t.locationsRating,function(e){var t,n=e.field.value;return null!==(t=r[n])&&void 0!==t?t:10}):function(){return 0};var r}(r,n);case _e.VISITS_COUNT:return{iteratee:"stats.locationsStats.total",order:"desc"};case _e.ALPHABET:default:return function(e,t){switch(e){case G.YEARS:return[{iteratee:Me("stats.visitsStats.firstVisit.arrivalYear"),order:"desc"}];case G.COUNTRIES:return n=t.countriesDict,function(e){var t,r=e.field.value;return(null!==(t=n[r])&&void 0!==t?t:{}).countryName};case G.LOCATIONS:return r=t.locationsDict,function(e){var t,n=e.field.value;return(null!==(t=r[n])&&void 0!==t?t:{}).locationName};default:return function(){return 0}}var r,n}(r,n)}}));return o.some(Ge()("order"))?Ye().apply(void 0,[e].concat((a=function(e){return Object.values(e.reduce((function(e,t){var r=t.order?t:{iteratee:t},n=r.iteratee,a=void 0===n?[]:n,o=r.order,i=void 0===o?"asc":o;return e.iteratee.push(a),e.order.push(i),e}),{iteratee:[],order:[]}))}(o),function(e){if(Array.isArray(e))return ze(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ze(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))):xe()(e,o)}function Me(e){var t=Ue()(e);return function(e){return t(e)||""}}function He(e){var t=Ue()(e);return function(e){return(t(e)||"").valueOf()}}var Fe=r(89659);function We(e){var t=e.className,r=e.onExpand,a=e.onExpandAll,o=e.diffCount;return n.createElement(g.Z,{className:t,variant:"body2"},n.createElement(Fe.Z,{onClick:r},"показать еще ".concat(o)),Boolean(a)&&n.createElement(n.Fragment,null,", ",n.createElement(Fe.Z,{onClick:a},"раскрыть все")))}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xe(e){var t,r,a=e.classes,o=e.collapsible,i=e.children,l=e.items,c=e.onExpand,u=e.onExpandAll,s=e.alwaysExpandedItemsCount,f=e.collapsibleThreshold,d=(t=(0,n.useState)(!0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return $e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$e(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=d[0],p=d[1],m=o&&l.length>s+f&&v,y=m?l.slice(0,s):l;return n.createElement(n.Fragment,null,i({items:y}),m&&n.createElement(We,{className:a.actions,diffCount:l.length-y.length,onExpand:function(e){c&&c(e),p(!1)},onExpandAll:u}))}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qe(e,t){var r=t.rect;return e&&e.height===r.height&&e.width===r.width?e:r}function Ke(e,t){for(var r=e.measurements,n=e.outerSize,a=e.scrollOffset,o=r.length-1,i=function(e,t,n,a){for(;e<=t;){var o=(e+t)/2|0,i=r[o].start;if(i<a)e=o+1;else{if(!(i>a))return o;t=o-1}}return e>0?e-1:0}(0,o,0,a),l=i;l<o&&r[l].end<a+n;)l++;return t.start!==i||t.end!==l?{start:i,end:l}:t}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Xe.defaultProps={alwaysExpandedItemsCount:10,collapsibleThreshold:2},r(19601),r(32564);var et=["align"];function tt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){at(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function at(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||it(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){if(e){if("string"==typeof e)return lt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(e,t):void 0}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ct=function(){return 50},ut=function(e){return e};function st(e){var t,r=e.size,a=void 0===r?0:r,o=e.estimateSize,i=void 0===o?ct:o,l=e.overscan,c=void 0===l?1:l,u=e.paddingStart,s=void 0===u?0:u,f=e.paddingEnd,d=void 0===f?0:f,v=e.parentRef,p=e.keyExtractor,m=void 0===p?ut:p,y=function(){var e,t,r=(e=n.useReducer(qe,{}),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Je(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],o=r[1];return(0,n.useLayoutEffect)((function(){o({rect:{height:window.innerHeight,width:window.innerWidth}})}),[]),(0,n.useEffect)((function(){var e=function(){o({rect:{height:window.innerHeight,width:window.innerWidth}})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),a}(),h=y.height,g=n.useRef({scrollOffset:0,measurements:[],outerSize:void 0,totalSize:void 0});g.current.outerSize=h;var b=ot(n.useState({}),2),E=b[0],I=b[1],O=ot(n.useReducer((function(e){return e+1}),0),2),S=O[0],A=O[1],T=n.useRef([]),w=n.useMemo((function(){var e,t=T.current.length>0?Math.min.apply(Math,function(e){if(Array.isArray(e))return lt(e)}(e=T.current)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||it(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):0;T.current=[];for(var r=g.current.measurements.slice(0,t),n=t;n<a;n++){var o=m(n),l=E[o],c=r[n-1]?r[n-1].end:s,u="number"==typeof l?l:i(n),f=c+u;r[n]={index:n,start:c,size:u,end:f,key:o}}return r}),[i,E,s,a,m]),C=((null===(t=w[a-1])||void 0===t?void 0:t.end)||0)+d;g.current.measurements=w,g.current.totalSize=C;var N=function(e){var t,r,a=e.measurements,o=e.outerSize,i=e.latestRef,l=e.parentRef,c=(t=n.useState({start:0,end:0}),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qe(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],s=c[1],f=n.useRef(null),d=n.useCallback((function(){null!==f.current&&(clearTimeout(f.current),f.current=null)}),[]);return(0,n.useLayoutEffect)((function(){return f.current=setTimeout((function(){s((function(e){return Ke(i.current,e)}))})),function(){return d()}}),[a,o,d]),(0,n.useLayoutEffect)((function(){var e=function(){i.current.scrollOffset=l.current?function(e){return-1*e.current.getBoundingClientRect().top}(l):0,d(),s((function(e){return Ke(i.current,e)}))};return e(),window.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){window.removeEventListener("scroll",e)}}),[d]),u}({measurements:w,outerSize:h,latestRef:g,parentRef:v}),R=n.useMemo((function(){for(var e=function(e){for(var t=Math.max(e.start-e.overscan,0),r=Math.min(e.end+e.overscan,e.size-1),n=[],a=t;a<=r;a++)n.push(a);return n}({start:N.start,end:N.end,overscan:c,size:w.length}),t=[],r=function(r,n){var a=e[r],o=nt(nt({},w[a]),{},{measureRef:function(e){if(e){var t=e.offsetHeight;if(t!==o.size){var r=g.current.scrollOffset;o.start<r&&ft(r+(t-o.size)),T.current.push(a),I((function(e){return nt(nt({},e),{},at({},o.key,t))}))}}}});t.push(o)},n=0,a=e.length;n<a;n++)r(n);return t}),[w,c,N.end,N.start,S]),P=n.useRef();(0,n.useLayoutEffect)((function(){P.current&&i&&I({}),P.current=!0}),[i]);var L=n.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.align,n=void 0===r?"start":r,a=g.current,o=a.scrollOffset,i=a.outerSize;"auto"===n&&(n=e<=o?"start":e>=o+i?"end":"start"),"start"===n?ft(e):"end"===n?ft(e-i):"center"===n&&ft(e-i/2)}),[]),j=n.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.align,n=void 0===r?"auto":r,o=tt(t,et),i=g.current,l=i.measurements,c=i.scrollOffset,u=i.outerSize,s=l[Math.max(0,Math.min(e,a-1))];if(s){if("auto"===n)if(s.end>=c+u)n="end";else{if(!(s.start<=c))return;n="start"}var f="center"===n?s.start+s.size/2:"end"===n?s.end:s.start;L(f,nt({align:n},o))}}),[L,a]),_=n.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];j.apply(void 0,t),requestAnimationFrame((function(){j.apply(void 0,t)}))}),[j]);return{virtualItems:R,totalSize:C,scrollToOffset:L,scrollToIndex:_,measure:A}}function ft(e){window.scrollY=e}const dt=(0,n.forwardRef)((function(e,t){var r=e.children,a=e.items,o=e.overscan,i=(0,n.useRef)(),l=st({parentRef:i,size:a.length,estimateSize:vt,overscan:o}),c=l.virtualItems,u=l.totalSize,s=l.measure;return(0,n.useImperativeHandle)(t,(function(){return{measure:s}})),n.createElement("div",{ref:i,style:{height:u}},n.createElement("div",{style:{height:u,position:"relative"}},c.map((function(e){return n.createElement("div",{key:e.index,ref:e.measureRef,style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY(".concat(e.start,"px)")}},r({item:a[e.index],virtualItem:e,index:e.index,measure:s}))}))))}));function vt(){return 500}const pt=(0,n.forwardRef)((function(e,t){var r=e.children,a=e.items;return(0,n.useImperativeHandle)(t,(function(){return{measure:mt}})),n.createElement(n.Fragment,null,a.map((function(e,t){return r({item:e,virtualItem:null,index:t,measure:mt})})))}));function mt(){return null}var yt=["children","items","bypass"];function ht(){return ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ht.apply(this,arguments)}const gt=(0,n.forwardRef)((function(e,t){var r=e.children,a=e.items,o=e.bypass,i=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,yt),l=o?pt:dt;return n.createElement(l,ht({ref:t,items:a},i),r)}));var bt=r(44586),Et=r(66982),It=r.n(Et),Ot=r(63457),St=r(26229),At=["placeholder","children"];function Tt(){return Tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tt.apply(this,arguments)}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ct(e){var t,r,a=e.placeholder,o=e.children,i=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,At),l=(t=(0,n.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return wt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wt(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1],s=(0,n.useCallback)((function(){return u(!0)}),[]);return n.createElement(n.Fragment,null,!c&&a,n.createElement(St.Z,Tt({},i,{onContentVisible:s}),o))}var Nt=r(91851),Rt=r(44656),Pt=r(15549),Lt=r(57864),jt=["alt","src","onSwipeLock"];function _t(){return _t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_t.apply(this,arguments)}function Zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dt=50,Yt=(0,a.Z)({container:{position:"relative"},zoom:{backgroundPosition:"".concat(Dt,"% ").concat(Dt,"%"),backgroundRepeat:"no-repeat",position:"absolute",top:0,bottom:0,left:0,right:0,margin:0,padding:0,opacity:0,transition:"opacity 0.5s",transform:"translateZ(0)"},zoomButton:{position:"absolute",bottom:"0",right:"initial",left:"50%",transform:"translate(-50%)",zIndex:4},zoomIcon:{transform:"scale(1.2)"},zoomed:{opacity:1}});const kt=(0,Rt.o)((function(e,t){var r=e.alt,a=e.src,o=e.onSwipeLock,i=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,jt),l=window.matchMedia("(any-pointer: coarse)").matches,u=Zt((0,n.useState)(!0),2),s=u[0],f=u[1],d=Zt((0,n.useState)(!1),2),v=d[0],p=d[1],m=Yt(),y=Zt((0,n.useState)("".concat(Dt,"% ").concat(Dt,"%")),2),h=y[0],g=y[1],b=(0,n.useRef)();(0,n.useEffect)((function(){if(l)return o(v),function(){return o(!1)}}),[l,v]);var E,I,O,S=(0,n.useCallback)((function(e){var r,n,a,o,i=e.nativeEvent,l=t.current.getBoundingClientRect(),c=l.top,u=l.left,s=l.width,d=l.height,v=(null!==(r=i.clientX)&&void 0!==r?r:null===(n=i.touches[0])||void 0===n?void 0:n.clientX)-u,p=(null!==(a=i.clientY)&&void 0!==a?a:null===(o=i.touches[0])||void 0===o?void 0:o.clientY)-c;if(v&&p){var m=s<t.current.naturalWidth||d<t.current.naturalHeight,y=b.current.getBoundingClientRect().width<t.current.naturalWidth;if(m){var h=m&&y?Ut(v/s*100):Dt,E=m?Ut(p/d*100):Dt;g("".concat(h,"% ").concat(E,"%"))}else f(!1)}}),[]),A=v?Lt.Z:Pt.Z,T=n.createElement("img",_t({ref:t,alt:r,src:a},i));return s?n.createElement("div",{className:m.container,ref:b},T,n.createElement("figure",{className:c()(m.zoom,(E={},I=m.zoomed,O=v,I in E?Object.defineProperty(E,I,{value:O,enumerable:!0,configurable:!0,writable:!0}):E[I]=O,E)),style:{backgroundPosition:h,backgroundImage:"url(".concat(a,")")},onMouseMove:v&&!l?S:void 0,onTouchMove:v&&l?S:void 0,onClick:function(){return p(!1)}}),n.createElement("button",{type:"button",className:c()("image-gallery-icon","image-gallery-fullscreen-button",m.zoomButton),onClick:function(){return p((function(e){return!e}))}},n.createElement(A,{className:c()("image-gallery-svg",m.zoomIcon)}))):T}));function Ut(e){return Math.min(Math.max(e,0),100)||Dt}var Vt=r(74221),Gt=r(53632),zt=r.n(Gt),Bt=(r(68304),r(30489),r(81299),r(12419),r(78011),r(42473)),Mt=r.n(Bt);function Ht(e){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(e)}function Ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wt(e,t){return Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wt(e,t)}function $t(e,t){if(t&&("object"===Ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Xt(e){return Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xt(e)}var Jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(l,e);var t,r,n,a,o,i=(a=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xt(a);if(o){var r=Xt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return $t(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={hasError:!1},t}return t=l,n=[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}],(r=[{key:"componentDidCatch",value:function(e,t){Mt()(!1,"blurhash error: ".concat(e.message,". Check window.lastReactError for details")),window.lastReactError={error:e,errorInfo:t}}},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?null:e}}])&&Ft(t.prototype,r),n&&Ft(t,n),l}(n.Component),qt=["aspectRatio","className","component","require","tag","src","alt","blurhash","constraints","height","width","onLoad","children","zoomable"];function Kt(){return Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kt.apply(this,arguments)}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?er(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tr="IDLE",rr="SUCCESS",nr="ERROR";function ar(e){var t,r=e.aspectRatio,a=e.className,o=e.component,i=e.require,l=e.tag,c=e.src,u=e.alt,s=e.blurhash,f=e.constraints,d=e.height,v=e.width,p=e.onLoad,m=e.children,y=(e.zoomable,function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,qt)),h=Qt((0,n.useState)("IDLE"),2),g=h[0],b=h[1],E=(0,n.useCallback)((function(){b(nr)}),[]),I=(0,n.useRef)(),O=(0,n.useCallback)((function(){b(rr),p&&p({aspectRatio:I.current.naturalWidth/I.current.naturalHeight})}),[]);(0,n.useEffect)((function(){i&&g===tr&&b("LOADING")}),[i,g]);var S=g===rr||g===nr,A=function(e,t){var r=e.aspectRatio,n=e.height,a=e.width;if(!t)return{imageHeight:n||a/r,imageWidth:a||n*r};var o=zt()([t.height,n]),i=zt()([t.width,a]),l=Qt(o*r<i?[o*r,o]:[i,i/r],2),c=l[0];return{imageHeight:l[1],imageWidth:c}}({height:d,width:v,aspectRatio:r},f),T=A.imageWidth,w=A.imageHeight,C=Qt((0,n.useState)(T),2),N=C[0],R=C[1];return(0,n.useLayoutEffect)((function(){I.current&&R(I.current.getBoundingClientRect().width)}),[T]),n.createElement(n.Fragment,null,!S&&n.createElement(Jt,null,n.createElement(Vt.E,{hash:s,width:N,height:null!==(t=N/r)&&void 0!==t?t:w,resolutionX:32,resolutionY:32,punch:1})),g!==nr?n.createElement(o,Kt({key:"ok","data-tag":l,ref:I,className:a,alt:u,src:or(c,g),style:{width:T,height:S?w:0,maxWidth:"100%"},onLoad:O,onError:E,loading:void 0},y)):n.createElement("img",{key:"error",alt:"error",className:a,src:"https://res.cloudinary.com/dc2eke0gj/image/upload/minetravel/common/img_placeholder.png",style:{width:T,height:w,maxWidth:"100%"}}),m)}function or(e,t){return t===tr?null:e}ar.defaultProps={component:"img"};var ir=r(98913),lr=r.n(ir),cr=r(58365),ur=(0,a.Z)({container:{display:"flex"},imageSkeleton:{flexGrow:"1"},thumbsContainer:{overflow:"hidden"},thumbSkeleton:{margin:"0 5px 10px 5px"}});function sr(e){var t=e.height,r=ur(),a=Math.ceil(t/40);return n.createElement("div",{className:r.container},n.createElement(cr.Z,{variant:"rect",height:t,className:r.imageSkeleton}),n.createElement("div",{className:r.thumbsContainer,style:{height:t}},lr()(a).map((function(){return n.createElement(cr.Z,{variant:"rect",height:60,width:100,className:r.thumbSkeleton})}))))}var fr=r(73935),dr=r(17606),vr=(0,a.Z)((function(e){return{top:{zIndex:"".concat(e.zIndex.drawer+1," !important")}}}));function pr(e){var t=e.children,r=e.fullscreen,a=e.uniqKey,o=e.inlineGalleryRef,i=vr(),l=(0,n.useRef)();return(0,n.useEffect)((function(){var e=document.createElement("div");return e.id="imageGalleryPortal-".concat(a),document.body.append(e),function(){return e.remove()}}),[]),(0,n.useEffect)((function(){o.current&&o.current.setState({isFullscreen:!1,modalFullscreen:!1}),r&&l.current.setState({isFullscreen:!0,modalFullscreen:!0})}),[r]),r?fr.createPortal(n.createElement(dr.ZP,null,n.createElement("div",null,n.cloneElement(t,{ref:l,additionalClass:i.top}))),window.document.getElementById("imageGalleryPortal-".concat(a))):null}function mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(r),!0).forEach((function(t){hr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return br(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?br(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Er=document.fullscreenEnabled||document.mozFullScreenEnabled||document.documentElement.webkitRequestFullScreen,Ir=(0,a.Z)({photoContainer:{minHeight:"200px",margin:"24px 0","& .image-gallery-thumbnails":{overflowY:"auto","-ms-overflow-style":"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},photo:{display:"block",width:"100%"}});function Or(e){var t=e.className,r=e.photos,a=(0,n.useMemo)((function(){return(0,bt.Z)()}),[]),o=Ir(),i=(0,Ot.Z)((function(e){return e.breakpoints.down("sm")})),l=window.matchMedia("(any-pointer: coarse)").matches,u=gr((0,n.useState)(!1),2),s=u[0],f=u[1],d=(0,Nt.l)(),v=d.vw,p=d.vh,m=gr((0,n.useState)(!1),2),y=m[0],h=m[1],g=gr((0,n.useState)({}),2),b=g[0],E=g[1],I=gr((0,n.useState)(0),2),O=I[0],S=I[1],A=(0,n.useMemo)((function(){return function(e,t){var r=t.vh,n=t.vw,a=e?Sr.FULLSCREEN:Sr.DEFAULT,o=a.HEIGHT,i=a.WIDTH;return{height:l(o,r),width:l(i,n)};function l(e,t){return Math.min(e.PERCENT*t,e.MAX_PX)}}(y,{vh:p,vw:v})}),[y,p,v]);(0,n.useEffect)((function(){var e,t=null===(e=window.document.querySelector('[data-tag="photos-gallery-thumb-'.concat(a,"-").concat(O,'"]')))||void 0===e?void 0:e.closest(".image-gallery-thumbnail");t&&t.scrollIntoView({block:"nearest",behavior:"smooth"})}),[O]);var T=r.map((function(e,t){var r=e.fullSizePhotoUrl,n=e.thumbnailUrl,a=e.previewUrl,i=e.blurhash,l=e.aspectRatio,c=e.description;return{original:a,originalClass:o.photo,thumbnail:n,fullscreen:r,description:c,blurhash:i,aspectRatio:l,index:t}})),w=!s&&(!i||y),C=!l||y,N=(0,n.useRef)();if(!T.length)return null;var R=n.createElement(It(),{ref:N,useBrowserFullscreen:Er,startIndex:0,disableSwipe:s,showIndex:!0,showThumbnails:w,items:T,thumbnailPosition:w?"right":void 0,onScreenChange:function(e){return h(e)},onBeforeSlide:function(e){return S(e)},disableKeyDown:!0,disableThumbnailScroll:!0,renderItem:function(e){var t,r=C&&O===e.index;return n.createElement(ar,{className:"image-gallery-image",src:y?e.fullscreen:e.original,component:r?kt:"img",onSwipeLock:r?f:void 0,description:e.description,alt:e.originalAlt,title:e.originalTitle,blurhash:e.blurhash,require:Math.abs(O-e.index)<=1,constraints:A,aspectRatio:b[e.index]||(null===(t=e.aspectRatio)||void 0===t?void 0:t.ratio)||1},e.description&&n.createElement("span",{className:"image-gallery-description"},e.description))},renderThumbInner:function(e){return n.createElement("span",{className:"image-gallery-thumbnail-inner"},n.createElement(ar,{tag:"photos-gallery-thumb-".concat(a,"-").concat(e.index),className:"image-gallery-thumbnail-image",aspectRatio:b[e.index]||e.aspectRatio||1,src:e.thumbnail,width:92,alt:e.thumbnailAlt,title:e.thumbnailTitle,blurhash:e.blurhash,require:!0,onLoad:function(t){var r=t.aspectRatio;return E((function(t){return yr(yr({},t),{},hr({},e.index,r))}))}}))}});return n.createElement("div",{className:c()(t,o.photoContainer),style:{height:A.height}},n.createElement(Ct,{offset:1e3,placeholder:n.createElement(sr,{height:A.height})},R),!Er&&n.createElement(pr,{fullscreen:y,uniqKey:a,inlineGalleryRef:N},R))}var Sr={FULLSCREEN:{HEIGHT:{PERCENT:100,MAX_PX:1/0},WIDTH:{PERCENT:100,MAX_PX:1/0}},DEFAULT:{HEIGHT:{PERCENT:50,MAX_PX:1024},WIDTH:{PERCENT:100,MAX_PX:1024}}};function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){wr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cr(e){var t=e.className,r=e.visitsGroup,a=e.provision,o=r.visitsList.flatMap((function(e){return e.photos.map((function(t){return Tr(Tr({},t),{},{description:Nr(e,r,a)})}))}));return n.createElement(Or,{className:t,photos:o})}function Nr(e,t,r){var n=r.countriesDict,a=e.locationName,o=e.countryId,i=e.arrivalYear,l="",c=Boolean(v(t,G.LOCATIONS)),u=c||Boolean(v(t,G.COUNTRIES)),s=Boolean(v(t,G.YEARS));if(c||(l+=a),!u){var f,d=(null!==(f=n[o])&&void 0!==f?f:{}).countryName;d&&(l+=", ".concat(d))}return s||(l+="/".concat(i)),l}var Rr=r(44908),Pr=r.n(Rr),Lr=r(45646);function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _r=(0,a.Z)({container:{fontSize:"16px",lineHeight:"1.5"},visitContainer:{margin:"20px 0"},mapVisibilityToggle:{marginLeft:"8px",cursor:"pointer"},googleMapContainer:{margin:"12px 0",width:"800px",maxWidth:"100%",height:"400px",maxHeight:"100%"}});function Zr(e){var t,r,a=e.className,o=e.visitsGroup,i=e.provision,l=i.visitsDict,c=i.locationsDict,u=i.locationsRating,s=e.onToggle,f=_r(),d=(t=(0,n.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jr(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=d[0],p=d[1],m=Pr()(o.visitsList.map((function(e){return e.locationId}))),y=(0,n.useRef)(!1);return(0,n.useEffect)((function(){y.current?s&&s(v):y.current=!0}),[v]),n.createElement("div",{className:a},n.createElement("div",null,n.createElement(Fe.Z,{variant:"body2",onClick:function(){p((function(e){return!e}))}},v?"скрыть карту":"на карте")),v&&n.createElement(Lr.ZP,{className:f.mapContainer,locationsDict:c,visitsDict:l,locationsRating:u,locationsIds:m,minHeight:300,scaleBy:Lr.OJ.BY_LAST_VISIT,ratingLevel:null}))}function xr(){return xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xr.apply(this,arguments)}function Dr(e){var t=e.children,r=e.classes,a=e.config,o=e.forwardingProps,i=e.isObscure,l=e.showMap,c=e.showPhotos,u=e.provision,s=e.urls,f=e.visitsGroup,d=e.VisitsGroupComponent,v=e.onHeightChange,p=e.customNode;return n.createElement(n.Fragment,{key:f.field.value},n.createElement(d,xr({visitsGroup:f,classes:r,provision:u,urls:s,config:a},o),n.createElement(je,{visitsGroup:f,provision:u,isObscure:i,config:a})),p,l&&n.createElement(Zr,{className:r.nextLevel,visitsGroup:f,provision:u,onToggle:v}),t,c&&n.createElement(Cr,{className:r.nextLevel,visitsGroup:f,provision:u}))}const Yr=n.memo(Dr);var kr={ANY:"ANY",FOREIGN:"FOREIGN",DOMESTIC:"DOMESTIC"};function Ur(e){return Boolean(e)}var Vr=["collapsible"],Gr=["visitsList","groupsOrder","sortingOrder","filteringOption","provision","urls","isObscure","config","adaptTopHeaderSize","mapSectionLevel","photosSectionLevel","children","virtualize"];function zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Br(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(r),!0).forEach((function(t){Fr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wr=(0,a.Z)((function(e){return{noMarginTop:{},link:{cursor:"pointer"},header0:Hr(Hr({},e.typography.h2),{},{wordBreak:"break-word"}),container0:{display:"flex",alignItems:"self-start","&:not($noMarginTop)":{marginTop:"64px"}},level0:{},header1:Hr(Hr({},e.typography.h4),{},{wordBreak:"break-word"}),container1:{display:"flex",alignItems:"self-start",marginTop:"18px",marginBottom:"6px"},level1:Fr({},e.breakpoints.up("sm"),{paddingLeft:"32px"}),header2:Hr(Hr({},e.typography.body1),{},{wordBreak:"break-word"}),container2:{display:"flex",alignItems:"center"},level2:Fr({},e.breakpoints.up("sm"),{paddingLeft:"96px"})}}));function $r(e){var t=e.visitsList,r=e.groupsOrder,a=e.sortingOrder,o=e.filteringOption,l=e.provision,s=e.urls,f=e.isObscure,d=e.config,v=d.collapsible,p=void 0!==v&&v,m=Br(d,Vr),y=e.adaptTopHeaderSize,h=e.mapSectionLevel,g=e.photosSectionLevel,b=e.children,E=e.virtualize,I=Br(e,Gr),O=Wr(),S=t.filter(function(e,t){switch(t){case kr.FOREIGN:case kr.DOMESTIC:return function(e,t){var r=e.tripsDict,n=e.locationsDict,a=t===kr.FOREIGN;return a||t===kr.DOMESTIC?function(e){if(!e)return!1;var t=e.countryId,o=e.tripId;if(!t)return!0;var i=r[o];if(!i)return!0;var l=i.originLocationId,c=n[l];if(!c)return!0;var u=c.countryId;return!u||(a?t!==u:t===u)}:Ur}(e,t);case kr.ANY:default:return Ur}}(l,o)),A=(0,n.useRef)(),T=!E,w=function(e){var t,r,a=e.allowCollapsible,o=e.onToggleCollapsible,i=(t=(0,n.useState)(!0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1],s=(0,n.useCallback)((function(){return c(!1)}),[]);return(0,n.useEffect)(o,[l]),{collapsible:l&&a,setCollapsible:c,disableCollapsible:s}}({allowCollapsible:p,onToggleCollapsible:function(){var e;return null===(e=A.current)||void 0===e?void 0:e.measure()}}),C=w.collapsible,N=w.disableCollapsible;return function e(t,r){var o,u,d=function(e){if(Array.isArray(e))return e}(u=r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(u)||function(e,t){if(e){if("string"==typeof e)return zr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zr(e,t):void 0}}(u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),v=d[0],p=d.slice(1);if(!v)return null;var E=z[v].component,S=t.visitsList,w=function(e){for(var t=e,r=0;t;)r+=1,t=t.parent;return Math.max(0,r-1)}(t),R=w+r.length,P=function(e,t,r){return e>0||t?i()(3-r+e,0,2):e}(w,y,R),L=null!=g?g:R-1,j=null!=h?h:R-2,_=Be($(S,v).map((function(e){var r=Hr(Hr({},e),{},{plainGroup:v,parent:t});return r.stats=ce(r,l),r})),a,v,l),Z=T;return T||(T=!0),n.createElement(n.Fragment,null,n.createElement(Xe,{classes:{actions:c()(O.link,O["level".concat(w)])},collapsible:C&&v===G.LOCATIONS,items:_,onExpand:null===(o=A.current)||void 0===o?void 0:o.measure,onExpandAll:N},(function(t){var r=t.items;return n.createElement(gt,{items:r,bypass:Z,ref:Z?void 0:A,overscan:3},(function(t){var r,a,o,i,c,u=t.item,d=t.index;return n.createElement(Yr,{key:(a=u.field,o=null!=a?a:{},i=o.name,c=o.value,"".concat(i,":").concat(c)),classes:Xr(O,{nestingLevel:w,sectionLevel:P,isFirstChild:0===d}),visitsGroup:u,VisitsGroupComponent:E,config:m,isObscure:f,provision:l,urls:s,forwardingProps:I,showMap:w===j,showPhotos:w===L,onHeightChange:null===(r=A.current)||void 0===r?void 0:r.measure,customNode:null==b?void 0:b({level:w,className:O["level".concat(w+1)],index:d,visitsGroup:u})},e(u,p))}))})))}({visitsList:S,parent:null,field:null},r)}function Xr(e,t){var r=t.nestingLevel,n=t.sectionLevel,a=t.isFirstChild;return{level:e["level".concat(r)],nextLevel:e["level".concat(r+1)],container:c()(e["level".concat(r)],e["container".concat(n)],Fr({},e.noMarginTop,a&&0===r)),header:e["header".concat(n)]}}$r.defaultProps={mapSectionLevel:void 0,photosSectionLevel:void 0};const Jr=$r},37587:(e,t,r)=>{r.d(t,{w:()=>v}),r(2707),r(21249),r(57640),r(9924),r(47941),r(57327),r(41539),r(88449),r(2490),r(59849),r(92222),r(9653);var n=r(37950),a=r(99890),o=r(7739),i=r.n(o),l=(r(69600),r(47042),r(44908)),c=r.n(l);const u=function(e,t){var r=t.maxLength,n=t.separator,a=void 0===n?", ":n,o=c()(e),i=o.slice(0,r).join(a);return o.length>r?"".concat(i,"..."):i};var s=r(56941),f=r(81376),d="Без названия";function v(e,t,r,o){var l,c=e||{},v=c.visits,p=c.originLocationId,m=c.tripName,y=c.hasAutogeneratedTripName,h=null===(l=o[p])||void 0===l?void 0:l.countryId;if(!y)return m||d;if(!v.length)return d;var g=(0,f.JH)({arrivalDateTime:(0,n.Z)(v.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.arrivalDateTime}))),departureDateTime:(0,a.Z)(v.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.departureDateTime})))}),b=Object.keys(i()(v.filter((function(e){var r;return(null===(r=t[e])||void 0===r?void 0:r.visitType)!==s.VISIT_TYPES.TRANSIT})),"countryId"));if(1===b.length){var E=u(v.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.locationName})),{maxLength:4});return"".concat(E||d,", ").concat(g)}var I=u(b.map((function(e){return Number(e)!==h&&r[e]&&r[e].countryName})).filter(Boolean),{maxLength:4});return"".concat(I||d,", ").concat(g)}},56178:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f}),r(74916),r(4723),r(91058),r(57327),r(41539),r(88449),r(2490),r(59849),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038),r(77601);var n=r(67294),a=r(22318),o=r(89659),i=r(27610),l=r(46852),c=r(4555),u=(r(26699),r(32023),r(21249),r(57640),r(9924),r(70477));function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e){var t,r,f=e.match.params,d=f.userAlias,v=f.strCountryId,p=f.section,m=(t=(0,n.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=m[0],h=m[1],g=(0,i.Eu)().userAlias,b=(0,l.Z)({editable:!1,userAlias:d,section:p}),E=d!==g,I=function(e){var t=e.userAlias,r=e.countryId,n=(0,u.Y)({userAlias:t}),a=n.countriesIds,o=n.countriesDict,i=n.visitsDict,l=n.visitsIds,c=a.includes(r);return{provision:n,country:o[r],isVisited:c,visitsList:c?l.map((function(e){return i[e]})).filter((function(e){return e.countryId===r})):[]}}({userAlias:d,countryId:parseInt(v,10)}),O=I.country,S=I.provision,A=I.provision,T=A.isError,w=A.isPending,C=A.isReady,N=I.isVisited,R=I.visitsList;return T?n.createElement("div",null,"...Error"):w||!C?n.createElement("div",null,"...Loading"):O?N?n.createElement(c.ZP,{visitsList:R,provision:S,groupsOrder:[c.gZ.COUNTRIES,y&&c.gZ.YEARS,c.gZ.LOCATIONS].filter(Boolean),sortingOrder:[c.zg.LAST_VISIT],filteringOption:c.LT.ANY,isObscure:E,urls:b,config:{CountryVisitsGroup:{hyperlinks:{country:!1}}}},(function(e){var t=e.level,r=e.index;return 0===t&&0===r&&n.createElement(o.Z,{variant:"body2",onClick:function(){return h((function(e){return!e}))}},y?"Убрать группировку по годам":"Сгруппировать по годам")})):n.createElement(a.Z,{variant:"h2",component:"span"},O.countryName):null}},24034:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Z}),r(74916),r(4723),r(91058),r(41539),r(88674),r(17727),r(57327),r(88449),r(2490),r(59849),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038),r(77601);var n,a=r(67294),o=r(22318),i=r(89659),l=r(27610),c=r(46852),u=r(4555),s=(r(21249),r(57640),r(9924),r(26833),r(69070),r(41120)),f=r(64436),d=r(43700),v=r(85639),p=r(23200),m=r(44619),y=r(628),h=r(39222);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=(b(n={},h.LOCATION_RATING.PLACE_TO_LIVE,"Готов тут жить"),b(n,h.LOCATION_RATING.FEW_PER_YEAR,"Готов бывать по нескольку раз в год"),b(n,h.LOCATION_RATING.ONCE_PER_YEAR,"Приезжал бы каждый год"),b(n,h.LOCATION_RATING.ONCE_PER_TWO_YEARS,"Приезжал бы раз в пару лет"),b(n,h.LOCATION_RATING.ONCE_PER_FIVE_YEARS,"Приезжал бы раз в пять лет"),b(n,h.LOCATION_RATING.ONCE_PER_DECADE,"Можно заглянуть раз в десятилетие"),b(n,h.LOCATION_RATING.TWICE_PER_LIVE,"Пары посещений за всю жизнь достаточно"),b(n,h.LOCATION_RATING.ONCE_PER_LIVE,"Одного посещения достаточно"),b(n,h.LOCATION_RATING.NEVER,"Лучше бы тут и не бывать"),n),I=(0,s.Z)({container:{display:"flex",alignItems:"center"},formControl:{display:"block",margin:"24px 12px",width:"100%"}});function O(e){var t,r,n=e.locationId,o=e.locationRating,i=e.isEditable,l=e.onSubmitLocationRating,c=I(),u=(t=a.useState(o),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=u[0],b=u[1],O=(0,a.useCallback)((function(e){var t=e.target.value;t&&t!==o&&(b(t),l(n,e.target.value))}),[n,o]);return a.createElement("div",{className:c.container},Boolean(s)&&a.createElement(y.Z,{name:"locationRating",readOnly:!0,size:"large",value:S(s),precision:.5}),Boolean(!i&&s)&&a.createElement(m.Z,{ml:2},E[s]),i&&a.createElement(f.Z,{className:c.formControl},a.createElement(d.Z,{shrink:!0,id:"select-location-rating-label"},"Задать рейтинг"),a.createElement(p.Z,{labelId:"select-location-rating-label",id:"select-location-rating",value:o,onChange:O},Object.values(h.LOCATION_RATING).map((function(e){return a.createElement(v.Z,{key:e,value:e},E[e])})))))}function S(e){return e>=7?9-Math.ceil(e):5-(e-1)/2}r(47941),r(82772),r(38880),r(89554),r(15581),r(34514),r(54747),r(49337),r(33321),r(26699),r(32023);var A=r(12291),T=r(24774),w=r(70477),C=r(48484),N=["isError","isPending","isReady"];function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){var t=e.domain,r=e.userAlias,n=e.locationId,a=(0,w.Y)({userAlias:r}),o=a.isError,i=a.isPending,l=a.isReady,c=a.locationsIds,u=a.visitsDict,s=a.visitsIds,f=a.locationsRating,d=function(e){var t=e.domain,r=e.locationId;return{location:(0,A.v9)((function(e){return(0,T.Gh)(e,"locations",r)||{}})),provision:(0,T.xv)({domain:t,isProvision:!0,modelName:"locations",observe:r,condition:Boolean(r),query:{id:r}})}}({domain:t,locationId:n}),v=d.location,p=d.provision,m=p.isError,y=p.isPending,h=p.isReady,g=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(p,N),b=(0,C.I)({domain:t}).submitLocationRating,E=c.includes(n);return{provision:P({isError:m||o,isPending:y||i,isReady:h||l},g),location:v,isVisited:E,visitsList:E?s.map((function(e){return u[e]})).filter((function(e){return e.locationId===n})):[],locationRating:E&&f[n]||null,submitLocationRating:b,tripsStatsProvision:a}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z(e){var t,r,n=e.match.params,s=n.userAlias,f=n.strLocationId,d=n.section,v=(t=(0,a.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=v[0],m=v[1],y=(0,l.Eu)(),h=y.isAuthenticated,g=y.userAlias,b=s===g,E=s!==g,I=(0,c.Z)({editable:b,userAlias:s,section:d}),S=parseInt(f,10),A=j({domain:"travel.LocationPage",userAlias:s,locationId:S}),T=A.location,w=A.provision,C=w.isError,N=w.isPending,R=w.isReady,P=A.isVisited,L=A.visitsList,Z=A.tripsStatsProvision,x=A.tripsStatsProvision.userProvision,D=A.locationRating,Y=A.submitLocationRating,k=(0,a.useCallback)((function(e,t){Y({query:{rating:t,id:String(e)},condition:Boolean(e)}).finally(x.invalidate)}));if(C)return a.createElement("div",null,"...Error");if(N||!R)return a.createElement("div",null,"...Loading");if(!T)return null;var U=h&&g===s;return P?a.createElement(u.ZP,{visitsList:L,provision:Z,groupsOrder:[u.gZ.LOCATIONS,p&&u.gZ.YEARS,u.gZ.JUST_VISITS].filter(Boolean),photosSectionLevel:1,mapSectionLevel:0,sortingOrder:[u.zg.LAST_VISIT],filteringOption:u.LT.ANY,isObscure:E,urls:I,config:{LocationVisitsGroup:{hyperlinks:{location:!1}},StatsPanel:{appearance:{CountriesStats:!1}}}},(function(e){var t=e.level,r=e.index;return 0===t&&0===r&&a.createElement(a.Fragment,null,a.createElement(i.Z,{variant:"body2",onClick:function(){return m((function(e){return!e}))}},p?"Убрать группировку по годам":"Сгруппировать по годам"),a.createElement(O,{locationId:S,locationRating:D,isEditable:U,onSubmitLocationRating:k}))})):a.createElement(o.Z,{variant:"h2",component:"span"},T.locationName)}},34751:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b}),r(74916),r(4723),r(91058),r(26699),r(32023),r(21249),r(57640),r(9924);var n,a=r(67294),o=r(41120),i=r(27610),l=(r(69070),r(64436)),c=r(43700),u=r(23200),s=r(85639),f=r(39222);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=(d(n={},f.LOCATION_RATING.PLACE_TO_LIVE,"Жил бы здесь"),d(n,f.LOCATION_RATING.FEW_PER_YEAR,"Несколько раз в год"),d(n,f.LOCATION_RATING.ONCE_PER_YEAR,"Раз в год"),d(n,f.LOCATION_RATING.ONCE_PER_TWO_YEARS,"Раз в пару лет"),d(n,f.LOCATION_RATING.ONCE_PER_FIVE_YEARS,"Раз в пять лет"),d(n,f.LOCATION_RATING.ONCE_PER_DECADE,"Раз в десятилетие"),d(n,f.LOCATION_RATING.TWICE_PER_LIVE,"Пару раз в жизни"),d(n,f.LOCATION_RATING.ONCE_PER_LIVE,"Раз в жизни"),d(n,f.LOCATION_RATING.NEVER,"Никогда"),n),p=(0,o.Z)({formControl:{width:"100%"}});function m(e){var t=e.locationId,r=e.locationRating,n=e.isEditable,o=e.onSubmitLocationRating,i=p();return n?a.createElement(l.Z,{className:i.formControl},a.createElement(c.Z,{shrink:!0,id:"select-location-rating-label"},"Я бы ездил сюда"),a.createElement(u.Z,{labelId:"select-location-rating-label",id:"select-location-rating",value:r,onChange:function(e){o(e,t,e.target.value)}},a.createElement(s.Z,{value:f.LOCATION_RATING.PLACE_TO_LIVE},v[f.LOCATION_RATING.PLACE_TO_LIVE]),a.createElement(s.Z,{value:f.LOCATION_RATING.FEW_PER_YEAR},v[f.LOCATION_RATING.FEW_PER_YEAR]),a.createElement(s.Z,{value:f.LOCATION_RATING.ONCE_PER_YEAR},v[f.LOCATION_RATING.ONCE_PER_YEAR]),a.createElement(s.Z,{value:f.LOCATION_RATING.ONCE_PER_TWO_YEARS},v[f.LOCATION_RATING.ONCE_PER_TWO_YEARS]),a.createElement(s.Z,{value:f.LOCATION_RATING.ONCE_PER_FIVE_YEARS},v[f.LOCATION_RATING.ONCE_PER_FIVE_YEARS]),a.createElement(s.Z,{value:f.LOCATION_RATING.ONCE_PER_DECADE},v[f.LOCATION_RATING.ONCE_PER_DECADE]),a.createElement(s.Z,{value:f.LOCATION_RATING.TWICE_PER_LIVE},v[f.LOCATION_RATING.TWICE_PER_LIVE]),a.createElement(s.Z,{value:f.LOCATION_RATING.ONCE_PER_LIVE},v[f.LOCATION_RATING.ONCE_PER_LIVE]),a.createElement(s.Z,{value:f.LOCATION_RATING.NEVER},v[f.LOCATION_RATING.NEVER]))):a.createElement("div",null,v[r])}m.defaultProps={locationRating:null},r(50786);var y=r(70477),h=r(48484),g=(0,o.Z)({container:{fontSize:"16px",lineHeight:"1.5"},visitContainer:{margin:"20px 0"},location:{fontWeight:"bold",fontSize:"21px"},googleMapContainer:{margin:"12px 0",width:"800px",maxWidth:"100%",height:"400px",maxHeight:"100%"}});function b(e){var t=e.match.params,r=t.userAlias,n=t.strLocationId,o=g(),l=(0,i.Eu)(),c=l.isAuthenticated,u=l.userAlias,s=function(e){var t=e.domain,r=e.userAlias,n=(0,y.Y)({userAlias:r}),a=n.isError,o=n.isPending,i=n.locationsDict,l=n.locationsIds;return{isError:a,isPending:o,locationsDict:i,locationsIds:void 0===l?[]:l,locationsRating:n.locationsRating,submitLocationRating:(0,h.I)({domain:t}).submitLocationRating}}({domain:"travel.LocationsPage",userAlias:r}),f=s.isError,d=s.isPending,v=s.locationsDict,p=s.locationsIds,b=s.locationsRating,E=s.submitLocationRating,I=parseInt(n,10),O=I?[I]:p,S=(0,a.useCallback)((function(e,t,r){E({query:{rating:r,id:String(t)},condition:Boolean(t)})}));if(f)return a.createElement("div",null,"...Error");if(d)return a.createElement("div",null,"...Loading");if(I&&!p.includes(I))return a.createElement("div",null,"Путешественик ".concat(r," еще не посетил данную локацию"));var A=c&&u===r;return a.createElement("div",{className:o.container},O.map((function(e){var t=v[e];if(!t)return null;var r=t.locationName;return a.createElement(a.Fragment,{key:e},a.createElement("h1",{className:o.location},r),a.createElement(m,{locationId:e,locationRating:b[e],isEditable:A,onSubmitLocationRating:S}))})))}},59826:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s}),r(74916),r(4723),r(91058),r(21249),r(57640),r(9924),r(57327),r(41539),r(88449),r(2490),r(59849),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038),r(77601);var n=r(67294),a=r(89659),o=r(27610),i=r(30822),l=r(4555),c=r(46852);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){var t,r,s=e.match.params,f=s.userAlias,d=s.strTripId,v=(t=(0,n.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=v[0],m=v[1],y=(0,o.Eu)(),h=y.isAuthenticated,g=y.userAlias,b=parseInt(d,10),E=(0,i.Yy)({domain:"travel.VisitPage",userAlias:f,tripsIds:b?[b]:[]}),I=E.visitsIds,O=E.isReady,S=E.visitsDict,A=E.isError,T=E.isPending,w=h&&g===f,C=(0,c.Z)({editable:w,userAlias:f,section:"trips"});return A?n.createElement("div",null,"...Error"):T||!O?n.createElement("div",null,"...Loading"):n.createElement(l.ZP,{visitsList:I.map((function(e){return S[e]})),provision:E,groupsOrder:[l.gZ.TRIPS,p&&l.gZ.COUNTRIES,l.gZ.JUST_VISITS].filter(Boolean),photosSectionLevel:0,mapSectionLevel:0,sortingOrder:[l.zg.LAST_VISIT],filteringOption:l.LT.ANY,isObscure:!w,urls:C,config:{YearVisitsGroup:{hyperlinks:{year:!1}}}},(function(e){var t=e.level,r=e.index;return 0===t&&0===r&&n.createElement(n.Fragment,null,n.createElement(a.Z,{variant:"body2",onClick:function(){return m((function(e){return!e}))}},p?"Убрать группировку по странам":"Сгруппировать по странам"))}))}},53333:(e,t,r)=>{r.r(t),r.d(t,{default:()=>G}),r(74916),r(4723),r(91058);var n=r(67294),a=r(40043),o=r(27610),i=r(30822),l=r(4555),c=r(46852),u=(r(35666),r(41539),r(88674),r(17727),r(66992),r(78783),r(33948),r(21249),r(57640),r(9924),r(92222),r(69600),r(79753),r(60285),r(41637),r(82526),r(41817),r(32165),r(47042),r(68309),r(91038),r(77601),r(69070),r(47941),r(57327),r(88449),r(2490),r(59849),r(38880),r(89554),r(15581),r(34514),r(54747),r(49337),r(33321),r(19601),r(94184)),s=r.n(u),f=r(41389),d=r(41120),v=r(8400),p=r.n(v);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),n=r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),a:t}:{r:0,g:0,b:0,a:0};return"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(n.a,")")}var b="#FFF",E=80*Math.cos(.25*Math.PI);function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,r=g(e,t);return{background:"repeating-linear-gradient(\n      ".concat(45,"deg,\n      ").concat(b,",\n      ").concat(b," ").concat(20,"px,\n      ").concat(r," ").concat(20,"px,\n      ").concat(r," ").concat(40,"px\n    )"),backgroundSize:"calc(100% + ".concat(E,"px)")}}r(70189),r(88921),r(96248),r(13599),r(11477),r(64362),r(15389),r(90401),r(45164),r(91238),r(54837),r(87485),r(56767),r(76651),r(61437),r(35285),r(39865);var O=r(44586),S=new Set,A="Worker"in window?new Worker(new URL(r.p+r.u(108),r.b)):null;function T(e){var t=e.pixels,n=e.height,a=e.width,o=e.componentX,i=e.componentY,l=(0,O.Z)();return A?new Promise((function(e){S.add((function t(r){var n=r.data,a=n.payload;n.uniqId===l&&(S.delete(t),e(a))})),A.postMessage({payload:{pixels:t,height:n,width:a,componentX:o,componentY:i},uniqId:l})})):r.e(24).then(r.bind(r,68024)).then((function(e){return e.encode(t,n,a,o,i)}))}function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){P(o,n,a,i,l,"next",e)}function l(e){P(o,n,a,i,l,"throw",e)}i(void 0)}))}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}A.onmessage=function(e){return S.forEach((function(t){return t(e)}))};var Z=(0,d.Z)((function(e){return{dropzoneContainer:{display:"flex",flexDirection:"column",justifyContent:"space-around",height:"100%",minHeight:"144px",padding:"0 12px",margin:"12px 0",cursor:"pointer"},dropzoneStandby:{"& $dropzoneContainer":y({border:"2px dashed ".concat(e.palette.primary.dark),borderRadius:"4px"},I(e.palette.primary.light,.2)),"& $dropzoneUpload":y(y({borderColor:e.palette.disabled.dark},I(e.palette.disabled.main,.2)),{},{animation:"$slide 2s infinite linear forwards"})},dropzoneActive:y(y({border:"2px dashed ".concat(e.palette.secondary.dark),animation:"$slide 2s infinite linear forwards"},I(e.palette.secondary.light)),{},{"&$dropzoneAccept":y(y({borderColor:e.palette.secondary.dark},I(e.palette.secondary.main)),{},{animation:"$slide 2s infinite linear forwards"}),"&$dropzoneReject":y(y({borderColor:e.palette.error.dark},I(e.palette.error.main)),{},{animation:"$slide 2s infinite linear forwards"})}),dropzoneAccept:{},dropzoneReject:{},dropzoneUpload:{},"@keyframes slide":{"0%":{backgroundPositionX:"-".concat(E,"px")},"100%":{backgroundPositionX:0}}}}));function x(e){var t,r=e.onChunkUpload,a=e.onUploadComplete,o=e.visit,i=Z(),l=j((0,n.useState)(null),2),c=l[0],u=l[1],d=j((0,n.useState)([]),2),v=d[0],m=d[1],y=null!==c,h=o.visitId,g=(0,n.useCallback)(function(){var e=L(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&m(n),u({uploaded:0,measured:0,total:t.length}),o=p()(t,2),Promise.all(o.map(function(){var e=L(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.t1=h,e.t2=t,e.next=5,Promise.all(t.map((function(e){return k(e).finally((function(){return u((function(e){var t;return N(N({},e),{},{measured:(null!==(t=null==e?void 0:e.measured)&&void 0!==t?t:0)+1})}))}))})));case 5:return e.t3=e.sent,e.t4={id:e.t1,data:e.t2,meta:e.t3,isAsset:!0},e.abrupt("return",(0,e.t0)(e.t4).finally((function(){return u((function(e){var t;return N(N({},e),{},{uploaded:(null!==(t=null==e?void 0:e.uploaded)&&void 0!==t?t:0)+2})}))})).catch((function(){})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).finally((function(){u(null),a()}));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[r]),b=(0,f.uI)({accept:"image/jpeg, image/png",disabled:y,onDrop:g,maxSize:5242880,minSize:51200,maxFiles:10}),E=b.getRootProps,I=b.getInputProps,O=b.isDragActive,S=b.isDragAccept,A=b.isDragReject;return n.createElement("div",w({},E(),{className:s()((t={},R(t,i.dropzoneStandby,!O),R(t,i.dropzoneActive,O),R(t,i.dropzoneAccept,S),R(t,i.dropzoneReject,A),t))}),n.createElement("div",{className:s()(i.dropzoneContainer,R({},i.dropzoneUpload,y))},n.createElement("input",I()),function(e){var t=e.progress;switch(!0){case null!==t:var r=t.total,n=t.measured,a=t.uploaded;return"Идет загрузка, пожалуйста не закрывайте браузер. Загружено/Подготовлено/Всего: ".concat(a,"/").concat(n,"/").concat(r);case e.isDragActive:return"Загрузить фотографии";default:return"Перенесите сюда фотографии для загрузки или кликните, что-бы выбрать файлы"}}({isDragActive:O,progress:c}),v.length>0&&n.createElement("div",null,"Не удалось загрузить следующие файлы:",v.map((function(e){return n.createElement("div",{key:e.path},(r=(t=e).file,a=t.errors.map((function(e){return e.message})).join(", "),"".concat(r.path," - ").concat(r.size," bytes, reason: ").concat(a)));var t,r,a})))))}function D(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var r=t.getContext("2d");return r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height)}function Y(e,t){var r=Math.abs(e),n=Math.abs(t),a=r;for(n>r&&(a=r,r=n,n=a);;){if(0===n)return e;if(0==(r%=n))return t;n%=r}}function k(e){return U.apply(this,arguments)}function U(){return(U=L(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=URL.createObjectURL(t),n=new Image;n.onload=function(){var t=Y(n.width,n.height),r=j(t?[n.width/t,n.height/t]:[n.width,n.height],2),a=r[0],o=r[1];try{var i=D(n);T({pixels:i.data,width:i.width,height:i.height,componentX:4,componentY:4}).then((function(t){e({aspect_ratio:"".concat(a,":").concat(o),blurhash:t})}))}catch(t){e({aspect_ratio:"".concat(a,":").concat(o),blurhash:null})}},n.src=r})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V="travel.VisitPage";function G(e){var t=e.match.params,r=t.userAlias,u=t.strVisitId,s=t.section,f=(0,o.Eu)(),d=f.isAuthenticated,v=f.userAlias,p=parseInt(u,10),m=(0,i.JF)({domain:V,userAlias:r,visitId:p}),y=m.isError,h=m.isPending,g=m.visit,b=m.invalidate,E=(0,i.Yy)({domain:V,userAlias:r,tripsIds:null!=g&&g.tripId?[g.tripId]:[]}),I=(0,i.FZ)({domain:V,userAlias:r,visitId:p}).submitVisitPhoto,O=d&&v===r,S=(0,c.Z)({editable:O,userAlias:r,section:s});return y?n.createElement("div",null,"...Error"):h?n.createElement("div",null,"...Loading"):g?n.createElement(n.Fragment,null,n.createElement(l.ZP,{visitsList:[g],provision:E,groupsOrder:[l.gZ.JUST_VISITS],photosSectionLevel:0,mapSectionLevel:0,sortingOrder:[l.zg.LAST_VISIT],filteringOption:l.LT.ANY,isObscure:!O,urls:S,config:{YearVisitsGroup:{hyperlinks:{year:!1}}}},(function(e){var t=e.level,r=e.index,o=e.className;return 0===t&&0===r&&n.createElement(n.Fragment,null,n.createElement(a.Z,{className:o,variant:"body2",to:S.resolveTripUrl({tripId:g.tripId})},"вся поездка"))})),O&&n.createElement(x,{visit:g,userAlias:r,onChunkUpload:function(e){return I(e,{refetchPolicy:I.REFETCH_POLICY.SEQUENTIAL})},onUploadComplete:b})):n.createElement("div",null,"...Не найдено посещение")}},99144:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Q}),r(74916),r(4723),r(1999),r(21249),r(57640),r(9924);var n=r(67294),a=r(30822),o=r(32692),i=r(95477),l=r(41120),c=(0,l.Z)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function u(){var e=c();return n.createElement(o.Z,{className:e.backdrop,open:!0},n.createElement(i.Z,{color:"inherit"}))}var s,f,d=r(90166),v=r(27610),p=(r(26699),r(32023),r(26833),r(69826),r(41539),r(31672),r(2490),r(59461),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038),r(77601),r(69070),r(62822)),m=r(50998),y=r(64436),h=r(43700),g=r(23200),b=r(85639),E=r(66142),I=r(4555);function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S,A,T="loc",w="t",C=(O(s={},T,I.gZ.LOCATIONS),O(s,"c",I.gZ.COUNTRIES),O(s,"yr",I.gZ.YEARS),O(s,w,I.gZ.TRIPS),s),N={RATING_ALPHABET:"r_a",VISITS_ALPHABET:"v_a",FIRST_VISIT_ALPHABET:"fv_a",LAST_VISIT_ALPHABET:"lv_a",ALPHABET:"a"},R=N.ALPHABET,P={a:I.zg.ALPHABET,r:I.zg.RATING,fv:I.zg.FIRST_VISIT,lv:I.zg.LAST_VISIT,v:I.zg.VISITS_COUNT},L={ANY:"a",FOREIGN:"f",DOMESTIC:"d"},j=L.ANY,_=(O(f={},L.ANY,I.LT.ANY),O(f,L.FOREIGN,I.LT.FOREIGN),O(f,L.DOMESTIC,I.LT.DOMESTIC),f);function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x={TRIPS:"trips",PLACES:"places"},D=x.TRIPS,Y=(Z(S={},x.PLACES,[{key:T,l10n:"По городам"},{key:"c",l10n:"По странам"},{key:"yr",l10n:"По годам"},{key:"yr_c",l10n:"По годам и странам"},{key:"c_yr",l10n:"По странам и годам"}]),Z(S,x.TRIPS,[{key:w,l10n:"По поездкам"},{key:"t_c",l10n:"По поездкам и странам"}]),S),k=(Z(A={},x.PLACES,"c"),Z(A,x.TRIPS,w),A);function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G=(0,l.Z)({formControl:{width:"100%"}});function z(e,t,r){var a,o,i=G(),l=t||{},c=l.group,u=l.sort,s=l.filter,f=function(e){return Object.values(N).includes(e)?e:R}(u),d=function(e){return Object.values(L).includes(e)?e:j}(s),v=function(e,t){var r=Object.values(x).includes(t)?t:D,n=Y[r]||[];return[n.find((function(t){return t.key===e}))?e:k[r],n]}(c,r),I=(o=2,function(e){if(Array.isArray(e))return e}(a=v)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(a,o)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}(a,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),O=I[0],S=I[1];return(0,E.Ap)((function(t){var r=t.closeSidebar;return n.createElement(p.Z,null,n.createElement(m.Z,null,n.createElement(y.Z,{className:i.formControl},n.createElement(h.Z,{shrink:!0,id:"select-groupBy-filter-label"},"Сгруппировать"),n.createElement(g.Z,{labelId:"select-groupBy-filter-label",autoWidth:!0,id:"select-groupBy-filter",value:O,onChange:function(t){r(),e(U({},"group",t.target.value))}},S.map((function(e){return n.createElement(b.Z,{key:e.key,value:e.key},e.l10n)}))))),O!==w&&n.createElement(m.Z,null,n.createElement(y.Z,{className:i.formControl},n.createElement(h.Z,{shrink:!0,id:"select-sortBy-filter-label"},"Сортировать"),n.createElement(g.Z,{labelId:"select-sortBy-filter-label",autoWidth:!0,id:"select-sortBy-filter",value:f,onChange:function(t){r(),e(U({},"sort",t.target.value))}},n.createElement(b.Z,{value:N.ALPHABET},"По алфавиту"),n.createElement(b.Z,{value:N.VISITS_ALPHABET},"По числу посещений"),n.createElement(b.Z,{value:N.FIRST_VISIT_ALPHABET},"По первому посещению"),n.createElement(b.Z,{value:N.LAST_VISIT_ALPHABET},"По последнему посещению"),n.createElement(b.Z,{value:N.RATING_ALPHABET},"По рейтингу")))),n.createElement(m.Z,null,n.createElement(y.Z,{className:i.formControl},n.createElement(h.Z,{shrink:!0,id:"select-filterBy-filter-label"},"Фильтровать"),n.createElement(g.Z,{labelId:"select-filterBy-filter-label",autoWidth:!0,id:"select-filterBy-filter",value:d,onChange:function(t){r(),e(U({},"filter",t.target.value))}},n.createElement(b.Z,{value:L.ANY},"Показать все"),n.createElement(b.Z,{value:L.FOREIGN},"Только зарубежные"),n.createElement(b.Z,{value:L.DOMESTIC},"Только местные")))))}),[O,f,d]),{groupBy:O,sortBy:f,filterBy:d}}var B=r(46852),M=r(73727),H=r(22318),F=r(89659),W=r(17812),$=r(76220);function X(e){var t=e.tripCreateUrl,r=e.locationsUrl,a=e.stats,o=a.locationsStats.total,i=a.countriesStats.total;return n.createElement(H.Z,{variant:"h6",paragraph:!0},n.createElement("span",null,"Всего "),n.createElement(F.Z,{to:r,component:M.rU},"".concat(o," городов ")),n.createElement("span",null,"из "),n.createElement("span",null,"".concat(i," стран")),t?n.createElement(W.Z,{component:M.rU,to:t,"data-locator":"ADD_TRIP_BUTTON"},n.createElement($.Z,null)):null)}function J(e){var t=e.split("_").map((function(e){return C[e]})),r=t.includes(I.gZ.TRIPS),n=t[t.length-1];return r||n===I.gZ.LOCATIONS||t.push(I.gZ.LOCATIONS),r&&t.push(I.gZ.JUST_VISITS),t}function q(e){return e.split("_").map((function(e){return P[e]}))}function K(e){return _[e]}function Q(e){var t=e.match.params,r=t.userAlias,o=t.section,i=(0,v.Eu)().userAlias,l=r===i,c=r!==i,s=(0,d.Tp)(),f=s.queryFilter,p=z(s.setQueryFilter,f,o),m=p.groupBy,y=p.sortBy,h=p.filterBy,g=(0,a.Yy)({userAlias:r}),b=g.isPending,E=g.isError,O=(0,B.Z)({editable:l,userAlias:r,section:o});if(E)return n.createElement("div",null,"...Error");if(b)return n.createElement(u,null);var S=g.visitsIds,A=g.visitsDict,w=S.map((function(e){return A[e]})),C={visitsList:w,parent:null,field:null},N=(0,I.vZ)(C,g);return n.createElement(n.Fragment,null,n.createElement(X,{locationsUrl:O.locationsUrl,tripCreateUrl:O.tripCreateUrl,stats:N}),n.createElement(I.ZP,{visitsList:w,provision:g,groupsOrder:J(m),sortingOrder:"trips"===o?[I.zg.LAST_VISIT]:q(y),filteringOption:K(h),adaptTopHeaderSize:!0,isObscure:c,urls:O,virtualize:!0,mapSectionLevel:m===T?-1:1,photosSectionLevel:0,config:{collapsible:m!==T}}))}r(23123)},40778:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f}),r(74916),r(4723),r(91058),r(57327),r(41539),r(88449),r(2490),r(59849),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038),r(77601);var n=r(67294),a=r(22318),o=r(89659),i=r(27610),l=r(46852),c=r(4555),u=(r(21249),r(57640),r(9924),r(70477));function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e){var t,r,f=e.match.params,d=f.userAlias,v=f.strYear,p=f.section,m=(t=(0,n.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=m[0],h=m[1],g=(0,i.Eu)().userAlias,b=d===g,E=d!==g,I=(0,l.Z)({editable:b,userAlias:d,section:p}),O=parseInt(v,10),S=function(e){var t=e.userAlias,r=e.year,n=(0,u.Y)({userAlias:t}),a=n.visitsDict;return{provision:n,visitsList:n.visitsIds.map((function(e){return a[e]})).filter((function(e){var t=e.arrivalYear;return r===t}))}}({domain:"travel.LocationPage",userAlias:d,year:O}),A=S.provision,T=S.provision,w=T.isError,C=T.isPending,N=T.isReady,R=S.visitsList;return w?n.createElement("div",null,"...Error"):C||!N?n.createElement("div",null,"...Loading"):R.length?n.createElement(c.ZP,{visitsList:R,provision:A,groupsOrder:[c.gZ.YEARS,y&&c.gZ.COUNTRIES,c.gZ.JUST_VISITS].filter(Boolean),photosSectionLevel:1,mapSectionLevel:0,sortingOrder:[c.zg.LAST_VISIT],filteringOption:c.LT.ANY,isObscure:E,urls:I,config:{YearVisitsGroup:{hyperlinks:{year:!1}}}},(function(e){var t=e.level,r=e.index;return 0===t&&0===r&&n.createElement(n.Fragment,null,n.createElement(o.Z,{variant:"body2",onClick:function(){return h((function(e){return!e}))}},y?"Убрать группировку по странам":"Сгруппировать по странам"))})):n.createElement(a.Z,{variant:"h2",component:"span"},O)}},46852:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(67294),a=r(84090);function o(e){var t=e.editable,r=e.userAlias,o=e.section,i=(0,a._l)().travel;return(0,n.useMemo)((function(){return{hyperlinks:function(){},locationsUrl:i.locations.toUrl({userAlias:r,section:o}),tripCreateUrl:t?i.tripCreate.toUrl({userAlias:r}):null,resolveLocationUrl:function(e){var t=e.locationId;return i.location.toUrl({userAlias:r,section:o,strLocationId:String(t)})},resolveCountryUrl:function(e){var t=e.countryId;return i.country.toUrl({userAlias:r,section:o,strCountryId:String(t)})},resolveYearUrl:function(e){var t=e.year;return t?i.year.toUrl({userAlias:r,section:o,strYear:String(t)}):null},resolveTripEditUrl:function(e){var n=e.tripId;return t?i.tripEdit.toUrl({strTripId:String(n),userAlias:r}):null},resolveTripUrl:function(e){var t=e.tripId;return i.trip.toUrl({strTripId:String(t),userAlias:r})},resolveVisitUrl:function(e){var t=e.visitId;return i.visit.toUrl({userAlias:r,section:o,strVisitId:String(t)})}}}),[t,i])}}}]);
//# sourceMappingURL=travel-Places-eddeb146d6ff49e7d189.js.map