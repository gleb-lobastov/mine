(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1281:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var r=n(0),i=n.n(r),a=n(811),o=n(178),c=n(871),s=n(909),l=(n(64),n(26),n(12),n(27),n(22),n(28),n(2)),u=n.n(l),f=n(928),v=n(68);var p=n(337),d=n(294);function m(e){var t=e.countriesIds,n=e.locationsDict,r=e.locationsIds,a=Object(v.d)().travel.visits,o=b(t.length,{one:"стране",many:"странах"}),c=b(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.filter((function(e){var n;return(null===(n=t[e])||void 0===n?void 0:n.locationClass)===p.LOCATION_CLASSES_ID.CITY})).length}(r,n),{one:"городе",many:"городах"});return i.a.createElement(f.a,null,"\nСтатистика по моим путешествиям.\n\nЗдесь будет красивая инфографика, рассказы и фотки про 250 стран и\nтерриторий. Пока я побывал только в\n[".concat(o,"](").concat(a.toUrl(),") и \n[").concat(c,"](").concat(a.toUrl(),"),\nа раз так, то и на инфографику пока забил.\n  "))}function b(e,t){return null==e?"... ".concat(t.many):"".concat(e," ").concat((n=e,i=(r=t).many,a=r.few,o=void 0===a?i:a,c=r.one,s=Math.abs(n),(s%=100)>=5&&s<=20?i:1==(s%=10)?c:s>=2&&s<=4?o:i));var n,r,i,a,o,c,s}m.propTypes={countriesIds:u.a.arrayOf(u.a.number).isRequired,locationsDict:u.a.objectOf(u.a.shape(d.default)).isRequired,locationsIds:u.a.arrayOf(u.a.number).isRequired};var O=n(820);function _(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(O.a,{component:"a",target:"_blank",rel:"nofollow noreferrer noopener",href:"https://lobastov.livejournal.com/tag/%D0%9F%D1%83%D1%82%D0%B5%D1%88%D0%B5%D1%81%D1%82%D0%B2%D0%B8%D0%B5"},"Про путешествия в ЖЖ")),i.a.createElement("a",{href:"https://my.flightradar24.com/lobastov",target:"_blank",rel:"nofollow noreferrer noopener"},i.a.createElement("img",{src:"https://banners-my.flightradar24.com/lobastov.png",alt:"My Flightdiary.net profile"})))}var y=Object(a.a)({content:{display:"flex",flexDirection:"column",height:" 100%"},mapContainer:{flexGrow:1}});function g(){var e=y(),t=Object(o.b)(),n=t.queryFilter,r=t.setQueryFilter,a=Object(s.c)(r,n),l=a.scaleBy,u=a.ratingLevel,f=Object(c.b)({userAlias:"my"}),v=f.countriesIds,p=f.isReady,d=f.locationsDict,b=f.locationsIds,O=f.locationsRating,g=f.visitsDict;return p?i.a.createElement("div",{className:e.content},i.a.createElement(m,{countriesIds:v,isReady:p,locationsDict:d,locationsIds:b}),i.a.createElement(s.b,{className:e.mapContainer,locationsDict:d,visitsDict:g,locationsRating:O,locationsIds:b,minHeight:300,scaleBy:l,ratingLevel:l===s.a.BY_RATING?u:void 0}),i.a.createElement(_,null)):"...Loading"}},832:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(35),n(89),n(14),n(26),n(12),n(27),n(22),n(28),n(79),n(71),n(72),n(73),n(41),n(20),n(17),n(356),n(357),n(358),n(360),n(359),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(18),n(864),n(865),n(866),n(867);var r=n(0),i=n(116),a=n(856),o=n.n(a),c=n(850),s=n.n(c),l=n(136),u=n(48),f=(n(378),n(379),n(380),n(375),n(376),n(377),n(860),n(861),n(862),n(37),n(44),n(45),n(46),n(929)),v=n.n(f);var p=n(868),d=n(840),m=n(857),b=["user"];function O(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _(e){var t=e.userAlias,n=function(e){var t=e.userAlias,n=e.tripsIds,r=Object(i.c)((function(e){return{tripsDict:Object(l.c)(e,"trips")||{}}})).tripsDict,a=!n,o=!a&&n.filter((function(e){return!r[e]}));return Object(l.g)({domain:"travel.trips-".concat(t),isProvision:!0,modelName:"trips",observe:t,query:{userAlias:t,navigation:{isDisabled:!0},filter:a?{}:{id:{comparator:"in",value:o}}}})}({userAlias:t,tripsIds:e.tripsIds}),r=Object(p.a)({domain:"travel.trips-".concat(t,".user"),userAlias:t}),a=r.user,o=(a=void 0===a?{}:a).locationsRating,c=void 0===o?{}:o,s=O(r,b),f=(Object(u.o)(n)||{}).data,_=void 0===f?[]:f,I=Object(i.c)((function(e){return{tripsDict:Object(l.c)(e,"trips")||{},visitsDict:Object(l.c)(e,"visits")||{},ridesDict:Object(l.c)(e,"rides")||{},countriesDict:Object(l.c)(e,"countries")||{},locationsDict:Object(l.c)(e,"locations")||{}}})),T=I.tripsDict,E=I.visitsDict,j=I.ridesDict,h=I.countriesDict,A=I.locationsDict,R=g(_,T,"visits"),N=g(_,T,"rides"),D=g(R,E,"countryId"),C=g(R,E,"locationId"),P=Object(d.a)(),S=Object(m.a)({domain:"travel.locations-".concat(t),locationsIds:C}),L=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{updatesCounter:v()(t.map(u.p)),isReady:t.every(u.i),isPending:t.some(u.h),isValid:t.every(u.k),error:t.find(u.g),errors:t.map(u.f).filter(Boolean),invalidate:function(){return t.forEach((function(e){return(0,e.invalidate)()}))}}}(n,s,P,S);return{userProvision:s,tripsProvision:n,countriesProvision:P,locationsProvision:S,isError:L.isError,isValid:L.isValid,isReady:L.isReady,isPending:L.isPending,tripsIds:_,tripsDict:T,visitsIds:R,visitsDict:E,ridesIds:N,ridesDict:j,ridesStats:y(N,j),locationsIds:C,locationsDict:A,locationsRating:c,countriesIds:D,countriesDict:h}}function y(e,t){return{earliestDeparture:new Date(s()(e.map((function(e){var n;return null===(n=t[e])||void 0===n?void 0:n.departureDateTime.getTime()})))),latestArrival:new Date(o()(e.map((function(e){var n;return null===(n=t[e])||void 0===n?void 0:n.arrivalDateTime.getTime()}))))}}function g(e,t,n){return Object(r.useMemo)((function(){return Array.from(new Set(e.flatMap((function(e){var r;return(null===(r=t[e])||void 0===r?void 0:r[n])||[]}))))}),[e,t,n])}},840:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(136);function i(){return Object(r.g)({domain:"travel.countries",isProvision:!0,modelName:"countries",query:{navigation:{isDisabled:!0}}})}},847:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(64);var r=n(87),i=n(848);function a(e){if(!Object(i.a)(e))return"?";for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return r.a.apply(void 0,[e].concat(n))}},848:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(79),n(875),n(284);function r(e){return e instanceof Date&&!Number.isNaN(e.getTime())}},857:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f}));n(26),n(12),n(27),n(22),n(28),n(43),n(14),n(29),n(30),n(17),n(20),n(18),n(40),n(42),n(41),n(24),n(36),n(23),n(35),n(50),n(37),n(44),n(45),n(46),n(51),n(49);var r=n(116),i=n(136);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){var t=e.domain,n=e.locationsIds,a=Object(r.c)((function(e){return Object(i.c)(e,"locations")||{}})),o=n.filter((function(e){return!a[e]}));return Object(i.g)({domain:t,isProvision:!0,modelName:"locations",observe:n,condition:Boolean(o.length),query:{filter:{id:{comparator:"in",value:o}},navigation:{isDisabled:!0}}})}function f(e){var t=e.domain,n=s(Object(i.h)({domain:t,modelName:"locations",method:"POST"}),2),r=n[0];return o(o({},n[1]),{},{submitLocationRating:r})}},868:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(23),n(35),n(14),n(26),n(12),n(27),n(22),n(28),n(50),n(37),n(44),n(45),n(46),n(51),n(49);var r=n(116),i=n(136);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=e.domain,n=e.userAlias,a=Object(r.c)((function(e){return Object(i.e)(e,"users",n)}));return o(o({},Object(i.g)({domain:t,applicableSchemaName:"item",isProvision:!0,modelName:"users",observe:n,condition:Boolean(n),query:{id:n}})),{},{user:a})}},871:function(e,t,n){"use strict";n.d(t,"b",(function(){return r.a})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return v}));var r=n(832),i=(n(840),n(64),n(23),n(35),n(14),n(26),n(12),n(27),n(22),n(28),n(50),n(37),n(44),n(45),n(46),n(51),n(49),n(43),n(29),n(30),n(17),n(20),n(18),n(40),n(42),n(41),n(24),n(36),n(116)),a=n(136);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=e.userAlias,n=e.visitId,r=Object(i.c)((function(e){return{visitsDict:Object(a.c)(e,"visits")||{}}})).visitsDict[n];return l({visit:r},Object(a.g)({domain:"travel.visit".concat(n,"-").concat(t),isProvision:!0,modelName:"visits",observe:n,condition:!r,query:{userAlias:t,filter:{visit_id:{comparator:"=",value:n}},navigation:{isDisabled:!0}}}))}function v(e){var t=e.domain,n=o(Object(a.h)({domain:t,modelName:"visits",method:"POST",contentType:"multipart/form-data"}),2),r=n[0];return l(l({},n[1]),{},{submitVisitPhoto:r})}},909:function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"c",(function(){return K})),n.d(t,"b",(function(){return X}));n(71),n(72),n(73),n(353),n(354),n(220),n(23),n(35),n(14),n(26),n(12),n(27),n(22),n(28),n(50),n(37),n(44),n(45),n(46),n(51),n(49);var r,i=n(0),a=n.n(i),o=n(2),c=n.n(o),s=n(115),l=n.n(s),u=n(990),f=n.n(u),v=n(811),p=n(294),d=n(295),m=(n(153),n(154),n(155),n(850)),b=n.n(m),O=n(856),_=n.n(O);function y(e){var t=e.locationsIds,n=e.locationsDict,r=e.visitsDict,i=e.locationsRating;return t.map((function(e){var t,a=n[e];if(!a)return null;var o=a.lon,c=a.lat,s=a.locationName,l=a.visitsIds,u=function(e,t){return e.reduce((function(e,n){var r=t[n];if(r){var i=r.arrivalDateTime,a=r.departureDateTime;e.firstVisitDateTime=b()([e.firstVisitDateTime,i]),e.lastVisitDateTime=_()([e.lastVisitDateTime,a])}return e}),{firstVisitDateTime:null,lastVisitDateTime:null})}(null!=l?l:[],r);return{locationName:s,lat:c,lon:o,firstVisitDateTime:u.firstVisitDateTime,lastVisitDateTime:u.lastVisitDateTime,locationRating:i[e],visitsCount:null===(t=a.visitsIds)||void 0===t?void 0:t.length}}))}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I={BY_FIRST_VISIT:"fv",BY_LAST_VISIT:"lv",BY_VISITS_COUNT:"vc",BY_RATING:"r"},T=I.BY_LAST_VISIT,E=["step_by_time_1_zjtrlw.png","step_by_time_2_tvotvg.png","step_by_time_3_ylj1vi.png","step_by_time_4_uovfrs.png","step_by_time_5_s4jq0u.png","step_by_time_6_lmihnf.png"],j=(g(r={},I.BY_FIRST_VISIT,E),g(r,I.BY_LAST_VISIT,E),g(r,I.BY_VISITS_COUNT,["step_by_visits_1_zv3tba.png","step_by_visits_2_qthjqa.png","step_by_visits_3_xcjyla.png","step_by_visits_4_kwdwka.png","step_by_visits_5_xnnipa.png"]),g(r,I.BY_RATING,["step_by_rating_1_id2qgb.png","step_by_rating_2_iiqvik.png","step_by_rating_3_x2gzsd.png","step_by_rating_4_cbqdcn.png","step_by_rating_5_viyhls.png","step_by_rating_6_zzfgki.png","step_by_rating_7_pjjhhq.png","step_by_rating_8_vgetsd.png","step_by_rating_9_t6tenz.png","step_by_rating_10_yjywr0.png"]),r),h={ALL:"all",WANT_COME_BACK:"good",LOVE_THIS_PLACE:"best"},A=h.ALL,R=n(285);function N(e){var t=e.visitsCount;switch(!0){case t>10:return 5;case t>5:return 4;case t>2:return 3;case t>1:return 2;default:return 1}}function D(e){switch(e.locationRating){case R.LOCATION_RATING.PLACE_TO_LIVE:return 1;case R.LOCATION_RATING.FEW_PER_YEAR:case R.LOCATION_RATING.ONCE_PER_YEAR:return 3;case R.LOCATION_RATING.ONCE_PER_TWO_YEARS:case R.LOCATION_RATING.ONCE_PER_FIVE_YEARS:return 4;case R.LOCATION_RATING.ONCE_PER_DECADE:case R.LOCATION_RATING.TWICE_PER_LIVE:return 7;case R.LOCATION_RATING.ONCE_PER_LIVE:return 9;case R.LOCATION_RATING.NEVER:return 10;default:return 6}}function C(e){return{resolveStep:function(t,n){var r=(t[e]-n.minTime)/n.diff*6;return Math.min(Math.max(Math.floor(r),0),6)},resolveOptions:function(t){var n=t.map((function(t){return t[e]&&t[e].getTime()})).filter(Boolean),r=b()(n);return{minTime:r,diff:_()(n)+1-r}}}}n(355);var P=n(842),S=n(847);function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"eeeeee, d MMMM yyyy";return Object(S.a)(e,t,{locale:P.a})}function w(e){switch(e){case R.LOCATION_RATING.PLACE_TO_LIVE:return"Жил бы здесь";case R.LOCATION_RATING.FEW_PER_YEAR:case R.LOCATION_RATING.ONCE_PER_YEAR:return"Готов ездить сюда постоянно";case R.LOCATION_RATING.ONCE_PER_TWO_YEARS:case R.LOCATION_RATING.ONCE_PER_FIVE_YEARS:return"Приезжал бы иногда";case R.LOCATION_RATING.ONCE_PER_DECADE:case R.LOCATION_RATING.TWICE_PER_LIVE:return"Заглянул бы еще разок";case R.LOCATION_RATING.ONCE_PER_LIVE:return"Одного посещения достаточно";case R.LOCATION_RATING.NEVER:return"Тут нечего делать";default:return"?"}}n(64);function B(e,t){if(!t)return"".concat("https://res.cloudinary.com/dc2eke0gj/image/upload/markers/").concat(E[0]);var n=j[t],r=n[e-1]||n[0];return"".concat("https://res.cloudinary.com/dc2eke0gj/image/upload/markers/").concat(r)}n(43),n(29),n(30),n(17),n(20),n(18),n(40),n(42),n(41),n(24),n(36);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Y=n(232),q=n(815),k=n(816),M=n(818),x=n(828),W=n(1279),F=n(1264);function z(e){var t=e.classes,n=e.scaleBy,r=e.onClose,i=e.onChange;return(a.a.createElement(q.a,null,a.a.createElement(k.a,null,a.a.createElement(M.a,{className:t.formControl},a.a.createElement(x.a,{shrink:!0,id:"select-scaleBy-filter-label"},"Раскрасить маркеры"),a.a.createElement(W.a,{labelId:"select-scaleBy-filter-label",autoWidth:!0,id:"select-scaleBy-filter",value:n,onChange:function(e){r();var t,n,a,o=e.target.value,c=(a=o,(n="scale")in(t={})?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t);o!==I.BY_RATING&&(c.rating=void 0),i(c)}},a.a.createElement(F.a,{key:I.BY_FIRST_VISIT,value:I.BY_FIRST_VISIT},"По первому посещению"),a.a.createElement(F.a,{key:I.BY_LAST_VISIT,value:I.BY_LAST_VISIT},"По последнему посещению"),a.a.createElement(F.a,{key:I.BY_VISITS_COUNT,value:I.BY_VISITS_COUNT},"По числу посещений"),a.a.createElement(F.a,{key:I.BY_RATING,value:I.BY_RATING},"По рейтингу"))))))}function U(e){var t=e.classes,n=e.ratingLevel,r=e.onClose,i=e.onChange;return(a.a.createElement(q.a,null,a.a.createElement(k.a,null,a.a.createElement(M.a,{className:t.formControl},a.a.createElement(x.a,{shrink:!0,id:"select-ratingLevel-filter-label"},"Фильтр по рейтингу"),a.a.createElement(W.a,{labelId:"select-ratingLevel-filter-label",autoWidth:!0,id:"select-ratingLevel-filter",value:n,onChange:function(e){var t,n,a;r(),i((t={},n="rating",a=e.target.value,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}},a.a.createElement(F.a,{key:h.ALL,value:h.ALL},"Все"),a.a.createElement(F.a,{key:h.WANT_COME_BACK,value:h.WANT_COME_BACK},"Куда бы вернулся"),a.a.createElement(F.a,{key:h.LOVE_THIS_PLACE,value:h.LOVE_THIS_PLACE},"Лучшие места"))))))}z.propTypes={classes:c.a.shape({formControl:c.a.string.isRequired}).isRequired,scaleBy:c.a.oneOf(Object.values(I)).isRequired,onClose:c.a.func.isRequired,onChange:c.a.func.isRequired},U.propTypes={classes:c.a.shape({formControl:c.a.string.isRequired}).isRequired,ratingLevel:c.a.oneOf(Object.values(h)).isRequired,onClose:c.a.func.isRequired,onChange:c.a.func.isRequired};var H=Object(v.a)({formControl:{width:"100%"}}),K=function(e,t){var n=H(),r=t||{},i=r.scale,o=r.rating,c=function(e){return Object.values(I).includes(e)?e:T}(i),s=function(e){return Object.values(h).includes(e)?e:A}(o);return Object(Y.b)((function(t){var r=t.closeSidebar;return(a.a.createElement(a.a.Fragment,null,a.a.createElement(z,{classes:n,onClose:r,scaleBy:c,onChange:e}),c===I.BY_RATING&&a.a.createElement(U,{classes:n,onClose:r,ratingLevel:s,onChange:e})))}),[c,s]),{scaleBy:c,ratingLevel:s}};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=Object(v.a)({googleMapContainer:{margin:"12px 0",maxWidth:"100%",flexGrow:1,minHeight:function(e){return e.minHeight},position:"relative"},googleMapPosition:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0"}});function X(e){var t=e.className,n=e.locationsDict,r=e.visitsDict,o=e.locationsRating,c=e.locationsIds,s=e.minHeight,u=e.scaleBy,v=e.ratingLevel,p=Q({minHeight:s}),d=function(e){var t=V(Object(i.useState)(null),2),n=t[0],r=t[1],a=Object(i.useRef)(!0);return Object(i.useEffect)((function(){if(n){var t=n.map,r=n.maps,i=new r.LatLngBounds,o=e.map((function(e){var n=e.lat,a=e.lon,o=e.iconUrl,c=e.title,s=e.zIndex,l=new r.Marker({map:t,position:{lat:n,lng:a},icon:{url:o,scaledSize:new r.Size(24,24)},scale:.5,title:c,zIndex:s});return i.extend(l.position),l}));return a.current&&(t.setOptions({maxZoom:11,minZoom:2}),t.fitBounds(i),t.setOptions({maxZoom:null,minZoom:null}),a.current=!1),function(){o.forEach((function(e){e.setMap(null),e.setVisible(!1)})),o.length=0}}}),[n,e]),{handleGoogleApiLoaded:function(e){return r(e)}}}(Object(i.useMemo)((function(){var e=function(e,t){var n=t.ratingLevel,r=e.filter(Boolean);return Object.values(h).includes(n)&&n!==h.ALL?r.filter((function(e){var t=e.locationRating,r=e.visitsCount;switch(n){case h.WANT_COME_BACK:return r<2?t<=R.LOCATION_RATING.TWICE_PER_LIVE:t<=R.LOCATION_RATING.ONCE_PER_DECADE;case h.LOVE_THIS_PLACE:return t<=R.LOCATION_RATING.ONCE_PER_YEAR;default:return!0}})):r}(y({locationsDict:n,visitsDict:r,locationsRating:o,locationsIds:c}),{ratingLevel:v}),t=function(e){switch(e){case I.BY_VISITS_COUNT:return{resolveStep:N};case I.BY_RATING:return{resolveStep:D};case I.BY_LAST_VISIT:return C("lastVisitDateTime");case I.BY_FIRST_VISIT:return C("firstVisitDateTime");default:return{resolveStep:function(){return 1}}}}(u),i=t.resolveStep,a=t.resolveOptions,s=a&&a(e);return e.map((function(e){var t,n,r,a,o,c,l=i(e,s);return $($({},e),{},{zIndex:[I.BY_RATING,I.BY_FIRST_VISIT].includes(u)?10-l:l,iconUrl:B(l,u),title:(t=e,n=t.locationName,r=t.locationRating,a=t.visitsCount,o=t.firstVisitDateTime,c=t.lastVisitDateTime,[n,"Посещено ".concat(a," раз"),"Впервые ".concat(L(o)),a>1&&"Прошлое посешение ".concat(L(c)),"Рейтинг: ".concat(w(r))].filter(Boolean).join("\n"))})}))}),[n,r,o,c,u,v])).handleGoogleApiLoaded;return a.a.createElement("div",{className:l()(t,p.googleMapContainer)},a.a.createElement("div",{className:p.googleMapPosition},a.a.createElement(f.a,{bootstrapURLKeys:{key:"AIzaSyCvP0e64ui7WpXKBdzOyEmkb4l5RuGy3Zs"},center:{lat:0,lng:0},zoom:11,onGoogleApiLoaded:d})))}X.propTypes={className:c.a.string,visitsDict:c.a.objectOf(c.a.shape(d.default)).isRequired,locationsDict:c.a.objectOf(c.a.shape(p.default)).isRequired,locationsIds:c.a.arrayOf(c.a.number).isRequired,locationsRating:c.a.objectOf(c.a.number).isRequired,minHeight:c.a.number,scaleBy:c.a.oneOf(Object.values(I)).isRequired,ratingLevel:c.a.oneOf(Object.values(h)).isRequired},X.defaultProps={className:void 0,minHeight:"400px"}},928:function(e,t,n){"use strict";n(534),n(105);var r=n(0),i=n.n(r),a=n(122),o=n(884);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={a:function(e){var t=e.href,n=e.children;return t.startsWith&&t.startsWith("/")?i.a.createElement(a.b,{to:t},n):i.a.createElement("a",{href:t},n)}};t.a=function(e){var t=e.children,n=e.forwardedProps;return(i.a.createElement(o.a,c({},n,{components:s}),t))}}}]);
//# sourceMappingURL=travel-Dashboard-5eae7bb556971c9e7dde.js.map