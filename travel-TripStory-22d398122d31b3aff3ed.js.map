{"version":3,"sources":["webpack:///./src/modules/components/loaders/ProvisionLoader.jsx","webpack:///./src/core/connection/withProvision.jsx","webpack:///./node_modules/lodash/_baseForOwn.js","webpack:///./node_modules/lodash/groupBy.js","webpack:///./node_modules/lodash/_createAggregator.js","webpack:///./node_modules/lodash/_arrayAggregator.js","webpack:///./node_modules/lodash/_baseAggregator.js","webpack:///./node_modules/lodash/_baseEach.js","webpack:///./node_modules/lodash/_baseFor.js","webpack:///./node_modules/lodash/_createBaseFor.js","webpack:///./node_modules/lodash/_createBaseEach.js","webpack:///./src/packages/travel/models/trips/utils.js","webpack:///./node_modules/lodash/mapValues.js","webpack:///./src/packages/travel/pages/TripStoryPage/TripStoryPage.jsx","webpack:///./src/modules/utilities/types/numbers.js"],"names":["withLoader","Component","props","_props$provision","provision","_props$provision$isPe","isPending","hasFallback","react_default","a","createElement","PlainLoader","__webpack_exports__","_len2","arguments","length","provisionParams","Array","_key2","ExtendableComponent","_len","funcsArray","_key","arg","reduceRight","composed","func","compose","provide","apply","baseFor","__webpack_require__","keys","module","exports","object","iteratee","baseAssignValue","createAggregator","hasOwnProperty","Object","prototype","groupBy","result","value","key","call","push","arrayAggregator","baseAggregator","baseIteratee","isArray","setter","initializer","collection","accumulator","array","index","baseEach","baseForOwn","createBaseEach","createBaseFor","fromRight","keysFunc","iterable","isArrayLike","eachFunc","d","sortVisitsByTrips","groupAndSortVisitsByTrips","lodash_groupBy__WEBPACK_IMPORTED_MODULE_0__","lodash_groupBy__WEBPACK_IMPORTED_MODULE_0___default","n","lodash_mapValues__WEBPACK_IMPORTED_MODULE_1__","lodash_mapValues__WEBPACK_IMPORTED_MODULE_1___default","visitsList","sort","_ref","_ref2","orderInTrip","mapValues","memoizedSortVisitsByTrips","memoizeByLastArgs","TripStoryPage","classes","_ref$visits","visits","_ref$visits$data","data","ridesDict","noDataNode","lastVisitIndex","storiesNodes","map","visitIndex","departureRideComment","visitId","arrivalRideId","departureRideId","visitComment","locationName","arrivalRideComment","rideComment","concat","className","visitContainer","location","Boolean","storyPart","contentNode","some","container","propTypes","PropTypes","objectOf","string","isRequired","trips","shape","arrayOf","tripPropTypes","visitPropTypes","ridesPropTypes","withRouter","withStyles","fontSize","lineHeight","margin","fontWeight","withProvision","state","_ref5","input","number","strTripId","match","params","tripId","Number","isNaN","NaN","parseFloat","identity","request","rides","modelName","query","filter","trip_id","comparator","navigation","isDisabled","domain","selectDict"],"mappings":"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","file":"travel-TripStory-22d398122d31b3aff3ed.js","sourcesContent":["/* eslint-disable import/prefer-default-export */\nimport React from 'react';\nimport PlainLoader from 'modules/components/loaders/PlainLoader';\n\n// todo implement logic, which loader to show for each request, etc.\nexport const withLoader = Component => props => {\n  const { provision: { isPending = true, hasFallback } = {} } = props;\n  if (isPending && !hasFallback) {\n    return <PlainLoader />;\n  }\n  return <Component {...props} />;\n};\n","import { withLoader } from 'modules/components/loaders/ProvisionLoader';\nimport { provide } from 'core/connection';\n\nconst compose = (...funcsArray) => arg =>\n  funcsArray.reduceRight((composed, func) => func(composed), arg);\n\nexport default (...provisionParams) => ExtendableComponent =>\n  compose(\n    provide(...provisionParams),\n    withLoader,\n  )(ExtendableComponent);\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","import groupBy from 'lodash/groupBy';\nimport mapValues from 'lodash/mapValues';\n\nexport const sortVisitsByTrips = visitsList =>\n  visitsList.sort(\n    ({ orderInTrip: orderInTripA }, { orderInTrip: orderInTripB }) =>\n      orderInTripA - orderInTripB,\n  );\n\nexport const groupAndSortVisitsByTrips = visitsList =>\n  mapValues(groupBy(visitsList, 'tripId'), sortVisitsByTrips);\n","var baseAssignValue = require('./_baseAssignValue'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * Creates an object with the same keys as `object` and values generated\n * by running each own enumerable string keyed property of `object` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapKeys\n * @example\n *\n * var users = {\n *   'fred':    { 'user': 'fred',    'age': 40 },\n *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n * };\n *\n * _.mapValues(users, function(o) { return o.age; });\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n *\n * // The `_.property` iteratee shorthand.\n * _.mapValues(users, 'age');\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n */\nfunction mapValues(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, key, iteratee(value, key, object));\n  });\n  return result;\n}\n\nmodule.exports = mapValues;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router';\nimport compose from 'lodash/fp/compose';\nimport { withStyles } from '@material-ui/core/styles';\nimport { memoizeByLastArgs } from 'modules/utilities/memo';\nimport { toNumber } from 'modules/utilities/types/numbers';\nimport { selectDict } from 'core/connection';\nimport withProvision from 'core/connection/withProvision';\nimport ridesPropTypes from 'travel/models/rides/propTypes';\nimport tripPropTypes from 'travel/models/trips/propTypes';\nimport { sortVisitsByTrips } from 'travel/models/trips/utils';\nimport visitPropTypes from 'travel/models/visits/propTypes';\n\nconst memoizedSortVisitsByTrips = memoizeByLastArgs(sortVisitsByTrips);\n\nconst styles = {\n  container: { fontSize: '16px', lineHeight: '1.5' },\n  visitContainer: { margin: '20px 0' },\n  location: { fontWeight: 'bold', fontSize: '21px' },\n  storyPart: { margin: '12px 0' },\n};\n\nconst TripStoryPage = ({\n  classes,\n  visits: { data: visitsList = [] } = {},\n  ridesDict,\n}) => {\n  if (!ridesDict || !visitsList) {\n    return <div>None</div>;\n  }\n\n  const noDataNode = <div>Заметки о поездке не найдены</div>;\n  if (!visitsList.length) {\n    return noDataNode;\n  }\n\n  const lastVisitIndex = visitsList.length - 1;\n  const storiesNodes = memoizedSortVisitsByTrips(visitsList).map(\n    (\n      { visitId, arrivalRideId, departureRideId, visitComment, locationName },\n      visitIndex,\n    ) => {\n      const { rideComment: arrivalRideComment } =\n        ridesDict[arrivalRideId] || {};\n\n      let departureRideComment;\n      if (lastVisitIndex === visitIndex) {\n        const { rideComment } = ridesDict[departureRideId] || {};\n        departureRideComment = rideComment;\n      }\n\n      if (!arrivalRideComment && !departureRideComment && !visitComment) {\n        return null;\n      }\n      return (\n        <article key={`id${visitId}`} className={classes.visitContainer}>\n          <h1 className={classes.location}>{locationName}</h1>\n          {Boolean(arrivalRideComment) && (\n            <section className={classes.storyPart}>\n              {arrivalRideComment}\n            </section>\n          )}\n          {Boolean(visitComment) && (\n            <section className={classes.storyPart}>{visitComment}</section>\n          )}\n          {Boolean(departureRideComment) && (\n            <section className={classes.storyPart}>\n              {departureRideComment}\n            </section>\n          )}\n        </article>\n      );\n    },\n  );\n\n  const contentNode = storiesNodes.some(Boolean) ? storiesNodes : noDataNode;\n  return <div className={classes.container}>{contentNode}</div>;\n};\n\nTripStoryPage.propTypes = {\n  classes: PropTypes.objectOf(PropTypes.string).isRequired,\n  trips: PropTypes.shape({\n    data: PropTypes.arrayOf(PropTypes.shape(tripPropTypes)),\n  }).isRequired,\n  visits: PropTypes.shape({\n    data: PropTypes.arrayOf(PropTypes.shape(visitPropTypes)),\n  }).isRequired,\n  ridesDict: PropTypes.objectOf(PropTypes.shape(ridesPropTypes)).isRequired,\n};\n\nconst mapStateToRequirements = (\n  state,\n  {\n    match: {\n      params: { strTripId },\n    },\n  },\n) => {\n  const tripId = toNumber(strTripId);\n  return {\n    identity: {\n      strTripId,\n    },\n    request: {\n      rides: {\n        modelName: 'rides',\n        query: {\n          filter: { trip_id: { comparator: '=', value: tripId } },\n          navigation: { isDisabled: true },\n        },\n      },\n      visits: {\n        modelName: 'visits',\n        query: {\n          filter: { trip_id: { comparator: '=', value: tripId } },\n          navigation: { isDisabled: true },\n        },\n      },\n    },\n    domain: 'tripStoryPage',\n  };\n};\n\nconst mapStateToProps = state => ({\n  ridesDict: selectDict(state, 'rides'),\n});\n\nexport default compose(\n  withRouter,\n  withStyles(styles),\n  withProvision(mapStateToRequirements, mapStateToProps),\n)(TripStoryPage);\n","export const toNumber = input => {\n  const number = Number(input);\n  return Number.isNaN(number) ? NaN : parseFloat(input);\n};\n\nexport const toInteger = input => {\n  const number = Number(input);\n  return Number.isNaN(number) ? NaN : parseInt(input, 10);\n};\n"],"sourceRoot":""}