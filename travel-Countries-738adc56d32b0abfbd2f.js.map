{"version":3,"sources":["webpack:///./src/modules/components/loaders/ProvisionLoader.jsx","webpack:///./src/core/connection/withProvision.jsx","webpack:///./node_modules/lodash/groupBy.js","webpack:///./node_modules/lodash/_baseForOwn.js","webpack:///./node_modules/lodash/uniq.js","webpack:///./node_modules/lodash/_createAggregator.js","webpack:///./node_modules/lodash/_arrayAggregator.js","webpack:///./node_modules/lodash/_baseAggregator.js","webpack:///./node_modules/lodash/_baseEach.js","webpack:///./node_modules/lodash/_baseFor.js","webpack:///./node_modules/lodash/_createBaseFor.js","webpack:///./node_modules/lodash/_createBaseEach.js","webpack:///./node_modules/lodash/_baseUniq.js","webpack:///./node_modules/lodash/_arrayIncludesWith.js","webpack:///./node_modules/lodash/_createSet.js","webpack:///./src/packages/travel/components/common/WelcomeScreen/WelcomeScreen.jsx","webpack:///./src/packages/travel/components/models/rides/RideEditDialog/localization.js","webpack:///./src/packages/travel/pages/VisitsPage/VisitsPage.jsx","webpack:///./src/packages/travel/pages/RidesPage/RidesPage.jsx"],"names":["withLoader","Component","props","_props$provision","provision","_props$provision$isPe","isPending","hasFallback","react_default","a","createElement","PlainLoader","__webpack_exports__","_len2","arguments","length","provisionParams","Array","_key2","ExtendableComponent","_len","funcsArray","_key","arg","reduceRight","composed","func","compose","provide","apply","baseAssignValue","__webpack_require__","createAggregator","hasOwnProperty","Object","prototype","groupBy","result","value","key","call","push","module","exports","baseFor","keys","object","iteratee","baseUniq","array","arrayAggregator","baseAggregator","baseIteratee","isArray","setter","initializer","collection","accumulator","index","baseEach","baseForOwn","createBaseEach","createBaseFor","fromRight","keysFunc","iterable","isArrayLike","eachFunc","SetCache","arrayIncludes","arrayIncludesWith","cacheHas","createSet","setToArray","LARGE_ARRAY_SIZE","comparator","includes","isCommon","seen","set","outer","computed","seenIndex","Set","noop","values","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","react_router_dom__WEBPACK_IMPORTED_MODULE_2__","lodash_fp_compose__WEBPACK_IMPORTED_MODULE_3__","lodash_fp_compose__WEBPACK_IMPORTED_MODULE_3___default","modules_utilities_routing_Path__WEBPACK_IMPORTED_MODULE_4__","core_context_AppContext__WEBPACK_IMPORTED_MODULE_5__","core_context_AuthContext__WEBPACK_IMPORTED_MODULE_6__","WelcomeScreen","_ref","children","visitedUserAlias","match","params","userAlias","_ref$namedPaths","namedPaths","_ref$namedPaths$trave","travel","tripsPath","trips","authenticatedUserAlias","useAuthContext","Message","useCallback","path","toUrl","component","to","propTypes","PropTypes","node","shape","string","isRequired","instanceOf","Path","defaultProps","withRouter","withPaths","RIDE_CLASSES_NAMES","_defineProperty","_RIDE_CLASSES_NAMES","RIDE_CLASSES","ECONOMY","COMFORT","BUSINESS","FIRST","PRIVATE","RIDE_OCCUPATION_NAMES","_RIDE_OCCUPATION_NAME","RIDE_OCCUPATION","PASSENGER","STUFF","DRIVER","RIDE_TYPES_NAMES","_RIDE_TYPES_NAMES","RIDE_TYPES","SELF_DRIVE","SCHEDULED","CHARTER","TOUR","CARPOOL","HITCH_HIKING","DROP_OFF","VEHICLE_NAMES","_VEHICLE_NAMES","VEHICLE_TYPES","CAR","TRAIN","AIRCRAFT","BUS","MOTORHOME","LOCAL_TRAIN","FERRY","BIKE","BY_FEET","ROPEWAY","FUNICULAR","MOTORBIKE","TRUCK","ALL_TERRAIN_VEHICLE","TRAM","TROLLEY","TAXI","CITY_BUS","JITNEY","SUBWAY","PUBLIC_TRANSPORT","r","lodash_groupBy__WEBPACK_IMPORTED_MODULE_1__","lodash_groupBy__WEBPACK_IMPORTED_MODULE_1___default","lodash_uniq__WEBPACK_IMPORTED_MODULE_2__","lodash_uniq__WEBPACK_IMPORTED_MODULE_2___default","lodash_property__WEBPACK_IMPORTED_MODULE_3__","lodash_property__WEBPACK_IMPORTED_MODULE_3___default","prop_types__WEBPACK_IMPORTED_MODULE_4__","prop_types__WEBPACK_IMPORTED_MODULE_4___default","core_connection_withProvision__WEBPACK_IMPORTED_MODULE_5__","core_connection__WEBPACK_IMPORTED_MODULE_6__","travel_components_common_WelcomeScreen__WEBPACK_IMPORTED_MODULE_7__","travel_models_countries_propTypes__WEBPACK_IMPORTED_MODULE_8__","travel_models_visits_propTypes__WEBPACK_IMPORTED_MODULE_9__","byCountriesVisitsCount","_ref2","_ref$countryName","countryName","countryNameA","_ref$visitsCount","visitsCount","visitsCountA","_ref$locations","locations","locationsA","_ref2$countryName","countryNameB","_ref2$visitsCount","visitsCountB","_ref2$locations","localeCompare","byLocationsVisitsCount","_ref3","_ref4","_ref3$locationName","locationName","locationNameA","_ref3$visitsCount","_ref4$locationName","locationNameB","_ref4$visitsCount","VisitsPage","_ref5","countriesDict","isVisitsComplete","_ref5$visits","visits","_ref5$visits$data","data","visitsList","visitsWithCounter","useMemo","property","map","countryVisits","countryId","uniq","locationVisits","_locationVisits$","locationId","sort","_ref7","countryIndex","countryVisitsCount","concat","_ref8","locationIndex","locationVisitsCount","countriesPropTypes","bool","arrayOf","visitPropTypes","withProvision","state","_ref9","_ref10$fallback","selectProvisionStatus","fallback","_ref11$data","userTripsIds","domain","request","countries","isNoop","modelName","query","navigation","isDisabled","observe","filter","trip_id","selectDict","isComplete","byRidesCount","ridesA","_slicedToArray","RidesPage","isRidesComplete","_ref5$rides","rides","_ref5$rides$data","ridesList","travel_components_common_WelcomeScreen__WEBPACK_IMPORTED_MODULE_5__","ridesByType","entries","_ref6","text","counter","vehicleType","ridesPropTypes","_ref9$fallback","_ref10$data"],"mappings":"uHAKaA,EAAa,SAAAC,GAAS,OAAI,SAAAC,GAAS,IAAAC,EACgBD,EAAtDE,UADsCC,GAAAF,OAAA,IAAAA,EACS,GADTA,GACzBG,iBADyB,IAAAD,KACPE,EADOJ,EACPI,YACvC,OAAID,IAAcC,EACTC,EAAAC,EAAAC,cAACC,EAAA,EAAD,MAEFH,EAAAC,EAAAC,cAACT,EAAcC,cCJTU,EAAA,qBAAAC,EAAAC,UAAAC,OAAIC,EAAJ,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAIF,EAAJE,GAAAJ,UAAAI,GAAA,OAAwB,SAAAC,GAAmB,OAH1C,mBAAAC,EAAAN,UAAAC,OAAIM,EAAJ,IAAAJ,MAAAG,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAID,EAAJC,GAAAR,UAAAQ,GAAA,OAAmB,SAAAC,GAAG,OACpCF,EAAWG,YAAY,SAACC,EAAUC,GAAX,OAAoBA,EAAKD,IAAWF,IAG3DI,CACEC,IAAOC,WAAP,EAAWb,GACXhB,EAFF2B,CAGER,0BCVJ,IAAAW,EAAsBC,EAAQ,KAC9BC,EAAuBD,EAAQ,KAM/BE,EAHAC,OAAAC,UAGAF,eAyBAG,EAAAJ,EAAA,SAAAK,EAAAC,EAAAC,GACAN,EAAAO,KAAAH,EAAAE,GACAF,EAAAE,GAAAE,KAAAH,GAEAR,EAAAO,EAAAE,EAAA,CAAAD,MAIAI,EAAAC,QAAAP,uBCxCA,IAAAQ,EAAcb,EAAQ,KACtBc,EAAWd,EAAQ,KAcnBW,EAAAC,QAJA,SAAAG,EAAAC,GACA,OAAAD,GAAAF,EAAAE,EAAAC,EAAAF,yBCZA,IAAAG,EAAejB,EAAQ,KAwBvBW,EAAAC,QAJA,SAAAM,GACA,OAAAA,KAAAlC,OAAAiC,EAAAC,GAAA,yBCrBA,IAAAC,EAAsBnB,EAAQ,KAC9BoB,EAAqBpB,EAAQ,KAC7BqB,EAAmBrB,EAAQ,KAC3BsB,EAActB,EAAQ,IAmBtBW,EAAAC,QATA,SAAAW,EAAAC,GACA,gBAAAC,EAAAT,GACA,IAAArB,EAAA2B,EAAAG,GAAAN,EAAAC,EACAM,EAAAF,MAAA,GAEA,OAAA7B,EAAA8B,EAAAF,EAAAF,EAAAL,EAAA,GAAAU,wBCGAf,EAAAC,QAXA,SAAAM,EAAAK,EAAAP,EAAAU,GAIA,IAHA,IAAAC,GAAA,EACA3C,EAAA,MAAAkC,EAAA,EAAAA,EAAAlC,SAEA2C,EAAA3C,GAAA,CACA,IAAAuB,EAAAW,EAAAS,GACAJ,EAAAG,EAAAnB,EAAAS,EAAAT,GAAAW,GAEA,OAAAQ,wBClBA,IAAAE,EAAe5B,EAAQ,KAoBvBW,EAAAC,QAPA,SAAAa,EAAAF,EAAAP,EAAAU,GAIA,OAHAE,EAAAH,EAAA,SAAAlB,EAAAC,EAAAiB,GACAF,EAAAG,EAAAnB,EAAAS,EAAAT,GAAAkB,KAEAC,wBCjBA,IAAAG,EAAiB7B,EAAQ,KAWzB4B,EAVqB5B,EAAQ,IAU7B8B,CAAAD,GAEAlB,EAAAC,QAAAgB,uBCbA,IAaAf,EAboBb,EAAQ,IAa5B+B,GAEApB,EAAAC,QAAAC,qBCSAF,EAAAC,QAjBA,SAAAoB,GACA,gBAAAjB,EAAAC,EAAAiB,GAMA,IALA,IAAAN,GAAA,EACAO,EAAA/B,OAAAY,GACA5C,EAAA8D,EAAAlB,GACA/B,EAAAb,EAAAa,OAEAA,KAAA,CACA,IAAAwB,EAAArC,EAAA6D,EAAAhD,IAAA2C,GACA,QAAAX,EAAAkB,EAAA1B,KAAA0B,GACA,MAGA,OAAAnB,yBCpBA,IAAAoB,EAAkBnC,EAAQ,KA+B1BW,EAAAC,QArBA,SAAAwB,EAAAJ,GACA,gBAAAP,EAAAT,GACA,SAAAS,EACA,OAAAA,EAEA,IAAAU,EAAAV,GACA,OAAAW,EAAAX,EAAAT,GAMA,IAJA,IAAAhC,EAAAyC,EAAAzC,OACA2C,EAAAK,EAAAhD,GAAA,EACAkD,EAAA/B,OAAAsB,IAEAO,EAAAL,QAAA3C,KACA,IAAAgC,EAAAkB,EAAAP,KAAAO,KAIA,OAAAT,yBC3BA,IAAAY,EAAerC,EAAQ,KACvBsC,EAAoBtC,EAAQ,KAC5BuC,EAAwBvC,EAAQ,KAChCwC,EAAexC,EAAQ,KACvByC,EAAgBzC,EAAQ,KACxB0C,EAAiB1C,EAAQ,KAGzB2C,EAAA,IA+DAhC,EAAAC,QApDA,SAAAM,EAAAF,EAAA4B,GACA,IAAAjB,GAAA,EACAkB,EAAAP,EACAtD,EAAAkC,EAAAlC,OACA8D,GAAA,EACAxC,EAAA,GACAyC,EAAAzC,EAEA,GAAAsC,EACAE,GAAA,EACAD,EAAAN,OAEA,GAAAvD,GAAA2D,EAAA,CACA,IAAAK,EAAAhC,EAAA,KAAAyB,EAAAvB,GACA,GAAA8B,EACA,OAAAN,EAAAM,GAEAF,GAAA,EACAD,EAAAL,EACAO,EAAA,IAAAV,OAGAU,EAAA/B,EAAA,GAAAV,EAEA2C,EACA,OAAAtB,EAAA3C,GAAA,CACA,IAAAuB,EAAAW,EAAAS,GACAuB,EAAAlC,IAAAT,KAGA,GADAA,EAAAqC,GAAA,IAAArC,IAAA,EACAuC,GAAAI,KAAA,CAEA,IADA,IAAAC,EAAAJ,EAAA/D,OACAmE,KACA,GAAAJ,EAAAI,KAAAD,EACA,SAAAD,EAGAjC,GACA+B,EAAArC,KAAAwC,GAEA5C,EAAAI,KAAAH,QAEAsC,EAAAE,EAAAG,EAAAN,KACAG,IAAAzC,GACAyC,EAAArC,KAAAwC,GAEA5C,EAAAI,KAAAH,IAGA,OAAAD,sBC/CAK,EAAAC,QAZA,SAAAM,EAAAX,EAAAqC,GAIA,IAHA,IAAAjB,GAAA,EACA3C,EAAA,MAAAkC,EAAA,EAAAA,EAAAlC,SAEA2C,EAAA3C,GACA,GAAA4D,EAAArC,EAAAW,EAAAS,IACA,SAGA,+BClBA,IAAAyB,EAAUpD,EAAQ,KAClBqD,EAAWrD,EAAQ,KACnB0C,EAAiB1C,EAAQ,KAYzByC,EAAAW,GAAA,EAAAV,EAAA,IAAAU,EAAA,YATA,IASA,SAAAE,GACA,WAAAF,EAAAE,IADAD,EAIA1C,EAAAC,QAAA6B,oCClBA,IAAAc,EAAAvD,EAAA,GAAAwD,EAAAxD,EAAAyD,EAAAF,GAAAG,EAAA1D,EAAA,GAAA2D,EAAA3D,EAAAyD,EAAAC,GAAAE,EAAA5D,EAAA,IAAA6D,EAAA7D,EAAA,KAAA8D,EAAA9D,EAAAyD,EAAAI,GAAAE,EAAA/D,EAAA,KAAAgE,EAAAhE,EAAA,IAAAiE,EAAAjE,EAAA,KAQMkE,EAAgB,SAAAC,GAMhB,IALJC,EAKID,EALJC,SAEuBC,EAGnBF,EAJJG,MACEC,OAAUC,UAGRC,EAAAN,EADJO,WACIC,GAAAF,OAAA,IAAAA,EADgD,GAChDA,GADUG,OAAiBC,GAC3BF,OAAA,IAAAA,EADyC,GACzCA,GADoBG,MAELC,EAA2BC,cAAtCR,UACR,GAAIH,IAAqBU,EACvB,OACEvB,EAAA9E,EAAAC,cAAA,yEAGJ,IAAMsG,EAAUC,sBACd,kBACE1B,EAAA9E,EAAAC,cAAA,WACE6E,EAAA9E,EAAAC,cAAA,uJAICyF,IAGL,CAACA,IAEH,OACEZ,EAAA9E,EAAAC,cAACiF,EAAA,EAAD,KACEJ,EAAA9E,EAAAC,cAACiF,EAAA,EAAD,CACEuB,KAAMN,EAAUO,MAAM,CAAEZ,UAAWO,IACnCM,UAAWJ,IAEbzB,EAAA9E,EAAAC,cAACiF,EAAA,EAAD,CAAU0B,GAAIT,EAAUO,MAAM,CAAEZ,UAAWO,QAKjDb,EAAcqB,UAAY,CACxBnB,SAAUoB,IAAUC,KACpBnB,MAAOkB,IAAUE,MAAM,CACrBnB,OAAQiB,IAAUE,MAAM,CAAElB,UAAWgB,IAAUG,WAC9CC,WACHlB,WAAYc,IAAUE,MAAM,CAC1Bd,OAAQY,IAAUE,MAAM,CAAEZ,MAAOU,IAAUK,WAAWC,SACrDF,YAGL1B,EAAc6B,aAAe,CAC3B3B,SAAU,MAGGxE,QACboG,IACAC,IAFarG,CAGbsE,iTCrDK,IAAMgC,GAAkBC,EAAAC,EAAA,GAC5BC,eAAaC,QAAU,UADKH,EAAAC,EAE5BC,eAAaE,QAAU,WAFKJ,EAAAC,EAG5BC,eAAaG,SAAW,UAHIL,EAAAC,EAI5BC,eAAaI,MAAQ,UAJON,EAAAC,EAK5BC,eAAaK,QAAU,WALKN,GAQlBO,GAAqBR,EAAAS,EAAA,GAC/BC,kBAAgBC,UAAY,YADGX,EAAAS,EAE/BC,kBAAgBE,MAAQ,YAFOZ,EAAAS,EAG/BC,kBAAgBG,OAAS,YAHMJ,GAMrBK,GAAgBd,EAAAe,EAAA,GAC1BC,aAAWC,WAAa,2BADEjB,EAAAe,EAE1BC,aAAWE,UAAY,mBAFGlB,EAAAe,EAG1BC,aAAWG,QAAU,kBAHKnB,EAAAe,EAI1BC,aAAWI,KAAO,OAJQpB,EAAAe,EAK1BC,aAAWK,QAAU,uBALKrB,EAAAe,EAM1BC,aAAWM,aAAe,YANAtB,EAAAe,EAO1BC,aAAWO,SAAW,uBAPIR,GAUhBS,GAAaxB,EAAAyB,EAAA,GACvBC,gBAAcC,IAAM,cADG3B,EAAAyB,EAEvBC,gBAAcE,MAAQ,SAFC5B,EAAAyB,EAGvBC,gBAAcG,SAAW,WAHF7B,EAAAyB,EAIvBC,gBAAcI,IAAM,WAJG9B,EAAAyB,EAKvBC,gBAAcK,UAAY,kBALH/B,EAAAyB,EAMvBC,gBAAcM,YAAc,cANLhC,EAAAyB,EAOvBC,gBAAcO,MAAQ,SAPCjC,EAAAyB,EAQvBC,gBAAcQ,KAAO,aARElC,EAAAyB,EASvBC,gBAAcS,QAAU,UATDnC,EAAAyB,EAUvBC,gBAAcU,QAAU,mBAVDpC,EAAAyB,EAWvBC,gBAAcW,UAAY,aAXHrC,EAAAyB,EAYvBC,gBAAcY,UAAY,YAZHtC,EAAAyB,EAavBC,gBAAca,MAAQ,YAbCvC,EAAAyB,EAcvBC,gBAAcc,oBAAsB,YAdbxC,EAAAyB,EAevBC,gBAAce,KAAO,WAfEzC,EAAAyB,EAgBvBC,gBAAcgB,QAAU,cAhBD1C,EAAAyB,EAiBvBC,gBAAciB,KAAO,SAjBE3C,EAAAyB,EAkBvBC,gBAAckB,SAAW,yBAlBF5C,EAAAyB,EAmBvBC,gBAAcmB,OAAS,oBAnBA7C,EAAAyB,EAoBvBC,gBAAcoB,OAAS,SApBA9C,EAAAyB,EAqBvBC,gBAAcqB,iBAAmB,0BArBVtB,qCChC1B5H,EAAAmJ,EAAAtK,GAAA,IAAA0E,EAAAvD,EAAA,GAAAwD,EAAAxD,EAAAyD,EAAAF,GAAA6F,EAAApJ,EAAA,KAAAqJ,EAAArJ,EAAAyD,EAAA2F,GAAAE,EAAAtJ,EAAA,KAAAuJ,EAAAvJ,EAAAyD,EAAA6F,GAAAE,EAAAxJ,EAAA,KAAAyJ,EAAAzJ,EAAAyD,EAAA+F,GAAAE,EAAA1J,EAAA,GAAA2J,EAAA3J,EAAAyD,EAAAiG,GAAAE,EAAA5J,EAAA,KAAA6J,EAAA7J,EAAA,KAAA8J,EAAA9J,EAAA,KAAA+J,EAAA/J,EAAA,KAAAgK,EAAAhK,EAAA,KAWMiK,EAAyB,SAAA9F,EAAA+F,GAAA,IAAAC,EAAAhG,EAE3BiG,YAAaC,OAFc,IAAAF,EAEC,GAFDA,EAAAG,EAAAnG,EAG3BoG,YAAaC,OAHc,IAAAF,EAGC,EAHDA,EAAAG,EAAAtG,EAI3BuG,UAAWC,OAJgB,IAAAF,EAIH,GAJGA,EAAAG,EAAAV,EAO3BE,YAAaS,OAPc,IAAAD,EAOC,GAPDA,EAAAE,EAAAZ,EAQ3BK,YAAaQ,OARc,IAAAD,EAQC,EARDA,EAAAE,EAAAd,EAS3BQ,UAT2B,OAY7BK,EAAeP,SAZc,IAAAQ,EASH,GATGA,GAalBhM,OAAS2L,EAAW3L,QAC/BqL,EAAaY,cAAcJ,IAEvBK,EAAyB,SAAAC,EAAAC,GAAA,IAAAC,EAAAF,EAC3BG,aAAcC,OADa,IAAAF,EACG,GADHA,EAAAG,EAAAL,EACOZ,YAAaC,OADpB,IAAAgB,EACmC,EADnCA,EAAAC,EAAAL,EAE3BE,aAAcI,OAFa,IAAAD,EAEG,GAFHA,EAAAE,EAAAP,EAEOb,YAFP,gBAAAoB,EAEmC,EAFnCA,GAGXnB,GAAgBe,EAAcN,cAAcS,IAE1DE,EAAa,SAAAC,GAIb,IAHJC,EAGID,EAHJC,cACAC,EAEIF,EAFJE,iBAEIC,EAAAH,EADJI,OACIC,GAAAF,OAAA,IAAAA,EADgC,GAChCA,GADMG,KAAMC,OACZ,IAAAF,EADyB,GACzBA,EACJ,GAAIH,IAAqBK,EAAWpN,OAClC,OAAOwE,EAAA9E,EAAAC,cAACmL,EAAA,EAAD,MAgBT,IAAMuC,EAAoBC,kBACxB,kBACEnM,OAAOmD,OAAOjD,IAAQ+L,EAAYG,IAAS,eACxCC,IAAI,SAAAC,GAAiB,IACZC,EAAcD,EAAc,GAA5BC,UAER,MAAO,CACLA,YACAtC,aAHsB0B,EAAcY,IAAc,IAA5CtC,YAING,YAAaoC,IAAKF,EAAcD,IAAID,IAAS,YAAYvN,OACzD0L,UAAWvK,OAAOmD,OAChBjD,IAAQoM,EAAeF,IAAS,gBAE/BC,IAAI,SAAAI,GAAkB,IAAAC,EACgBD,EAAe,GACpD,MAAO,CACLE,WAHmBD,EACbC,WAGNxB,aAJmBuB,EACDvB,aAIlBf,YAAaoC,IAAKC,EAAeJ,IAAID,IAAS,YAC3CvN,UAGN+N,KAAK7B,MAGX6B,KAAK9C,IACV,CAACmC,EAAYN,IAGf,OACEtI,EAAA9E,EAAAC,cAAA,WACG0N,EAAkBG,IACjB,SAAAQ,EAOEC,GAPF,IAEIP,EAFJM,EAEIN,UACAtC,EAHJ4C,EAGI5C,YACAM,EAJJsC,EAIItC,UACawC,EALjBF,EAKIzC,YALJ,OASE/G,EAAA9E,EAAAC,cAAA,OAAK6B,IAAG,KAAA2M,OAAOT,IACblJ,EAAA9E,EAAAC,cAAA,UACE6E,EAAA9E,EAAAC,cAAA,eAAAwO,OAAUF,EAAe,EAAzB,OACAzJ,EAAA9E,EAAAC,cAAA,YAAOyL,GACN8C,EAAqB,GACpB1J,EAAA9E,EAAAC,cAAA,iBAAAwO,OAAYD,KAGhB1J,EAAA9E,EAAAC,cAAA,WACG+L,EAAU8B,IACT,SAAAY,EAMEC,GANF,IAEIP,EAFJM,EAEIN,WACAxB,EAHJ8B,EAGI9B,aACagC,EAJjBF,EAII7C,YAJJ,OAQE/G,EAAA9E,EAAAC,cAAA,OAAK6B,IAAG,KAAA2M,OAAOL,IACbtJ,EAAA9E,EAAAC,cAAA,eAAAwO,OAAUE,EAAgB,EAA1B,OACA7J,EAAA9E,EAAAC,cAAA,YAAO2M,GACNgC,EAAsB,GACrB9J,EAAA9E,EAAAC,cAAA,iBAAAwO,OAAYG,aAYlC1B,EAAWrG,UAAY,CACrBuG,cAAetG,IAAUE,MAAM6H,WAC/BxB,iBAAkBvG,IAAUgI,KAAK5H,WACjCqG,OAAQzG,IAAUE,MAAM,CACtByG,KAAM3G,IAAUiI,QAAQjI,IAAUE,MAAMgI,eAG5C9B,EAAW7F,aAAe,CACxB+F,cAAe,GACfG,OAAQ,CAAEE,KAAM,KA+CHwB,sBAtCgB,SAC7BC,EAD6BC,GAQ1B,IALD/B,EAKC+B,EALD/B,cAEYtH,EAGXqJ,EAJDvJ,MACEC,OAAUC,UAGXsJ,GAEDC,YAAsBH,EAAO,qBAAuB,IAD9CI,SADLC,SAAA,IAAAH,EACgB,GADhBA,GAG0C,qBAAuB,IAA5D3B,KAAM+B,OAHX,IAAAD,EAG0B,GAH1BA,EAIH,MAAO,CACLE,OAAQ,aACRC,QAAS,CACPC,UAAW,CACTC,OAAQxC,GAAiB3L,OAAOW,KAAKgL,GAAe9M,OACpDuP,UAAW,YACXC,MAAO,CAAEC,WAAY,CAAEC,YAAY,KAErC5J,MAAO,CACLyJ,UAAW,QACXI,QAASnK,EACTgK,MAAO,CAAEhK,YAAWiK,WAAY,CAAEC,YAAY,KAEhDzC,OAAQ,CACNsC,UAAW,SACXI,QAAST,EACTI,QAASJ,IAAiBA,EAAalP,OACvCwP,MAAO,CACLI,OAAQ,CAAEC,QAAS,CAAEjM,WAAY,KAAMrC,MAAO2N,IAC9CO,WAAY,CAAEC,YAAY,QArCZ,SAAAd,GAAK,MAAK,CAChC9B,cAAegD,YAAWlB,EAAO,aACjC7B,iBAAkBgC,YAAsBH,EAAO,qBAC5CmB,aAyCUpB,CACb/B,iiBCjLF,IAOMoD,EAAe,SAAA7K,EAAA+F,GAAA,IAAI+E,EAAJC,EAAA/K,EAAA,aAAA+K,EAAAhF,EAAA,MAAmClL,OAASiQ,EAAOjQ,QAElEmQ,EAAY,SAAAtD,GAGZ,IAFJuD,EAEIvD,EAFJuD,gBAEIC,EAAAxD,EADJyD,MACIC,GAAAF,OAAA,IAAAA,EAD8B,GAC9BA,GADKlD,KAAMqD,OACX,IAAAD,EADuB,GACvBA,EACJ,GAAIH,IAAoBI,EAAUxQ,OAChC,OAAOwE,EAAA9E,EAAAC,cAAC8Q,EAAA,EAAD,MAGT,IAAMC,EAAcvP,OAAOwP,QAAQtP,IAAQmP,EAAW,gBAAgBzC,KACpEiC,GAGF,OACExL,EAAA9E,EAAAC,cAAA,WACG+Q,EAAYlD,IAAI,SAAAoD,GAAA,IAvBFC,EAAMC,EAuBJ9C,EAAAkC,EAAAU,EAAA,GAAEG,EAAF/C,EAAA,GAAesC,EAAftC,EAAA,UACfxJ,EAAA9E,EAAAC,cAAA,OAAK6B,IAAG,KAAA2M,OAAO4C,IACbvM,EAAA9E,EAAAC,cAAA,aAzBWkR,EAyBQlI,IAAcoI,IAzBhBD,EAyB8BR,EAAMtQ,SAxBjC,IAAZ8Q,EAGhB,GAAA3C,OAAU0C,EAAV,MAAA1C,OAAmB2C,GAFVD,SA6BXV,EAAU5J,UAAY,CACpB6J,gBAAiB5J,IAAUgI,KAAK5H,WAChC0J,MAAO9J,IAAUE,MAAM,CACrByG,KAAM3G,IAAUiI,QAAQjI,IAAUE,MAAMsK,eAG5Cb,EAAUpJ,aAAe,CACvBuJ,MAAO,CAAEnD,KAAM,KAuCFwB,sBAhCgB,SAC7BC,EAD6BR,GAO1B,IAHW5I,EAGX4I,EAJD9I,MACEC,OAAUC,UAGXyL,GAEDlC,YAAsBH,EAAO,oBAAsB,IAD7CI,SADLkC,SAAA,IAAAD,EACgB,GADhBA,GAG0C,oBAAsB,IAA3D9D,KAAM+B,OAHX,IAAAgC,EAG0B,GAH1BA,EAIH,MAAO,CACL/B,OAAQ,YACRC,QAAS,CACPtJ,MAAO,CACLyJ,UAAW,QACXI,QAASnK,EACTgK,MAAO,CAAEhK,YAAWiK,WAAY,CAAEC,YAAY,KAEhDY,MAAO,CACLf,UAAW,QACXI,QAAST,EACTI,QAASJ,IAAiBA,EAAalP,OACvCwP,MAAO,CACLI,OAAQ,CAAEC,QAAS,CAAEjM,WAAY,KAAMrC,MAAO2N,IAC9CO,WAAY,CAAEC,YAAY,QA7BZ,SAAAd,GAAK,MAAK,CAChCwB,gBAAiBrB,YAAsBH,EAAO,mBAAmBmB,aAmCpDpB,CACbwB","file":"travel-Countries-738adc56d32b0abfbd2f.js","sourcesContent":["/* eslint-disable import/prefer-default-export */\nimport React from 'react';\nimport PlainLoader from 'modules/components/loaders/PlainLoader';\n\n// todo implement logic, which loader to show for each request, etc.\nexport const withLoader = Component => props => {\n  const { provision: { isPending = true, hasFallback } = {} } = props;\n  if (isPending && !hasFallback) {\n    return <PlainLoader />;\n  }\n  return <Component {...props} />;\n};\n","import { withLoader } from 'modules/components/loaders/ProvisionLoader';\nimport { provide } from 'core/connection';\n\nconst compose = (...funcsArray) => arg =>\n  funcsArray.reduceRight((composed, func) => func(composed), arg);\n\nexport default (...provisionParams) => ExtendableComponent =>\n  compose(\n    provide(...provisionParams),\n    withLoader,\n  )(ExtendableComponent);\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","import React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Route, Redirect, Switch } from 'react-router-dom';\nimport compose from 'lodash/fp/compose';\nimport Path from 'modules/utilities/routing/Path';\nimport { withPaths } from 'core/context/AppContext';\nimport { useAuthContext } from 'core/context/AuthContext';\n\nconst WelcomeScreen = ({\n  children,\n  match: {\n    params: { userAlias: visitedUserAlias },\n  },\n  namedPaths: { travel: { trips: tripsPath } = {} } = {},\n}) => {\n  const { userAlias: authenticatedUserAlias } = useAuthContext();\n  if (visitedUserAlias !== authenticatedUserAlias) {\n    return (\n      <span>Пользователь пока еще не внес информацию о своих поездках</span>\n    );\n  }\n  const Message = useCallback(\n    () => (\n      <div>\n        <span>\n          Нам пока ничего не известно о ваших путешествиях. Но очень интересно\n          узнать. Создайте вашу первую поездку, а мы подготовим по ней отчет\n        </span>\n        {children}\n      </div>\n    ),\n    [children],\n  );\n  return (\n    <Switch>\n      <Route\n        path={tripsPath.toUrl({ userAlias: authenticatedUserAlias })}\n        component={Message}\n      />\n      <Redirect to={tripsPath.toUrl({ userAlias: authenticatedUserAlias })} />\n    </Switch>\n  );\n};\n\nWelcomeScreen.propTypes = {\n  children: PropTypes.node,\n  match: PropTypes.shape({\n    params: PropTypes.shape({ userAlias: PropTypes.string }),\n  }).isRequired,\n  namedPaths: PropTypes.shape({\n    travel: PropTypes.shape({ trips: PropTypes.instanceOf(Path) }),\n  }).isRequired,\n};\n\nWelcomeScreen.defaultProps = {\n  children: null,\n};\n\nexport default compose(\n  withRouter,\n  withPaths,\n)(WelcomeScreen);\n","// todo use localization library\nimport {\n  RIDE_CLASSES,\n  RIDE_OCCUPATION,\n  RIDE_TYPES,\n  VEHICLE_TYPES,\n} from 'travel/models/rides/consts';\n\nexport const RIDE_CLASSES_NAMES = {\n  [RIDE_CLASSES.ECONOMY]: 'Эконом',\n  [RIDE_CLASSES.COMFORT]: 'Комфорт',\n  [RIDE_CLASSES.BUSINESS]: 'Бизнес',\n  [RIDE_CLASSES.FIRST]: 'Первый',\n  [RIDE_CLASSES.PRIVATE]: 'Частный',\n};\n\nexport const RIDE_OCCUPATION_NAMES = {\n  [RIDE_OCCUPATION.PASSENGER]: 'Пассажир',\n  [RIDE_OCCUPATION.STUFF]: 'Персонал', // todo кроме персонального транспорта\n  [RIDE_OCCUPATION.DRIVER]: 'Водитель', // todo только для персонального транспорта\n};\n\nexport const RIDE_TYPES_NAMES = {\n  [RIDE_TYPES.SELF_DRIVE]: 'Самостоятельная поездка',\n  [RIDE_TYPES.SCHEDULED]: 'Регулярный рейс',\n  [RIDE_TYPES.CHARTER]: 'Чартерный рейс', // todo only for aircrafts\n  [RIDE_TYPES.TOUR]: 'Тур', // todo except aircrafts\n  [RIDE_TYPES.CARPOOL]: 'Попутный автомобиль',\n  [RIDE_TYPES.HITCH_HIKING]: 'Автостоп',\n  [RIDE_TYPES.DROP_OFF]: 'Подбросили до места',\n};\n\nexport const VEHICLE_NAMES = {\n  [VEHICLE_TYPES.CAR]: 'Автомобиль',\n  [VEHICLE_TYPES.TRAIN]: 'Поезд',\n  [VEHICLE_TYPES.AIRCRAFT]: 'Самолет',\n  [VEHICLE_TYPES.BUS]: 'Автобус',\n  [VEHICLE_TYPES.MOTORHOME]: 'Дом на колесах',\n  [VEHICLE_TYPES.LOCAL_TRAIN]: 'Электричка',\n  [VEHICLE_TYPES.FERRY]: 'Паром',\n  [VEHICLE_TYPES.BIKE]: 'Велосипед',\n  [VEHICLE_TYPES.BY_FEET]: 'Пешком',\n  [VEHICLE_TYPES.ROPEWAY]: 'Канатная дорога',\n  [VEHICLE_TYPES.FUNICULAR]: 'Фуникулер',\n  [VEHICLE_TYPES.MOTORBIKE]: 'Мотоцикл',\n  [VEHICLE_TYPES.TRUCK]: 'Грузовик',\n  [VEHICLE_TYPES.ALL_TERRAIN_VEHICLE]: 'Вездеход',\n  [VEHICLE_TYPES.TRAM]: 'Трамвай',\n  [VEHICLE_TYPES.TROLLEY]: 'Троллейбус',\n  [VEHICLE_TYPES.TAXI]: 'Такси',\n  [VEHICLE_TYPES.CITY_BUS]: 'Муниципальный автобус',\n  [VEHICLE_TYPES.JITNEY]: 'Маршрутное такси',\n  [VEHICLE_TYPES.SUBWAY]: 'Метро',\n  [VEHICLE_TYPES.PUBLIC_TRANSPORT]: 'Общественный транспорт',\n};\n","import React, { useMemo } from 'react';\nimport groupBy from 'lodash/groupBy';\nimport uniq from 'lodash/uniq';\nimport property from 'lodash/property';\nimport PropTypes from 'prop-types';\nimport withProvision from 'core/connection/withProvision';\nimport { selectDict, selectProvisionStatus } from 'core/connection';\nimport WelcomeScreen from 'travel/components/common/WelcomeScreen';\nimport countriesPropTypes from 'travel/models/countries/propTypes';\nimport visitPropTypes from 'travel/models/visits/propTypes';\n\nconst byCountriesVisitsCount = (\n  {\n    countryName: countryNameA = '',\n    visitsCount: visitsCountA = 0,\n    locations: locationsA = [],\n  },\n  {\n    countryName: countryNameB = '',\n    visitsCount: visitsCountB = 0,\n    locations: locationsB = [],\n  },\n) =>\n  visitsCountB - visitsCountA ||\n  locationsB.length - locationsA.length ||\n  countryNameA.localeCompare(countryNameB);\n\nconst byLocationsVisitsCount = (\n  { locationName: locationNameA = '', visitsCount: visitsCountA = 0 },\n  { locationName: locationNameB = '', visitsCount: visitsCountB = 0 },\n) => visitsCountB - visitsCountA || locationNameA.localeCompare(locationNameB);\n\nconst VisitsPage = ({\n  countriesDict,\n  isVisitsComplete,\n  visits: { data: visitsList = [] } = {},\n}) => {\n  if (isVisitsComplete && !visitsList.length) {\n    return <WelcomeScreen />;\n  }\n\n  /**\n  visitsWithCounter structure example:\n   \n  [{\n    countryId: 1,    \n    countryName: 'Russia',\n    visitsCount: 30,\n    locations: [\n      { locationId: 1, locationName: 'Moscow', visitsCount: 25 },\n      { locationId: 2, locationName: 'Saint-Petersburg', visitsCount: 7 },\n    ],\n  }];\n  */\n  const visitsWithCounter = useMemo(\n    () =>\n      Object.values(groupBy(visitsList, property('countryId')))\n        .map(countryVisits => {\n          const { countryId } = countryVisits[0];\n          const { countryName } = countriesDict[countryId] || {};\n          return {\n            countryId,\n            countryName,\n            visitsCount: uniq(countryVisits.map(property('tripId'))).length,\n            locations: Object.values(\n              groupBy(countryVisits, property('locationId')),\n            )\n              .map(locationVisits => {\n                const { locationId, locationName } = locationVisits[0];\n                return {\n                  locationId,\n                  locationName,\n                  visitsCount: uniq(locationVisits.map(property('tripId')))\n                    .length,\n                };\n              })\n              .sort(byLocationsVisitsCount),\n          };\n        })\n        .sort(byCountriesVisitsCount),\n    [visitsList, countriesDict],\n  );\n\n  return (\n    <div>\n      {visitsWithCounter.map(\n        (\n          {\n            countryId,\n            countryName,\n            locations,\n            visitsCount: countryVisitsCount,\n          },\n          countryIndex,\n        ) => (\n          <div key={`id${countryId}`}>\n            <h2>\n              <span>{`${countryIndex + 1}. `}</span>\n              <span>{countryName}</span>\n              {countryVisitsCount > 1 && (\n                <span>{` x${countryVisitsCount}`}</span>\n              )}\n            </h2>\n            <div>\n              {locations.map(\n                (\n                  {\n                    locationId,\n                    locationName,\n                    visitsCount: locationVisitsCount,\n                  },\n                  locationIndex,\n                ) => (\n                  <div key={`id${locationId}`}>\n                    <span>{`${locationIndex + 1}. `}</span>\n                    <span>{locationName}</span>\n                    {locationVisitsCount > 1 && (\n                      <span>{` x${locationVisitsCount}`}</span>\n                    )}\n                  </div>\n                ),\n              )}\n            </div>\n          </div>\n        ),\n      )}\n    </div>\n  );\n};\nVisitsPage.propTypes = {\n  countriesDict: PropTypes.shape(countriesPropTypes),\n  isVisitsComplete: PropTypes.bool.isRequired,\n  visits: PropTypes.shape({\n    data: PropTypes.arrayOf(PropTypes.shape(visitPropTypes)),\n  }),\n};\nVisitsPage.defaultProps = {\n  countriesDict: {},\n  visits: { data: [] },\n};\n\nconst mapStateToProps = state => ({\n  countriesDict: selectDict(state, 'countries'),\n  isVisitsComplete: selectProvisionStatus(state, 'visitsPage.visits')\n    .isComplete,\n});\n\nconst mapStateToRequirements = (\n  state,\n  {\n    countriesDict,\n    match: {\n      params: { userAlias },\n    },\n  },\n) => {\n  const { fallback = {} } =\n    selectProvisionStatus(state, 'visitsPage.trips') || {};\n  const { data: userTripsIds = [] } = fallback['visitsPage.trips'] || {};\n  return {\n    domain: 'visitsPage',\n    request: {\n      countries: {\n        isNoop: countriesDict && Object.keys(countriesDict).length,\n        modelName: 'countries',\n        query: { navigation: { isDisabled: true } },\n      },\n      trips: {\n        modelName: 'trips',\n        observe: userAlias,\n        query: { userAlias, navigation: { isDisabled: true } },\n      },\n      visits: {\n        modelName: 'visits',\n        observe: userTripsIds,\n        isNoop: !userTripsIds || !userTripsIds.length,\n        query: {\n          filter: { trip_id: { comparator: 'in', value: userTripsIds } },\n          navigation: { isDisabled: true },\n        },\n      },\n    },\n  };\n};\n\nexport default withProvision(mapStateToRequirements, mapStateToProps)(\n  VisitsPage,\n);\n","import React from 'react';\nimport groupBy from 'lodash/groupBy';\nimport PropTypes from 'prop-types';\nimport withProvision from 'core/connection/withProvision';\nimport { selectProvisionStatus } from 'core/connection';\nimport WelcomeScreen from 'travel/components/common/WelcomeScreen';\nimport ridesPropTypes from 'travel/models/rides/propTypes';\nimport { VEHICLE_NAMES } from 'travel/components/models/rides/RideEditDialog/localization';\n\nconst withCounter = (text, counter) => {\n  if (!counter || counter === 1) {\n    return text;\n  }\n  return `${text} x${counter}`;\n};\n\nconst byRidesCount = ([, ridesA], [, ridesB]) => ridesB.length - ridesA.length;\n\nconst RidesPage = ({\n  isRidesComplete,\n  rides: { data: ridesList = [] } = {},\n}) => {\n  if (isRidesComplete && !ridesList.length) {\n    return <WelcomeScreen />;\n  }\n\n  const ridesByType = Object.entries(groupBy(ridesList, 'vehicleType')).sort(\n    byRidesCount,\n  );\n\n  return (\n    <div>\n      {ridesByType.map(([vehicleType, rides]) => (\n        <div key={`id${vehicleType}`}>\n          <span>{withCounter(VEHICLE_NAMES[vehicleType], rides.length)}</span>\n        </div>\n      ))}\n    </div>\n  );\n};\nRidesPage.propTypes = {\n  isRidesComplete: PropTypes.bool.isRequired,\n  rides: PropTypes.shape({\n    data: PropTypes.arrayOf(PropTypes.shape(ridesPropTypes)),\n  }),\n};\nRidesPage.defaultProps = {\n  rides: { data: [] },\n};\n\nconst mapStateToProps = state => ({\n  isRidesComplete: selectProvisionStatus(state, 'ridesPage.rides').isComplete,\n});\n\nconst mapStateToRequirements = (\n  state,\n  {\n    match: {\n      params: { userAlias },\n    },\n  },\n) => {\n  const { fallback = {} } =\n    selectProvisionStatus(state, 'ridesPage.trips') || {};\n  const { data: userTripsIds = [] } = fallback['ridesPage.trips'] || {};\n  return {\n    domain: 'ridesPage',\n    request: {\n      trips: {\n        modelName: 'trips',\n        observe: userAlias,\n        query: { userAlias, navigation: { isDisabled: true } },\n      },\n      rides: {\n        modelName: 'rides',\n        observe: userTripsIds,\n        isNoop: !userTripsIds || !userTripsIds.length,\n        query: {\n          filter: { trip_id: { comparator: 'in', value: userTripsIds } },\n          navigation: { isDisabled: true },\n        },\n      },\n    },\n  };\n};\n\nexport default withProvision(mapStateToRequirements, mapStateToProps)(\n  RidesPage,\n);\n"],"sourceRoot":""}