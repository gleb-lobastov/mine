(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1298:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return _}));var n=r(0),i=r.n(n),a=r(815),o=r(178),c=r(865),s=r(943),l=(r(64),r(26),r(12),r(27),r(22),r(28),r(3)),u=r.n(l),f=r(933),p=r(68);var v=r(337),b=r(294);function d(e){var t=e.countriesIds,r=e.locationsDict,n=e.locationsIds,a=Object(p.d)().travel.visits,o=m(t.length,{one:"стране",many:"странах"}),c=m(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.filter((function(e){var r;return(null===(r=t[e])||void 0===r?void 0:r.locationClass)===v.LOCATION_CLASSES_ID.CITY})).length}(n,r),{one:"городе",many:"городах"});return i.a.createElement(f.a,null,"\nСтатистика по моим путешествиям.\n\nЗдесь будет красивая инфографика, рассказы и фотки про 250 стран и\nтерриторий. Пока я побывал только в\n[".concat(o,"](").concat(a.toUrl(),") и \n[").concat(c,"](").concat(a.toUrl(),"),\nа раз так, то и на инфографику пока забил.\n  "))}function m(e,t){return null==e?"... ".concat(t.many):"".concat(e," ").concat((r=e,i=(n=t).many,a=n.few,o=void 0===a?i:a,c=n.one,s=Math.abs(r),(s%=100)>=5&&s<=20?i:1==(s%=10)?c:s>=2&&s<=4?o:i));var r,n,i,a,o,c,s}d.propTypes={countriesIds:u.a.arrayOf(u.a.number).isRequired,locationsDict:u.a.objectOf(u.a.shape(b.default)).isRequired,locationsIds:u.a.arrayOf(u.a.number).isRequired};var O=r(824);function y(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(O.a,{component:"a",target:"_blank",rel:"nofollow noreferrer noopener",href:"https://lobastov.livejournal.com/tag/%D0%9F%D1%83%D1%82%D0%B5%D1%88%D0%B5%D1%81%D1%82%D0%B2%D0%B8%D0%B5"},"Про путешествия в ЖЖ")),i.a.createElement("a",{href:"https://my.flightradar24.com/lobastov",target:"_blank",rel:"nofollow noreferrer noopener"},i.a.createElement("img",{src:"https://banners-my.flightradar24.com/lobastov.png",alt:"My Flightdiary.net profile"})))}var g=Object(a.a)({content:{display:"flex",flexDirection:"column",height:" 100%"},mapContainer:{flexGrow:1}});function _(){var e=g(),t=Object(o.b)(),r=t.queryFilter,n=t.setQueryFilter,a=Object(s.c)(n,r),l=a.scaleBy,u=a.ratingLevel,f=Object(c.b)({userAlias:"my"}),p=f.countriesIds,v=f.isReady,b=f.locationsDict,m=f.locationsIds,O=f.locationsRating,_=f.visitsDict;return v?i.a.createElement("div",{className:e.content},i.a.createElement(d,{countriesIds:p,isReady:v,locationsDict:b,locationsIds:m}),i.a.createElement(s.b,{className:e.mapContainer,locationsDict:b,visitsDict:_,locationsRating:O,locationsIds:m,minHeight:300,scaleBy:l,ratingLevel:l===s.a.BY_RATING?u:void 0}),i.a.createElement(y,null)):"...Loading"}},837:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));r(23),r(35),r(14),r(50),r(37),r(44),r(45),r(46),r(51),r(49),r(89),r(26),r(12),r(27),r(22),r(28),r(353),r(64),r(79),r(71),r(72),r(73),r(41),r(20),r(17),r(356),r(357),r(358),r(360),r(359),r(361),r(362),r(363),r(364),r(365),r(366),r(367),r(368),r(369),r(370),r(371),r(372),r(18),r(872),r(873),r(874),r(875);var n=r(0),i=r(116),a=r(863),o=r.n(a),c=r(855),s=r.n(c),l=r(136),u=r(48),f=(r(378),r(379),r(380),r(375),r(376),r(377),r(868),r(869),r(870),r(934)),p=r.n(f);var v=r(876),b=r(845),d=r(864),m=["user"];function O(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e){var t=e.userAlias,r=e.tripsIds,n=function(e){var t=e.userAlias,r=e.tripsIds,n=Object(i.c)((function(e){return{tripsDict:Object(l.c)(e,"trips")||{}}})).tripsDict,a=!r,o=!a&&r.filter((function(e){return!n[e]})),c=o?o.join(","):"*",s=a?{}:{id:{comparator:"in",value:o}};return Object(l.g)({domain:"travel.trips-".concat(t,"-").concat(c),isProvision:!0,modelName:"trips",observe:t,condition:a||o.length>0,query:{userAlias:t,navigation:{isDisabled:!0},filter:g({user_alias:{comparator:"=",value:t}},s)}})}({userAlias:t,tripsIds:r}),a=Object(v.a)({domain:"travel.trips-".concat(t,".user"),userAlias:t}),o=a.user,c=(o=void 0===o?{}:o).locationsRating,s=void 0===c?{}:c,f=O(a,m),y=(r?{data:r}:Object(u.o)(n)||{}).data,_=void 0===y?[]:y,I=Object(i.c)((function(e){return{tripsDict:Object(l.c)(e,"trips")||{},visitsDict:Object(l.c)(e,"visits")||{},ridesDict:Object(l.c)(e,"rides")||{},countriesDict:Object(l.c)(e,"countries")||{},locationsDict:Object(l.c)(e,"locations")||{}}})),h=I.tripsDict,E=I.visitsDict,A=I.ridesDict,R=I.countriesDict,D=I.locationsDict,N=T(_,h,"visits"),C=T(_,h,"rides"),P=T(N,E,"countryId"),S=T(N,E,"locationId"),w=Object(b.a)(),L=Object(d.a)({domain:"travel.locations-".concat(t),locationsIds:S}),B=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{updatesCounter:p()(t.map(u.p)),isReady:t.every(u.i),isPending:t.some(u.h),isValid:t.every(u.k),error:t.find(u.g),errors:t.map(u.f).filter(Boolean),invalidate:function(){return t.forEach((function(e){return(0,e.invalidate)()}))}}}(n,f,w,L);return{userProvision:f,tripsProvision:n,countriesProvision:w,locationsProvision:L,isError:B.isError,isValid:B.isValid,isReady:B.isReady,isPending:B.isPending,tripsIds:_,tripsDict:h,visitsIds:N,visitsDict:E,ridesIds:C,ridesDict:A,ridesStats:j(C,A),locationsIds:S,locationsDict:D,locationsRating:s,countriesIds:P,countriesDict:R}}function j(e,t){return{earliestDeparture:new Date(s()(e.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.departureDateTime.getTime()})))),latestArrival:new Date(o()(e.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.arrivalDateTime.getTime()}))))}}function T(e,t,r){return Object(n.useMemo)((function(){return Array.from(new Set(e.flatMap((function(e){var n;return(null===(n=t[e])||void 0===n?void 0:n[r])||[]}))))}),[e,t,r])}},845:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(136);function i(){return Object(n.g)({domain:"travel.countries",isProvision:!0,modelName:"countries",query:{navigation:{isDisabled:!0}}})}},852:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r(64);var n=r(87),i=r(853);function a(e){if(!Object(i.a)(e))return"?";for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return n.a.apply(void 0,[e].concat(r))}},853:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r(79),r(882),r(284);function n(e){return e instanceof Date&&!Number.isNaN(e.getTime())}},864:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return f}));r(26),r(12),r(27),r(22),r(28),r(43),r(14),r(29),r(30),r(17),r(20),r(18),r(40),r(42),r(41),r(24),r(36),r(23),r(35),r(50),r(37),r(44),r(45),r(46),r(51),r(49);var n=r(116),i=r(136);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,a=[],o=!0,c=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(c)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e){var t=e.domain,r=e.locationsIds,a=Object(n.c)((function(e){return Object(i.c)(e,"locations")||{}})),o=r.filter((function(e){return!a[e]}));return Object(i.g)({domain:t,isProvision:!0,modelName:"locations",observe:r,condition:Boolean(o.length),query:{filter:{id:{comparator:"in",value:o}},navigation:{isDisabled:!0}}})}function f(e){var t=e.domain,r=s(Object(i.h)({domain:t,modelName:"locations",method:"POST"}),2),n=r[0];return o(o({},r[1]),{},{submitLocationRating:n})}},865:function(e,t,r){"use strict";r.d(t,"b",(function(){return n.a})),r.d(t,"c",(function(){return f})),r.d(t,"a",(function(){return p}));var n=r(837),i=(r(845),r(64),r(23),r(35),r(14),r(26),r(12),r(27),r(22),r(28),r(50),r(37),r(44),r(45),r(46),r(51),r(49),r(43),r(29),r(30),r(17),r(20),r(18),r(40),r(42),r(41),r(24),r(36),r(116)),a=r(136);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,a=[],o=!0,c=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(c)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=e.userAlias,r=e.visitId,n=Object(i.c)((function(e){return{visitsDict:Object(a.c)(e,"visits")||{}}})).visitsDict[r];return l({visit:n},Object(a.g)({domain:"travel.visit".concat(r,"-").concat(t),isProvision:!0,modelName:"visits",observe:r,condition:!n,query:{userAlias:t,filter:{visit_id:{comparator:"=",value:r}},navigation:{isDisabled:!0}}}))}function p(e){var t=e.domain,r=o(Object(a.h)({domain:t,modelName:"visits",method:"POST",contentType:"multipart/form-data"}),2),n=r[0];return l(l({},r[1]),{},{submitVisitPhoto:n})}},876:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r(23),r(35),r(14),r(26),r(12),r(27),r(22),r(28),r(50),r(37),r(44),r(45),r(46),r(51),r(49);var n=r(116),i=r(136);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=e.domain,r=e.userAlias,a=Object(n.c)((function(e){return Object(i.e)(e,"users",r)}));return o(o({},Object(i.g)({domain:t,applicableSchemaName:"item",isProvision:!0,modelName:"users",observe:r,condition:Boolean(r),query:{id:r}})),{},{user:a})}},933:function(e,t,r){"use strict";r(538),r(105);var n=r(0),i=r.n(n),a=r(122),o=r(891);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var s={a:function(e){var t=e.href,r=e.children;return t.startsWith&&t.startsWith("/")?i.a.createElement(a.b,{to:t},r):i.a.createElement("a",{href:t},r)}};t.a=function(e){var t=e.children,r=e.forwardedProps;return(i.a.createElement(o.a,c({},r,{components:s}),t))}},943:function(e,t,r){"use strict";r.d(t,"a",(function(){return I})),r.d(t,"c",(function(){return K})),r.d(t,"b",(function(){return X}));r(71),r(72),r(73),r(354),r(355),r(220),r(23),r(35),r(14),r(26),r(12),r(27),r(22),r(28),r(50),r(37),r(44),r(45),r(46),r(51),r(49);var n,i=r(0),a=r.n(i),o=r(3),c=r.n(o),s=r(115),l=r.n(s),u=r(996),f=r.n(u),p=r(815),v=r(294),b=r(295),d=(r(153),r(154),r(155),r(855)),m=r.n(d),O=r(863),y=r.n(O);function g(e){var t=e.locationsIds,r=e.locationsDict,n=e.visitsDict,i=e.locationsRating;return t.map((function(e){var t,a=r[e];if(!a)return null;var o=a.lon,c=a.lat,s=a.locationName,l=a.visitsIds,u=function(e,t){return e.reduce((function(e,r){var n=t[r];if(n){var i=n.arrivalDateTime,a=n.departureDateTime;e.firstVisitDateTime=m()([e.firstVisitDateTime,i]),e.lastVisitDateTime=y()([e.lastVisitDateTime,a])}return e}),{firstVisitDateTime:null,lastVisitDateTime:null})}(null!=l?l:[],n);return{locationName:s,lat:c,lon:o,firstVisitDateTime:u.firstVisitDateTime,lastVisitDateTime:u.lastVisitDateTime,locationRating:i[e],visitsCount:null===(t=a.visitsIds)||void 0===t?void 0:t.length}}))}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I={BY_FIRST_VISIT:"fv",BY_LAST_VISIT:"lv",BY_VISITS_COUNT:"vc",BY_RATING:"r"},j=I.BY_LAST_VISIT,T=["step_by_time_1_zjtrlw.png","step_by_time_2_tvotvg.png","step_by_time_3_ylj1vi.png","step_by_time_4_uovfrs.png","step_by_time_5_s4jq0u.png","step_by_time_6_lmihnf.png"],h=(_(n={},I.BY_FIRST_VISIT,T),_(n,I.BY_LAST_VISIT,T),_(n,I.BY_VISITS_COUNT,["step_by_visits_1_zv3tba.png","step_by_visits_2_qthjqa.png","step_by_visits_3_xcjyla.png","step_by_visits_4_kwdwka.png","step_by_visits_5_xnnipa.png"]),_(n,I.BY_RATING,["step_by_rating_1_id2qgb.png","step_by_rating_2_iiqvik.png","step_by_rating_3_x2gzsd.png","step_by_rating_4_cbqdcn.png","step_by_rating_5_viyhls.png","step_by_rating_6_zzfgki.png","step_by_rating_7_pjjhhq.png","step_by_rating_8_vgetsd.png","step_by_rating_9_t6tenz.png","step_by_rating_10_yjywr0.png"]),n),E={ALL:"all",WANT_COME_BACK:"good",LOVE_THIS_PLACE:"best"},A=E.ALL,R=r(285);function D(e){var t=e.visitsCount;switch(!0){case t>10:return 5;case t>5:return 4;case t>2:return 3;case t>1:return 2;default:return 1}}function N(e){switch(e.locationRating){case R.LOCATION_RATING.PLACE_TO_LIVE:return 1;case R.LOCATION_RATING.FEW_PER_YEAR:case R.LOCATION_RATING.ONCE_PER_YEAR:return 3;case R.LOCATION_RATING.ONCE_PER_TWO_YEARS:case R.LOCATION_RATING.ONCE_PER_FIVE_YEARS:return 4;case R.LOCATION_RATING.ONCE_PER_DECADE:case R.LOCATION_RATING.TWICE_PER_LIVE:return 7;case R.LOCATION_RATING.ONCE_PER_LIVE:return 9;case R.LOCATION_RATING.NEVER:return 10;default:return 6}}function C(e){return{resolveStep:function(t,r){var n=(t[e]-r.minTime)/r.diff*6;return Math.min(Math.max(Math.floor(n),0),6)},resolveOptions:function(t){var r=t.map((function(t){return t[e]&&t[e].getTime()})).filter(Boolean),n=m()(r);return{minTime:n,diff:y()(r)+1-n}}}}r(353);var P=r(847),S=r(852);function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"eeeeee, d MMMM yyyy";return Object(S.a)(e,t,{locale:P.a})}function L(e){switch(e){case R.LOCATION_RATING.PLACE_TO_LIVE:return"Жил бы здесь";case R.LOCATION_RATING.FEW_PER_YEAR:case R.LOCATION_RATING.ONCE_PER_YEAR:return"Готов ездить сюда постоянно";case R.LOCATION_RATING.ONCE_PER_TWO_YEARS:case R.LOCATION_RATING.ONCE_PER_FIVE_YEARS:return"Приезжал бы иногда";case R.LOCATION_RATING.ONCE_PER_DECADE:case R.LOCATION_RATING.TWICE_PER_LIVE:return"Заглянул бы еще разок";case R.LOCATION_RATING.ONCE_PER_LIVE:return"Одного посещения достаточно";case R.LOCATION_RATING.NEVER:return"Тут нечего делать";default:return"?"}}r(64);function B(e,t){if(!t)return"".concat("https://res.cloudinary.com/dc2eke0gj/image/upload/markers/").concat(T[0]);var r=h[t],n=r[e-1]||r[0];return"".concat("https://res.cloudinary.com/dc2eke0gj/image/upload/markers/").concat(n)}r(43),r(29),r(30),r(17),r(20),r(18),r(40),r(42),r(41),r(24),r(36);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,a=[],o=!0,c=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(c)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y=r(231),q=r(819),k=r(820),M=r(822),x=r(833),W=r(1296),F=r(1279);function z(e){var t=e.classes,r=e.scaleBy,n=e.onClose,i=e.onChange;return(a.a.createElement(q.a,null,a.a.createElement(k.a,null,a.a.createElement(M.a,{className:t.formControl},a.a.createElement(x.a,{shrink:!0,id:"select-scaleBy-filter-label"},"Раскрасить маркеры"),a.a.createElement(W.a,{labelId:"select-scaleBy-filter-label",autoWidth:!0,id:"select-scaleBy-filter",value:r,onChange:function(e){n();var t,r,a,o=e.target.value,c=(a=o,(r="scale")in(t={})?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t);o!==I.BY_RATING&&(c.rating=void 0),i(c)}},a.a.createElement(F.a,{key:I.BY_FIRST_VISIT,value:I.BY_FIRST_VISIT},"По первому посещению"),a.a.createElement(F.a,{key:I.BY_LAST_VISIT,value:I.BY_LAST_VISIT},"По последнему посещению"),a.a.createElement(F.a,{key:I.BY_VISITS_COUNT,value:I.BY_VISITS_COUNT},"По числу посещений"),a.a.createElement(F.a,{key:I.BY_RATING,value:I.BY_RATING},"По рейтингу"))))))}function U(e){var t=e.classes,r=e.ratingLevel,n=e.onClose,i=e.onChange;return(a.a.createElement(q.a,null,a.a.createElement(k.a,null,a.a.createElement(M.a,{className:t.formControl},a.a.createElement(x.a,{shrink:!0,id:"select-ratingLevel-filter-label"},"Фильтр по рейтингу"),a.a.createElement(W.a,{labelId:"select-ratingLevel-filter-label",autoWidth:!0,id:"select-ratingLevel-filter",value:r,onChange:function(e){var t,r,a;n(),i((t={},r="rating",a=e.target.value,r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t))}},a.a.createElement(F.a,{key:E.ALL,value:E.ALL},"Все"),a.a.createElement(F.a,{key:E.WANT_COME_BACK,value:E.WANT_COME_BACK},"Куда бы вернулся"),a.a.createElement(F.a,{key:E.LOVE_THIS_PLACE,value:E.LOVE_THIS_PLACE},"Лучшие места"))))))}z.propTypes={classes:c.a.shape({formControl:c.a.string.isRequired}).isRequired,scaleBy:c.a.oneOf(Object.values(I)).isRequired,onClose:c.a.func.isRequired,onChange:c.a.func.isRequired},U.propTypes={classes:c.a.shape({formControl:c.a.string.isRequired}).isRequired,ratingLevel:c.a.oneOf(Object.values(E)).isRequired,onClose:c.a.func.isRequired,onChange:c.a.func.isRequired};var H=Object(p.a)({formControl:{width:"100%"}}),K=function(e,t){var r=H(),n=t||{},i=n.scale,o=n.rating,c=function(e){return Object.values(I).includes(e)?e:j}(i),s=function(e){return Object.values(E).includes(e)?e:A}(o);return Object(Y.b)((function(t){var n=t.closeSidebar;return(a.a.createElement(a.a.Fragment,null,a.a.createElement(z,{classes:r,onClose:n,scaleBy:c,onChange:e}),c===I.BY_RATING&&a.a.createElement(U,{classes:r,onClose:n,ratingLevel:s,onChange:e})))}),[c,s]),{scaleBy:c,ratingLevel:s}};function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q=Object(p.a)({googleMapContainer:{margin:"12px 0",maxWidth:"100%",flexGrow:1,minHeight:function(e){return e.minHeight},position:"relative"},googleMapPosition:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0"}});function X(e){var t=e.className,r=e.locationsDict,n=e.visitsDict,o=e.locationsRating,c=e.locationsIds,s=e.minHeight,u=e.scaleBy,p=e.ratingLevel,v=Q({minHeight:s}),b=function(e){var t=V(Object(i.useState)(null),2),r=t[0],n=t[1],a=Object(i.useRef)(!0);return Object(i.useEffect)((function(){if(r){var t=r.map,n=r.maps,i=new n.LatLngBounds,o=e.map((function(e){var r=e.lat,a=e.lon,o=e.iconUrl,c=e.title,s=e.zIndex,l=new n.Marker({map:t,position:{lat:r,lng:a},icon:{url:o,scaledSize:new n.Size(24,24)},scale:.5,title:c,zIndex:s});return i.extend(l.position),l}));return a.current&&(t.setOptions({maxZoom:11,minZoom:2}),t.fitBounds(i),t.setOptions({maxZoom:null,minZoom:null}),a.current=!1),function(){o.forEach((function(e){e.setMap(null),e.setVisible(!1)})),o.length=0}}}),[r,e]),{handleGoogleApiLoaded:function(e){return n(e)}}}(Object(i.useMemo)((function(){var e=function(e,t){var r=t.ratingLevel,n=e.filter(Boolean);return Object.values(E).includes(r)&&r!==E.ALL?n.filter((function(e){var t=e.locationRating,n=e.visitsCount;switch(r){case E.WANT_COME_BACK:return n<2?t<=R.LOCATION_RATING.TWICE_PER_LIVE:t<=R.LOCATION_RATING.ONCE_PER_DECADE;case E.LOVE_THIS_PLACE:return t<=R.LOCATION_RATING.ONCE_PER_YEAR;default:return!0}})):n}(g({locationsDict:r,visitsDict:n,locationsRating:o,locationsIds:c}),{ratingLevel:p}),t=function(e){switch(e){case I.BY_VISITS_COUNT:return{resolveStep:D};case I.BY_RATING:return{resolveStep:N};case I.BY_LAST_VISIT:return C("lastVisitDateTime");case I.BY_FIRST_VISIT:return C("firstVisitDateTime");default:return{resolveStep:function(){return 1}}}}(u),i=t.resolveStep,a=t.resolveOptions,s=a&&a(e);return e.map((function(e){var t,r,n,a,o,c,l=i(e,s);return $($({},e),{},{zIndex:[I.BY_RATING,I.BY_FIRST_VISIT].includes(u)?10-l:l,iconUrl:B(l,u),title:(t=e,r=t.locationName,n=t.locationRating,a=t.visitsCount,o=t.firstVisitDateTime,c=t.lastVisitDateTime,[r,"Посещено ".concat(a," раз"),"Впервые ".concat(w(o)),a>1&&"Прошлое посешение ".concat(w(c)),"Рейтинг: ".concat(L(n))].filter(Boolean).join("\n"))})}))}),[r,n,o,c,u,p])).handleGoogleApiLoaded;return a.a.createElement("div",{className:l()(t,v.googleMapContainer)},a.a.createElement("div",{className:v.googleMapPosition},a.a.createElement(f.a,{bootstrapURLKeys:{key:"AIzaSyCvP0e64ui7WpXKBdzOyEmkb4l5RuGy3Zs"},center:{lat:0,lng:0},zoom:11,onGoogleApiLoaded:b})))}X.propTypes={className:c.a.string,visitsDict:c.a.objectOf(c.a.shape(b.default)).isRequired,locationsDict:c.a.objectOf(c.a.shape(v.default)).isRequired,locationsIds:c.a.arrayOf(c.a.number).isRequired,locationsRating:c.a.objectOf(c.a.number).isRequired,minHeight:c.a.number,scaleBy:c.a.oneOf(Object.values(I)).isRequired,ratingLevel:c.a.oneOf(Object.values(E)).isRequired},X.defaultProps={className:void 0,minHeight:"400px"}}}]);
//# sourceMappingURL=travel-Dashboard-3f3a75f24fd32399f677.js.map