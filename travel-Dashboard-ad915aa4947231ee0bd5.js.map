{"version":3,"file":"travel-Dashboard-ad915aa4947231ee0bd5.js","mappings":"mXAIA,IAAMA,EAAa,CACjBC,EAAG,gBAAGC,EAAH,EAAGA,KAAMC,EAAT,EAASA,SAAT,OACDD,EAAKE,YAAcF,EAAKE,WAAW,KACjC,gBAAC,KAAD,CAAMC,GAAIH,GAAOC,GAEjB,qBAAGD,KAAMA,GAAOC,KAItB,iBAAe,OAAGA,EAAH,EAAGA,SAAUG,EAAb,EAAaA,eAAb,OACb,gBAAC,IAAD,KAAmBA,EAAnB,CAAmCN,WAAYA,IAC5CG,K,iMCTU,SAASI,EAAT,GAIZ,IAHDC,EAGC,EAHDA,aACAC,EAEC,EAFDA,cACAC,EACC,EADDA,aAGoBC,GAChBC,EAAAA,EAAAA,MADFC,OAAUC,OAGNC,EAAmBC,EAAcR,EAAaS,OAAQ,CAC1DC,IAAK,SACLC,KAAM,YAEFC,EAAmBJ,EAuB3B,SAAyBN,GAAkC,IAApBD,EAAoB,uDAAJ,GACrD,OAAOC,EAAaW,QAClB,SAAAC,GAAW,aACT,UAAAb,EAAca,UAAd,eAA4BC,iBAAkBC,EAAAA,oBAAAA,QAChDP,OA1BAQ,CAAgBf,EAAcD,GAC9B,CACES,IAAK,SACLC,KAAM,YAIV,OACE,gBAACO,EAAA,EAAD,+JAMDX,EANC,aAMoBJ,EAAYgB,QANhC,kBAODP,EAPC,aAOoBT,EAAYgB,QAPhC,uDAqBJ,SAASX,EAAcY,EAASC,GAC9B,OAAe,MAAXD,EACF,cAAcC,EAAcV,MAE9B,UAAUS,EAAV,aCpDqBE,EDoDOF,ECpDGT,GAA1B,EDoDgCU,GCpDNV,KAAMY,OAAmB,SAAnBA,KAAMZ,EAAa,EAAPD,EAAO,EAAPA,IAC7Cc,EAAQC,KAAKC,IAAIJ,IACrBE,GAAS,MACI,GAAKA,GAAS,GAClBb,EAGK,IADda,GAAS,IAEAd,EAELc,GAAS,GAAKA,GAAS,EAClBD,EAEFZ,IAbF,IAAgBW,EAAhB,EAA0BX,EAAyB,EAAnBY,EAAYb,EAC7Cc,E,aCCS,SAASG,IACtB,OACE,gCACE,2BACE,gBAACC,EAAA,EAAD,CACEC,UAAU,IACVC,OAAO,SACPC,IAAI,+BACJrC,KAAK,2GAJP,yBASF,qBACEA,KAAK,wCACLoC,OAAO,SACPC,IAAI,gCAEJ,uBACEC,IAAI,oDACJC,IAAI,iCCZd,IAAMC,GAAYC,EAAAA,EAAAA,GAAW,CAC3BC,QAAS,CACPC,QAAS,OACTC,cAAe,SACfC,OAAQ,SAEVC,aAAc,CACZC,SAAU,KAIC,SAASC,IACtB,IAAMC,EAAUT,IAEhB,GAAwCU,EAAAA,EAAAA,MAAhCC,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,eACrB,GAAiCC,EAAAA,EAAAA,IAC/BD,EACAD,GAFMG,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,YAKjB,GAOIC,EAAAA,EAAAA,IAAc,CAChBC,UAAW,OAPXnD,EADF,EACEA,aACAoD,EAFF,EAEEA,QACAnD,EAHF,EAGEA,cACAC,EAJF,EAIEA,aACAmD,EALF,EAKEA,gBACAC,EANF,EAMEA,WAKF,OAAKF,EAKH,uBAAKG,UAAWZ,EAAQP,SACtB,gBAACrC,EAAD,CACEC,aAAcA,EACdoD,QAASA,EACTnD,cAAeA,EACfC,aAAcA,IAEhB,gBAACsD,EAAA,GAAD,CACED,UAAWZ,EAAQH,aACnBvC,cAAeA,EACfqD,WAAYA,EACZD,gBAAiBA,EACjBnD,aAAcA,EACduD,UAAW,IACXT,QAASA,EACTC,YACED,IAAYU,EAAAA,GAAAA,UAA2BT,OAAcU,IAGzD,gBAAChC,EAAD,OAvBK","sources":["webpack://mine/./src/modules/components/Markdown/Markdown.jsx","webpack://mine/./src/packages/travel/pages/Dashboard/blocks/Description.jsx","webpack://mine/./src/modules/utilities/l10n/index.js","webpack://mine/./src/packages/travel/pages/Dashboard/blocks/ExternalLinks.jsx","webpack://mine/./src/packages/travel/pages/Dashboard/TravelDashboard.jsx"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport ReactMarkdown from 'react-markdown';\n\nconst components = {\n  a: ({ href, children }) =>\n    href.startsWith && href.startsWith('/') ? (\n      <Link to={href}>{children}</Link>\n    ) : (\n      <a href={href}>{children}</a>\n    ),\n};\n\nexport default ({ children, forwardedProps }) => (\n  <ReactMarkdown {...forwardedProps} components={components}>\n    {children}\n  </ReactMarkdown>\n);\n","import React from 'react';\nimport Markdown from 'modules/components/Markdown';\nimport { usePaths } from 'modules/packages';\nimport { plural } from 'modules/utilities/l10n';\nimport { LOCATION_CLASSES_ID } from 'travel/models/locations/consts';\n\nexport default function Description({\n  countriesIds,\n  locationsDict,\n  locationsIds,\n}) {\n  const {\n    travel: { visits: visitsPaths },\n  } = usePaths();\n\n  const countriesCounter = resolvePlural(countriesIds.length, {\n    one: 'стране',\n    many: 'странах',\n  });\n  const locationsCounter = resolvePlural(\n    calcCitiesCount(locationsIds, locationsDict),\n    {\n      one: 'городе',\n      many: 'городах',\n    },\n  );\n\n  return (\n    <Markdown>\n      {`\nСтатистика по моим путешествиям.\n\nЗдесь будет красивая инфографика, рассказы и фотки про 250 стран и\nтерриторий. Пока я побывал только в\n[${countriesCounter}](${visitsPaths.toUrl()}) и \n[${locationsCounter}](${visitsPaths.toUrl()}),\nа раз так, то и на инфографику пока забил.\n  `}\n    </Markdown>\n  );\n}\n\nfunction calcCitiesCount(locationsIds, locationsDict = {}) {\n  return locationsIds.filter(\n    locationsId =>\n      locationsDict[locationsId]?.locationClass === LOCATION_CLASSES_ID.CITY,\n  ).length;\n}\n\nfunction resolvePlural(counter, pluralOptions) {\n  if (counter == null) {\n    return `... ${pluralOptions.many}`;\n  }\n  return `${counter} ${plural(counter, pluralOptions)}`;\n}\n","/* eslint-disable import/prefer-default-export */\nexport function plural(amount, { many, few = many, one }) {\n  let value = Math.abs(amount);\n  value %= 100;\n  if (value >= 5 && value <= 20) {\n    return many;\n  }\n  value %= 10;\n  if (value === 1) {\n    return one;\n  }\n  if (value >= 2 && value <= 4) {\n    return few;\n  }\n  return many;\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\n\nexport default function ExternalLinks() {\n  return (\n    <>\n      <div>\n        <Button\n          component=\"a\"\n          target=\"_blank\"\n          rel=\"nofollow noreferrer noopener\"\n          href=\"https://lobastov.livejournal.com/tag/%D0%9F%D1%83%D1%82%D0%B5%D1%88%D0%B5%D1%81%D1%82%D0%B2%D0%B8%D0%B5\"\n        >\n          Про путешествия в ЖЖ\n        </Button>\n      </div>\n      <a\n        href=\"https://my.flightradar24.com/lobastov\"\n        target=\"_blank\"\n        rel=\"nofollow noreferrer noopener\"\n      >\n        <img\n          src=\"https://banners-my.flightradar24.com/lobastov.png\"\n          alt=\"My Flightdiary.net profile\"\n        />\n      </a>\n    </>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useQueryFilter } from 'core/context/QueryFilterContext';\nimport { useTripsStats } from 'travel/dataSource';\nimport LocationsMap, {\n  useMarkersScaleSidebar,\n  MARKERS_SCALES,\n} from 'travel/components/LocationsMap';\nimport Description from './blocks/Description';\nimport ExternalLinks from './blocks/ExternalLinks';\n\nconst useStyles = makeStyles({\n  content: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: ' 100%',\n  },\n  mapContainer: {\n    flexGrow: 1,\n  },\n});\n\nexport default function TravelDashboard() {\n  const classes = useStyles();\n\n  const { queryFilter, setQueryFilter } = useQueryFilter();\n  const { scaleBy, ratingLevel } = useMarkersScaleSidebar(\n    setQueryFilter,\n    queryFilter,\n  );\n\n  const {\n    countriesIds,\n    isReady,\n    locationsDict,\n    locationsIds,\n    locationsRating,\n    visitsDict,\n  } = useTripsStats({\n    userAlias: 'my',\n  });\n\n  if (!isReady) {\n    return '...Loading';\n  }\n\n  return (\n    <div className={classes.content}>\n      <Description\n        countriesIds={countriesIds}\n        isReady={isReady}\n        locationsDict={locationsDict}\n        locationsIds={locationsIds}\n      />\n      <LocationsMap\n        className={classes.mapContainer}\n        locationsDict={locationsDict}\n        visitsDict={visitsDict}\n        locationsRating={locationsRating}\n        locationsIds={locationsIds}\n        minHeight={300}\n        scaleBy={scaleBy}\n        ratingLevel={\n          scaleBy === MARKERS_SCALES.BY_RATING ? ratingLevel : undefined\n        }\n      />\n      <ExternalLinks />\n    </div>\n  );\n}\n"],"names":["components","a","href","children","startsWith","to","forwardedProps","Description","countriesIds","locationsDict","locationsIds","visitsPaths","usePaths","travel","visits","countriesCounter","resolvePlural","length","one","many","locationsCounter","filter","locationsId","locationClass","LOCATION_CLASSES_ID","calcCitiesCount","Markdown","toUrl","counter","pluralOptions","amount","few","value","Math","abs","ExternalLinks","Button","component","target","rel","src","alt","useStyles","makeStyles","content","display","flexDirection","height","mapContainer","flexGrow","TravelDashboard","classes","useQueryFilter","queryFilter","setQueryFilter","useMarkersScaleSidebar","scaleBy","ratingLevel","useTripsStats","userAlias","isReady","locationsRating","visitsDict","className","LocationsMap","minHeight","MARKERS_SCALES","undefined"],"sourceRoot":""}