{"version":3,"sources":["webpack:///./src/packages/literature/pages/Article/blocks/Paragraph/Paragraph.jsx","webpack:///./src/packages/literature/pages/Article/Article.jsx","webpack:///./src/packages/literature/pages/Articles/blocks/Article/Article.jsx","webpack:///./src/packages/literature/pages/Articles/Articles.jsx","webpack:///./src/modules/editorjs/EditorJS.jsx","webpack:///./src/packages/literature/pages/ArticleEditor/blocks/ArticleEditorForm/transliteration.js","webpack:///./src/packages/literature/pages/ArticleEditor/blocks/ArticleEditorForm/ArticleEditorForm.jsx","webpack:///./src/packages/literature/pages/ArticleEditor/ArticleEditor.jsx","webpack:///./src/modules/components/muiExtended/ConnectedLink/ConnectedLink.jsx","webpack:///./src/packages/literature/dataSource/articles.js"],"names":["Paragraph","data","text","Typography","replace","Article","slug","useAuthContext","isAuthenticated","authenticatedUserId","userId","article","useArticle","domain","usePaths","literaturePaths","literature","codePaths","code","selfPaths","variant","body","title","isDraft","blocks","isEditable","ConnectedLink","to","editArticle","toUrl","map","type","withRouter","ArticleComponent","React","lazy","DBArticle","selectArticle","compose","withStyles","container","display","iconHome","padding","slugList","flex","classes","match","params","tag","authenticatedUserAlias","userAlias","articlesList","useArticles","hasSummaryTag","hasCodeTag","entry","className","List","component","aria-label","root","ListItem","button","articles","ListItemText","primary","currentSlug","caption","createArticle","Editor","value","onChange","useEffect","editor","EditorJS","holder","save","then","nextData","isReady","destroy","id","mapping","а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ь","ы","Ъ","э","ю","я","useStyles","makeStyles","articleBody","marginTop","ArticleEditorForm","initialArticle","onSubmit","isSubmitting","isCreation","initialTitle","initialIsDraft","initialContent","useState","hasSlug","setSlug","setTitle","setIsDraft","content","setContent","Grid","spacing","alignItems","item","xs","FormControl","InputLabel","htmlFor","Input","event","currentTarget","toSlug","fullWidth","shrink","Boolean","FormControlLabel","control","Checkbox","checked","target","label","Button","disabled","onClick","undefined","nextContent","Array","from","char","join","transliteration","toLowerCase","ArticleEditor","history","useHistory","useSubmitArticle","submitArticle","query","push","props","RouterLink","articlesProvision","useProvision","isProvision","modelName","observe","navigation","isDisabled","selectResult","articlesIds","useSelector","state","selectList","condition","selectItem","useRequest","method","provision","includes","readyState"],"mappings":"gPAGe,SAASA,EAAT,GAA4C,QAAvBC,KAAQC,YAAe,MAAR,GAAQ,EACzD,OACE,kBAACC,EAAA,EAAD,KACGD,EAAKE,QAAQ,UAAW,MAAMA,QAAQ,UAAW,OCIzC,SAASC,EAAT,GAA2B,IAARC,EAAQ,EAARA,KAAQ,EACiBC,cAAjDC,EADgC,EAChCA,gBAAyBC,EADO,EACfC,OACjBC,EAAYC,YAAW,CAAEN,OAAMO,OAJ1B,kBAILF,QAFgC,EAGiBG,cAArCC,EAHoB,EAGhCC,WAAmCC,EAHH,EAGHC,KAC/BC,EAAYJ,GAAmBE,EACrC,GAAIX,IAASK,EACX,OACE,kBAACR,EAAA,EAAD,CAAYiB,QAAQ,QAApB,wDAPoC,IAYhCC,EAAiCV,EAAjCU,KAAMC,EAA2BX,EAA3BW,MAAOZ,EAAoBC,EAApBD,OAAQa,EAAYZ,EAAZY,QACrBC,GAAWH,GAAQ,IAAnBG,OACFC,EAAajB,GAAmBC,IAAwBC,EAC9D,OAAKe,GAAcF,EAEf,kBAACpB,EAAA,EAAD,CAAYiB,QAAQ,QAApB,wDAMF,oCACE,kBAACjB,EAAA,EAAD,CAAYiB,QAAQ,MAAME,GACzBG,GACC,kBAACC,EAAA,EAAD,CAAeC,GAAIR,EAAUS,YAAYC,MAAM,CAAEvB,UAAjD,iBAIDkB,EAAOM,KAAI,YAAoB,IAAjB7B,EAAiB,EAAjBA,KACb,OAD8B,EAAX8B,MAEjB,IAAK,YACH,OAAO,kBAAC/B,EAAD,CAAWC,KAAMA,IAC1B,QACE,OAAO,UCzCnB,IA2Be+B,eARC,SAAC,GAAa,IAAX1B,EAAW,EAAXA,KACX2B,EApBc,SAAA3B,GACpB,OAAQA,GACN,IAAK,WACH,OAAO4B,IAAMC,MAAK,kBAChB,yDAEJ,IAAK,YACH,OAAOD,IAAMC,MAAK,kBAChB,wDAEJ,IAAK,aACH,OAAOD,IAAMC,MAAK,kBAChB,yDAEJ,QACE,OAAOC,GAKcC,CAAc/B,GACvC,OAAK2B,EAGE,kBAACA,EAAD,CAAkB3B,KAAMA,IAFtB,qDCsGIgC,cACbN,IACAO,YAda,CACbC,UAAW,CACTC,QAAS,QAEXC,SAAU,CACRC,QAAS,UAEXC,SAAU,CACRC,KAAM,eAIKP,EAlHf,YAKG,IAJDQ,EAIC,EAJDA,QAIC,IAHDC,MACEC,OAAU1C,EAEX,EAFWA,KAAM2C,EAEjB,EAFiBA,IAEjB,EAKG1C,cAHFC,EAFD,EAECA,gBACW0C,EAHZ,EAGCC,UACQ1C,EAJT,EAICC,OAGM0C,EAAiBC,YAAY,CAAEF,UAAWD,IAA1CE,aAPP,EASwDtC,cAArCC,EATnB,EASOC,WAAmCC,EAT1C,EASoCC,KAC/BoC,GAAiBL,GAAe,YAARA,EACxBM,GAAcN,GAAe,SAARA,EACrB9B,EAAYJ,GAAmBE,EACrC,OACE,qCACIF,GACA,kBAACW,EAAA,EAAD,CACEC,GAAIR,EAAUqC,MAAM3B,QACpB4B,UAAWX,EAAQJ,UAEnB,kBAAC,IAAD,OAGJ,yBAAKe,UAAWX,EAAQN,WACtB,kBAACkB,EAAA,EAAD,CACEC,UAAU,MACVC,aAAW,WACXd,QAAS,CAAEe,KAAMf,EAAQF,WAExBU,GACC,kBAACQ,EAAA,EAAD,CACEC,QAAQ,EACRJ,UAAWjC,IACXC,GAAIR,EAAU6C,SAASnC,MAAM,CAAEvB,KAAM,cAErC,kBAAC2D,EAAA,EAAD,CAAcC,QAAQ,oCAGzBZ,GACC,kBAACQ,EAAA,EAAD,CACEC,QAAQ,EACRJ,UAAWjC,IACXC,GAAIR,EAAU6C,SAASnC,MAAM,CAAEvB,KAAM,eAErC,kBAAC2D,EAAA,EAAD,CAAcC,QAAQ,4BAGzBX,GACC,kBAACO,EAAA,EAAD,CACEC,QAAQ,EACRJ,UAAWjC,IACXC,GAAIR,EAAU6C,SAASnC,MAAM,CAAEvB,KAAM,gBAErC,kBAAC2D,EAAA,EAAD,CAAcC,QAAQ,uEAGzBd,EAAatB,KAAI,SAAAnB,GAAW,IACnBD,EAA8CC,EAA9CD,OAAQa,EAAsCZ,EAAtCY,QAASD,EAA6BX,EAA7BW,MAAa6C,EAAgBxD,EAAtBL,KAChC,GACEiB,KACEf,GAAmBC,IAAwBC,GAE7C,OAAO,KAET,IAAM0D,EAAU7C,EAAU,aAAH,OAAgBD,GAAUA,EACjD,OACE,kBAACwC,EAAA,EAAD,CACEC,QAAQ,EACRJ,UAAWjC,IACXC,GAAIR,EAAU6C,SAASnC,MAAM,CAAEvB,KAAM6D,KAErC,kBAACF,EAAA,EAAD,CAAcC,QAASE,SAI5B5D,GACC,kBAACsD,EAAA,EAAD,CACEC,QAAQ,EACRJ,UAAWjC,IACXC,GAAIR,EAAUkD,cAAcxC,MAAM,CAChCsB,UAAWD,KAGb,kBAACe,EAAA,EAAD,CAAcC,QAAQ,sBAI3B5D,GACC,6BACE,kBAAC,EAAD,CAASA,KAAMA,W,oOCzGZ,SAASgE,EAAT,GAAqC,IAAnBC,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,SAatC,OAZAC,qBAAU,WACR,IAAMC,EAAS,IAAIC,IAAS,CAC1B1E,KAAMsE,EACNK,OAAQ,YACRJ,SAAU,WACRE,EAAOG,OAAOC,MAAK,SAAAC,GAAQ,OAAIP,EAASO,SAG5C,OAAO,WACLL,EAAOM,QAAQF,MAAK,kBAAMJ,EAAOO,gBAElC,IACI,yBAAKC,GAAG,cChBjB,IAAMC,EAAU,CACdC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,IACHC,IAAG,KACHC,IAAG,KACHC,IAAG,OACHC,IAAG,GACHC,IAAG,IACHC,IAAG,GACHC,IAAG,IACHC,IAAG,IACHC,IAAG,M,u8BCpBL,IAAMC,EAAYC,YAAW,CAC3BC,YAAa,CACXC,UAAW,UAIA,SAASC,EAAT,GAIZ,IAHDC,EAGC,EAHDA,eACAC,EAEC,EAFDA,SACAC,EACC,EADDA,aAEM9E,EAAUuE,IAEVQ,GAAcH,EAHnB,EASGA,GAAkB,GATrB,IAMCpG,MAAOwG,OANR,MAMuB,eANvB,MAOCvG,QAASwG,OAPV,SAQOC,EARP,EAQC3G,KARD,IAWoC4G,mBAAS,IAX7C,UAWQ3H,EAXR,EAWQA,KAAM4H,EAXd,EAWcA,QAAWC,EAXzB,SAYyBF,mBAASH,GAZlC,GAYMxG,EAZN,KAYa8G,EAZb,SAa6BH,mBAASF,GAbtC,GAaMxG,EAbN,KAae8G,EAbf,SAc6BJ,mBAASD,GAdtC,GAcMM,EAdN,KAceC,EAdf,KAgBD,OACE,kBAACC,EAAA,EAAD,CAAMhG,WAAW,EAAMiG,QAAS,EAAGC,WAAW,UAC5C,kBAACF,EAAA,EAAD,CAAMG,MAAM,EAAMC,GAAI,GACpB,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAYC,QAAQ,oBAApB,mBACA,kBAACC,EAAA,EAAD,CACE9D,GAAG,mBACHX,MAAOjD,EACPkD,SAAU,SAAAyE,GACRb,EAASa,EAAMC,cAAc3E,OACxB2D,GACHC,EAAQ,CACN7H,KAAM6I,EAAOF,EAAMC,cAAc3E,OACjC2D,SAAS,SAOpBL,GACC,kBAACW,EAAA,EAAD,CAAMG,MAAM,EAAMC,GAAI,GACpB,kBAACC,EAAA,EAAD,CAAaO,WAAW,GACtB,kBAACN,EAAA,EAAD,CAAYC,QAAQ,mBAAmBM,OAAQC,QAAQhJ,IAAvD,QAGA,kBAAC0I,EAAA,EAAD,CACE9D,GAAG,mBACHX,MAAOjE,EACPkE,SAAU,SAAAyE,GAAK,OACbd,EAAQ,CACN7H,KAAM6I,EAAOF,EAAMC,cAAc3E,OACjC2D,SAAS,SAOrB,kBAACM,EAAA,EAAD,CAAMG,MAAM,EAAMC,GAAI,GACpB,kBAACW,EAAA,EAAD,CACEC,QACE,kBAACC,EAAA,EAAD,CACEC,QAASnI,EACTiD,SAAU,SAAAyE,GAAK,OAAIZ,EAAWY,EAAMU,OAAOD,YAG/CE,MAAM,cAGV,kBAACpB,EAAA,EAAD,CAAMG,MAAM,EAAMC,GAAI,GACnBhB,EACC,kBAACzH,EAAA,EAAD,CAAYiB,QAAQ,WAApB,sBAEA,kBAACyI,EAAA,EAAD,CACEC,SAAUjC,IAAevH,EACzByJ,QAAS,kBACPpC,EAAS,CACPrG,QACAC,UACAF,KAAMiH,EACNhI,KAAMuH,EAAavH,OAAO0J,MAPhC,cAeJ,kBAACxB,EAAA,EAAD,CAAMG,MAAM,EAAMC,GAAI,IACpB,yBAAKnF,UAAWX,EAAQyE,aACtB,kBAACpH,EAAA,EAAD,CAAYiB,QAAQ,WAApB,gBACA,kBAACkD,EAAD,CACEC,MAAO+D,EACP9D,SAAU,SAAAyF,GAAW,OAAI1B,EAAW0B,SAQhD,SAASd,EAAOjJ,GACd,ODtFa,SAAyBA,GACtC,OAAOgK,MAAMC,KAAKjK,GACf4B,KAAI,SAAAsI,GAAI,uBAAIjF,EAAQiF,UAAZ,QAAqBA,KAC7BC,KAAK,ICmFDC,CACLpK,EACGqK,cACAnK,QAAQ,MAAO,KACfA,QAAQ,gBAAiB,K,gzBCtHjB,SAASoK,EAAT,GAIZ,IAFWlK,EAEX,EAHDyC,MACEC,OAAU1C,KAGNmK,EAAUC,cADf,EAEwD5J,cAArCC,EAFnB,EAEOC,WAAmCC,EAF1C,EAEoCC,KAC/BC,EAAYJ,GAAmBE,EAC7BN,EAAYC,YAAW,CAAEN,OAAMO,OAV1B,kBAULF,QAJP,EAKuCgK,YAAiB,CAAE9J,OAX9C,kBAWL+J,EALP,EAKOA,cAAehD,EALtB,EAKsBA,aAEvB,GAAItH,IAASK,EACX,OAAO,KAGT,IAAMkH,GAAclH,EACpB,OACE,kBAAC8G,EAAD,CACEC,eAAgB/G,EAChBiH,aAAcA,EACdD,SAAQ,e,EAAA,G,EAAA,yBAAE,WAAM1H,GAAN,gGACF2K,EAAc,CAClBC,MAAO,CACL3F,GAAIvE,aAAF,EAAEA,EAASuE,GACb7D,KAAM,EAAF,KAAOV,GAAYV,MAJnB,OAOJ4H,GACF4C,EAAQK,KAAK3J,EAAU6C,SAASnC,MAAM,CAAEvB,KAAML,aAAF,EAAEA,EAAMK,QAR9C,0C,+KAAF,2D,uTCxBC,SAASoB,EAAcqJ,GACpC,OAAO,kBAAC,IAAD,KAAaA,EAAb,CAAoBpH,UAAWqH,S,kyDCIzB,SAAS3H,IACtB,IAAM4H,EAAoBC,YAAa,CACrCrK,OAAQ,WACRsK,aAAa,EACbC,UAAW,WACXC,SAAS,EACTR,MAAO,CACLS,WAAY,CAAEC,YAAY,MAPM,GAUDC,YAAaP,IAAsB,IAA9DhL,KAAMwL,OAVsB,MAUR,GAVQ,EAcpC,MAAO,CAAErI,aAHYsI,aAAY,SAAAC,GAAK,OACpCC,YAAWD,EAAO,WAAYF,OAK3B,SAAS7K,EAAT,GAAsC,IAAhBN,EAAgB,EAAhBA,KAAMO,EAAU,EAAVA,OAC3BoK,EAAoBC,YAAa,CACrCrK,SACAsK,aAAa,EACbC,UAAW,WACXC,QAAS/K,EACTuL,UAAWvC,QAAQhJ,GACnBuK,MAAO,CACL3F,GAAI5E,KAGFK,EAAU+K,aAAY,SAAAC,GAAK,OAAIG,YAAWH,EAAO,WAAYrL,MACnE,cAAY2K,GAAZ,IAA+BtK,YAG1B,SAASgK,EAAT,GAAsC,IAAV9J,EAAU,EAAVA,OAAU,IACRkL,YAAW,CAC5ClL,SACAuK,UAAW,WACXY,OAAQ,SAJiC,GACpCpB,EADoC,KACrBqB,EADqB,KAO3C,cACKA,GADL,IAEErE,cAAe,CAAC,EAAG,GAAGsE,SAASD,EAAUE,YACzCvB","file":"literature-Articles-b38b18966ee29c664144.js","sourcesContent":["import React from 'react';\nimport Typography from '@material-ui/core/Typography';\n\nexport default function Paragraph({ data: { text = '' } }) {\n  return (\n    <Typography>\n      {text.replace(/<\\/?b>/g, '**').replace(/<\\/?i>/g, '*')}\n    </Typography>\n  );\n}\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { usePaths } from 'modules/packages';\nimport ConnectedLink from 'modules/components/muiExtended/ConnectedLink';\nimport { useAuthContext } from 'core/context/AuthContext';\nimport { useArticle } from '../../dataSource/articles';\nimport Paragraph from './blocks/Paragraph';\n\nconst domain = 'ArticleEditor';\n\nexport default function Article({ slug }) {\n  const { isAuthenticated, userId: authenticatedUserId } = useAuthContext();\n  const { article } = useArticle({ slug, domain });\n  const { literature: literaturePaths, code: codePaths } = usePaths();\n  const selfPaths = literaturePaths || codePaths;\n  if (slug && !article) {\n    return (\n      <Typography variant=\"body\">\n        Статья еще не опубликована или недоступна для чтения\n      </Typography>\n    );\n  }\n  const { body, title, userId, isDraft } = article;\n  const { blocks } = body || {};\n  const isEditable = isAuthenticated && authenticatedUserId === userId;\n  if (!isEditable && isDraft) {\n    return (\n      <Typography variant=\"body\">\n        Статья еще не опубликована или недоступна для чтения\n      </Typography>\n    );\n  }\n  return (\n    <>\n      <Typography variant=\"h6\">{title}</Typography>\n      {isEditable && (\n        <ConnectedLink to={selfPaths.editArticle.toUrl({ slug })}>\n          Редактировать\n        </ConnectedLink>\n      )}\n      {blocks.map(({ data, type }) => {\n        switch (type) {\n          case 'paragraph':\n            return <Paragraph data={data} />;\n          default:\n            return null;\n        }\n      })}\n    </>\n  );\n}\n","import React from 'react';\nimport { withRouter } from 'react-router';\nimport DBArticle from '../../../Article';\n\nconst selectArticle = slug => {\n  switch (slug) {\n    case 'chaldini':\n      return React.lazy(() =>\n        import(/* webpackChunkName: 'literature-Chaldini' */ './designed/Chaldini'),\n      );\n    case 'blackSwan':\n      return React.lazy(() =>\n        import(/* webpackChunkName: 'literature-BlackSwan' */ './designed/BlackSwan'),\n      );\n    case 'importThis':\n      return React.lazy(() =>\n        import(/* webpackChunkName: 'literature-ImportThis' */ './designed/ImportThis'),\n      );\n    default:\n      return DBArticle;\n  }\n};\n\nconst Article = ({ slug }) => {\n  const ArticleComponent = selectArticle(slug);\n  if (!ArticleComponent) {\n    return <div>Статья не найдена</div>;\n  }\n  return <ArticleComponent slug={slug} />;\n};\n\nexport default withRouter(Article);\n","import React from 'react';\nimport { withRouter } from 'react-router';\nimport compose from 'lodash/fp/compose';\nimport { withStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconHome from '@material-ui/icons/Home';\nimport { usePaths } from 'modules/packages';\nimport ConnectedLink from 'modules/components/muiExtended/ConnectedLink';\nimport { useAuthContext } from 'core/context/AuthContext';\nimport useArticles from '../../dataSource/articles';\nimport Article from './blocks/Article';\n\nfunction Articles({\n  classes,\n  match: {\n    params: { slug, tag },\n  },\n}) {\n  const {\n    isAuthenticated,\n    userAlias: authenticatedUserAlias,\n    userId: authenticatedUserId,\n  } = useAuthContext();\n\n  const { articlesList } = useArticles({ userAlias: authenticatedUserAlias });\n\n  const { literature: literaturePaths, code: codePaths } = usePaths();\n  const hasSummaryTag = !tag || tag === 'summary';\n  const hasCodeTag = !tag || tag === 'code';\n  const selfPaths = literaturePaths || codePaths;\n  return (\n    <>\n      {!literaturePaths && (\n        <ConnectedLink\n          to={selfPaths.entry.toUrl()}\n          className={classes.iconHome}\n        >\n          <IconHome />\n        </ConnectedLink>\n      )}\n      <div className={classes.container}>\n        <List\n          component=\"nav\"\n          aria-label=\"articles\"\n          classes={{ root: classes.slugList }}\n        >\n          {hasSummaryTag && (\n            <ListItem\n              button={true}\n              component={ConnectedLink}\n              to={selfPaths.articles.toUrl({ slug: 'chaldini' })}\n            >\n              <ListItemText primary=\"&laquo;Психология убеждения&raquo; Чалдини\" />\n            </ListItem>\n          )}\n          {hasSummaryTag && (\n            <ListItem\n              button={true}\n              component={ConnectedLink}\n              to={selfPaths.articles.toUrl({ slug: 'blackSwan' })}\n            >\n              <ListItemText primary=\"&laquo;Черный лебедь&raquo; Талеба\" />\n            </ListItem>\n          )}\n          {hasCodeTag && (\n            <ListItem\n              button={true}\n              component={ConnectedLink}\n              to={selfPaths.articles.toUrl({ slug: 'importThis' })}\n            >\n              <ListItemText primary=\"19 принципов достижения дзена при написании компьютерных программ\" />\n            </ListItem>\n          )}\n          {articlesList.map(article => {\n            const { userId, isDraft, title, slug: currentSlug } = article;\n            if (\n              isDraft &&\n              (!isAuthenticated || authenticatedUserId !== userId)\n            ) {\n              return null;\n            }\n            const caption = isDraft ? `Черновик: ${title}` : title;\n            return (\n              <ListItem\n                button={true}\n                component={ConnectedLink}\n                to={selfPaths.articles.toUrl({ slug: currentSlug })}\n              >\n                <ListItemText primary={caption} />\n              </ListItem>\n            );\n          })}\n          {isAuthenticated && (\n            <ListItem\n              button={true}\n              component={ConnectedLink}\n              to={selfPaths.createArticle.toUrl({\n                userAlias: authenticatedUserAlias,\n              })}\n            >\n              <ListItemText primary=\"Добавить статью\" />\n            </ListItem>\n          )}\n        </List>\n        {slug && (\n          <div>\n            <Article slug={slug} />\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nconst styles = {\n  container: {\n    display: 'flex',\n  },\n  iconHome: {\n    padding: '0 16px',\n  },\n  slugList: {\n    flex: '0 1 350px',\n  },\n};\n\nexport default compose(\n  withRouter,\n  withStyles(styles),\n)(Articles);\n","import React, { useEffect } from 'react';\nimport EditorJS from '@editorjs/editorjs';\n\nexport default function Editor({ value, onChange }) {\n  useEffect(() => {\n    const editor = new EditorJS({\n      data: value,\n      holder: 'editor-js',\n      onChange: () => {\n        editor.save().then(nextData => onChange(nextData));\n      },\n    });\n    return () => {\n      editor.isReady.then(() => editor.destroy());\n    };\n  }, []);\n  return <div id=\"editor-js\" />;\n}\n","const mapping = {\n  а: 'a',\n  б: 'b',\n  в: 'v',\n  г: 'g',\n  д: 'd',\n  е: 'e',\n  ё: 'e',\n  ж: 'j',\n  з: 'z',\n  и: 'i',\n  й: 'y',\n  к: 'k',\n  л: 'l',\n  м: 'm',\n  н: 'n',\n  о: 'o',\n  п: 'p',\n  р: 'r',\n  с: 's',\n  т: 't',\n  у: 'u',\n  ф: 'f',\n  х: 'h',\n  ц: 'c',\n  ч: 'ch',\n  ш: 'sh',\n  щ: 'shch',\n  ь: '',\n  ы: 'y',\n  Ъ: '',\n  э: 'e',\n  ю: 'u',\n  я: 'ya',\n};\n\nexport default function transliteration(text) {\n  return Array.from(text)\n    .map(char => mapping[char] ?? char)\n    .join('');\n}\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Typography from '@material-ui/core/Typography';\nimport EditorJS from 'modules/editorjs/EditorJS';\nimport transliteration from './transliteration';\n\nconst useStyles = makeStyles({\n  articleBody: {\n    marginTop: '12px',\n  },\n});\n\nexport default function ArticleEditorForm({\n  initialArticle,\n  onSubmit,\n  isSubmitting,\n}) {\n  const classes = useStyles();\n\n  const isCreation = !initialArticle;\n\n  const {\n    title: initialTitle = 'Новая статья',\n    isDraft: initialIsDraft = true,\n    body: initialContent,\n  } = initialArticle || {};\n\n  const [{ slug, hasSlug }, setSlug] = useState({});\n  const [title, setTitle] = useState(initialTitle);\n  const [isDraft, setIsDraft] = useState(initialIsDraft);\n  const [content, setContent] = useState(initialContent);\n\n  return (\n    <Grid container={true} spacing={3} alignItems=\"center\">\n      <Grid item={true} xs={4}>\n        <FormControl>\n          <InputLabel htmlFor=\"component-simple\">Название статьи</InputLabel>\n          <Input\n            id=\"component-simple\"\n            value={title}\n            onChange={event => {\n              setTitle(event.currentTarget.value);\n              if (!hasSlug) {\n                setSlug({\n                  slug: toSlug(event.currentTarget.value),\n                  hasSlug: false,\n                });\n              }\n            }}\n          />\n        </FormControl>\n      </Grid>\n      {isCreation && (\n        <Grid item={true} xs={4}>\n          <FormControl fullWidth={true}>\n            <InputLabel htmlFor=\"component-simple\" shrink={Boolean(slug)}>\n              Slug\n            </InputLabel>\n            <Input\n              id=\"component-simple\"\n              value={slug}\n              onChange={event =>\n                setSlug({\n                  slug: toSlug(event.currentTarget.value),\n                  hasSlug: true,\n                })\n              }\n            />\n          </FormControl>\n        </Grid>\n      )}\n      <Grid item={true} xs={4}>\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={isDraft}\n              onChange={event => setIsDraft(event.target.checked)}\n            />\n          }\n          label=\"Черновик\"\n        />\n      </Grid>\n      <Grid item={true} xs={4}>\n        {isSubmitting ? (\n          <Typography variant=\"caption\">Идет сохранение...</Typography>\n        ) : (\n          <Button\n            disabled={isCreation && !slug}\n            onClick={() =>\n              onSubmit({\n                title,\n                isDraft,\n                body: content,\n                slug: isCreation ? slug : undefined,\n              })\n            }\n          >\n            Сохранить\n          </Button>\n        )}\n      </Grid>\n      <Grid item={true} xs={12}>\n        <div className={classes.articleBody}>\n          <Typography variant=\"caption\">Текст статьи</Typography>\n          <EditorJS\n            value={content}\n            onChange={nextContent => setContent(nextContent)}\n          />\n        </div>\n      </Grid>\n    </Grid>\n  );\n}\n\nfunction toSlug(text) {\n  return transliteration(\n    text\n      .toLowerCase()\n      .replace(/\\s/g, '_')\n      .replace(/[^a-zа-я0-9]/g, ''),\n  );\n}\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { usePaths } from 'modules/packages';\nimport { useArticle, useSubmitArticle } from '../../dataSource/articles';\nimport ArticleEditorForm from './blocks/ArticleEditorForm';\n\nconst domain = 'ArticleEditor';\n\nexport default function ArticleEditor({\n  match: {\n    params: { slug },\n  },\n}) {\n  const history = useHistory();\n  const { literature: literaturePaths, code: codePaths } = usePaths();\n  const selfPaths = literaturePaths || codePaths;\n  const { article } = useArticle({ slug, domain });\n  const { submitArticle, isSubmitting } = useSubmitArticle({ domain });\n\n  if (slug && !article) {\n    return null;\n  }\n\n  const isCreation = !article;\n  return (\n    <ArticleEditorForm\n      initialArticle={article}\n      isSubmitting={isSubmitting}\n      onSubmit={async data => {\n        await submitArticle({\n          query: {\n            id: article?.id,\n            body: { ...article, ...data },\n          },\n        });\n        if (isCreation) {\n          history.push(selfPaths.articles.toUrl({ slug: data?.slug }));\n        }\n      }}\n    />\n  );\n}\n","import React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport MUILink from '@material-ui/core/Link';\n\nexport default function ConnectedLink(props) {\n  return <MUILink {...props} component={RouterLink} />;\n}\n","import { useSelector } from 'react-redux';\nimport {\n  useProvision,\n  useRequest,\n  selectItem,\n  selectList,\n} from 'core/connection';\nimport { selectResult } from 'core/connection/request/controllerRedux';\n\nexport default function useArticles() {\n  const articlesProvision = useProvision({\n    domain: 'articles',\n    isProvision: true,\n    modelName: 'articles',\n    observe: false,\n    query: {\n      navigation: { isDisabled: true },\n    },\n  });\n  const { data: articlesIds = [] } = selectResult(articlesProvision) || {};\n  const articlesList = useSelector(state =>\n    selectList(state, 'articles', articlesIds),\n  );\n  return { articlesList };\n}\n\nexport function useArticle({ slug, domain }) {\n  const articlesProvision = useProvision({\n    domain,\n    isProvision: true,\n    modelName: 'articles',\n    observe: slug,\n    condition: Boolean(slug),\n    query: {\n      id: slug,\n    },\n  });\n  const article = useSelector(state => selectItem(state, 'articles', slug));\n  return { ...articlesProvision, article };\n}\n\nexport function useSubmitArticle({ domain }) {\n  const [submitArticle, provision] = useRequest({\n    domain,\n    modelName: 'articles',\n    method: 'POST',\n  });\n\n  return {\n    ...provision,\n    isSubmitting: ![0, 4].includes(provision.readyState),\n    submitArticle,\n  };\n}\n"],"sourceRoot":""}