(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1032:function(e,t,r){"use strict";r.r(t);var i=r(0),n=r.n(i),a=r(2),o=r.n(a),s=r(256),l=r.n(s),c=r(242),u=r(31),d=r(116),p=r(101),f=r(844),b=(r(835),r(967)),v=r(1022),m=r(1026),E=r(1024),O=r(1025),y=r(1023),g=r(182),h=r(53),I=r(9),S=r(1042),j=r(1043),P=r(1017),T=r(1019),R=r(1034),C=function(e){var t=e.caption,r=e.classes,i=e.hasNullOption,a=e.inputId,o=e.name,s=e.onChange,l=e.optionRender,c=e.options,u=e.value;return n.a.createElement("div",{className:r.container},n.a.createElement(j.a,{component:"label",shrink:!0,htmlFor:a},t),n.a.createElement(R.a,{name:o,value:u,displayEmpty:!0,onChange:s,input:n.a.createElement(P.a,{id:a}),className:r.selectRoot},i&&n.a.createElement(T.a,{key:null,value:null},l({option:null,index:-1,options:c})),c.map((function(e,t){return n.a.createElement(T.a,{key:e,value:e},l({option:e,index:t,options:c}))}))))},D=o.a.oneOfType([o.a.number,o.a.string]);C.propTypes={name:o.a.string,caption:o.a.string.isRequired,classes:o.a.objectOf(o.a.string).isRequired,hasNullOption:o.a.bool,inputId:o.a.string.isRequired,onChange:o.a.func.isRequired,optionRender:o.a.func,options:o.a.arrayOf(D),value:D},C.defaultProps={name:void 0,hasNullOption:!0,optionRender:function(e){return e.option||""},options:[],value:void 0};var w=Object(I.a)({container:{display:"inline-block",flexGrow:"1",flexBasis:"0"},selectRoot:{display:"block"}})(C),V=r(748),N=r(1002),L=r(730),A=r(737),_=function(e){var t=e.inputValue,r=e.sourceProps,i=(r=void 0===r?{}:r).suggestions,a=void 0===i?[]:i,o=e.children,s=t.toLowerCase();return n.a.createElement(n.a.Fragment,null,o(a.filter((function(e){return e.label.toLowerCase().includes(s)}))))};_.propTypes={inputValue:o.a.string.isRequired,sourceProps:o.a.shape({suggestions:o.a.array}).isRequired,children:o.a.func.isRequired};var Y=_;function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var F=function(e){var t=e.inputProps,r=e.classes,i=e.ref,a=k(e,["inputProps","classes","ref"]);return n.a.createElement(S.a,q({InputProps:U({inputRef:i,classes:{root:r.inputRoot,input:r.inputInput}},t)},a))},M=r(736);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var G=function(e){var t=e.itemProps,r=e.isHighlighted,i=e.isSelected,a=e.children,o=a.label,s=a.details;return n.a.createElement(T.a,B({},t,{selected:r,component:"div",style:{fontWeight:i?500:400}}),n.a.createElement(M.a,{primary:o,secondary:s}))};G.propTypes={itemProps:o.a.object,isHighlighted:o.a.bool,isSelected:o.a.bool,children:o.a.func.isRequired},G.defaultProps={itemProps:void 0,isHighlighted:!1,isSelected:!1};var W=G;function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Q=Object(L.a)((function(e){return{root:{},container:{},paper:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0},inputRoot:{},inputInput:{}}})),Z=function(e){return(e||{}).label},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.SuggestionsResolver,r=void 0===t?Y:t,i=e.SuggestionItemComponent,a=void 0===i?W:i,o=e.InputComponent,s=void 0===o?F:o;return function(e){var t=e.classes,i=e.sourceProps,o=e.inputProps,l=e.inputFieldProps,c=X(e,["classes","sourceProps","inputProps","inputFieldProps"]),u=z({},Q(),{},t);return n.a.createElement("div",{className:u.root},n.a.createElement(N.a,K({itemToString:Z},c),(function(e){var t=e.getInputProps,c=e.getItemProps,d=e.getMenuProps,p=e.highlightedIndex,f=e.inputValue,b=e.isOpen,v=e.selectedItem;return n.a.createElement("div",{className:u.container},n.a.createElement(s,K({fullWidth:!0,classes:u,inputProps:t(o)},l)),n.a.createElement("div",d(),b&&n.a.createElement(A.a,{className:u.paper,square:!0},n.a.createElement(r,{inputValue:f,sourceProps:i},(function(e){return e.map((function(e,t){return n.a.createElement(a,{key:e.label,itemProps:c({item:e}),isHighlighted:p===t,isSelected:Boolean(v)&&v.label===e.label},e)}))})))))})))}};ee();function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie,ne="FILTER",ae="SEARCH",oe=function(e){var t=e.queryFormat,r=e.filterField,i=e.inputValue,n={pageSize:e.numberOfItemsToRequest};switch(t){case ae:return{navigation:n,search:i};case ne:default:return{navigation:n,filter:re({},r,{comparator:"~",value:"%".concat(i,"%")})}}},se=ee({SuggestionsResolver:Object(V.a)((function(e,t){var r=t.inputValue,i=t.sourceProps,n=i.modelName,a=i.domain,o=i.filterField,s=i.numberOfItemsToRequest,l=i.queryFormat;return{domain:a,identity:r,request:{entities:{modelName:n,observe:r,query:oe({queryFormat:l,filterField:o,inputValue:r,numberOfItemsToRequest:s})}},debounceRequest:500}}))((function(e){var t=e.sourceProps,r=(t=void 0===t?{}:t).filterField,i=t.resolveDetails,n=t.convertEntityToSuggestion,a=void 0===n?function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{label:e[r],details:i?i(e):void 0})}:n,o=e.entities,s=(o=void 0===o?{}:o).data,l=void 0===s?[]:s;return(0,e.children)((l||[]).map(a))}))}),le=r(186);function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ue=(ce(ie={},le.TRIP_TYPES.LEISURE,"Отдых"),ce(ie,le.TRIP_TYPES.BUSINESS,"Работа"),ce(ie,le.TRIP_TYPES.MIXED,"Смешанный"),ce(ie,le.TRIP_TYPES.RELOCATION,"Переезд"),ce(ie,le.TRIP_TYPES.OTHER,"Другой"),ie);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var be=function(e){var t=e.option;return t?ue[t]:"Не указан"},ve=function(e){var t=e.tripName,r=e.tripType,n=e.originLocationId,a=e.originGeonameId,o=fe(Object(i.useState)({tripName:t,tripType:r,originLocationId:n,originGeonameId:a}),2),s=o[0],l=o[1];return{tripState:s,setTripState:function(e){return l(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},s,{},e))}}},me=function(e){var t=e.classes,r=e.locationsDict,a=e.tripState,o=a.tripType,s=a.tripName,l=a.originLocationId,c=e.setTripState,u=Object(i.useCallback)((function(e){var t=e.target.value;return c({tripName:t})}),[c]),d=Object(i.useCallback)((function(e){var t=e.target.value;return c({tripType:t})}),[c]),p=Object(i.useCallback)((function(e){var t=e.geonameId;return c({originGeonameId:t})}),[c]),f=(r[l]||{}).locationName;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:t.optionGroup},n.a.createElement(S.a,{fullWidth:!0,label:"Название поездки",value:s,onChange:u})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(se,{classes:{root:t.suggest},textFieldProps:{label:"Старт из"},initialInputValue:f,inputProps:{placeholder:"Пункт отправления..."},onChange:p,sourceProps:{filterField:"locationName",modelName:"geonames",domain:"tripEditCard.geoname",queryFormat:ae,resolveDetails:function(e){return[e.countryName,e.regionName].filter(Boolean).join(", ")}}})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(w,{caption:"Тип поездки",inputId:"TripEditCard-TripTypeOptions",onChange:d,optionRender:be,options:Object.values(le.TRIP_TYPES),hasNullOption:!0,value:o})))};me.propTypes={className:o.a.string,classes:o.a.objectOf(o.a.string).isRequired},me.defaultProps={className:void 0};var Ee=l()(Object(h.b)((function(e){return{locationsDict:Object(d.d)(e,"locations")}})),Object(I.a)({optionGroup:{display:"flex",minWidth:"400px"},suggest:{flexGrow:1}}))(me);function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ye=function(e){var t=e.initialState,r=e.children,i=e.onSubmit,a=ve(t),o=a.tripState,s=a.setTripState,l=Oe(n.a.useState(!1),2),c=l[0],u=l[1],d=function(){return u(!1)};return n.a.createElement(n.a.Fragment,null,n.a.cloneElement(r,{onClick:function(){return u(!0)}}),c&&n.a.createElement(v.a,{transitionDuration:500,open:c,onClose:d,"aria-labelledby":"form-dialog-title"},n.a.createElement(y.a,{id:"form-dialog-title"},"Поездка"),n.a.createElement(E.a,null,n.a.createElement(O.a,null,"Редактирование поездки"),n.a.createElement(Ee,{tripState:o,setTripState:s})),n.a.createElement(m.a,null,n.a.createElement(b.a,{onClick:d,color:"secondary"},"Отмена"),n.a.createElement(b.a,{onClick:function(){i(o),d()},color:"primary"},"Сохранить"))))};ye.propTypes={initialState:o.a.shape(g.default).isRequired,children:o.a.node.isRequired,onSubmit:o.a.func.isRequired},ye.defaultProps={};var ge=ye,he=r(184),Ie=r(768),Se=r(187),je=r(183),Pe=r(972),Te=r(739),Re=r(262),Ce=r.n(Re),De=r(869),we=r.n(De),Ve=function(e){for(var t=e.target;t;){if(t.dataset&&"enabled"===t.dataset.sortHandler)return!1;t=t.parentNode}return!0};function Ne(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Le=r(118),Ae=r(867),_e=r(880),Ye=r(134),qe=r.n(Ye),He=r(868),Ue=r(818),xe=r.n(Ue),ke=r(817),Fe=r.n(ke),Me=r(815),Be=r.n(Me),Ge=r(812),We=r.n(Ge),Ke=r(826),$e=r.n(Ke),ze=r(814),Je=r.n(ze),Xe=r(820),Qe=r.n(Xe),Ze=r(821),et=r.n(Ze),tt=r(813),rt=r.n(tt),it=r(776),nt=r.n(it),at=r(816),ot=r.n(at),st=r(819),lt=r.n(st),ct=r(822),ut=r.n(ct),dt=r(823),pt=r.n(dt),ft=r(824),bt=r.n(ft),vt=r(825),mt=r.n(vt),Et=r(811),Ot=r.n(Et),yt=r(810),gt=r.n(yt),ht=r(763),It=r(75),St=r(244),jt=r(999);function Pt(){return(Pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function Tt(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Rt=function(e){var t=e.children,r=e.description,i=e.onReject,a=e.onSubmit,o=e.title,s=Tt(e,["children","description","onReject","onSubmit","title"]);return n.a.createElement(jt.a,Pt({},s,{onSubmit:a}),(function(e){var a=e.handleSubmit,s=Tt(e,["handleSubmit"]);return n.a.createElement(v.a,{transitionDuration:500,open:!0,onClose:i,"aria-labelledby":"form-dialog-title"},n.a.createElement(y.a,{id:"form-dialog-title"},o),n.a.createElement(E.a,null,n.a.createElement(O.a,null,r),n.a.cloneElement(t,s)),n.a.createElement(m.a,null,n.a.createElement(b.a,{onClick:i,color:"secondary"},"Отмена"),n.a.createElement(b.a,{onClick:a,color:"primary"},"Сохранить")))}))};Rt.propTypes={children:o.a.node.isRequired,description:o.a.node,onReject:o.a.func.isRequired,onSubmit:o.a.func.isRequired,title:o.a.node},Rt.defaultProps={description:void 0,title:void 0};var Ct=Rt,Dt=r(1028),wt=r(1035),Vt=r(1027),Nt=r(1044),Lt=r(836),At=r(263),_t=r(298),Yt=r(243),qt=r(168),Ht=function(e){var t=e.dateFrom,r=e.timeFrom;return new Date(t.getFullYear(),t.getMonth(),t.getDate(),r.getHours(),r.getMinutes(),r.getSeconds())},Ut=function(e){var t=e.values,r=t.rideDeparture,i=t.rideArrival,n=e.handleChange,a=Object(At.a)(r,i),o=function(e,t){var a,o,s=(a=e,o=t,Object(qt.a)(a,o)),l=s?t:e,c=s?e:t;Object(_t.a)(r,l)||function(e){n("departureDateTime")(e)}(l),Object(_t.a)(i,c)||function(e){n("arrivalDateTime")(e)}(c)};return{isSameDateField:{value:a,onChange:function(e){Boolean(a)!==Boolean(e)&&o(r,Ht({dateFrom:e?r:Object(Yt.a)(r,1),timeFrom:i}))}},rideDepartureField:{value:r,onChange:function(e){var t=a?Ht({timeFrom:i,dateFrom:e}):i;o(e,t)}},rideArrivalField:{value:i,onChange:function(e){var t=a?Ht({timeFrom:r,dateFrom:e}):r;o(t,e)}}}};function xt(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var kt=null,Ft=function(e){var t=e.option;return t?Lt.d[t]:"Не указан"},Mt=function(e){var t=e.option;return t?Lt.c[t]:"Не указан"},Bt=function(e){var t=e.option;return t?Lt.a[t]:"Не указан"},Gt=function(e){var t=e.option;return t?Lt.b[t]:"Не указан"},Wt=function(e){var t=e.classes,r=e.availableVisits,a=e.originLocation,o=e.values,s=o.departureVisitId,l=o.arrivalVisitId,c=o.vehicleType,u=o.rideType,d=o.rideComment,p=o.rideClass,f=o.rideOccupation,b=o.departureDateTime,v=o.arrivalDateTime,m=e.handleChange,E=r.map((function(e){return e.visitId})),O=Object.fromEntries(r.map((function(e){return[e.visitId,e]}))),y=Ut({values:{rideDeparture:b,rideArrival:v},handleChange:m}),g=y.rideArrivalField,h=y.rideDepartureField,I=y.isSameDateField,j=Object(i.useCallback)((function(e){var t=e.option;if(t===kt)return a.locationName;var r=O[t];return r?r.locationName:"Не указано"}),[O]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:t.optionGroup},n.a.createElement(w,{name:"departureVisitId",caption:"Отправление из",inputId:"RideEditCard-departureVisitId",optionRender:j,hasNullOption:!1,options:[kt].concat(xt(E)),value:s,onChange:m}),n.a.createElement(w,{name:"arrivalVisitId",caption:"Прибытие в",inputId:"RideEditCard-arrivalVisitId",hasNullOption:!1,optionRender:j,options:[].concat(xt(E),[kt]),onChange:m,value:l})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(w,{name:"vehicleType",caption:"Транспорт",inputId:"RideEditCard-VehicleTypeOptions",optionRender:Ft,options:Object.values(It.VEHICLE_TYPES),onChange:m,value:c}),n.a.createElement(w,{name:"rideType",caption:"Тип поездки",inputId:"RideEditCard-RideTypeOptions",optionRender:Mt,options:Object.values(It.RIDE_TYPES),onChange:m,value:u})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(w,{name:"rideClass",caption:"Класс поездки",inputId:"RideEditCard-RideClassOptions",optionRender:Bt,options:Object.values(It.RIDE_CLASSES),onChange:m,value:p}),n.a.createElement(w,{name:"rideOccupation",caption:"Роль",inputId:"RideEditCard-RideOccupationOptions",optionRender:Gt,options:Object.values(It.RIDE_OCCUPATION),onChange:m,value:f})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(Vt.a,{name:"departureDateTime",autoOk:!0,className:t.option,label:"Дата отправления",value:h.value,onChange:h.onChange,format:"dd/MM/yyyy"}),I.value?n.a.createElement(Dt.a,{control:n.a.createElement(wt.a,{checked:I.value,onChange:function(e){return I.onChange(e.target.checked)}}),label:"Прибытие в тот же день"}):n.a.createElement(Vt.a,{name:"arrivalDateTime",autoOk:!0,className:t.option,label:"Дата прибытия",value:g.value,onChange:g.onChange,format:"dd/MM/yyyy"})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(Nt.a,{name:"departureDateTime",ampm:!1,autoOk:!0,className:t.option,label:"Время отправления",value:h.value,onChange:h.onChange}),n.a.createElement(Nt.a,{name:"arrivalDateTime",ampm:!1,autoOk:!0,className:t.option,label:"Время прибытия",value:g.value,onChange:g.onChange})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(S.a,{name:"rideComment",className:t.option,label:"Комментарий",multiline:!0,onChange:m,rows:1,rowsMax:12,value:d})))};Wt.propTypes={className:o.a.string,classes:o.a.objectOf(o.a.string).isRequired},Wt.defaultProps={className:void 0};var Kt=Object(I.a)({optionGroup:{display:"flex"},option:{flexGrow:"1"}})(Wt);function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var zt=function(e){var t=e.availableVisits,r=e.initialState,i=e.children,a=e.className,o=e.onSubmit,s=e.originLocation,l=$t(n.a.useState(!1),2),c=l[0],u=l[1],d=function(){return u(!1)};return n.a.createElement("div",{className:a},n.a.createElement(Te.a,{"data-sort-handler":"disabled",size:"small",variant:"outlined",color:"primary",onClick:function(){return u(!0)}},i),c&&n.a.createElement(Ct,{initialValues:r,enableReinitialize:!0,onSubmit:function(e){o(e),d()},onReject:d,title:"Транспорт",description:"Как вы добрались в место назначения и как уехали из него?"},n.a.createElement(Kt,{availableVisits:t,originLocation:s})))};zt.propTypes={availableVisits:o.a.arrayOf(o.a.shape(je.default)),initialState:o.a.shape(g.default).isRequired,children:o.a.node.isRequired,className:o.a.string,onSubmit:o.a.func.isRequired,originLocation:o.a.shape(he.default).isRequired},zt.defaultProps={className:void 0,availableVisits:[]};var Jt=zt;function Xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zt=function(e){var t=e.availableVisits,r=e.originLocation,i=e.classes,a=e.className,o=e.defaultArrivalVisitId,s=e.defaultDepartureVisitId,l=e.isEditable,c=e.onRideUpdate,u=e.ride,d=e.ride,p=d.rideId,f=d.vehicleType,b=d.rideType,v=d.arrivalDateTime,m=d.departureDateTime,E=e.showDetails,O=p?u:Object(St.a)({defaultDepartureVisitId:s,defaultArrivalVisitId:o}),y=p?function(e){switch(e){case It.VEHICLE_TYPES.CAR:return We.a;case It.VEHICLE_TYPES.TRAIN:return rt.a;case It.VEHICLE_TYPES.AIRCRAFT:return Je.a;case It.VEHICLE_TYPES.BUS:case It.VEHICLE_TYPES.TROLLEY:case It.VEHICLE_TYPES.CITY_BUS:return Be.a;case It.VEHICLE_TYPES.MOTORHOME:case It.VEHICLE_TYPES.JITNEY:return ot.a;case It.VEHICLE_TYPES.LOCAL_TRAIN:return rt.a;case It.VEHICLE_TYPES.FERRY:return Fe.a;case It.VEHICLE_TYPES.BIKE:return xe.a;case It.VEHICLE_TYPES.BY_FEET:return lt.a;case It.VEHICLE_TYPES.MOTORBIKE:return Qe.a;case It.VEHICLE_TYPES.TRUCK:return nt.a;case It.VEHICLE_TYPES.ALL_TERRAIN_VEHICLE:return et.a;case It.VEHICLE_TYPES.TRAM:return ut.a;case It.VEHICLE_TYPES.TAXI:return pt.a;case It.VEHICLE_TYPES.SUBWAY:return bt.a;case It.VEHICLE_TYPES.PUBLIC_TRANSPORT:return mt.a;case It.VEHICLE_TYPES.ROPEWAY:case It.VEHICLE_TYPES.FUNICULAR:default:return $e.a}}(f):gt.a,g=n.a.createElement(y,{className:i.icon}),h=l?n.a.createElement(Jt,{className:i.editDialogTrigger,initialState:O,availableVisits:t,onSubmit:function(e){return c(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(r),!0).forEach((function(t){Qt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},u,{},e))},originLocation:r},g):g;return n.a.createElement("div",{className:qe()(a,i.container)},b===It.RIDE_TYPES.HITCH_HIKING&&n.a.createElement(Ot.a,{className:i.icon}),h,Boolean(p&&E)&&n.a.createElement("span",{className:i.details},Object(ht.a)({departureDateTime:m,arrivalDateTime:v})))};Zt.propTypes={availableVisits:o.a.arrayOf(o.a.shape(je.default)),classes:o.a.objectOf(o.a.string).isRequired,className:o.a.string,defaultArrivalVisitId:o.a.number,defaultDepartureVisitId:o.a.number,isEditable:o.a.bool,onRideUpdate:o.a.func.isRequired,originLocation:o.a.shape(he.default).isRequired,ride:o.a.shape(g.default),showDetails:o.a.bool},Zt.defaultProps={availableVisits:[],className:void 0,defaultArrivalVisitId:void 0,defaultDepartureVisitId:void 0,isEditable:!1,ride:{},showDetails:!1};var er=Object(I.a)({container:{display:"inline-block"},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"},details:{marginRight:"4px"},editDialogTrigger:{display:"inline-block"}})(Zt),tr=r(978),rr=r.n(tr),ir=function(e){var t=e.className,r=e.classes;return n.a.createElement(rr.a,{className:qe()(t,r.dragHandler),"data-sort-handler":"enabled"})};ir.propTypes={className:o.a.string,classes:o.a.objectOf(o.a.string).isRequired},ir.defaultProps={className:void 0};var nr=Object(I.a)({dragHandler:{cursor:"grab",marginLeft:"4px",position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-block"}})(ir);function ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var or=function(e){var t,r,i=e.visit,a=e.visit,o=(a=void 0===a?{}:a).visitId,s=a.arrivalRideId,l=a.departureRideId,c=e.ridesDict,u=e.classes,d=e.prevVisitId,p=e.nextVisitId,f=e.tripVisitsList,b=e.isEditable,v=e.isSortable,m=e.isSorting,E=e.isArrivalRideMatch,O=e.isDepartureRideMatch,y=e.onRideUpdate,g=e.onVisitUpdate,h=e.originLocation,I=e.locationsPath,S=b&&!E,j=b&&!O;return n.a.createElement("div",{className:u.container},n.a.createElement(er,{availableVisits:f,defaultDepartureVisitId:d,defaultArrivalVisitId:o,visitId:o,isEditable:b,className:qe()(u.ride,(t={},ar(t,u.alwaysVisible,m||!O),ar(t,u.warning,S),t)),ride:c[s],showDetails:m||S,onRideUpdate:y,originLocation:h}),n.a.createElement(He.a,{classes:{editIcon:u.visibleOnlyOnHover},isEditable:b,onVisitUpdate:g,visit:i,locationsPath:I}),(!O||m)&&n.a.createElement(er,{className:qe()(u.ride,(r={},ar(r,u.alwaysVisible,m||!O),ar(r,u.warning,j),r)),ride:c[l],availableVisits:f,defaultDepartureVisitId:o,defaultArrivalVisitId:p,isEditable:b&&!O,showDetails:m||j,onRideUpdate:y,originLocation:h}),v&&!m&&n.a.createElement(nr,{className:u.visibleOnlyOnHover}))};or.propTypes={classes:o.a.objectOf(o.a.string).isRequired,isArrivalRideMatch:o.a.bool,isDepartureRideMatch:o.a.bool,isEditable:o.a.bool,isSortable:o.a.bool,isSorting:o.a.bool,nextVisitId:o.a.number,onRideUpdate:o.a.func.isRequired,onVisitUpdate:o.a.func.isRequired,originLocation:o.a.shape(he.default).isRequired,prevVisitId:o.a.number,ridesDict:o.a.objectOf(o.a.shape(g.default)).isRequired,tripVisitsList:o.a.arrayOf(o.a.shape(je.default)),visit:o.a.shape(je.default).isRequired,locationsPath:o.a.instanceOf(Le.a).isRequired},or.defaultProps={isArrivalRideMatch:!0,isDepartureRideMatch:!0,isEditable:!1,isSortable:!1,isSorting:!1,nextVisitId:null,prevVisitId:null,tripVisitsList:[]};var sr,lr=Object(I.a)({alwaysVisible:{},container:{position:"relative","&:hover $editDialogTrigger":{visibility:"visible"},"&:hover $visibleOnlyOnHover":{visibility:"visible"}},editDialogTrigger:{marginLeft:"4px",position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-block",visibility:"hidden"},visibleOnlyOnHover:{visibility:"hidden"},ride:{},warning:{color:"red"}})(or),cr=r(188);function ur(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dr=(ur(sr={},cr.VISIT_TYPES.TRANSIT,"Транзит"),ur(sr,cr.VISIT_TYPES.REGULAR,"Посещение"),ur(sr,cr.VISIT_TYPES.BASE_CAMP,"Базовый лагерь"),ur(sr,cr.VISIT_TYPES.RELOCATION,"Переезд"),sr);function pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function fr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var vr=function(e){var t=e.option;return t?dr[t]:"Не указан"},mr=function(e){var t=e.visitType,r=e.visitComment,n=e.locationId,a=e.locationName,o=e.geonameId,s=br(Object(i.useState)({visitComment:r,visitType:t,locationId:n,locationName:a,geonameId:o}),2),l=s[0],c=s[1];return{visitState:l,setVisitState:function(e){return c(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(r),!0).forEach((function(t){fr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},l,{},e))}}},Er=function(e){var t=e.classes,r=e.visitState,a=r.visitType,o=r.visitComment,s=r.locationName,l=e.setVisitState,c=Object(i.useCallback)((function(e){var t=e.target.value;return l({visitType:t})}),[l]),u=Object(i.useCallback)((function(e){var t=e.geonameId;return l({geonameId:t})}),[l]),d=Object(i.useCallback)((function(e){var t=e.target.value;return l({visitComment:t})}),[l]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:t.optionGroup},n.a.createElement(se,{classes:{root:t.suggest},textFieldProps:{label:"Место посещения"},initialInputValue:s,inputProps:{placeholder:"Населенный пункт..."},onChange:u,sourceProps:{filterField:"locationName",modelName:"geonames",domain:"visitEditCard.geoname",queryFormat:ae,resolveDetails:function(e){return[e.countryName,e.regionName].filter(Boolean).join(", ")}}})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(w,{caption:"Тип посещения",inputId:"VisitEditCard-VisitTypeOptions",onChange:c,optionRender:vr,options:Object.values(cr.VISIT_TYPES),hasNullOption:!0,value:a})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(S.a,{label:"Комментарий",fullWidth:!0,value:o,onChange:d,multiline:!0,rows:1,rowsMax:12})))};Er.propTypes={className:o.a.string,classes:o.a.objectOf(o.a.string).isRequired},Er.defaultProps={className:void 0};var Or=Object(I.a)({optionGroup:{display:"flex",minWidth:"400px"},suggest:{flexGrow:1}})(Er);function yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var gr=function(e){var t=e.initialState,r=e.children,i=e.onSubmit,a=mr(t),o=a.visitState,s=a.setVisitState,l=yr(n.a.useState(!1),2),c=l[0],u=l[1],d=function(){return u(!1)};return n.a.createElement(n.a.Fragment,null,n.a.cloneElement(r,{onClick:function(){return u(!0)}}),c&&n.a.createElement(v.a,{transitionDuration:500,open:c,onClose:d,"aria-labelledby":"form-dialog-title"},n.a.createElement(y.a,{id:"form-dialog-title"},"Посещение"),n.a.createElement(E.a,null,n.a.createElement(O.a,null,"Редактирование посещения"),n.a.createElement(Or,{visitState:o,setVisitState:s})),n.a.createElement(m.a,null,n.a.createElement(b.a,{onClick:d,color:"secondary"},"Отмена"),n.a.createElement(b.a,{onClick:function(){i(o),d()},color:"primary"},"Сохранить"))))};gr.propTypes={initialState:o.a.shape(g.default).isRequired,children:o.a.node.isRequired,onSubmit:o.a.func.isRequired},gr.defaultProps={};var hr=gr;var Ir=function(e){var t,r,i,a=e.classes,o=e.isSorting,s=e.onVisitUpdate;return n.a.createElement("div",{className:qe()((t={},r=a.draggableContainer,i=!o,r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t))},n.a.createElement(hr,{initialState:{visitType:null,visitComment:""},onSubmit:s},n.a.createElement(b.a,{"data-sort-handler":"disabled",size:"small",variant:"outlined",color:"primary"},n.a.createElement("span",null,"Добавить посещение"))),n.a.createElement(nr,{className:a.visibleOnlyOnHover}))};Ir.propTypes={classes:o.a.objectOf(o.a.string).isRequired,isSorting:o.a.bool,onVisitUpdate:o.a.func.isRequired},Ir.defaultProps={isSorting:!1};var Sr=Object(I.a)({visibleOnlyOnHover:{visibility:"hidden"},draggableContainer:{position:"relative","&:hover $visibleOnlyOnHover":{visibility:"visible"}}})(Ir);function jr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Rr(){return(Rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function Cr(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Dr=Object(Pe.SortableContainer)((function(e){var t=e.children;return n.a.createElement("div",null,t)})),wr=Object(Pe.SortableElement)((function(e){var t=e.replaceWithNode,r=e.onVisitUpdate,i=Cr(e,["replaceWithNode","onVisitUpdate"]);return t||n.a.createElement(lr,Rr({onVisitUpdate:r},i))})),Vr=function(e){var t=e.classes,r=e.countriesDict,a=e.locationsDict,o=e.onRideUpdate,s=e.onVisitsOrderUpdate,l=e.ridesDict,c=e.trip,u=e.trip,d=u.tripId,p=u.originLocationId,f=u.tripName,b=u.tripType,v=e.tripVisitsList,m=e.onTripUpdate,E=e.onVisitUpdate,O=e.locationsPath,y=Tr(Object(i.useState)(!1),2),g=y[0],h=y[1],I=Tr(Object(i.useState)(v.length),2),S=I[0],j=I[1],P=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return[].concat(Ne(e.slice(0,r)),[t],Ne(e.slice(r)))}(v,{isItVisitCreatorControl:!0},S).map((function(e,t){var r=e.isItVisitCreatorControl,i=e.visitId;if(r)return n.a.createElement(wr,{key:"visitCreator",index:t,replaceWithNode:n.a.createElement(Sr,{isSorting:g,onVisitUpdate:function(e){return E(e,{indexInCollection:S,collection:v,tripId:d})}})});var s=Tr(function(e,t,r){var i=t-1-(t>r?1:0),n=t+1-(t+1>r?1:0);return[i>=0?e[i]:null,n<e.length?e[n]:null]}(v,t,S),2),c=s[0],u=s[1],f=(c||{}).visitId,b=(u||{}).visitId;return n.a.createElement(wr,{index:t,isArrivalRideMatch:Object(Ae.a)(c,e),isDepartureRideMatch:Object(Ae.a)(e,u),isEditable:!0,isSortable:!0,isSorting:g,key:i,nextVisitId:b,onRideUpdate:o,onVisitUpdate:E,originLocation:a[p],prevVisitId:f,ridesDict:l,tripVisitsList:v,visit:e,locationsPath:O})})),T=n.a.createElement(Dr,{onSortEnd:function(e,t){h(!1);var r=e.oldIndex,i=e.newIndex;r===S?j(i):s(t,{oldIndex:r>S?r-1:r,newIndex:i>S?i-1:i,collection:v})},shouldCancelStart:Ve,updateBeforeSortStart:function(){return h(!0)},lockAxis:"y",lockToContainerEdges:!0},P),R=n.a.createElement(_e.a,{location:a[p],Icon:Ce.a,locationsPath:O}),C=n.a.createElement(ge,{initialState:c,onSubmit:function(e){return m(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(r),!0).forEach((function(t){Pr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},c,{},e))}},n.a.createElement(Te.a,{"data-sort-handler":"disabled",size:"small",variant:"outlined",color:"primary"},n.a.createElement(we.a,{className:t.visibleOnlyOnHover}))),D=v[v.length-1],w=v[v.length-2],V=D||{},N=V.departureRideId,L=V.visitId,A=b===le.TRIP_TYPES.RELOCATION,_=A?null:n.a.createElement(er,{availableVisits:v,defaultDepartureVisitId:L,isEditable:!0,onRideUpdate:o,originLocation:a[p],ride:l[N],showDetails:g||Object(Ae.a)(w,D)});return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",{className:t.container},Object(Ie.b)(v,r,a[p]&&a[p].countryId,f),C),R,T,!A&&n.a.createElement(n.a.Fragment,null,_,R))};Vr.propTypes={classes:o.a.objectOf(o.a.string).isRequired,tripIndex:o.a.number.isRequired,locationsDict:o.a.objectOf(o.a.shape(he.default)).isRequired,onRideUpdate:o.a.func.isRequired,onTripUpdate:o.a.func.isRequired,onVisitsOrderUpdate:o.a.func.isRequired,ridesDict:o.a.objectOf(o.a.shape(g.default)).isRequired,trip:o.a.shape(Se.default).isRequired,tripVisitsList:o.a.arrayOf(o.a.shape(je.default)),tripStoryPath:o.a.instanceOf(Le.a).isRequired,locationsPath:o.a.instanceOf(Le.a).isRequired},Vr.defaultProps={tripVisitsList:[]};var Nr=Object(I.a)({container:{"&:hover $visibleOnlyOnHover":{visibility:"visible"}},visibleOnlyOnHover:{visibility:"hidden"}})(Vr);function Lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(r),!0).forEach((function(t){_r(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yr,qr=function(e){var t=e.orderResolver;return function(e){var r=e.index,i=e.collection;if(!i.length)return 100;if(r<=0)return t(i[0])-1;if(r>=i.length-1)return t(i[i.length-1])+1;var n=t(i[r-1]),a=t(i[r]);return(n+a)/2+(Math.random()-.5)*(a-n)/2}}({orderResolver:function(e){return e.orderInTrip}}),Hr=function(e){var t=e.visit,r=e.visit.visitId,i=e.tripId,n=e.indexInCollection,a=e.collection;return{domain:"tripsPage.visits.visit",modelName:"visits",query:{id:r,body:Ar({},t,{tripId:i,orderInTrip:n||0===n?qr({index:n,collection:a}):void 0})}}};function Ur(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xr=Object(c.a)(Ie.groupAndSortVisitsByTrips);function kr(e){var t=e.match.params,r=t.userAlias,a=t.strTripId,o=e.isTripsComplete,s=e.userTrips,l=(s=void 0===s?{}:s).data,c=void 0===l?[]:l,d=e.userVisits,f=(d=void 0===d?{}:d).data,b=void 0===f?[]:f,v=e.countriesDict,m=e.locationsDict,E=e.ridesDict,O=e.request,y=e.invalidateRequest,g=Object(p.c)(),h=g.isAuthenticated,I=g.userAlias,S=Object(u.d)().travel,j=S.tripStory,P=S.locations,T=Object(i.useCallback)((function(e,t){var r=t.oldIndex,i=t.newIndex,n=t.collection;r!==i&&O(function(e){var t=e.oldIndex,r=e.newIndex,i=e.collection;return{domain:"tripsPage.visits.sort",modelName:"visits",query:{id:i[t].visitId,body:{orderInTrip:qr({index:r,collection:i})}}}}({oldIndex:r,newIndex:i,collection:n}))}),[O]),R=Object(i.useCallback)((function(e){return O(function(e){var t=e.ride;return{domain:"tripsPage.visits.rides",modelName:"rides",query:{id:e.ride.rideId,body:t}}}({ride:e}))}),[O]),C=Object(i.useCallback)((function(e){return O(function(e){var t=e.trip;return{domain:"tripsPage.visits.trips",modelName:"trips",query:{id:e.trip.tripId,body:t}}}({trip:e})).then((function(){return y({domain:"tripsPage.trips"})}))}),[O]),D=Object(i.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.indexInCollection,i=t.collection,n=t.tripId;return O(Hr({visit:e,tripId:n,indexInCollection:r,collection:i})).then((function(){return y({domain:"tripsPage.visits"})}))}),[O]),w=parseInt(a,10),V=w&&c.find((function(e){return e.tripId===w}));if(!o||!V||!(h&&I===r))return null;var N=xr(b),L=V.tripId;return n.a.createElement(Nr,{locationsDict:m,countriesDict:v,onRideUpdate:R,onTripUpdate:C,onVisitUpdate:D,onVisitsOrderUpdate:T,ridesDict:E,trip:V,tripVisitsList:N[L],tripStoryPath:j,locationsPath:P})}kr.propTypes={match:o.a.shape({params:o.a.shape({userAlias:o.a.string.isRequired}).isRequired}).isRequired,request:o.a.func.isRequired,isTripsComplete:o.a.bool.isRequired,trips:o.a.shape({data:o.a.arrayOf(o.a.shape(Se.default))}).isRequired,visits:o.a.shape({data:o.a.arrayOf(o.a.shape(je.default))}).isRequired,ridesDict:o.a.objectOf(o.a.shape(g.default)).isRequired,locationsDict:o.a.objectOf(o.a.shape(he.default)).isRequired};t.default=l()(Object(f.b)({domain:"tripsPage",mapStateToProps:function(e){return{countriesDict:Object(d.d)(e,"countries"),locationsDict:Object(d.d)(e,"locations"),ridesDict:Object(d.d)(e,"rides"),isTripsComplete:Object(d.h)(e,"tripsPage.userTrips").isComplete}},requirementsConfig:(Yr={},Ur(Yr,f.a.COMMON.COUNTRIES,!0),Ur(Yr,f.a.USER.TRIPS,!0),Ur(Yr,f.a.USER.LOCATIONS,!0),Ur(Yr,f.a.USER.VISITS,!0),Ur(Yr,f.a.USER.RIDES,!0),Yr)}))(kr)},1036:function(e,t,r){"use strict";r.r(t);var i=r(0),n=r.n(i),a=r(2),o=r.n(a),s=r(31),l=r(101),c=r(743),u=r(71),d=r(739),p=r(9),f=r(262),b=r.n(f),v=r(869),m=r.n(v),E=r(118),O=r(867),y=r(184),g=r(182),h=r(187),I=r(186),S=r(768),j=r(183),P=r(880);var T=r(134),R=r.n(T),C=r(868),D=r(818),w=r.n(D),V=r(817),N=r.n(V),L=r(815),A=r.n(L),_=r(812),Y=r.n(_),q=r(826),H=r.n(q),U=r(814),x=r.n(U),k=r(820),F=r.n(k),M=r(821),B=r.n(M),G=r(813),W=r.n(G),K=r(776),$=r.n(K),z=r(816),J=r.n(z),X=r(819),Q=r.n(X),Z=r(822),ee=r.n(Z),te=r(823),re=r.n(te),ie=r(824),ne=r.n(ie),ae=r(825),oe=r.n(ae),se=r(811),le=r.n(se),ce=r(810),ue=r.n(ce),de=r(763),pe=r(75),fe=function(e){var t=e.classes,r=e.className,i=e.ride,a=i.rideId,o=i.vehicleType,s=i.rideType,l=i.arrivalDateTime,c=i.departureDateTime,u=e.showDetails,d=a?function(e){switch(e){case pe.VEHICLE_TYPES.CAR:return Y.a;case pe.VEHICLE_TYPES.TRAIN:return W.a;case pe.VEHICLE_TYPES.AIRCRAFT:return x.a;case pe.VEHICLE_TYPES.BUS:case pe.VEHICLE_TYPES.TROLLEY:case pe.VEHICLE_TYPES.CITY_BUS:return A.a;case pe.VEHICLE_TYPES.MOTORHOME:case pe.VEHICLE_TYPES.JITNEY:return J.a;case pe.VEHICLE_TYPES.LOCAL_TRAIN:return W.a;case pe.VEHICLE_TYPES.FERRY:return N.a;case pe.VEHICLE_TYPES.BIKE:return w.a;case pe.VEHICLE_TYPES.BY_FEET:return Q.a;case pe.VEHICLE_TYPES.MOTORBIKE:return F.a;case pe.VEHICLE_TYPES.TRUCK:return $.a;case pe.VEHICLE_TYPES.ALL_TERRAIN_VEHICLE:return B.a;case pe.VEHICLE_TYPES.TRAM:return ee.a;case pe.VEHICLE_TYPES.TAXI:return re.a;case pe.VEHICLE_TYPES.SUBWAY:return ne.a;case pe.VEHICLE_TYPES.PUBLIC_TRANSPORT:return oe.a;case pe.VEHICLE_TYPES.ROPEWAY:case pe.VEHICLE_TYPES.FUNICULAR:default:return H.a}}(o):ue.a;return n.a.createElement("div",{className:R()(r,t.container)},s===pe.RIDE_TYPES.HITCH_HIKING&&n.a.createElement(le.a,{className:t.icon}),n.a.createElement(d,{className:t.icon}),Boolean(a&&u)&&n.a.createElement("span",{className:t.details},Object(de.a)({departureDateTime:c,arrivalDateTime:l})))};fe.propTypes={classes:o.a.objectOf(o.a.string).isRequired,className:o.a.string,ride:o.a.shape(g.default),showDetails:o.a.bool},fe.defaultProps={className:void 0,ride:{},showDetails:!1};var be=Object(p.a)({container:{display:"inline-block"},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"},details:{marginRight:"4px"},editDialogTrigger:{display:"inline-block"}})(fe);function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var me=function(e){var t,r,i=e.visit,a=e.visit,o=(a=void 0===a?{}:a).visitId,s=a.arrivalRideId,l=a.departureRideId,c=e.ridesDict,u=e.classes,d=e.isEditable,p=e.isArrivalRideMatch,f=e.isDepartureRideMatch,b=e.locationsPath,v=d&&!p,m=d&&!f;return n.a.createElement("div",{className:u.container},n.a.createElement(be,{visitId:o,className:R()(u.ride,(t={},ve(t,u.alwaysVisible,!f),ve(t,u.warning,v),t)),ride:c[s],showDetails:v}),n.a.createElement(C.a,{classes:{editIcon:u.visibleOnlyOnHover},visit:i,locationsPath:b}),!f&&n.a.createElement(be,{className:R()(u.ride,(r={},ve(r,u.alwaysVisible,!f),ve(r,u.warning,m),r)),ride:c[l],showDetails:m}))};me.propTypes={classes:o.a.objectOf(o.a.string).isRequired,isArrivalRideMatch:o.a.bool,isDepartureRideMatch:o.a.bool,isEditable:o.a.bool,ridesDict:o.a.objectOf(o.a.shape(g.default)).isRequired,visit:o.a.shape(j.default).isRequired,locationsPath:o.a.instanceOf(E.a).isRequired},me.defaultProps={isArrivalRideMatch:!0,isDepartureRideMatch:!0,isEditable:!1,tripVisitsList:[]};var Ee=Object(p.a)({alwaysVisible:{},container:{position:"relative","&:hover $editDialogTrigger":{visibility:"visible"},"&:hover $visibleOnlyOnHover":{visibility:"visible"}},editDialogTrigger:{marginLeft:"4px",position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-block",visibility:"hidden"},visibleOnlyOnHover:{visibility:"hidden"},ride:{},warning:{color:"red"}})(me);function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ye=function(e){var t=e.classes,r=e.countriesDict,i=e.isEditable,a=e.locationsDict,o=e.ridesDict,s=e.trip,l=s.originLocationId,c=s.tripName,p=s.tripType,f=e.tripVisitsList,v=e.tripEditUrl,E=e.tripStoryUrl,y=e.locationsPath,g=f.length,h=f.map((function(e,t){var r=e.visitId,a=Oe(function(e,t,r){var i=t-1-(t>r?1:0),n=t+1-(t+1>r?1:0);return[i>=0?e[i]:null,n<e.length?e[n]:null]}(f,t,g),2),s=a[0],l=a[1];return n.a.createElement(Ee,{isArrivalRideMatch:Object(O.a)(s,e),isDepartureRideMatch:Object(O.a)(e,l),key:r,ridesDict:o,isEditable:i,visit:e,locationsPath:y})})),j=n.a.createElement(P.a,{location:a[l],Icon:b.a,locationsPath:y}),T=n.a.createElement(d.a,{"data-sort-handler":"disabled",size:"small",variant:"outlined",color:"primary",component:u.b,to:v},n.a.createElement(m.a,{className:t.visibleOnlyOnHover})),R=(f[f.length-1]||{}).departureRideId,C=p===I.TRIP_TYPES.RELOCATION,D=C?null:n.a.createElement(be,{ride:o[R],showDetails:!1}),w=function(e,t){e.some((function(e){var r=e.visitComment,i=e.arrivalRideId,n=e.departureRideId;if(r)return!0;if((t[i]||{}).rideComment)return!0;var a=(t[n]||{}).rideComment;return Boolean(a)}))}(f,o);return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",{className:t.container},Object(S.b)(f,r,a[l]&&a[l].countryId,c),i&&T),j,n.a.createElement("div",null,h),!C&&n.a.createElement(n.a.Fragment,null,D,j),w&&n.a.createElement("div",null,n.a.createElement(u.b,{to:E},"Заметки")))};ye.propTypes={classes:o.a.objectOf(o.a.string).isRequired,isEditable:o.a.bool,locationsDict:o.a.objectOf(o.a.shape(y.default)).isRequired,ridesDict:o.a.objectOf(o.a.shape(g.default)).isRequired,trip:o.a.shape(h.default).isRequired,tripVisitsList:o.a.arrayOf(o.a.shape(j.default)),locationsPath:o.a.instanceOf(E.a).isRequired,tripEditUrl:o.a.string.isRequired,tripStoryUrl:o.a.string.isRequired},ye.defaultProps={tripVisitsList:[]};var ge=Object(p.a)({container:{"&:hover $visibleOnlyOnHover":{visibility:"visible"}},visibleOnlyOnHover:{visibility:"hidden"}})(ye);function he(e){var t=e.match.params,r=t.userAlias,i=t.strTripId,a=Object(l.c)(),o=a.isAuthenticated,u=a.userAlias,d=Object(s.d)().travel,p=d.tripStory,f=d.locations,b=d.tripEdit,v=Object(c.a)({userAlias:r}),m=v.isError,E=v.isPending,O=v.tripsIds,y=v.tripsDict,g=v.countriesDict,h=v.locationsDict,I=v.visitsDict,S=v.ridesDict,j=parseInt(i,10),P=(j?O.filter((function(e){return e===j})):O).map((function(e){return y[e]})).filter(Boolean),T=o&&u===r;return m?n.a.createElement("div",null,"...Error"):E?n.a.createElement("div",null,"...Loading"):n.a.createElement(n.a.Fragment,null,P.map((function(e){var t=e.tripId;return n.a.createElement("div",{key:t},n.a.createElement(ge,{locationsDict:h,countriesDict:g,ridesDict:S,trip:e,tripVisitsList:e.visits.map((function(e){return I[e]})),isEditable:T,tripStoryUrl:p.toUrl({strTripId:String(t),userAlias:r}),locationsPath:f,tripEditUrl:b.toUrl({strTripId:String(t),userAlias:r})}))})))}he.propTypes={match:o.a.shape({params:o.a.shape({userAlias:o.a.string.isRequired}).isRequired}).isRequired};t.default=he},743:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var i=r(53),n=r(760),a=r.n(n),o=r(774),s=r.n(o),l=r(762),c=r.n(l),u=r(116),d=r(10),p=r(751),f=r(747),b=r(752);function v(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function m(e){var t=e.userAlias,r=function(e){var t=e.userAlias;return Object(u.i)({domain:"travel.trips-".concat(t),isProvision:!0,modelName:"trips",observe:t,query:{userAlias:t,navigation:{isDisabled:!0}}})}({userAlias:t}),n=Object(p.a)({domain:"travel.trips-".concat(t,".user"),userAlias:t}),a=n.user,o=(a=void 0===a?{}:a).locationsRating,s=void 0===o?{}:o,l=v(n,["user"]),m=(Object(d.o)(r)||{}).data,O=void 0===m?[]:m,y=Object(i.d)((function(e){return{tripsDict:Object(u.d)(e,"trips")||{},visitsDict:Object(u.d)(e,"visits")||{},ridesDict:Object(u.d)(e,"rides")||{},countriesDict:Object(u.d)(e,"countries")||{},locationsDict:Object(u.d)(e,"locations")||{}}})),g=y.tripsDict,h=y.visitsDict,I=y.ridesDict,S=y.countriesDict,j=y.locationsDict,P=Array.from(new Set(O.flatMap((function(e){var t;return(null===(t=g[e])||void 0===t?void 0:t.visits)||[]})))),T=Array.from(new Set(O.flatMap((function(e){var t;return(null===(t=g[e])||void 0===t?void 0:t.rides)||[]})))),R=Array.from(new Set(P.flatMap((function(e){var t;return(null===(t=h[e])||void 0===t?void 0:t.countryId)||[]})))),C=Array.from(new Set(P.flatMap((function(e){var t;return(null===(t=h[e])||void 0===t?void 0:t.locationId)||[]})))),D=Object(f.a)(),w=Object(b.a)({domain:"travel.locations-".concat(t),locationsIds:C}),V=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{updatesCounter:c()(t.map(d.p)),isReady:t.every(d.i),isPending:t.some(d.h),isValid:t.every(d.k),error:t.find(d.g),errors:t.map(d.f).filter(Boolean)}}(r,l,D,w);return{tripsProvision:r,countriesProvision:D,locationsProvision:w,isError:V.isError,isValid:V.isValid,isReady:V.isReady,isPending:V.isPending,tripsIds:O,tripsDict:g,visitsIds:P,visitsDict:h,ridesIds:T,ridesDict:I,ridesStats:E(T,I),locationsIds:C,locationsDict:j,locationsRating:s,countriesIds:R,countriesDict:S}}function E(e,t){return{earliestDeparture:new Date(s()(e.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.departureDateTime.getTime()})))),latestArrival:new Date(a()(e.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.arrivalDateTime.getTime()}))))}}},747:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(116),n=r(10);function a(){var e=Object(i.i)({domain:"travel.countries",isProvision:!0,modelName:"countries",query:{navigation:{isDisabled:!0}}}),t=(Object(n.o)(e)||{}).data;return{countriesIds:void 0===t?[]:t,isReady:Object(n.i)(e),isLoading:Object(n.h)(e),isError:Object(n.g)(e),counters:e.counters}}},748:function(e,t,r){"use strict";var i=r(0),n=r.n(i),a=r(258),o=function(e){return function(t){var r=t.provision,i=(r=void 0===r?{}:r).isPending,o=void 0===i||i,s=r.hasFallback;return o&&!s?n.a.createElement(a.a,null):n.a.createElement(e,t)}},s=r(116),l=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}};t.a=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return l(s.a.apply(void 0,t),o)(e)}}},751:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(53),n=r(116);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=e.domain,r=e.userAlias,s=Object(i.d)((function(e){return Object(n.f)(e,"users",r)}));return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(n.i)({domain:t,applicableSchemaName:"item",isProvision:!0,modelName:"users",observe:r,condition:Boolean(r),query:{id:r}}),{user:s})}},752:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u}));var i=r(53),n=r(116),a=r(10);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e){var t=e.domain,r=e.locationsIds,o=Object(i.d)((function(e){return Object(n.d)(e,"locations")||{}})),s=r.filter((function(e){return!o[e]})),l=Object(n.i)({domain:t,isProvision:!0,modelName:"locations",observe:r,condition:Boolean(s.length),query:{filter:{id:{comparator:"in",value:s}},navigation:{isDisabled:!0}}});return{locationsDict:o,isReady:Object(a.i)(l),isLoading:Object(a.h)(l),isError:Object(a.g)(l),counters:l.counters}}function u(e){var t=e.domain,r=l(Object(n.j)({domain:t,modelName:"locations",method:"POST"}),2),i=r[0];return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r[1],{submitLocationRating:i})}},763:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return b}));var i=r(263),n=r(862),a=r(863),o=r(46),s=r(773),l=r.n(s),c="d MMMM yyyy",u="d MMMM",d="d";function p(e,t){var r=Object(o.a)(t,c,{locale:l.a});if(Object(i.a)(e,t))return r;var s="";return s=Object(n.a)(e,t)?Object(o.a)(e,d,{locale:l.a}):Object(a.a)(e,t)?Object(o.a)(e,u,{locale:l.a}):Object(o.a)(e,c,{locale:l.a}),"".concat(s,"—").concat(r)}function f(e){return p(e.departureDateTime,e.arrivalDateTime)}function b(e){var t=e.departureDateTime;return p(e.arrivalDateTime,t)}},768:function(e,t,r){"use strict";var i=r(777),n=r.n(i),a=r(764),o=r.n(a),s=function(e,t){var r=t.maxLength,i=t.separator,n=void 0===i?", ":i,a=o()(e),s=a.slice(0,r).join(n);return a.length>r?"".concat(s,"..."):s},l=r(188),c=function(e,t,r,i){if(!e.length)return i;var a=Object.keys(n()(e.filter((function(e){return e.visitType!==l.VISIT_TYPES.TRANSIT})),"countryId"));return 1===a.length?s(e.map((function(e){return e.locationName})),{maxLength:4})||i:s(a.map((function(e){return Number(e)!==r&&t[e]&&t[e].countryName})).filter(Boolean),{maxLength:4})||i};r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return c}));var u=function(e){return e.sort((function(e,t){return e.orderInTrip-t.orderInTrip}))}},835:function(e,t,r){"use strict";var i=r(0),n=r.n(i),a=r(2),o=r.n(a),s=r(20),l=(r(118),r(31)),c=r(101),u=function(e){var t=e.children,r=e.match.params.userAlias,a=Object(l.d)().travel.trips,o=Object(c.c)().userAlias;if(r!==o)return n.a.createElement("span",null,"Пользователь пока еще не внес информацию о своих поездках");var u=Object(i.useCallback)((function(){return n.a.createElement("div",null,n.a.createElement("span",null,"Нам пока ничего не известно о ваших путешествиях. Но очень интересно узнать. Создайте вашу первую поездку, а мы подготовим по ней отчет"),t)}),[t]);return n.a.createElement(s.d,null,n.a.createElement(s.b,{path:a.toUrl({userAlias:o}),component:u}),n.a.createElement(s.a,{to:a.toUrl({userAlias:o})}))};u.propTypes={children:o.a.node,match:o.a.shape({params:o.a.shape({userAlias:o.a.string})}).isRequired},u.defaultProps={children:null},t.a=Object(s.g)(u)},836:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return p}));var i,n,a,o,s=r(75);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=(l(i={},s.RIDE_CLASSES.ECONOMY,"Эконом"),l(i,s.RIDE_CLASSES.COMFORT,"Комфорт"),l(i,s.RIDE_CLASSES.BUSINESS,"Бизнес"),l(i,s.RIDE_CLASSES.FIRST,"Первый"),l(i,s.RIDE_CLASSES.PRIVATE,"Частный"),i),u=(l(n={},s.RIDE_OCCUPATION.PASSENGER,"Пассажир"),l(n,s.RIDE_OCCUPATION.STUFF,"Персонал"),l(n,s.RIDE_OCCUPATION.DRIVER,"Водитель"),n),d=(l(a={},s.RIDE_TYPES.SELF_DRIVE,"Самостоятельная поездка"),l(a,s.RIDE_TYPES.SCHEDULED,"Регулярный рейс"),l(a,s.RIDE_TYPES.CHARTER,"Чартерный рейс"),l(a,s.RIDE_TYPES.TOUR,"Тур"),l(a,s.RIDE_TYPES.CARPOOL,"Попутный автомобиль"),l(a,s.RIDE_TYPES.HITCH_HIKING,"Автостоп"),l(a,s.RIDE_TYPES.DROP_OFF,"Подбросили до места"),a),p=(l(o={},s.VEHICLE_TYPES.CAR,"Автомобиль"),l(o,s.VEHICLE_TYPES.TRAIN,"Поезд"),l(o,s.VEHICLE_TYPES.AIRCRAFT,"Самолет"),l(o,s.VEHICLE_TYPES.BUS,"Автобус"),l(o,s.VEHICLE_TYPES.MOTORHOME,"Дом на колесах"),l(o,s.VEHICLE_TYPES.LOCAL_TRAIN,"Электричка"),l(o,s.VEHICLE_TYPES.FERRY,"Паром"),l(o,s.VEHICLE_TYPES.BIKE,"Велосипед"),l(o,s.VEHICLE_TYPES.BY_FEET,"Пешком"),l(o,s.VEHICLE_TYPES.ROPEWAY,"Канатная дорога"),l(o,s.VEHICLE_TYPES.FUNICULAR,"Фуникулер"),l(o,s.VEHICLE_TYPES.MOTORBIKE,"Мотоцикл"),l(o,s.VEHICLE_TYPES.TRUCK,"Грузовик"),l(o,s.VEHICLE_TYPES.ALL_TERRAIN_VEHICLE,"Вездеход"),l(o,s.VEHICLE_TYPES.TRAM,"Трамвай"),l(o,s.VEHICLE_TYPES.TROLLEY,"Троллейбус"),l(o,s.VEHICLE_TYPES.TAXI,"Такси"),l(o,s.VEHICLE_TYPES.CITY_BUS,"Муниципальный автобус"),l(o,s.VEHICLE_TYPES.JITNEY,"Маршрутное такси"),l(o,s.VEHICLE_TYPES.SUBWAY,"Метро"),l(o,s.VEHICLE_TYPES.PUBLIC_TRANSPORT,"Общественный транспорт"),o)},844:function(e,t,r){"use strict";var i=r(0),n=r.n(i),a=r(20),o=r(136),s=r.n(o),l=r(256),c=r.n(l),u=r(748),d=r(764),p=r.n(d),f=r(116);r.d(t,"a",(function(){return b}));var b={COMMON:{COUNTRIES:"COMMON.COUNTRIES"},USER:{TRIPS:"USER.TRIPS",LOCATIONS:"USER.LOCATIONS",VISITS:"USER.VISITS",RIDES:"USER.RIDES"}};t.b=function(e){var t=e.domain,r=e.mapStateToProps,i=e.requirementsConfig;return function(e){var o=c()(a.g,Object(u.a)((function(e,r){var n=r.countriesDict,a=r.match.params.userAlias,o=function(e,t){return(Object(f.g)(e,"".concat(t,".userTrips"))||{}).data}(e,t),l=s()(i)?i(e,r):i,c={};if(l[b.COMMON.COUNTRIES]&&(c.countries={modelName:"countries",condition:!n||!Object.keys(n).length,query:{navigation:{isDisabled:!0}}}),l[b.USER.TRIPS]&&(c.userTrips={modelName:"trips",observe:a,query:{userAlias:a,navigation:{isDisabled:!0}}}),l[b.USER.LOCATIONS]){var u=function(e,t){var r=Object(f.d)(e,"trips"),i=Object(f.d)(e,"locations"),n=t?p()(t.reduce((function(e,t){var i=r[t];if(i){var n=i.originLocationId;n&&e.push(n)}return e}),[])):[],a=n.filter((function(e){return!i[e]}));return{requiredLocationsIds:n,missingLocationsIds:a}}(e,o),d=u.requiredLocationsIds,v=u.missingLocationsIds;c.userLocations={modelName:"locations",observe:d,condition:v.length,query:{filter:{id:{comparator:"in",value:v}},navigation:{isDisabled:!0}}}}if(l[b.USER.VISITS]){var m=l[b.USER.VISITS].year,E=parseInt(/^\d{4}$/.test(String(m))?m:void 0,10);c.userVisits={modelName:"visits",observe:{userTripsIds:o,year:m},condition:o&&o.length,query:{filter:{trip_id:{comparator:"in",value:o},departure_date_time:E?{comparator:">=",value:"".concat(E,"-01-01")}:void 0,arrival_date_time:E?{comparator:"<",value:"".concat(E+1,"-01-01")}:void 0},navigation:{isDisabled:!0}}}}return l[b.USER.RIDES]&&(c.userRides={modelName:"rides",observe:o,condition:o&&o.length,query:{filter:{trip_id:{comparator:"in",value:o}},navigation:{isDisabled:!0}}}),{domain:t,request:c}}),r))(e);return function(e){return n.a.createElement(o,e)}}}},867:function(e,t,r){"use strict";t.a=function(e,t){return!e||!t||e.departureRideId===t.arrivalRideId}},868:function(e,t,r){"use strict";var i=r(0),n=r.n(i),a=r(2),o=r.n(a),s=r(71),l=r(9),c=r(971),u=r.n(c),d=r(969),p=r.n(d),f=r(776),b=r.n(f),v=r(970),m=r.n(v),E=r(118),O=r(183),y=function(e){var t=e.visit,r=e.classes,i=e.locationsPath;if(!t)return"Не указано";var a=t.locationName,o=t.visitType,l=t.locationId,c=function(e){switch(e){case"Transit":return p.a;case"BaseCamp":return m.a;case"Relocation":return b.a;case"Regular":default:return u.a}}(o);return n.a.createElement("div",{className:r.container},c&&n.a.createElement(c,{className:r.icon}),n.a.createElement(s.b,{to:i.toUrl({strLocationId:String(l)})},a))};y.propTypes={classes:o.a.objectOf(o.a.string).isRequired,visit:o.a.shape(O.default),locationsPath:o.a.instanceOf(E.a).isRequired},y.defaultProps={visit:{}},t.a=Object(l.a)({container:{display:"inline-block",marginRight:"4px"},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"},editIcon:{}})(y)},880:function(e,t,r){"use strict";var i=r(0),n=r.n(i),a=r(2),o=r.n(a),s=r(71),l=r(9),c=r(118),u=r(117),d=r(184),p=function(e){var t=e.location,r=t.locationId,i=t.locationName,a=void 0===i?"unknown":i,o=e.locationsPath,l=e.Icon,c=e.classes,u=o?n.a.createElement(s.b,{to:o.toUrl({strLocationId:String(r)})},a):a;return n.a.createElement("div",{className:c.container},l&&n.a.createElement(l,{className:c.icon}),u)};p.propTypes={classes:o.a.objectOf(o.a.string).isRequired,location:o.a.shape(d.default),Icon:function(e,t,r){if(e[t]&&!Object(u.isValidElementType)(e[t]))return new Error("Invalid prop '".concat(t,"' supplied to '").concat(r,"': the prop is not a valid React component"))},locationsPath:o.a.instanceOf(c.a)},p.defaultProps={location:{},Icon:void 0,locationsPath:void 0};t.a=Object(l.a)({container:{display:"inline-block",marginRight:"4px"},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"}})(p)}}]);
//# sourceMappingURL=travel-Trips-9affd4a4b25259a628a0.js.map