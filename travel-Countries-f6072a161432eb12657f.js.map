{"version":3,"sources":["webpack:///./node_modules/memoize-one/dist/memoize-one.esm.js","webpack:///./src/packages/travel/pages/YearCountryCityPage/utils.js","webpack:///./node_modules/date-fns/esm/differenceInCalendarDays/index.js","webpack:///./src/packages/travel/pages/YearCountryCityPage/blocks/VisitsByLocation.jsx","webpack:///./src/packages/travel/pages/YearCountryCityPage/blocks/LocationsByCountries.jsx","webpack:///./src/packages/travel/pages/YearCountryCityPage/blocks/CountriesByYear.jsx","webpack:///./src/packages/travel/pages/YearCountryCityPage/YearCountryCityPage.jsx","webpack:///./node_modules/lodash/groupBy.js","webpack:///./src/modules/components/loaders/ProvisionLoader.jsx","webpack:///./src/core/connection/withProvision.jsx","webpack:///./node_modules/lodash/_baseForOwn.js","webpack:///./node_modules/lodash/uniq.js","webpack:///./node_modules/lodash/_baseEach.js","webpack:///./node_modules/lodash/_baseUniq.js","webpack:///./node_modules/lodash/_createAggregator.js","webpack:///./node_modules/lodash/_arrayAggregator.js","webpack:///./node_modules/lodash/_baseAggregator.js","webpack:///./node_modules/lodash/_baseFor.js","webpack:///./node_modules/lodash/_createBaseFor.js","webpack:///./node_modules/lodash/_createBaseEach.js","webpack:///./node_modules/lodash/_arrayIncludesWith.js","webpack:///./node_modules/lodash/_createSet.js","webpack:///./src/packages/travel/components/common/WelcomeScreen/WelcomeScreen.jsx","webpack:///./node_modules/lodash/mapValues.js","webpack:///./src/packages/travel/components/common/withTripsData/withTripsData.jsx","webpack:///./src/packages/travel/components/common/withTripsData/selectors.js","webpack:///./node_modules/lodash/fp/mapValues.js","webpack:///./node_modules/lodash/flow.js","webpack:///./node_modules/lodash/fp/groupBy.js","webpack:///./src/packages/travel/components/models/rides/RideEditDialog/localization.js","webpack:///./node_modules/lodash/fp/flow.js","webpack:///./node_modules/lodash/fp/reverse.js","webpack:///./node_modules/lodash/reverse.js","webpack:///./node_modules/lodash/fp/uniqBy.js","webpack:///./node_modules/lodash/uniqBy.js","webpack:///./node_modules/lodash/fp/sortBy.js","webpack:///./node_modules/lodash/sortBy.js","webpack:///./node_modules/lodash/_baseOrderBy.js","webpack:///./node_modules/lodash/_baseMap.js","webpack:///./node_modules/lodash/_baseSortBy.js","webpack:///./node_modules/lodash/_compareMultiple.js","webpack:///./node_modules/lodash/_compareAscending.js","webpack:///./node_modules/lodash/_baseRest.js","webpack:///./node_modules/lodash/_isIterateeCall.js","webpack:///./node_modules/lodash/sum.js","webpack:///./node_modules/lodash/_baseSum.js","webpack:///./node_modules/lodash/max.js","webpack:///./node_modules/lodash/_baseExtremum.js","webpack:///./node_modules/lodash/_baseGt.js","webpack:///./src/packages/travel/pages/VisitsPage/VisitsPage.jsx","webpack:///./src/packages/travel/pages/RidesPage/RidesPage.jsx"],"names":["areInputsEqual","newInputs","lastInputs","length","i","memoize_one_esm","resultFn","isEqual","lastThis","lastResult","lastArgs","calledOnce","newArgs","_i","arguments","this","apply","fpEnhanceVisitsWithDates","_ref","ridesDict","visitsList","map","visit","arrivalRideId","ride","arrivalDateTime","departureDateTime","_objectSpread","year","getFullYear","uniqByLocations","fpUniqBy","uniqByCountries","groupByYears","fpGroupBy","orderByYears","fpSortBy","enhanceVisitsWithCounters","countriesCount","locationsCount","Number","plural","value","_ref2","one","few","many","part","MILLISECONDS_IN_DAY","differenceInCalendarDays","dirtyDateLeft","dirtyDateRight","TypeError","startOfDayLeft","Object","startOfDay","startOfDayRight","timestampLeft","getTime","getTimezoneOffsetInMilliseconds","timestampRight","Math","round","VisitsByLocation","totalDays","sum","max","react_default","a","createElement","concat","propTypes","countriesDict","PropTypes","shape","countriesPropTypes","visits","arrayOf","visitPropTypes","defaultProps","LocationsByCountries","locationPath","groupByLocations","enhancedVisitsList","flow","fpMapValues","locationName","entries","_ref3","_slicedToArray","strLocationId","_ref3$","visitsListByLocation","style","display","marginRight","lineHeight","react_router_dom","to","toUrl","blocks_VisitsByLocation","CountriesByYear","classes","groupByCountries","countryId","values","countryIndex","visitsListByCountry","tripsCount","uniq","tripId","className","countryContainer","fontSize","fontWeight","countryName","blocks_LocationsByCountries","withStyles","marginTop","enhanceVisits","memoizeOne","onlyYear","YearCountryCityPage_defineProperty","fpReverse","YearCountryCityPage","isVisitsComplete","isRidesComplete","_ref2$userVisits","userVisits","_ref2$userVisits$data","data","namedPaths","travel","match","params","WelcomeScreen","visitsByYears","visitYear","visitsListByYear","key","blocks_CountriesByYear","bool","isRequired","compose","withPaths","withTripsData","domain","mapStateToProps","state","selectDict","selectIsReady","requirementsConfig","_ref4","_ref5","DATA_CHUNKS","COMMON","COUNTRIES","USER","TRIPS","VISITS","RIDES","baseAssignValue","__webpack_require__","createAggregator","hasOwnProperty","prototype","groupBy","result","call","push","module","exports","withLoader","Component","props","_props$provision","provision","_props$provision$isPe","isPending","hasFallback","PlainLoader","__webpack_exports__","_len2","provisionParams","Array","_key2","ExtendableComponent","_len","funcsArray","_key","arg","reduceRight","composed","func","provide","baseFor","keys","object","iteratee","baseUniq","array","baseForOwn","baseEach","createBaseEach","SetCache","arrayIncludes","arrayIncludesWith","cacheHas","createSet","setToArray","LARGE_ARRAY_SIZE","comparator","index","includes","isCommon","seen","set","outer","computed","seenIndex","arrayAggregator","baseAggregator","baseIteratee","isArray","setter","initializer","collection","accumulator","createBaseFor","fromRight","keysFunc","iterable","isArrayLike","eachFunc","Set","noop","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","react_router_dom__WEBPACK_IMPORTED_MODULE_2__","lodash_fp_compose__WEBPACK_IMPORTED_MODULE_3__","lodash_fp_compose__WEBPACK_IMPORTED_MODULE_3___default","modules_utilities_routing_Path__WEBPACK_IMPORTED_MODULE_4__","core_context_AppContext__WEBPACK_IMPORTED_MODULE_5__","core_context_AuthContext__WEBPACK_IMPORTED_MODULE_6__","children","visitedUserAlias","userAlias","_ref$namedPaths","_ref$namedPaths$trave","tripsPath","trips","authenticatedUserAlias","useAuthContext","Message","useCallback","path","component","node","string","instanceOf","Path","withRouter","d","LOCATIONS","mapStateToRequirementsConfig","ProvisionedComponent","withProvision","userTripsIds","selectPlaceholder","selectUserTripsIds","isFunction","request","countries","modelName","condition","query","navigation","isDisabled","userTrips","observe","_selectLocationsIds","tripsDict","locationsDict","requiredLocationsIds","reduce","memo","trip","originLocationId","missingLocationsIds","filter","requiredLocationId","selectLocationsIds","userLocations","id","actualYear","parseInt","test","String","undefined","trip_id","departure_date_time","arrival_date_time","userRides","convert","placeholder","createFlow","RIDE_CLASSES_NAMES","_defineProperty","_RIDE_CLASSES_NAMES","RIDE_CLASSES","ECONOMY","COMFORT","BUSINESS","FIRST","PRIVATE","RIDE_OCCUPATION_NAMES","_RIDE_OCCUPATION_NAME","RIDE_OCCUPATION","PASSENGER","STUFF","DRIVER","RIDE_TYPES_NAMES","_RIDE_TYPES_NAMES","RIDE_TYPES","SELF_DRIVE","SCHEDULED","CHARTER","TOUR","CARPOOL","HITCH_HIKING","DROP_OFF","VEHICLE_NAMES","_VEHICLE_NAMES","VEHICLE_TYPES","CAR","TRAIN","AIRCRAFT","BUS","MOTORHOME","LOCAL_TRAIN","FERRY","BIKE","BY_FEET","ROPEWAY","FUNICULAR","MOTORBIKE","TRUCK","ALL_TERRAIN_VEHICLE","TRAM","TROLLEY","TAXI","CITY_BUS","JITNEY","SUBWAY","PUBLIC_TRANSPORT","nativeReverse","reverse","baseFlatten","baseOrderBy","baseRest","isIterateeCall","sortBy","iteratees","arrayMap","baseMap","baseSortBy","baseUnary","compareMultiple","identity","orders","criteria","other","comparer","sort","compareAscending","objCriteria","othCriteria","ordersLength","isSymbol","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","overRest","setToString","start","eq","isIndex","isObject","type","baseSum","current","baseExtremum","baseGt","byCountriesVisitsCount","_ref$countryName","countryNameA","_ref$visitsCount","visitsCount","visitsCountA","_ref$locations","locations","locationsA","_ref2$countryName","countryNameB","_ref2$visitsCount","visitsCountB","_ref2$locations","localeCompare","byLocationsVisitsCount","_ref3$locationName","locationNameA","_ref3$visitsCount","_ref4$locationName","locationNameB","_ref4$visitsCount","VisitsPage","_ref5$userVisits","_ref5$userVisits$data","travel_components_common_WelcomeScreen__WEBPACK_IMPORTED_MODULE_10__","visitsWithCounter","useMemo","property","countryVisits","locationVisits","_locationVisits$","locationId","_ref7","countryVisitsCount","_ref8","locationIndex","locationVisitsCount","_requirementsConfig","byRidesCount","ridesA","RidesPage","_ref5$userRides","_ref5$userRides$data","ridesList","travel_components_common_WelcomeScreen__WEBPACK_IMPORTED_MODULE_5__","ridesByType","_ref6","text","counter","vehicleType","rides","ridesPropTypes"],"mappings":"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","file":"travel-Countries-f6072a161432eb12657f.js","sourcesContent":["function areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (newInputs[i] !== lastInputs[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var lastThis;\n    var lastArgs = [];\n    var lastResult;\n    var calledOnce = false;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n            return lastResult;\n        }\n        lastResult = resultFn.apply(this, newArgs);\n        calledOnce = true;\n        lastThis = this;\n        lastArgs = newArgs;\n        return lastResult;\n    }\n    return memoized;\n}\n\nexport default memoizeOne;\n","import fpUniqBy from 'lodash/fp/uniqBy';\nimport fpGroupBy from 'lodash/fp/groupBy';\nimport fpSortBy from 'lodash/fp/sortBy';\n\nconst NO_YEAR = 0;\n\nexport const fpEnhanceVisitsWithDates = ({ ridesDict }) => visitsList =>\n  visitsList.map(visit => {\n    const { arrivalRideId } = visit;\n    const ride = (arrivalRideId && ridesDict[arrivalRideId]) || {};\n    const { arrivalDateTime, departureDateTime } = ride;\n    return {\n      ...visit,\n      arrivalDateTime,\n      departureDateTime,\n      year:\n        (departureDateTime && departureDateTime.getFullYear()) ||\n        (arrivalDateTime && arrivalDateTime.getFullYear()) ||\n        NO_YEAR,\n    };\n  });\n\nexport const uniqByLocations = fpUniqBy('locationId');\nexport const uniqByCountries = fpUniqBy('countryId');\nexport const groupByYears = fpGroupBy('year');\nexport const orderByYears = fpSortBy('year');\n\nexport const enhanceVisitsWithCounters = visitsList => {\n  return {\n    visitsList,\n    countriesCount: uniqByCountries(visitsList).length,\n    locationsCount: uniqByLocations(visitsList).length,\n    year: Number(visitsList[0].year),\n  };\n};\n\nexport const plural = (value, { one, few, many }) => {\n  if (value >= 5 && value <= 20) {\n    return many;\n  }\n  const part = value % 10;\n  if (part === 1) {\n    return one;\n  }\n  if (part >= 2 && part <= 4) {\n    return few;\n  }\n  return many;\n};\n","import getTimezoneOffsetInMilliseconds from '../_lib/getTimezoneOffsetInMilliseconds/index.js'\nimport startOfDay from '../startOfDay/index.js'\n\nvar MILLISECONDS_IN_DAY = 86400000\n\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of calendar days\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * var result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * var result = differenceInCalendarDays(\n *   new Date(2011, 6, 2, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\nexport default function differenceInCalendarDays(\n  dirtyDateLeft,\n  dirtyDateRight\n) {\n  if (arguments.length < 2) {\n    throw new TypeError(\n      '2 arguments required, but only ' + arguments.length + ' present'\n    )\n  }\n\n  var startOfDayLeft = startOfDay(dirtyDateLeft)\n  var startOfDayRight = startOfDay(dirtyDateRight)\n\n  var timestampLeft =\n    startOfDayLeft.getTime() - getTimezoneOffsetInMilliseconds(startOfDayLeft)\n  var timestampRight =\n    startOfDayRight.getTime() - getTimezoneOffsetInMilliseconds(startOfDayRight)\n\n  // Round the number of days to the nearest integer\n  // because the number of milliseconds in a day is not constant\n  // (e.g. it's different in the day of the daylight saving time clock shift)\n  return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_DAY)\n}\n","import React from 'react';\nimport differenceInCalendarDays from 'date-fns/differenceInCalendarDays';\nimport sum from 'lodash/sum';\nimport max from 'lodash/max';\nimport PropTypes from 'prop-types';\nimport countriesPropTypes from 'travel/models/countries/propTypes';\nimport visitPropTypes from 'travel/models/visits/propTypes';\nimport { plural } from '../utils';\n\nconst VisitsByLocation = ({ visitsList }) => {\n  const totalDays = sum(\n    visitsList.map(({ arrivalDateTime, departureDateTime }) =>\n      max([1, differenceInCalendarDays(arrivalDateTime, departureDateTime)]),\n    ),\n  );\n  return (\n    <span>\n      {visitsList.length > 1 && (\n        <span>\n          {`${visitsList.length} `}\n          {plural(totalDays, {\n            one: 'визит',\n            few: 'визита',\n            many: 'визитов',\n          })}\n          {totalDays > 1 ? ', ' : ''}\n        </span>\n      )}\n      {totalDays > 1 && (\n        <span>\n          {`${totalDays} `}\n          {plural(totalDays, { one: 'день', few: 'дня', many: 'дней' })}\n        </span>\n      )}\n    </span>\n  );\n};\nVisitsByLocation.propTypes = {\n  countriesDict: PropTypes.shape(countriesPropTypes),\n  visits: PropTypes.arrayOf(PropTypes.shape(visitPropTypes)),\n};\nVisitsByLocation.defaultProps = {\n  countriesDict: {},\n  visits: [],\n};\n\nexport default VisitsByLocation;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport fpGroupBy from 'lodash/fp/groupBy';\nimport flow from 'lodash/flow';\nimport fpMapValues from 'lodash/fp/mapValues';\nimport PropTypes from 'prop-types';\nimport countriesPropTypes from 'travel/models/countries/propTypes';\nimport visitPropTypes from 'travel/models/visits/propTypes';\nimport VisitsByLocation from './VisitsByLocation';\n\nconst LocationsByCountries = ({ visitsList, locationPath }) => {\n  const groupByLocations = fpGroupBy('locationId');\n\n  const enhanceWithCounters = visitsList => ({\n    visitsList,\n    locationName: visitsList[0] && visitsList[0].locationName,\n  });\n  const enhancedVisitsList = flow(\n    groupByLocations,\n    fpMapValues(enhanceWithCounters),\n    Object.entries,\n  )(visitsList);\n  return (\n    <div>\n      {enhancedVisitsList.map(\n        ([\n          strLocationId,\n          { locationName, visitsList: visitsListByLocation },\n        ]) => (\n          <div>\n            <div\n              style={{\n                display: 'inline',\n                marginRight: '4px',\n                lineHeight: '20px',\n              }}\n            >\n              <Link to={locationPath.toUrl({ strLocationId })}>\n                {locationName}\n              </Link>\n            </div>\n            <VisitsByLocation visitsList={visitsListByLocation} />\n          </div>\n        ),\n      )}\n    </div>\n  );\n};\nLocationsByCountries.propTypes = {\n  countriesDict: PropTypes.shape(countriesPropTypes),\n  visits: PropTypes.arrayOf(PropTypes.shape(visitPropTypes)),\n};\nLocationsByCountries.defaultProps = {\n  countriesDict: {},\n  visits: [],\n};\n\nexport default LocationsByCountries;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport fpGroupBy from 'lodash/fp/groupBy';\nimport flow from 'lodash/flow';\nimport uniq from 'lodash/uniq';\nimport fpMapValues from 'lodash/fp/mapValues';\nimport countriesPropTypes from 'travel/models/countries/propTypes';\nimport visitPropTypes from 'travel/models/visits/propTypes';\nimport LocationsByCountries from './LocationsByCountries';\nimport { uniqByLocations, plural } from '../utils';\n\nconst CountriesByYear = ({\n  countriesDict,\n  visitsList,\n  locationPath,\n  classes,\n}) => {\n  const groupByCountries = fpGroupBy('countryId');\n\n  const enhanceWithCounters = visitsList => ({\n    visitsList,\n    locationsCount: uniqByLocations(visitsList).length,\n    countryId: visitsList[0] && visitsList[0].countryId,\n  });\n  const enhancedVisitsList = flow(\n    groupByCountries,\n    fpMapValues(enhanceWithCounters),\n    Object.values,\n  )(visitsList);\n  return (\n    <div>\n      {enhancedVisitsList.map(\n        (\n          { countryId, visitsList: visitsListByCountry, locationsCount },\n          countryIndex,\n        ) => {\n          const tripsCount = uniq(\n            visitsListByCountry.map(({ tripId }) => tripId),\n          ).length;\n          return (\n            <div className={classes.countryContainer}>\n              <div\n                style={{\n                  display: 'inline',\n                  marginRight: '4px',\n                  fontSize: '24px',\n                  fontWeight: 'bold',\n                  lineHeight: '30px',\n                }}\n              >\n                {`${countryIndex + 1}. `}\n                {countriesDict[countryId] &&\n                  countriesDict[countryId].countryName}\n                {'. '}\n              </div>\n              <span>\n                {tripsCount > 1 && (\n                  <span>\n                    {`${tripsCount} `}\n                    {plural(tripsCount, {\n                      one: 'поездка',\n                      few: 'поездки',\n                      many: 'поездок',\n                    })}\n                  </span>\n                )}\n                {locationsCount > 1 && tripsCount > 1 && ', '}\n                {locationsCount > 1 && (\n                  <span>\n                    {locationsCount}{' '}\n                    {plural(locationsCount, {\n                      one: 'город',\n                      few: 'города',\n                      many: 'городов',\n                    })}\n                  </span>\n                )}\n              </span>\n              <LocationsByCountries\n                visitsList={visitsListByCountry}\n                locationPath={locationPath}\n              />\n            </div>\n          );\n        },\n      )}\n    </div>\n  );\n};\nCountriesByYear.propTypes = {\n  countriesDict: PropTypes.shape(countriesPropTypes),\n  visits: PropTypes.arrayOf(PropTypes.shape(visitPropTypes)),\n};\nCountriesByYear.defaultProps = {\n  countriesDict: {},\n  visits: [],\n};\n\nconst styles = {\n  countryContainer: {\n    marginTop: '16px',\n  },\n};\n\nexport default withStyles(styles)(CountriesByYear);\n","import React from 'react';\nimport memoizeOne from 'memoize-one';\nimport compose from 'lodash/fp/compose';\nimport fpMapValues from 'lodash/fp/mapValues';\nimport flow from 'lodash/fp/flow';\nimport fpReverse from 'lodash/fp/reverse';\nimport PropTypes from 'prop-types';\nimport { selectDict, selectIsReady } from 'core/connection';\nimport { withPaths } from 'core/context/AppContext';\nimport WelcomeScreen from 'travel/components/common/WelcomeScreen';\nimport withTripsData, {\n  DATA_CHUNKS,\n} from 'travel/components/common/withTripsData/withTripsData';\nimport countriesPropTypes from 'travel/models/countries/propTypes';\nimport visitPropTypes from 'travel/models/visits/propTypes';\nimport {\n  groupByYears,\n  enhanceVisitsWithCounters,\n  fpEnhanceVisitsWithDates,\n  orderByYears,\n  plural,\n} from './utils';\nimport CountriesByYear from './blocks/CountriesByYear';\n\nconst enhanceVisits = memoizeOne((ridesDict, visitsList, onlyYear) =>\n  flow(\n    fpEnhanceVisitsWithDates({ ridesDict }),\n    onlyYear\n      ? enhancedVisitsList => {\n          if (!enhancedVisitsList || !enhancedVisitsList.length) {\n            return {};\n          }\n          return { [onlyYear]: enhancedVisitsList };\n        }\n      : groupByYears,\n    fpMapValues(enhanceVisitsWithCounters),\n    Object.values,\n    orderByYears,\n    fpReverse,\n  )(visitsList),\n);\n\nconst YearCountryCityPage = ({\n  countriesDict,\n  ridesDict,\n  isVisitsComplete,\n  isRidesComplete,\n  userVisits: { data: visitsList = [] } = {},\n  namedPaths: {\n    travel: { locationPath },\n  },\n  match: {\n    params: { year },\n  },\n}) => {\n  if (isVisitsComplete && isRidesComplete && !visitsList.length) {\n    return <WelcomeScreen />;\n  }\n\n  const visitsByYears = enhanceVisits(ridesDict, visitsList, year);\n  return (\n    <div>\n      {visitsByYears.map(\n        ({\n          year: visitYear,\n          visitsList: visitsListByYear,\n          countriesCount,\n          locationsCount,\n        }) => (\n          <div key={`y${visitYear}`}>\n            <h1>\n              {visitYear || 'Год не указан'}, {countriesCount}{' '}\n              {plural(countriesCount, {\n                one: 'страна',\n                few: 'страны',\n                many: 'стран',\n              })}{' '}\n              и {locationsCount}{' '}\n              {plural(locationsCount, {\n                one: 'город',\n                few: 'города',\n                many: 'городов',\n              })}\n            </h1>\n            <CountriesByYear\n              visitsList={visitsListByYear}\n              countriesDict={countriesDict}\n              locationPath={locationPath}\n            />\n          </div>\n        ),\n      )}\n    </div>\n  );\n};\nYearCountryCityPage.propTypes = {\n  countriesDict: PropTypes.shape(countriesPropTypes),\n  isVisitsComplete: PropTypes.bool.isRequired,\n  visits: PropTypes.shape({\n    data: PropTypes.arrayOf(PropTypes.shape(visitPropTypes)),\n  }),\n};\nYearCountryCityPage.defaultProps = {\n  countriesDict: {},\n  visits: { data: [] },\n};\n\nconst mapStateToProps = state => ({\n  countriesDict: selectDict(state, 'countries'),\n  ridesDict: selectDict(state, 'rides'),\n  isVisitsComplete: selectIsReady(state, 'yearCountryCity.visits'),\n  isRidesComplete: selectIsReady(state, 'yearCountryCity.rides'),\n});\n\nexport default compose(\n  withPaths,\n  withTripsData({\n    domain: 'yearCountryCity',\n    mapStateToProps,\n    requirementsConfig: (\n      state,\n      {\n        match: {\n          params: { year },\n        },\n      },\n    ) => ({\n      [DATA_CHUNKS.COMMON.COUNTRIES]: true,\n      [DATA_CHUNKS.USER.TRIPS]: true,\n      [DATA_CHUNKS.USER.VISITS]: { year },\n      [DATA_CHUNKS.USER.RIDES]: true,\n    }),\n  }),\n)(YearCountryCityPage);\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","/* eslint-disable import/prefer-default-export */\nimport React from 'react';\nimport PlainLoader from 'modules/components/loaders/PlainLoader';\n\n// todo implement logic, which loader to show for each request, etc.\nexport const withLoader = Component => props => {\n  const { provision: { isPending = true, hasFallback } = {} } = props;\n  if (isPending && !hasFallback) {\n    return <PlainLoader />;\n  }\n  return <Component {...props} />;\n};\n","import { withLoader } from 'modules/components/loaders/ProvisionLoader';\nimport { provide } from 'core/connection';\n\nconst compose = (...funcsArray) => arg =>\n  funcsArray.reduceRight((composed, func) => func(composed), arg);\n\nexport default (...provisionParams) => ExtendableComponent =>\n  compose(\n    provide(...provisionParams),\n    withLoader,\n  )(ExtendableComponent);\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","import React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Route, Redirect, Switch } from 'react-router-dom';\nimport compose from 'lodash/fp/compose';\nimport Path from 'modules/utilities/routing/Path';\nimport { withPaths } from 'core/context/AppContext';\nimport { useAuthContext } from 'core/context/AuthContext';\n\nconst WelcomeScreen = ({\n  children,\n  match: {\n    params: { userAlias: visitedUserAlias },\n  },\n  namedPaths: { travel: { trips: tripsPath } = {} } = {},\n}) => {\n  const { userAlias: authenticatedUserAlias } = useAuthContext();\n  if (visitedUserAlias !== authenticatedUserAlias) {\n    return (\n      <span>Пользователь пока еще не внес информацию о своих поездках</span>\n    );\n  }\n  const Message = useCallback(\n    () => (\n      <div>\n        <span>\n          Нам пока ничего не известно о ваших путешествиях. Но очень интересно\n          узнать. Создайте вашу первую поездку, а мы подготовим по ней отчет\n        </span>\n        {children}\n      </div>\n    ),\n    [children],\n  );\n  return (\n    <Switch>\n      <Route\n        path={tripsPath.toUrl({ userAlias: authenticatedUserAlias })}\n        component={Message}\n      />\n      <Redirect to={tripsPath.toUrl({ userAlias: authenticatedUserAlias })} />\n    </Switch>\n  );\n};\n\nWelcomeScreen.propTypes = {\n  children: PropTypes.node,\n  match: PropTypes.shape({\n    params: PropTypes.shape({ userAlias: PropTypes.string }),\n  }).isRequired,\n  namedPaths: PropTypes.shape({\n    travel: PropTypes.shape({ trips: PropTypes.instanceOf(Path) }),\n  }).isRequired,\n};\n\nWelcomeScreen.defaultProps = {\n  children: null,\n};\n\nexport default compose(\n  withRouter,\n  withPaths,\n)(WelcomeScreen);\n","var baseAssignValue = require('./_baseAssignValue'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * Creates an object with the same keys as `object` and values generated\n * by running each own enumerable string keyed property of `object` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapKeys\n * @example\n *\n * var users = {\n *   'fred':    { 'user': 'fred',    'age': 40 },\n *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n * };\n *\n * _.mapValues(users, function(o) { return o.age; });\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n *\n * // The `_.property` iteratee shorthand.\n * _.mapValues(users, 'age');\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n */\nfunction mapValues(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, key, iteratee(value, key, object));\n  });\n  return result;\n}\n\nmodule.exports = mapValues;\n","import React from 'react';\nimport { withRouter } from 'react-router';\nimport isFunction from 'lodash/isFunction';\nimport compose from 'lodash/fp/compose';\nimport withProvision from 'core/connection/withProvision';\nimport { selectUserTripsIds, selectLocationsIds } from './selectors';\n\nexport const DATA_CHUNKS = {\n  COMMON: {\n    COUNTRIES: 'COMMON.COUNTRIES',\n  },\n  USER: {\n    TRIPS: 'USER.TRIPS',\n    LOCATIONS: 'USER.LOCATIONS',\n    VISITS: 'USER.VISITS',\n    RIDES: 'USER.RIDES',\n  },\n};\n\nexport default ({\n  domain,\n  mapStateToProps,\n  requirementsConfig: mapStateToRequirementsConfig,\n}) => Component => {\n  const mapStateToRequirements = (state, props) => {\n    const {\n      countriesDict,\n      match: {\n        params: { userAlias },\n      },\n    } = props;\n    const userTripsIds = selectUserTripsIds(state, domain);\n\n    const requirementsConfig = isFunction(mapStateToRequirementsConfig)\n      ? mapStateToRequirementsConfig(state, props)\n      : mapStateToRequirementsConfig;\n\n    const request = {};\n    if (requirementsConfig[DATA_CHUNKS.COMMON.COUNTRIES]) {\n      request.countries = {\n        modelName: 'countries',\n        condition: !countriesDict || !Object.keys(countriesDict).length,\n        query: { navigation: { isDisabled: true } },\n      };\n    }\n    if (requirementsConfig[DATA_CHUNKS.USER.TRIPS]) {\n      request.userTrips = {\n        modelName: 'trips',\n        observe: userAlias,\n        query: { userAlias, navigation: { isDisabled: true } },\n      };\n    }\n    if (requirementsConfig[DATA_CHUNKS.USER.LOCATIONS]) {\n      const { requiredLocationsIds, missingLocationsIds } = selectLocationsIds(\n        state,\n        userTripsIds,\n      );\n\n      request.userLocations = {\n        modelName: 'locations',\n        observe: requiredLocationsIds,\n        condition: missingLocationsIds.length,\n        query: {\n          filter: { id: { comparator: 'in', value: missingLocationsIds } },\n          navigation: { isDisabled: true },\n        },\n      };\n    }\n    if (requirementsConfig[DATA_CHUNKS.USER.VISITS]) {\n      const { year } = requirementsConfig[DATA_CHUNKS.USER.VISITS];\n      const actualYear = parseInt(\n        /^\\d{4}$/.test(String(year)) ? year : undefined,\n        10,\n      );\n      request.userVisits = {\n        modelName: 'visits',\n        observe: { userTripsIds, year },\n        condition: userTripsIds && userTripsIds.length,\n        query: {\n          filter: {\n            trip_id: { comparator: 'in', value: userTripsIds },\n            departure_date_time: actualYear\n              ? { comparator: '>=', value: `${actualYear}-01-01` }\n              : undefined,\n            arrival_date_time: actualYear\n              ? { comparator: '<', value: `${actualYear + 1}-01-01` }\n              : undefined,\n          },\n          navigation: { isDisabled: true },\n        },\n      };\n    }\n    if (requirementsConfig[DATA_CHUNKS.USER.RIDES]) {\n      request.userRides = {\n        modelName: 'rides',\n        observe: userTripsIds,\n        condition: userTripsIds && userTripsIds.length,\n        query: {\n          filter: { trip_id: { comparator: 'in', value: userTripsIds } },\n          navigation: { isDisabled: true },\n        },\n      };\n    }\n\n    return {\n      domain,\n      request,\n    };\n  };\n\n  const ProvisionedComponent = compose(\n    withRouter,\n    withProvision(mapStateToRequirements, mapStateToProps),\n  )(Component);\n\n  return props => <ProvisionedComponent {...props} />;\n};\n","import uniq from 'lodash/uniq';\nimport { selectDict, selectPlaceholder } from 'core/connection';\n\nexport const selectUserTripsIds = (state, domain) => {\n  const { data: userTripsIds } =\n    selectPlaceholder(state, `${domain}.userTrips`) || {};\n  return userTripsIds;\n};\n\nexport const selectLocationsIds = (state, userTripsIds) => {\n  const tripsDict = selectDict(state, 'trips');\n  const locationsDict = selectDict(state, 'locations');\n\n  const requiredLocationsIds = userTripsIds\n    ? uniq(\n        userTripsIds.reduce((memo, tripId) => {\n          const trip = tripsDict[tripId];\n          if (trip) {\n            const { originLocationId } = trip;\n            if (originLocationId) {\n              memo.push(originLocationId);\n            }\n          }\n          return memo;\n        }, []),\n      )\n    : [];\n  const missingLocationsIds = requiredLocationsIds.filter(\n    requiredLocationId => !locationsDict[requiredLocationId],\n  );\n  return { requiredLocationsIds, missingLocationsIds };\n};\n","var convert = require('./convert'),\n    func = convert('mapValues', require('../mapValues'));\n\nfunc.placeholder = require('./placeholder');\nmodule.exports = func;\n","var createFlow = require('./_createFlow');\n\n/**\n * Creates a function that returns the result of invoking the given functions\n * with the `this` binding of the created function, where each successive\n * invocation is supplied the return value of the previous.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Util\n * @param {...(Function|Function[])} [funcs] The functions to invoke.\n * @returns {Function} Returns the new composite function.\n * @see _.flowRight\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * var addSquare = _.flow([_.add, square]);\n * addSquare(1, 2);\n * // => 9\n */\nvar flow = createFlow();\n\nmodule.exports = flow;\n","var convert = require('./convert'),\n    func = convert('groupBy', require('../groupBy'));\n\nfunc.placeholder = require('./placeholder');\nmodule.exports = func;\n","// todo use localization library\nimport {\n  RIDE_CLASSES,\n  RIDE_OCCUPATION,\n  RIDE_TYPES,\n  VEHICLE_TYPES,\n} from 'travel/models/rides/consts';\n\nexport const RIDE_CLASSES_NAMES = {\n  [RIDE_CLASSES.ECONOMY]: 'Эконом',\n  [RIDE_CLASSES.COMFORT]: 'Комфорт',\n  [RIDE_CLASSES.BUSINESS]: 'Бизнес',\n  [RIDE_CLASSES.FIRST]: 'Первый',\n  [RIDE_CLASSES.PRIVATE]: 'Частный',\n};\n\nexport const RIDE_OCCUPATION_NAMES = {\n  [RIDE_OCCUPATION.PASSENGER]: 'Пассажир',\n  [RIDE_OCCUPATION.STUFF]: 'Персонал', // todo кроме персонального транспорта\n  [RIDE_OCCUPATION.DRIVER]: 'Водитель', // todo только для персонального транспорта\n};\n\nexport const RIDE_TYPES_NAMES = {\n  [RIDE_TYPES.SELF_DRIVE]: 'Самостоятельная поездка',\n  [RIDE_TYPES.SCHEDULED]: 'Регулярный рейс',\n  [RIDE_TYPES.CHARTER]: 'Чартерный рейс', // todo only for aircrafts\n  [RIDE_TYPES.TOUR]: 'Тур', // todo except aircrafts\n  [RIDE_TYPES.CARPOOL]: 'Попутный автомобиль',\n  [RIDE_TYPES.HITCH_HIKING]: 'Автостоп',\n  [RIDE_TYPES.DROP_OFF]: 'Подбросили до места',\n};\n\nexport const VEHICLE_NAMES = {\n  [VEHICLE_TYPES.CAR]: 'Автомобиль',\n  [VEHICLE_TYPES.TRAIN]: 'Поезд',\n  [VEHICLE_TYPES.AIRCRAFT]: 'Самолет',\n  [VEHICLE_TYPES.BUS]: 'Автобус',\n  [VEHICLE_TYPES.MOTORHOME]: 'Дом на колесах',\n  [VEHICLE_TYPES.LOCAL_TRAIN]: 'Электричка',\n  [VEHICLE_TYPES.FERRY]: 'Паром',\n  [VEHICLE_TYPES.BIKE]: 'Велосипед',\n  [VEHICLE_TYPES.BY_FEET]: 'Пешком',\n  [VEHICLE_TYPES.ROPEWAY]: 'Канатная дорога',\n  [VEHICLE_TYPES.FUNICULAR]: 'Фуникулер',\n  [VEHICLE_TYPES.MOTORBIKE]: 'Мотоцикл',\n  [VEHICLE_TYPES.TRUCK]: 'Грузовик',\n  [VEHICLE_TYPES.ALL_TERRAIN_VEHICLE]: 'Вездеход',\n  [VEHICLE_TYPES.TRAM]: 'Трамвай',\n  [VEHICLE_TYPES.TROLLEY]: 'Троллейбус',\n  [VEHICLE_TYPES.TAXI]: 'Такси',\n  [VEHICLE_TYPES.CITY_BUS]: 'Муниципальный автобус',\n  [VEHICLE_TYPES.JITNEY]: 'Маршрутное такси',\n  [VEHICLE_TYPES.SUBWAY]: 'Метро',\n  [VEHICLE_TYPES.PUBLIC_TRANSPORT]: 'Общественный транспорт',\n};\n","var convert = require('./convert'),\n    func = convert('flow', require('../flow'));\n\nfunc.placeholder = require('./placeholder');\nmodule.exports = func;\n","var convert = require('./convert'),\n    func = convert('reverse', require('../reverse'));\n\nfunc.placeholder = require('./placeholder');\nmodule.exports = func;\n","/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeReverse = arrayProto.reverse;\n\n/**\n * Reverses `array` so that the first element becomes the last, the second\n * element becomes the second to last, and so on.\n *\n * **Note:** This method mutates `array` and is based on\n * [`Array#reverse`](https://mdn.io/Array/reverse).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = [1, 2, 3];\n *\n * _.reverse(array);\n * // => [3, 2, 1]\n *\n * console.log(array);\n * // => [3, 2, 1]\n */\nfunction reverse(array) {\n  return array == null ? array : nativeReverse.call(array);\n}\n\nmodule.exports = reverse;\n","var convert = require('./convert'),\n    func = convert('uniqBy', require('../uniqBy'));\n\nfunc.placeholder = require('./placeholder');\nmodule.exports = func;\n","var baseIteratee = require('./_baseIteratee'),\n    baseUniq = require('./_baseUniq');\n\n/**\n * This method is like `_.uniq` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * uniqueness is computed. The order of result values is determined by the\n * order they occur in the array. The iteratee is invoked with one argument:\n * (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n * // => [2.1, 1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 1 }, { 'x': 2 }]\n */\nfunction uniqBy(array, iteratee) {\n  return (array && array.length) ? baseUniq(array, baseIteratee(iteratee, 2)) : [];\n}\n\nmodule.exports = uniqBy;\n","var convert = require('./convert'),\n    func = convert('sortBy', require('../sortBy'));\n\nfunc.placeholder = require('./placeholder');\nmodule.exports = func;\n","var baseFlatten = require('./_baseFlatten'),\n    baseOrderBy = require('./_baseOrderBy'),\n    baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 40 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 40], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nmodule.exports = sortBy;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  var index = -1;\n  iteratees = arrayMap(iteratees.length ? iteratees : [identity], baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var baseSum = require('./_baseSum'),\n    identity = require('./identity');\n\n/**\n * Computes the sum of the values in `array`.\n *\n * @static\n * @memberOf _\n * @since 3.4.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {number} Returns the sum.\n * @example\n *\n * _.sum([4, 2, 8, 6]);\n * // => 20\n */\nfunction sum(array) {\n  return (array && array.length)\n    ? baseSum(array, identity)\n    : 0;\n}\n\nmodule.exports = sum;\n","/**\n * The base implementation of `_.sum` and `_.sumBy` without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {number} Returns the sum.\n */\nfunction baseSum(array, iteratee) {\n  var result,\n      index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var current = iteratee(array[index]);\n    if (current !== undefined) {\n      result = result === undefined ? current : (result + current);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseSum;\n","var baseExtremum = require('./_baseExtremum'),\n    baseGt = require('./_baseGt'),\n    identity = require('./identity');\n\n/**\n * Computes the maximum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * _.max([4, 2, 8, 6]);\n * // => 8\n *\n * _.max([]);\n * // => undefined\n */\nfunction max(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseGt)\n    : undefined;\n}\n\nmodule.exports = max;\n","var isSymbol = require('./isSymbol');\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseExtremum;\n","/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nmodule.exports = baseGt;\n","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport groupBy from 'lodash/groupBy';\nimport uniq from 'lodash/uniq';\nimport property from 'lodash/property';\nimport compose from 'lodash/fp/compose';\nimport { withPaths } from 'core/context/AppContext';\nimport withTripsData, {\n  DATA_CHUNKS,\n} from 'travel/components/common/withTripsData/withTripsData';\nimport { selectDict, selectIsReady } from 'core/connection';\nimport WelcomeScreen from 'travel/components/common/WelcomeScreen';\nimport countriesPropTypes from 'travel/models/countries/propTypes';\nimport visitPropTypes from 'travel/models/visits/propTypes';\n\nconst byCountriesVisitsCount = (\n  {\n    countryName: countryNameA = '',\n    visitsCount: visitsCountA = 0,\n    locations: locationsA = [],\n  },\n  {\n    countryName: countryNameB = '',\n    visitsCount: visitsCountB = 0,\n    locations: locationsB = [],\n  },\n) =>\n  visitsCountB - visitsCountA ||\n  locationsB.length - locationsA.length ||\n  countryNameA.localeCompare(countryNameB);\n\nconst byLocationsVisitsCount = (\n  { locationName: locationNameA = '', visitsCount: visitsCountA = 0 },\n  { locationName: locationNameB = '', visitsCount: visitsCountB = 0 },\n) => visitsCountB - visitsCountA || locationNameA.localeCompare(locationNameB);\n\nconst VisitsPage = ({\n  countriesDict,\n  isVisitsComplete,\n  userVisits: { data: visitsList = [] } = {},\n  namedPaths: {\n    travel: { locationPath },\n  },\n}) => {\n  if (isVisitsComplete && !visitsList.length) {\n    return <WelcomeScreen />;\n  }\n\n  /**\n  visitsWithCounter structure example:\n   \n  [{\n    countryId: 1,    \n    countryName: 'Russia',\n    visitsCount: 30,\n    locations: [\n      { locationId: 1, locationName: 'Moscow', visitsCount: 25 },\n      { locationId: 2, locationName: 'Saint-Petersburg', visitsCount: 7 },\n    ],\n  }];\n  */\n  const visitsWithCounter = useMemo(\n    () =>\n      Object.values(groupBy(visitsList, property('countryId')))\n        .map(countryVisits => {\n          const { countryId } = countryVisits[0];\n          const { countryName } = countriesDict[countryId] || {};\n          return {\n            countryId,\n            countryName,\n            visitsCount: uniq(countryVisits.map(property('tripId'))).length,\n            locations: Object.values(\n              groupBy(countryVisits, property('locationId')),\n            )\n              .map(locationVisits => {\n                const { locationId, locationName } = locationVisits[0];\n                return {\n                  locationId,\n                  locationName,\n                  visitsCount: uniq(locationVisits.map(property('tripId')))\n                    .length,\n                };\n              })\n              .sort(byLocationsVisitsCount),\n          };\n        })\n        .sort(byCountriesVisitsCount),\n    [visitsList, countriesDict],\n  );\n\n  return (\n    <div>\n      {visitsWithCounter.map(\n        (\n          {\n            countryId,\n            countryName,\n            locations,\n            visitsCount: countryVisitsCount,\n          },\n          countryIndex,\n        ) => (\n          <div key={`id${countryId}`}>\n            <h2>\n              <span>{`${countryIndex + 1}. `}</span>\n              <span>{countryName}</span>\n              {countryVisitsCount > 1 && (\n                <span>{` x${countryVisitsCount}`}</span>\n              )}\n            </h2>\n            <div>\n              {locations.map(\n                (\n                  {\n                    locationId,\n                    locationName,\n                    visitsCount: locationVisitsCount,\n                  },\n                  locationIndex,\n                ) => (\n                  <div key={`id${locationId}`}>\n                    <span>{`${locationIndex + 1}. `}</span>\n                    <Link\n                      to={locationPath.toUrl({\n                        strLocationId: String(locationId),\n                      })}\n                    >\n                      {locationName}\n                    </Link>\n                    {locationVisitsCount > 1 && (\n                      <span>{` x${locationVisitsCount}`}</span>\n                    )}\n                  </div>\n                ),\n              )}\n            </div>\n          </div>\n        ),\n      )}\n    </div>\n  );\n};\nVisitsPage.propTypes = {\n  countriesDict: PropTypes.shape(countriesPropTypes),\n  isVisitsComplete: PropTypes.bool.isRequired,\n  visits: PropTypes.shape({\n    data: PropTypes.arrayOf(PropTypes.shape(visitPropTypes)),\n  }),\n};\nVisitsPage.defaultProps = {\n  countriesDict: {},\n  visits: { data: [] },\n};\n\nconst mapStateToProps = state => ({\n  countriesDict: selectDict(state, 'countries'),\n  isVisitsComplete: selectIsReady(state, 'visitsPage.visits'),\n});\n\nexport default compose(\n  withPaths,\n  withTripsData({\n    domain: 'visitsPage',\n    mapStateToProps,\n    requirementsConfig: {\n      [DATA_CHUNKS.COMMON.COUNTRIES]: true,\n      [DATA_CHUNKS.USER.TRIPS]: true,\n      [DATA_CHUNKS.USER.VISITS]: true,\n    },\n  }),\n)(VisitsPage);\n","import React from 'react';\nimport groupBy from 'lodash/groupBy';\nimport PropTypes from 'prop-types';\nimport withTripsData, {\n  DATA_CHUNKS,\n} from 'travel/components/common/withTripsData/withTripsData';\nimport { selectIsReady } from 'core/connection';\nimport WelcomeScreen from 'travel/components/common/WelcomeScreen';\nimport ridesPropTypes from 'travel/models/rides/propTypes';\nimport { VEHICLE_NAMES } from 'travel/components/models/rides/RideEditDialog/localization';\n\nconst withCounter = (text, counter) => {\n  if (!counter || counter === 1) {\n    return text;\n  }\n  return `${text} x${counter}`;\n};\n\nconst byRidesCount = ([, ridesA], [, ridesB]) => ridesB.length - ridesA.length;\n\nconst RidesPage = ({\n  isRidesComplete,\n  userRides: { data: ridesList = [] } = {},\n}) => {\n  if (isRidesComplete && !ridesList.length) {\n    return <WelcomeScreen />;\n  }\n\n  const ridesByType = Object.entries(groupBy(ridesList, 'vehicleType')).sort(\n    byRidesCount,\n  );\n\n  return (\n    <div>\n      {ridesByType.map(([vehicleType, rides]) => (\n        <div key={`id${vehicleType}`}>\n          <span>{withCounter(VEHICLE_NAMES[vehicleType], rides.length)}</span>\n        </div>\n      ))}\n    </div>\n  );\n};\nRidesPage.propTypes = {\n  isRidesComplete: PropTypes.bool.isRequired,\n  rides: PropTypes.shape({\n    data: PropTypes.arrayOf(PropTypes.shape(ridesPropTypes)),\n  }),\n};\nRidesPage.defaultProps = {\n  rides: { data: [] },\n};\n\nconst mapStateToProps = state => ({\n  isRidesComplete: selectIsReady(state, 'ridesPage.rides'),\n});\n\nexport default withTripsData({\n  domain: 'ridesPage',\n  mapStateToProps,\n  requirementsConfig: {\n    [DATA_CHUNKS.USER.TRIPS]: true,\n    [DATA_CHUNKS.USER.RIDES]: true,\n  },\n})(RidesPage);\n"],"sourceRoot":""}