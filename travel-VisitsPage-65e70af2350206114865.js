(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1347:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return pt}));var n,i,a=r(0),o=r.n(a),c=r(37),u=r(889),l=r(141),s=r(127);function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v="loc",d="c",p="yr",m="yr_c",y="c_yr",I="t",O="t_с",b={TRIPS:"trips",LOCATIONS:"locations"},E=b.TRIPS,g=(f(n={},b.LOCATIONS,[{key:v,l10n:"По городам"},{key:d,l10n:"По странам"},{key:p,l10n:"По годам"},{key:m,l10n:"По годам и странам"},{key:y,l10n:"По странам и годам"}]),f(n,b.TRIPS,[{key:I,l10n:"По поездкам"},{key:O,l10n:"По поездкам и странам"}]),n),T=(f(i={},b.LOCATIONS,d),f(i,b.TRIPS,I),i),A={RATING_ALPHABET:"r_a",VISITS_ALPHABET:"v_a",FIRST_VISIT_ALPHABET:"fv_a",LAST_VISIT_ALPHABET:"lv_a",ALPHABET:"a"},h=A.ALPHABET,j={VISIT:{ARRIVAL_YEAR:"ARRIVAL_YEAR"},TRIP:{DEPARTURE_TIME:"TRIP_DEPARTURE_DATE",ID:"TRIP_ID",PRESERVE_ORDER:"PRESERVE_ORDER"},COUNTRY:{VISITS:"COUNTRY_VISITS",RATING:"COUNTRY_RATING",NAME_ID:"COUNTRY_NAME_ID",FIRST_VISIT:"COUNTRY_FIRST_VISIT",LAST_VISIT:"COUNTRY_LAST_VISIT"},LOCATION:{VISITS:"LOCATION_VISITS",RATING:"LOCATION_RATING",NAME_ID:"LOCATION_NAME_ID",FIRST_VISIT:"LOCATION_FIRST_VISIT",LAST_VISIT:"LOCATION_LAST_VISIT"}},S=r(841),N=Object(S.a)((function(e){return{visibilityTrigger:{"&:hover $visibleOnlyOnHover":{visibility:"visible"}},visibleOnlyOnHover:{visibility:"hidden"},group:{backgroundColor:"white",top:0,"&:not(:first-of-type)":{marginTop:e.spacing(5)},"& ~ $subgroup":{marginTop:e.spacing(2)},"& + $subgroup ":{marginTop:0}},subgroup:{backgroundColor:"white",top:38},detail:{color:"gray",fontSize:12},formControl:{width:"100%"},ratingBlock:{display:"inline-flex",alignItems:"center"},ratingIcon:{color:"gray",fontSize:12},halfDown:{position:"relative",top:12}}})),R=r(845),P=r(846),_=r(848),C=r(857),D=r(1349),L=r(1336),w=r(218);function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e,t,r){var n=N(),i=t||{},a=i.group,c=function(e){return Object.values(A).includes(e)?e:h}(i.sort),u=B(function(e,t){var r=Object.values(b).includes(t)?t:E,n=g[r]||[];return[n.find((function(t){return t.key===e}))?e:T[r],n]}(a,r),2),l=u[0],s=u[1];return Object(w.b)((function(t){var r=t.closeSidebar;return(o.a.createElement(R.a,null,o.a.createElement(P.a,null,o.a.createElement(_.a,{className:n.formControl},o.a.createElement(C.a,{shrink:!0,id:"select-groupBy-filter-label"},"Сгруппировать"),o.a.createElement(D.a,{labelId:"select-groupBy-filter-label",autoWidth:!0,id:"select-groupBy-filter",value:l,onChange:function(t){r(),e(V({},"group",t.target.value))}},s.map((function(e){return o.a.createElement(L.a,{key:e.key,value:e.key},e.l10n)}))))),l!==I&&o.a.createElement(P.a,null,o.a.createElement(_.a,{className:n.formControl},o.a.createElement(C.a,{shrink:!0,id:"select-sortBy-filter-label"},"Сортировать"),o.a.createElement(D.a,{labelId:"select-sortBy-filter-label",autoWidth:!0,id:"select-sortBy-filter",value:c,onChange:function(t){r(),e(V({},"sort",t.target.value))}},o.a.createElement(L.a,{value:A.ALPHABET},"По алфавиту"),o.a.createElement(L.a,{value:A.VISITS_ALPHABET},"По числу посещений"),o.a.createElement(L.a,{value:A.FIRST_VISIT_ALPHABET},"По первому посещению"),o.a.createElement(L.a,{value:A.LAST_VISIT_ALPHABET},"По последнему посещению"),o.a.createElement(L.a,{value:A.RATING_ALPHABET},"По рейтингу"))))))}),[l,c]),{groupBy:l,sortBy:c}};var H=r(95),M=r.n(H),U=r(447),x=r.n(U),F=r(925),G=r.n(F),q=r(1274),W=r(870);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.reverse,i=r.matchBy,a=Object(W.a)(e),o=Object(W.a)(t);if(!a&&!o)return 0;if(!a||!o)return a?-1:1;var c=n?[t,e]:[e,t],u=$(c,2),l=u[0],s=u[1];switch(i){case"year":return s.getFullYear()-l.getFullYear();case"time":default:return s.getTime()-l.getTime()}}var K=r(1272),Q=r.n(K),X=r(1273),Z=r.n(X);function ee(e,t){return"t".concat(e,"_c").concat(t)}function te(e,t){return"y".concat(e,"_c").concat(t)}function re(e){var t=e.arrivalDateTime;return Object(W.a)(t)?t.getFullYear(t):null}function ne(e){return e===I||e===O}var ie,ae=null,oe=null;function ce(e,t,r,n){var i=e[t];i||(i=e[t]={});var a=i[r];a||(a=i[r]={});var o=a[n]||0;a[n]=o+1}function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e.locations,n=(r=void 0===r?{}:r)[t],i=(n=void 0===n?{}:n).visits,a=void 0===i?{}:i;return Object.keys(a).length}function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=e.locations,i=(n=void 0===n?{}:n)[t],a=(i=void 0===i?{}:i).visits,o=void 0===a?{}:a;return Q()(Object.keys(o).map((function(e){var t;return null===(t=r[e])||void 0===t?void 0:t.arrivalDateTime})),(function(e){return e.getTime()}))}function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=e.locations,i=(n=void 0===n?{}:n)[t],a=(i=void 0===i?{}:i).visits,o=void 0===a?{}:a;return Z()(Object.keys(o).map((function(e){var t;return null===(t=r[e])||void 0===t?void 0:t.departureDateTime})),(function(e){return e.getTime()}))}function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e.countries,n=(r=void 0===r?{}:r)[t],i=(n=void 0===n?{}:n).visits,a=void 0===i?{}:i;return Object.keys(a).length}function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=e.countries,i=(n=void 0===n?{}:n)[t],a=(i=void 0===i?{}:i).visits,o=void 0===a?{}:a;return Q()(Object.keys(o).map((function(e){var t;return null===(t=r[e])||void 0===t?void 0:t.arrivalDateTime})),(function(e){return e.getTime()}))}function de(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=e.countries,i=(n=void 0===n?{}:n)[t],a=(i=void 0===i?{}:i).visits,o=void 0===a?{}:a;return Z()(Object.keys(o).map((function(e){var t;return null===(t=r[e])||void 0===t?void 0:t.departureDateTime})),(function(e){return e.getTime()}))}function pe(e,t,r){var n=e.years,i=(n=void 0===n?{}:n)[r],a=(i=void 0===i?{}:i).locations;return(a=void 0===a?{}:a)[t]}function me(e){return function(e){if(Array.isArray(e))return ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oe=(Ie(ie={},j.VISIT.ARRIVAL_YEAR,(function(e,t,r){var n=r.sortBy;return function(e,t){return J(e.arrivalDateTime,t.arrivalDateTime,{matchBy:"year",reverse:n===A.FIRST_VISIT_ALPHABET})}})),Ie(ie,j.COUNTRY.NAME_ID,(function(e){var t=e.countriesDict;return function(e,r){var n=e.countryId,i=r.countryId,a=(t[n]||{}).countryName,o=(t[i]||{}).countryName;return a>o?1:o>a?-1:n-i}})),Ie(ie,j.COUNTRY.RATING,(function(e){var t=e.countriesRating;return function(e,r){var n=e.countryId,i=r.countryId;return(t[n]||10)-(t[i]||10)}})),Ie(ie,j.COUNTRY.VISITS,(function(e,t){return function(e,r){var n=e.countryId,i=r.countryId;return fe(t,i)-fe(t,n)}})),Ie(ie,j.COUNTRY.FIRST_VISIT,(function(e,t){var r=e.visitsDict;return function(e,n){var i=e.countryId,a=n.countryId;return J(ve(t,a,r),ve(t,i,r))}})),Ie(ie,j.COUNTRY.LAST_VISIT,(function(e,t){var r=e.visitsDict;return function(e,n){var i=e.countryId,a=n.countryId;return J(de(t,i,r),de(t,a,r))}})),Ie(ie,j.LOCATION.NAME_ID,(function(){return function(e,t){var r=e.locationId,n=e.locationName,i=t.locationId,a=t.locationName;return n>a?1:a>n?-1:r-i}})),Ie(ie,j.LOCATION.RATING,(function(e){var t=e.locationsRating;return function(e,r){var n=e.locationId,i=r.locationId;return(t[n]||10)-(t[i]||10)}})),Ie(ie,j.LOCATION.VISITS,(function(e,t){return function(e,r){var n=e.locationId,i=r.locationId;return ue(t,i)-ue(t,n)}})),Ie(ie,j.LOCATION.FIRST_VISIT,(function(e,t){var r=e.visitsDict;return function(e,n){var i=e.locationId,a=n.locationId;return J(le(t,i,r),le(t,a,r),{reverse:!0})}})),Ie(ie,j.LOCATION.LAST_VISIT,(function(e,t){var r=e.visitsDict;return function(e,n){var i=e.locationId,a=n.locationId;return J(se(t,i,r),se(t,a,r))}})),Ie(ie,j.TRIP.PRESERVE_ORDER,(function(e){var t=e.tripsIds;return function(e,r){if(!t)return 0;var n=e.tripId,i=r.tripId,a=t.indexOf(n),o=t.indexOf(i);return a<0||o<0?a<0&&o<0?0:o<0?-1:1:a-o}})),Ie(ie,j.TRIP.DEPARTURE_TIME,(function(e,t,r){var n=e.tripsDict,i=r.sortBy;return function(e,t){var r=e.tripId,a=t.tripId;J((n[r]||{}).departureDateTime,(n[a]||{}).departureDateTime,{matchBy:"year",reverse:i===A.FIRST_VISIT_ALPHABET})}})),Ie(ie,j.TRIP.ID,(function(){return function(e,t){return e.tripId-t.tripId}})),ie);function be(e,t){switch(e){case A.VISITS_ALPHABET:return[null==t?void 0:t.VISITS];case A.FIRST_VISIT_ALPHABET:return[null==t?void 0:t.FIRST_VISIT];case A.LAST_VISIT_ALPHABET:return[null==t?void 0:t.LAST_VISIT];case A.RATING_ALPHABET:return[null==t?void 0:t.RATING,null==t?void 0:t.VISITS];default:return[]}}function Ee(e,t,r,n){var i=n.map((function(n){var i=Oe[n];return M()(i,"missing comparatorKey: %s",n),i?i(e,t,r):null})).filter(Boolean);return function(e,t){for(var r=0;r<i.length;r+=1){var n=i[r](e,t);if(n)return n}return 0}}Object(q.a)((function(e){return x()((function(t){var r=Object.values(e).filter((function(e){var r=e.countryId;return t===r})).map((function(e){return e.rating}));return r.length?G()(r)/r.length:0}))}));var ge=r(186);function Te(e){var t=e.country,r=(t=void 0===t?{}:t).countryName,n=e.isSubgroup,i=e.isDetail,a=e.className,c=e.children;return i?o.a.createElement("span",{className:a},r):o.a.createElement(ge.a,{variant:n?"h5":"h4",className:a},r," ",c)}function Ae(e){var t,r,n,i,a,c,u=e.visit,l=u.tripId,s=u.visitId,f=u.countryId,v=e.changes,p=v.isTripChanged,I=v.isCountryChanged,b=e.provision.countriesDict,E=e.groupBy,g=e.year,T=e.counters,A=e.classes,h=E===O,j=E===m;if(!(I||h&&p))return null;var S=0;switch(E){case d:S=Object.keys((null==T?void 0:null===(t=T.countries)||void 0===t?void 0:null===(r=t[f])||void 0===r?void 0:r.locations)||{}).length;break;case y:case m:S=Object.keys((null==T?void 0:null===(n=T.yearsCountries)||void 0===n?void 0:null===(i=n[te(g,f)])||void 0===i?void 0:i.locations)||{}).length;break;case O:S=Object.keys((null==T?void 0:null===(a=T.tripsCountries)||void 0===a?void 0:null===(c=a[ee(l,f)])||void 0===c?void 0:c.locations)||{}).length}var N=h||j;return(o.a.createElement(Te,{key:"c".concat(f,"_v").concat(s),country:b[f],isSubgroup:N,className:N?A.subgroup:A.group},S>2&&o.a.createElement("span",{className:A.detail},"".concat(S," мест"))))}var he=r(844),je=r(1275),Se=r.n(je),Ne=r(1276),Re=r.n(Ne),Pe=r(1277),_e=r.n(Pe),Ce=r(869),De=r(926),Le=r(879),we=Object(S.a)({autoMargin:{marginLeft:"auto"}});function Ve(e){var t=e.children,r=e.shouldJustifyContent,n=e.href,i=e.location,a=(i=void 0===i?{}:i).locationName,c=we(),u=o.a.Children.toArray(t);if(!r||u.length<=1)return o.a.createElement(ge.a,null,a," ",t);var l=u.slice(-1),s=u.slice(0,-1);return o.a.createElement(he.a,{container:!0,justify:"space-between",alignItems:"center"},o.a.createElement(he.a,{item:!0},o.a.createElement(ge.a,null,n?o.a.createElement(Le.a,{to:n},a):a," ",s)),o.a.createElement(he.a,{item:!0,classes:{item:c.autoMargin}},l))}Object(S.a)({photosContainer:{display:"flex",justifyContent:"space-between"},photoContainer:{margin:"4px 12px 12px",minWidth:"150px",maxHeight:"100px",textAlign:"center"},photo:{maxWidth:"150px",borderRadius:"4px"}});var Be=r(246),Ye=[v,p,I],ke=[v,d];function He(e){var t=e.visit,r=e.visit,n=(r.tripId,r.visitId),i=r.locationId,a=r.countryId,c=r.departureRideId,u=e.classes,l=e.changes,s=l.isYearChanged,f=l.isCountryChanged,O=l.isTripChanged,b=l.isLocationChanged,E=e.year,g=e.provision,T=g.locationsDict,h=g.locationsRating,j=g.countriesDict,S=g.visitsDict,N=g.ridesDict,R=e.groupBy,P=e.sortBy,_=e.counters,C=e.visitEditUrl,D=e.isObscure,L=R===I;if(!(L||O||s||f||b))return null;var w=Ye.includes(R)?o.a.createElement(Te,{country:j[a],className:u.detail,isDetail:!0}):null,V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=e.locationId;switch(n){case v:case d:return ue(t,i);case p:case y:case m:return pe(t,i,r)}}(t,_,E,R),B=P!==A.RATING_ALPHABET&&V>1?o.a.createElement("span",{className:u.detail},"".concat(V," визитов")):null,Y=P!==A.RATING_ALPHABET&&ke.includes(R)?o.a.createElement("span",{className:u.detail},"в ".concat(function(e,t){var r=e.locations,n=(r=void 0===r?{}:r)[t],i=(n=void 0===n?{}:n).years,a=void 0===i?{}:i;return Object.keys(a)}(_,i).join(", "))):null,k=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).reduce((function(e,t,r){return r>0&&e.push(o.a.createElement("span",null," ")),e.push(t),e}),[])}(w,P===A.RATING_ALPHABET?function(e){var t=e.locationRating,r=e.classes;return(o.a.createElement("div",{className:r.ratingBlock},function(e){var t=e.locationRating,r=e.classes;switch(t){case Be.LOCATION_RATING.PLACE_TO_LIVE:return o.a.createElement(o.a.Fragment,null,o.a.createElement(Se.a,{className:r.ratingIcon}),o.a.createElement(Se.a,{className:r.ratingIcon}),o.a.createElement(Se.a,{className:r.ratingIcon}),o.a.createElement(Se.a,{className:r.ratingIcon}),o.a.createElement(Se.a,{className:r.ratingIcon}));case Be.LOCATION_RATING.FEW_PER_YEAR:case Be.LOCATION_RATING.ONCE_PER_YEAR:return o.a.createElement(o.a.Fragment,null,o.a.createElement(Se.a,{className:r.ratingIcon}),o.a.createElement(Se.a,{className:r.ratingIcon}),o.a.createElement(Se.a,{className:r.ratingIcon}),o.a.createElement(Se.a,{className:r.ratingIcon}));case Be.LOCATION_RATING.ONCE_PER_TWO_YEARS:case Be.LOCATION_RATING.ONCE_PER_FIVE_YEARS:return o.a.createElement(o.a.Fragment,null,o.a.createElement(Se.a,{className:r.ratingIcon}),o.a.createElement(Se.a,{className:r.ratingIcon}),o.a.createElement(Se.a,{className:r.ratingIcon}));case Be.LOCATION_RATING.ONCE_PER_DECADE:case Be.LOCATION_RATING.TWICE_PER_LIVE:return o.a.createElement(o.a.Fragment,null,o.a.createElement(Se.a,{className:r.ratingIcon}),o.a.createElement(Se.a,{className:r.ratingIcon}));case Be.LOCATION_RATING.ONCE_PER_LIVE:return o.a.createElement(Se.a,{className:r.ratingIcon});case Be.LOCATION_RATING.NEVER:return o.a.createElement(Re.a,{className:r.ratingIcon});default:return o.a.createElement(_e.a,{className:r.ratingIcon})}}({locationRating:t,classes:r})))}({classes:u,locationRating:null==h?void 0:h[i]}):null,B,Y);return o.a.createElement(o.a.Fragment,{key:"l".concat(i,"_v").concat(n)},o.a.createElement(Ve,{location:T[i],country:j[a],shouldJustifyContent:L,href:C},k,L&&o.a.createElement(he.a,{container:!0},o.a.createElement(he.a,{item:!0},o.a.createElement(ge.a,{className:u.detail},Object(Ce.c)(S[n],D))),o.a.createElement(he.a,{item:!0},o.a.createElement(De.a,{ride:N[c],className:u.halfDown})))))}var Me=[v,p,I];function Ue(e){var t=e.keyBase,r=e.children,n=e.classes,i=e.visit.tripId,a=e.provision,c=a.tripsDict,u=a.locationsDict,l=a.countriesDict,s=e.groupBy,f=c[i];if(!f)return null;var v=f.originLocationId,d=u[v];if(!d)return null;var p=d.countryId,m=Me.includes(s)?o.a.createElement(Te,{country:l[p],className:n.detail,isDetail:!0}):null;return o.a.createElement(Ve,{key:"".concat(t,"_t").concat(i,"_ol").concat(v),location:u[v],country:l[p],shouldJustifyContent:null!=r},m,r)}function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){Ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){$e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ze(e){return e.changes.willTripChange?Ue(We(We({},e),{},{keyBase:"al"})):null}var Je=r(106),Ke=r.n(Je),Qe=r(855),Xe=r(978),Ze=r.n(Xe),et=r(987);function tt(e){var t=e.trip,r=e.visitsDict,n=e.countriesDict,i=e.locationsDict,a=e.children,c=e.className;return(o.a.createElement(ge.a,{variant:"h4",className:c,paragraph:!0},o.a.createElement("span",null,Object(et.a)(t,r,n,i)),a))}function rt(e){var t=e.visit,r=t.visitId,n=t.tripId,i=e.changes.isTripChanged,a=e.provision,c=a.tripsDict,u=a.visitsDict,l=a.countriesDict,s=a.locationsDict,f=e.travelPaths.tripEdit,v=e.hasEditRights,d=e.userAlias,p=e.classes;if(!i)return null;var m=v?o.a.createElement(Qe.a,{className:p.visibleOnlyOnHover,href:f.toUrl({userAlias:d,strTripId:String(n)}),size:"small"},o.a.createElement(Ze.a,null)):null;return(o.a.createElement(tt,{key:"t".concat(n,"_v").concat(r),className:Ke()(p.visibilityTrigger,p.group),trip:c[n],visitsDict:u,countriesDict:l,locationsDict:s},m))}function nt(e){var t=e.year,r=e.isSubgroup,n=N();return o.a.createElement(ge.a,{variant:r?"h5":"h4",className:r?n.subgroup:n.group},t||"Без указания даты")}function it(e){var t=e.visit.visitId,r=e.changes,n=r.isYearChanged,i=r.isCountryChanged,a=e.groupBy,c=e.year,u=a===y;return n||u&&i?o.a.createElement(nt,{key:"y".concat(c,"_v").concat(t),year:c,isSubgroup:u}):null}function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ct(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ut(e){var t,r,n,i,a,c=e.prevVisit,u=e.visit,l=e.nextVisit,s=e.groupBy,f=ct(e,["prevVisit","visit","nextVisit","groupBy"]),b=c.countryId,E=c.locationId,g=c.tripId,T=l.tripId,A=u.countryId,h=u.locationId,j=u.tripId,S=re(c),N=re(u),R=ne(s),P=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?at(Object(r),!0).forEach((function(t){ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({visit:u,groupBy:s,year:N,changes:{isTripChanged:R&&g!==j,willTripChange:R&&T!==j,isYearChanged:function(e){return e===p||e===y||e===m}(s)&&S!==N,isCountryChanged:function(e){return e===O||e===d||e===y||e===m}(s)&&b!==A,isLocationChanged:E!==h}},f);switch(s){case I:return[rt(P),(t=P,r=t.visit.arrivalRideId,n=t.classes,i=t.changes.isTripChanged,a=t.provision.ridesDict,i?Ue(Fe(Fe({},t),{},{keyBase:"dl",children:o.a.createElement(De.a,{ride:a[r],className:n.halfDown})})):null),He(P),ze(P)];case O:return[rt(P),Ae(P),He(P)];case d:return[Ae(P),He(P)];case p:return[it(P),He(P)];case m:return[it(P),Ae(P),He(P)];case y:return[Ae(P),it(P),He(P)];case v:default:return[He(P)]}}var lt=r(2),st=r.n(lt),ft=r(89),vt=r(851);function dt(e){var t=e.createTripUrl,r=e.locationsUrl,n=e.locationsCount,i=e.countriesCount,a=ne(e.groupBy)?o.a.createElement("div",null,o.a.createElement(vt.a,{to:t,component:ft.b,"data-locator":"ADD_TRIP_BUTTON"},"Добавить поездку")):null;return o.a.createElement(ge.a,{variant:"h6",paragraph:!0},o.a.createElement("span",null,"Всего "),o.a.createElement(vt.a,{to:r,component:ft.b},"".concat(n," городов ")),o.a.createElement("span",null,"из "),o.a.createElement("span",null,"".concat(i," стран ")),a)}function pt(e){var t=e.match.params,r=t.userAlias,n=t.section,i=Object(s.c)().userAlias,a=r===i,f=r!==i,b=N(),E=Object(l.b)(),g=E.queryFilter,T=E.setQueryFilter,A=k(T,g,n),h=A.groupBy,S=A.sortBy,R=Object(u.b)({userAlias:r}),P=R.isPending,_=R.isError,C=Object(c.d)().travel,D=C.locations,L=C.tripCreate,w=C.visitEdit;if(_)return o.a.createElement("div",null,"...Error");if(P)return o.a.createElement("div",null,"...Loading");var V=R.visitsIds,B=R.visitsDict,Y=V.map((function(e){return B[e]})).filter(Boolean),H=function(e,t){if(t&&t===ae)return oe;var r={totalVisits:{},countries:{},years:{},trips:{},tripsCountries:{},yearsCountries:{},locations:{}};return e.forEach((function(e){var t=e.locationId,n=e.countryId,i=e.tripId,a=e.visitId,o=re(e);ce(r.countries,n,"visits",a),ce(r.countries,n,"locations",t),o&&ce(r.countries,n,"years",o),ce(r.countries,n,"trips",i),o&&(ce(r.years,o,"locations",t),ce(r.years,o,"countries",n),ce(r.years,o,"trips",i)),ce(r.trips,i,"visits",a),ce(r.trips,i,"locations",t),ce(r.trips,i,"countries",n),ce(r.locations,t,"visits",a),o&&ce(r.locations,t,"years",o),ce(r.locations,t,"trips",i),ce(r.tripsCountries,ee(i,n),"locations",t),o&&ce(r.yearsCountries,te(o,n),"locations",t)}),{}),ae=t,oe=r,r}(Y,R.updatesCounter),M=dt({locationsUrl:D.toUrl({userAlias:r}),createTripUrl:L.toUrl({userAlias:r}),locationsCount:Object.keys((null==H?void 0:H.locations)||{}).length,countriesCount:Object.keys((null==H?void 0:H.countries)||{}).length,groupBy:h}),U=Y.sort(function(e,t,r){var n=r.groupBy,i=r.sortBy;switch(n){case I:return Ee(e,t,r,[j.TRIP.PRESERVE_ORDER,j.TRIP.DEPARTURE_TIME,j.TRIP.ID,j.LOCATION.NAME]);case O:return Ee(e,t,r,[j.TRIP.PRESERVE_ORDER,j.TRIP.DEPARTURE_TIME,j.TRIP.ID].concat(me(be(i,j.COUNTRY)),[j.COUNTRY.NAME_ID],me(be(i,j.LOCATION)),[j.LOCATION.NAME_ID]));case d:return Ee(e,t,r,[].concat(me(be(i,j.COUNTRY)),[j.COUNTRY.NAME_ID],me(be(i,j.LOCATION)),[j.LOCATION.NAME_ID]));case p:return Ee(e,t,r,[j.VISIT.ARRIVAL_YEAR].concat(me(be(i,j.LOCATION)),[j.LOCATION.NAME_ID]));case m:return Ee(e,t,r,[j.VISIT.ARRIVAL_YEAR].concat(me(be(i,j.COUNTRY)),[j.COUNTRY.NAME_ID],me(be(i,j.LOCATION)),[j.LOCATION.NAME_ID]));case y:return Ee(e,t,r,[].concat(me(be(i,j.COUNTRY)),[j.COUNTRY.NAME_ID,j.VISIT.ARRIVAL_YEAR],me(be(i,j.LOCATION)),[j.LOCATION.NAME_ID]));case v:default:return Ee(e,t,r,[].concat(me(be(i,j.LOCATION)),[j.LOCATION.NAME_ID]))}}(R,H,{groupBy:h,sortBy:S})),x=U.reduce((function(e,t,n){return ut({prevVisit:n>0?U[n-1]:{},visit:t,nextVisit:n<U.length-1?U[n+1]:{},provision:R,classes:b,counters:H,groupBy:h,sortBy:S,hasEditRights:a,travelPaths:C,userAlias:r,visitEditUrl:a&&h===I?w.toUrl({strVisitId:String(t.visitId)}):void 0,isObscure:f}).filter(Boolean).forEach((function(t){return e.push(t)})),e}),[M]);return o.a.createElement("div",{key:"".concat(h,"_").concat(S)},x)}dt.propTypes={locationsUrl:st.a.string.isRequired,locationsCount:st.a.number.isRequired,countriesCount:st.a.number.isRequired}},861:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(0),i=r(79),a=r(902),o=r.n(a),c=r(903),u=r.n(c),l=r(925),s=r.n(l),f=r(172),v=r.n(f),d=r(105),p=r(20),m=r(886),y=r(868),I=r(887);function O(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function b(e){var t=e.userAlias,r=function(e){var t=e.userAlias,r=e.tripsIds,n=Object(i.c)((function(e){return{tripsDict:Object(d.c)(e,"trips")||{}}})).tripsDict,a=!r,o=!a&&r.filter((function(e){return!n[e]}));return Object(d.g)({domain:"travel.trips-".concat(t),isProvision:!0,modelName:"trips",observe:t,query:{userAlias:t,navigation:{isDisabled:!0},filter:a?{}:{id:{comparator:"in",value:o}}}})}({userAlias:t,tripsIds:e.tripsIds}),a=Object(m.a)({domain:"travel.trips-".concat(t,".user"),userAlias:t}),c=a.user,u=(c=void 0===c?{}:c).locationsRating,l=void 0===u?{}:u,f=O(a,["user"]),b=(Object(p.o)(r)||{}).data,g=void 0===b?[]:b,T=Object(i.c)((function(e){return{tripsDict:Object(d.c)(e,"trips")||{},visitsDict:Object(d.c)(e,"visits")||{},ridesDict:Object(d.c)(e,"rides")||{},countriesDict:Object(d.c)(e,"countries")||{},locationsDict:Object(d.c)(e,"locations")||{}}})),A=T.tripsDict,h=T.visitsDict,j=T.ridesDict,S=T.countriesDict,N=T.locationsDict,R=Object(n.useMemo)((function(){return Array.from(new Set(g.flatMap((function(e){var t;return(null===(t=A[e])||void 0===t?void 0:t.visits)||[]}))))}),[g,A]),P=Object(n.useMemo)((function(){return Array.from(new Set(g.flatMap((function(e){var t;return(null===(t=A[e])||void 0===t?void 0:t.rides)||[]}))))}),[g,A]),_=Object(n.useMemo)((function(){return Array.from(new Set(R.flatMap((function(e){var t;return(null===(t=h[e])||void 0===t?void 0:t.countryId)||[]}))))}),[R,h]),C=Object(n.useMemo)((function(){return Array.from(new Set(R.flatMap((function(e){var t;return(null===(t=h[e])||void 0===t?void 0:t.locationId)||[]}))))}),[R,h]),D=Object(y.a)(),L=Object(I.a)({domain:"travel.locations-".concat(t),locationsIds:C}),w=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{updatesCounter:s()(t.map(p.p)),isReady:t.every(p.i),isPending:t.some(p.h),isValid:t.every(p.k),error:t.find(p.g),errors:t.map(p.f).filter(Boolean),invalidate:function(){return t.forEach((function(e){return(0,e.invalidate)()}))}}}(r,f,D,L),V=w.isError,B=w.isValid,Y=w.isReady,k=w.isPending,H=function(e,t,r){var n=e.reduce((function(e,n){var i=t[n];if(!i)return e;var a=r[n],o=i.countryId;return e[o]||(e[o]=[]),e[o].push(a),e}),{});return v()(n,(function(e){return function(e){if(!e.length)return 1/0;var t=e.length/e.map((function(e){return 1/e})).reduce((function(e,t){return e+t})),r=o()(e),n=Math.log(e.length);return 1/(1/t+n/r)}(e)}))}(C,N,l);return{tripsProvision:r,countriesProvision:D,locationsProvision:L,isError:V,isValid:B,isReady:Y,isPending:k,tripsIds:g,tripsDict:A,visitsIds:R,visitsDict:h,ridesIds:P,ridesDict:j,ridesStats:E(P,j),locationsIds:C,locationsDict:N,locationsRating:l,countriesIds:_,countriesDict:S,countriesRating:H}}function E(e,t){return{earliestDeparture:new Date(u()(e.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.departureDateTime.getTime()})))),latestArrival:new Date(o()(e.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.arrivalDateTime.getTime()}))))}}},868:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(105);r(20);function i(){return Object(n.g)({domain:"travel.countries",isProvision:!0,modelName:"countries",query:{navigation:{isDisabled:!0}}})}},869:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return m})),r.d(t,"a",(function(){return y}));var n=r(323),i=r(893),a=r(894),o=r(875),c=r(878),u="d MMMM yyyy",l="LLLL yyyy",s="LLLL",f="d MMMM",v="d";function d(e,t,r){var d=r?l:u,p=Object(c.a)(t,d,{locale:o.a});if(Object(n.a)(e,t))return p;var m="";if(Object(i.a)(e,t))r||(m=Object(c.a)(e,v,{locale:o.a}));else if(Object(a.a)(e,t)){var y=r?s:f;m=Object(c.a)(e,y,{locale:o.a})}else m=Object(c.a)(e,d,{locale:o.a});return"".concat(m,"—").concat(p)}function p(e,t){return d(e.departureDateTime,e.arrivalDateTime,t)}function m(e,t){var r=e.departureDateTime;return d(e.arrivalDateTime,r,t)}function y(e){var t=e.periodStart,r=e.periodEnd,n=e.isObscure,i=e.placeholder;if(!r){var a=n?l:u,s=Object(c.a)(t,a,{locale:o.a});return"".concat(s,"—").concat(i)}return d(t,r,n)}},870:function(e,t,r){"use strict";function n(e){return e instanceof Date&&!Number.isNaN(e.getTime())}r.d(t,"a",(function(){return n}))},878:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(56),i=r(870);function a(e){if(!Object(i.a)(e))return"?";for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return n.a.apply(void 0,[e].concat(r))}},879:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(0),i=r.n(n),a=r(89),o=r(851);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e){return i.a.createElement(o.a,c({},e,{component:a.b}))}},886:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(79),i=r(105);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=e.domain,r=e.userAlias,a=Object(n.c)((function(e){return Object(i.e)(e,"users",r)}));return o(o({},Object(i.g)({domain:t,applicableSchemaName:"item",isProvision:!0,modelName:"users",observe:r,condition:Boolean(r),query:{id:r}})),{},{user:a})}},887:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return f}));var n=r(79),i=r(105);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){var t=e.domain,r=e.locationsIds,a=Object(n.c)((function(e){return Object(i.c)(e,"locations")||{}})),o=r.filter((function(e){return!a[e]}));return Object(i.g)({domain:t,isProvision:!0,modelName:"locations",observe:r,condition:Boolean(o.length),query:{filter:{id:{comparator:"in",value:o}},navigation:{isDisabled:!0}}})}function f(e){var t=e.domain,r=u(Object(i.h)({domain:t,modelName:"locations",method:"POST"}),2),n=r[0];return o(o({},r[1]),{},{submitLocationRating:n})}},889:function(e,t,r){"use strict";r.d(t,"b",(function(){return n.a})),r.d(t,"c",(function(){return f})),r.d(t,"a",(function(){return v}));var n=r(861),i=(r(868),r(79)),a=r(105);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=e.userAlias,r=e.visitId,n=Object(i.c)((function(e){return{visitsDict:Object(a.c)(e,"visits")||{}}})).visitsDict[r];return l({visit:n},Object(a.g)({domain:"travel.visit".concat(r,"-").concat(t),isProvision:!0,modelName:"visits",observe:r,condition:!n,query:{userAlias:t,filter:{visit_id:{comparator:"=",value:r}},navigation:{isDisabled:!0}}}))}function v(e){var t=e.domain,r=o(Object(a.h)({domain:t,modelName:"visits",method:"POST",contentType:"multipart/form-data"}),2),n=r[0];return l(l({},r[1]),{},{submitVisitPhoto:n})}},926:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(0),i=r.n(n),a=r(841),o=r(967),c=r.n(o),u=r(869),l=r(93),s=r(927),f=Object(a.a)({icon:{color:"gray",fontSize:16,height:16},absoluteIcon:{color:"gray",fontSize:16,height:16,position:"absolute"},detail:{color:"gray",fontSize:12}});function v(e){var t=e.ride,r=e.ride,n=(r=void 0===r?{}:r).rideType,a=e.className,o=e.isLong,v=f();return t?i.a.createElement("div",{className:a},i.a.createElement(s.a,{ride:t,className:v.icon}),n===l.RIDE_TYPES.HITCH_HIKING&&i.a.createElement(c.a,{className:v.absoluteIcon}),o&&Object(u.b)(t)):null}},927:function(e,t,r){"use strict";r.d(t,"a",(function(){return M}));var n=r(0),i=r.n(n),a=r(957),o=r.n(a),c=r(956),u=r.n(c),l=r(954),s=r.n(l),f=r(951),v=r.n(f),d=r(965),p=r.n(d),m=r(953),y=r.n(m),I=r(959),O=r.n(I),b=r(960),E=r.n(b),g=r(952),T=r.n(g),A=r(928),h=r.n(A),j=r(955),S=r.n(j),N=r(958),R=r.n(N),P=r(961),_=r.n(P),C=r(962),D=r.n(C),L=r(963),w=r.n(L),V=r(964),B=r.n(V),Y=r(966),k=r.n(Y),H=r(93);function M(e){var t=e.ride.vehicleType,r=e.className,n=function(e){switch(e){case H.VEHICLE_TYPES.CAR:return v.a;case H.VEHICLE_TYPES.TRAIN:return T.a;case H.VEHICLE_TYPES.AIRCRAFT:return y.a;case H.VEHICLE_TYPES.BUS:case H.VEHICLE_TYPES.TROLLEY:case H.VEHICLE_TYPES.CITY_BUS:return s.a;case H.VEHICLE_TYPES.MOTORHOME:case H.VEHICLE_TYPES.JITNEY:return S.a;case H.VEHICLE_TYPES.LOCAL_TRAIN:return T.a;case H.VEHICLE_TYPES.FERRY:return u.a;case H.VEHICLE_TYPES.BIKE:return o.a;case H.VEHICLE_TYPES.BY_FEET:return R.a;case H.VEHICLE_TYPES.MOTORBIKE:return O.a;case H.VEHICLE_TYPES.TRUCK:return h.a;case H.VEHICLE_TYPES.ALL_TERRAIN_VEHICLE:return E.a;case H.VEHICLE_TYPES.TRAM:return _.a;case H.VEHICLE_TYPES.TAXI:return D.a;case H.VEHICLE_TYPES.SUBWAY:return w.a;case H.VEHICLE_TYPES.PUBLIC_TRANSPORT:return B.a;case H.VEHICLE_TYPES.ROPEWAY:case H.VEHICLE_TYPES.FUNICULAR:return p.a;default:return k.a}}(t);return i.a.createElement(n,{className:r})}},987:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(976),i=r(977),a=r(968),o=r.n(a),c=r(972),u=r.n(c),l=function(e,t){var r=t.maxLength,n=t.separator,i=void 0===n?", ":n,a=u()(e),o=a.slice(0,r).join(i);return a.length>r?"".concat(o,"..."):o},s=r(249),f=r(869);function v(e,t,r,a){var c,u=e||{},v=u.visits,d=u.originLocationId,p=u.tripName,m=u.hasAutogeneratedTripName,y=null===(c=a[d])||void 0===c?void 0:c.countryId;if(!m)return p||"Без названия";if(!v.length)return"Без названия";var I=Object(f.c)({arrivalDateTime:Object(n.a)(v.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.arrivalDateTime}))),departureDateTime:Object(i.a)(v.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.departureDateTime})))}),O=Object.keys(o()(v.filter((function(e){var r;return(null===(r=t[e])||void 0===r?void 0:r.visitType)!==s.VISIT_TYPES.TRANSIT})),"countryId"));if(1===O.length){var b=l(v.map((function(e){var r;return null===(r=t[e])||void 0===r?void 0:r.locationName})),{maxLength:4});return"".concat(b||"Без названия",", ").concat(I)}var E=l(O.map((function(e){return Number(e)!==y&&r[e]&&r[e].countryName})).filter(Boolean),{maxLength:4});return"".concat(E||"Без названия",", ").concat(I)}}}]);
//# sourceMappingURL=travel-VisitsPage-65e70af2350206114865.js.map