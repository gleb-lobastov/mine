(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{794:function(e,t,r){"use strict";var a=r(0),n=r.n(a),i=r(258),o=function(e){return function(t){var r=t.provision,a=(r=void 0===r?{}:r).isComplete,o=void 0!==a&&a,l=r.isPending;return!o||(void 0===l||l)?n.a.createElement(i.a,null):n.a.createElement(e,t)}},l=r(127);t.a=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}(l.a.apply(void 0,t),o)(e)}}},817:function(e,t,r){"use strict";r.d(t,"b",function(){return l}),r.d(t,"a",function(){return s});var a=r(798),n=r.n(a),i=r(818),o=r.n(i),l=function(e){return e.sort(function(e,t){return e.orderInTrip-t.orderInTrip})},s=function(e){return o()(n()(e,"tripId"),l)}},954:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),i=r(2),o=r.n(i),l=r(42),s=r(260),c=r.n(s),u=r(809),d=r.n(u),p=r(135),f=r(127),v=r(794),m=r(27),b=r(136),E=r(782),y=r(781),g=r(790),O=r(784),I=r(783),h=r(951),S=r(950),T=r(174),R=r(113),C=r(7),P=r(789),j=r(792),V=r(785),N=r(959),w=r(786),L=function(e){var t=e.caption,r=e.classes,a=e.hasNullOption,i=e.inputId,o=e.onChange,l=e.optionRender,s=e.options,c=e.value;return n.a.createElement("div",{className:r.container},n.a.createElement(j.a,{component:"label",shrink:!0,htmlFor:i},t),n.a.createElement(w.a,{value:c,displayEmpty:!0,onChange:o,input:n.a.createElement(V.a,{id:i}),className:r.selectRoot},a&&n.a.createElement(N.a,{key:null,value:null},l({option:null,index:-1,options:s})),s.map(function(e,t){return n.a.createElement(N.a,{key:e,value:e},l({option:e,index:t,options:s}))})))},A=o.a.oneOfType([o.a.number,o.a.string]);L.propTypes={caption:o.a.string.isRequired,classes:o.a.arrayOf(o.a.string).isRequired,hasNullOption:o.a.bool,inputId:o.a.string.isRequired,onChange:o.a.func.isRequired,optionRender:o.a.func,options:o.a.arrayOf(A),value:A},L.defaultProps={hasNullOption:!0,optionRender:function(e){return e.option||""},options:[],value:void 0};var D=Object(C.a)({container:{display:"inline-block",flexGrow:"1",flexBasis:"0"},selectRoot:{display:"block"}})(L),_=r(945),Y=r(780),k=r(778),H=function(e){var t=e.inputValue,r=e.sourceProps,a=(r=void 0===r?{}:r).suggestions,i=void 0===a?[]:a,o=e.children,l=t.toLowerCase();return n.a.createElement(n.a.Fragment,null,o(i.filter(function(e){return e.label.toLowerCase().includes(l)})))};H.propTypes={inputValue:o.a.string.isRequired,sourceProps:o.a.shape({suggestions:o.a.array}).isRequired,children:o.a.func.isRequired};var q=H;function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){F(e,t,r[t])})}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var B=function(e){var t=e.inputProps,r=e.classes,a=e.ref,i=M(e,["inputProps","classes","ref"]);return n.a.createElement(P.a,x({InputProps:U({inputRef:a,classes:{root:r.inputRoot,input:r.inputInput}},t)},i))};function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var W=function(e){var t=e.itemProps,r=e.isHighlighted,a=e.isSelected,i=e.children;return n.a.createElement(N.a,G({},t,{selected:r,component:"div",style:{fontWeight:a?500:400}}),i)};W.propTypes={itemProps:o.a.object,isHighlighted:o.a.bool,isSelected:o.a.bool,children:o.a.func.isRequired},W.defaultProps={itemProps:void 0,isHighlighted:!1,isSelected:!1};var K=W;function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function J(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var X=Object(Y.a)(function(e){return{root:{},container:{},paper:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0},inputRoot:{},inputInput:{}}}),$=function(e){return(e||{}).label},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.SuggestionsResolver,r=void 0===t?q:t,a=e.SuggestionItemComponent,i=void 0===a?K:a,o=e.InputComponent,l=void 0===o?B:o;return function(e){var t=e.sourceProps,a=e.inputProps,o=e.inputFieldProps,s=J(e,["sourceProps","inputProps","inputFieldProps"]),c=X();return n.a.createElement("div",{className:c.root},n.a.createElement(_.a,z({itemToString:$},s),function(e){var s=e.getInputProps,u=e.getItemProps,d=e.getMenuProps,p=e.highlightedIndex,f=e.inputValue,v=e.isOpen,m=e.selectedItem;return n.a.createElement("div",{className:c.container},n.a.createElement(l,z({fullWidth:!0,classes:c,inputProps:s(a)},o)),n.a.createElement("div",d(),v&&n.a.createElement(k.a,{className:c.paper,square:!0},n.a.createElement(r,{inputValue:f,sourceProps:t},function(e){return e.map(function(e,t){return n.a.createElement(i,{key:e.label,itemProps:u({item:e}),isHighlighted:p===t,isSelected:Boolean(m)&&m.label===e.label},e.label)})}))))}))}};Q();function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ee,te=Q({SuggestionsResolver:Object(v.a)(function(e,t){var r=t.inputValue,a=t.sourceProps,n=a.modelName,i=a.domain,o=a.filterField,l=a.numberOfItemsToRequest;return{identity:r,require:{entities:{modelName:n,query:{filter:Z({},o,{comparator:"~",value:"%".concat(r,"%")}),navigation:{pageSize:l}}}},meta:{domain:i},debounceRequest:500}})(function(e){var t=e.sourceProps,r=(t=void 0===t?{}:t).filterField,a=t.convertEntityToSuggestion,n=void 0===a?function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){Z(e,t,r[t])})}return e}({},e,{label:e[r]})}:a,i=e.entities,o=(i=void 0===i?{}:i).data,l=void 0===o?[]:o;return(0,e.children)((l||[]).map(n))})}),re=r(239);function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ne=(ae(ee={},re.TRIP_TYPES.LEISURE,"Отдых"),ae(ee,re.TRIP_TYPES.BUSINESS,"Работа"),ae(ee,re.TRIP_TYPES.MIXED,"Смешанный"),ae(ee,re.TRIP_TYPES.OTHER,"Другой"),ee);function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var le=function(e){var t=e.option;return t?ne[t]:"Не указан"},se=function(e){var t=e.tripName,r=e.tripType,n=e.originLocationId,i=oe(Object(a.useState)({tripName:t,tripType:r,originLocationId:n}),2),o=i[0],l=i[1];return{tripState:o,setTripState:function(e){return l(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){ie(e,t,r[t])})}return e}({},o,e))}}},ce=function(e){var t=e.classes,r=e.locationsDict,i=e.tripState,o=i.tripType,l=i.tripName,s=i.originLocationId,c=e.setTripState,u=Object(a.useCallback)(function(e){var t=e.target.value;return c({tripName:t})},[c]),d=Object(a.useCallback)(function(e){var t=e.target.value;return c({tripType:t})},[c]),p=Object(a.useCallback)(function(e){var t=e.locationId;return c({originLocationId:t})},[c]),f=(r[s]||{}).locationName;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:t.optionGroup},n.a.createElement(P.a,{label:"Название поездки",value:l,onChange:u})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(te,{textFieldProps:{label:"Старт из"},initialInputValue:f,inputProps:{placeholder:"Населенный пункт..."},onChange:p,sourceProps:{filterField:"locationName",modelName:"locations",domain:"tripEditCard.location"}})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(D,{caption:"Тип поездки",inputId:"TripEditCard-TripTypeOptions",onChange:d,optionRender:le,options:Object.values(re.TRIP_TYPES),hasNullOption:!0,value:o})))};ce.propTypes={className:o.a.string,classes:o.a.arrayOf(o.a.string).isRequired},ce.defaultProps={className:void 0};var ue=c()(Object(R.b)(function(e){return{locationsDict:Object(f.d)(e,"locations")}}),Object(C.a)({optionGroup:{display:"block"}}))(ce);function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var pe=function(e){var t=e.initialState,r=e.children,a=e.onSubmit,i=se(t),o=i.tripState,l=i.setTripState,s=de(n.a.useState(!1),2),c=s[0],u=s[1],d=function(){return u(!1)};return n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,{"data-sort-handler":"disabled",size:"small",variant:"outlined",color:"primary",onClick:function(){return u(!0)}},r),c&&n.a.createElement(g.a,{transitionDuration:500,open:c,onClose:d,"aria-labelledby":"form-dialog-title"},n.a.createElement(S.a,{id:"form-dialog-title"},"Поездка"),n.a.createElement(I.a,null,n.a.createElement(h.a,null,"Редактирование поездки"),n.a.createElement(ue,{tripState:o,setTripState:l})),n.a.createElement(O.a,null,n.a.createElement(y.a,{onClick:d,color:"secondary"},"Отмена"),n.a.createElement(y.a,{onClick:function(){a(o),d()},color:"primary"},"Сохранить"))))};pe.propTypes={initialState:o.a.shape(T.default).isRequired,children:o.a.node.isRequired,onSubmit:o.a.func.isRequired},pe.defaultProps={};var fe=pe,ve=r(175),me=r(817),be=r(180),Ee=r(176),ye=r(177),ge=r(909),Oe=r(348),Ie=r.n(Oe),he=function(e){for(var t=e.target;t;){if(t.dataset&&"enabled"===t.dataset.sortHandler)return!1;t=t.parentNode}return!0};function Se(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Te=function(e,t){return!e||!t||e.departureRideId===t.arrivalRideId},Re=r(301),Ce=function(e){var t=e.location.locationName,r=void 0===t?"unknown":t,a=e.Icon,i=e.classes;return n.a.createElement("div",{className:i.container},a&&n.a.createElement(a,{className:i.icon}),r)};Ce.propTypes={classes:o.a.objectOf(o.a.string).isRequired,location:o.a.shape(ve.default),Icon:Re.a},Ce.defaultProps={location:{},Icon:void 0};var Pe,je=Object(C.a)({container:{display:"inline-block",marginRight:"4px"},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"}})(Ce),Ve=r(808),Ne=r.n(Ve),we=r(912),Le=r.n(we),Ae=r(910),De=r.n(Ae),_e=r(828),Ye=r.n(_e),ke=r(911),He=r.n(ke),qe=r(240);function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ue=(xe(Pe={},qe.VISIT_TYPES.TRANSIT,"Транзит"),xe(Pe,qe.VISIT_TYPES.REGULAR,"Посещение"),xe(Pe,qe.VISIT_TYPES.BASE_CAMP,"Базовый лагерь"),xe(Pe,qe.VISIT_TYPES.RELOCATION,"Переезд"),Pe);function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Be=function(e){var t=e.option;return t?Ue[t]:"Не указан"},Ge=function(e){var t=e.visitType,r=e.visitComment,n=e.locationId,i=Me(Object(a.useState)({visitComment:r,visitType:t,locationId:n}),2),o=i[0],l=i[1];return{visitState:o,setVisitState:function(e){return l(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){Fe(e,t,r[t])})}return e}({},o,e))}}},We=function(e){var t=e.classes,r=e.locationsDict,i=e.visitState,o=i.visitType,l=i.visitComment,s=i.locationId,c=e.setVisitState,u=Object(a.useCallback)(function(e){var t=e.target.value;return c({visitType:t})},[c]),d=Object(a.useCallback)(function(e){var t=e.locationId;return c({locationId:t})},[c]),p=Object(a.useCallback)(function(e){var t=e.target.value;return c({visitComment:t})},[c]),f=(r[s]||{}).locationName;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:t.optionGroup},n.a.createElement(te,{textFieldProps:{label:"Место посещения"},initialInputValue:f,inputProps:{placeholder:"Населенный пункт..."},onChange:d,sourceProps:{filterField:"locationName",modelName:"locations",domain:"visitEditCard.location"}})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(D,{caption:"Тип посещения",inputId:"VisitEditCard-VisitTypeOptions",onChange:u,optionRender:Be,options:Object.values(qe.VISIT_TYPES),hasNullOption:!0,value:o})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(P.a,{label:"Комментарий",value:l,onChange:p,multiline:!0,rows:1,rowsMax:12})))};We.propTypes={className:o.a.string,classes:o.a.arrayOf(o.a.string).isRequired},We.defaultProps={className:void 0};var Ke=c()(Object(R.b)(function(e){return{locationsDict:Object(f.d)(e,"locations")}}),Object(C.a)({optionGroup:{display:"block"}}))(We);function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Je=function(e){var t=e.initialState,r=e.children,a=e.onSubmit,i=Ge(t),o=i.visitState,l=i.setVisitState,s=ze(n.a.useState(!1),2),c=s[0],u=s[1],d=function(){return u(!1)};return n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,{"data-sort-handler":"disabled",size:"small",variant:"outlined",color:"primary",onClick:function(){return u(!0)}},r),c&&n.a.createElement(g.a,{transitionDuration:500,open:c,onClose:d,"aria-labelledby":"form-dialog-title"},n.a.createElement(S.a,{id:"form-dialog-title"},"Посещение"),n.a.createElement(I.a,null,n.a.createElement(h.a,null,"Редактирование посещения"),n.a.createElement(Ke,{visitState:o,setVisitState:l})),n.a.createElement(O.a,null,n.a.createElement(y.a,{onClick:d,color:"secondary"},"Отмена"),n.a.createElement(y.a,{onClick:function(){a(o),d()},color:"primary"},"Сохранить"))))};Je.propTypes={initialState:o.a.shape(T.default).isRequired,children:o.a.node.isRequired,onSubmit:o.a.func.isRequired},Je.defaultProps={};var Xe=Je;function $e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qe=function(e){var t=e.visit,r=e.onVisitUpdate,a=e.classes;if(!t)return"Не указано";var i=t.locationName,o=function(e){switch(e){case"Transit":return De.a;case"BaseCamp":return He.a;case"Relocation":return Ye.a;case"Regular":default:return Le.a}}(t.visitType);return n.a.createElement("div",{className:a.container},o&&n.a.createElement(o,{className:a.icon}),i,n.a.createElement(Xe,{initialState:t,onSubmit:function(e){return r(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){$e(e,t,r[t])})}return e}({},t,e))}},n.a.createElement(d.a,{className:a.editIcon})))};Qe.propTypes={classes:o.a.objectOf(o.a.string).isRequired,visit:o.a.shape(Ee.default),onVisitUpdate:o.a.func.isRequired},Qe.defaultProps={visit:{}};var Ze,et,tt,rt,at=Object(C.a)({container:{display:"inline-block",marginRight:"4px"},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"},editIcon:{}})(Qe),nt=r(919),it=r.n(nt),ot=r(918),lt=r.n(ot),st=r(916),ct=r.n(st),ut=r(913),dt=r.n(ut),pt=r(927),ft=r.n(pt),vt=r(915),mt=r.n(vt),bt=r(921),Et=r.n(bt),yt=r(922),gt=r.n(yt),Ot=r(914),It=r.n(Ot),ht=r(917),St=r.n(ht),Tt=r(920),Rt=r.n(Tt),Ct=r(923),Pt=r.n(Ct),jt=r(924),Vt=r.n(jt),Nt=r(925),wt=r.n(Nt),Lt=r(926),At=r.n(Lt),Dt=r(929),_t=r.n(Dt),Yt=r(928),kt=r.n(Yt),Ht=r(80),qt=r(244),xt=r(349);function Ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ft=(Ut(Ze={},Ht.RIDE_CLASSES.ECONOMY,"Эконом"),Ut(Ze,Ht.RIDE_CLASSES.COMFORT,"Комфорт"),Ut(Ze,Ht.RIDE_CLASSES.BUSINESS,"Бизнес"),Ut(Ze,Ht.RIDE_CLASSES.FIRST,"Первый"),Ut(Ze,Ht.RIDE_CLASSES.PRIVATE,"Частный"),Ze),Mt=(Ut(et={},Ht.RIDE_OCCUPATION.PASSENGER,"Пассажир"),Ut(et,Ht.RIDE_OCCUPATION.STUFF,"Персонал"),Ut(et,Ht.RIDE_OCCUPATION.DRIVER,"Водитель"),et),Bt=(Ut(tt={},Ht.RIDE_TYPES.SELF_DRIVE,"Самостоятельная поездка"),Ut(tt,Ht.RIDE_TYPES.SCHEDULED,"Регулярный рейс"),Ut(tt,Ht.RIDE_TYPES.CHARTER,"Чартерный рейс"),Ut(tt,Ht.RIDE_TYPES.TOUR,"Тур"),Ut(tt,Ht.RIDE_TYPES.CARPOOL,"Попутный автомобиль"),Ut(tt,Ht.RIDE_TYPES.HITCH_HIKING,"Автостоп"),Ut(tt,Ht.RIDE_TYPES.DROP_OFF,"Подбросили до места"),tt),Gt=(Ut(rt={},Ht.VEHICLE_TYPES.CAR,"Автомобиль"),Ut(rt,Ht.VEHICLE_TYPES.TRAIN,"Поезд"),Ut(rt,Ht.VEHICLE_TYPES.AIRCRAFT,"Самолет"),Ut(rt,Ht.VEHICLE_TYPES.BUS,"Автобус"),Ut(rt,Ht.VEHICLE_TYPES.MOTORHOME,"Дом на колесах"),Ut(rt,Ht.VEHICLE_TYPES.LOCAL_TRAIN,"Электричка"),Ut(rt,Ht.VEHICLE_TYPES.FERRY,"Паром"),Ut(rt,Ht.VEHICLE_TYPES.BIKE,"Велосипед"),Ut(rt,Ht.VEHICLE_TYPES.BY_FEET,"Пешком"),Ut(rt,Ht.VEHICLE_TYPES.ROPEWAY,"Канатная дорога"),Ut(rt,Ht.VEHICLE_TYPES.FUNICULAR,"Фуникулер"),Ut(rt,Ht.VEHICLE_TYPES.MOTORBIKE,"Мотоцикл"),Ut(rt,Ht.VEHICLE_TYPES.TRUCK,"Грузовик"),Ut(rt,Ht.VEHICLE_TYPES.ALL_TERRAIN_VEHICLE,"Вездеход"),Ut(rt,Ht.VEHICLE_TYPES.TRAM,"Трамвай"),Ut(rt,Ht.VEHICLE_TYPES.TROLLEY,"Троллейбус"),Ut(rt,Ht.VEHICLE_TYPES.TAXI,"Такси"),Ut(rt,Ht.VEHICLE_TYPES.CITY_BUS,"Муниципальный автобус"),Ut(rt,Ht.VEHICLE_TYPES.JITNEY,"Маршрутное такси"),Ut(rt,Ht.VEHICLE_TYPES.SUBWAY,"Метро"),Ut(rt,Ht.VEHICLE_TYPES.PUBLIC_TRANSPORT,"Общественный транспорт"),rt);function Wt(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Jt=null,Xt=function(e){var t=e.option;return t?Gt[t]:"Не указан"},$t=function(e){var t=e.option;return t?Bt[t]:"Не указан"},Qt=function(e){var t=e.option;return t?Ft[t]:"Не указан"},Zt=function(e){var t=e.option;return t?Mt[t]:"Не указан"},er=function(e){var t=e.departureVisitId,r=e.arrivalVisitId,n=e.vehicleType,i=e.rideType,o=e.rideComment,l=e.rideClass,s=e.rideOccupation,c=e.departureDateTime,u=e.arrivalDateTime,d=zt(Object(a.useState)({departureVisitId:t,arrivalVisitId:r,vehicleType:n,rideType:i,rideComment:o,rideClass:l,rideOccupation:s,departureDateTime:c,arrivalDateTime:u}),2),p=d[0],f=d[1];return{rideState:p,setRideState:function(e){return f(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){Kt(e,t,r[t])})}return e}({},p,e))}}},tr=function(e){var t=e.classes,r=e.availableVisits,i=e.originLocation,o=e.rideState,l=o.departureVisitId,s=o.arrivalVisitId,c=o.vehicleType,u=o.rideType,d=o.rideComment,p=o.rideClass,f=o.rideOccupation,v=o.departureDateTime,m=o.arrivalDateTime,b=e.setRideState,E=Object(a.useCallback)(function(e){var t=e.target.value;return b({departureVisitId:t})},[b]),y=Object(a.useCallback)(function(e){var t=e.target.value;return b({arrivalVisitId:t})},[b]),g=Object(a.useCallback)(function(e){var t=e.target.value;return b({vehicleType:t})},[b]),O=Object(a.useCallback)(function(e){var t=e.target.value;return b({rideType:t})},[b]),I=Object(a.useCallback)(function(e){var t=e.target.value;return b({rideClass:t})},[b]),h=Object(a.useCallback)(function(e){var t=e.target.value;return b({rideOccupation:t})},[b]),S=Object(a.useCallback)(function(e){return b({arrivalDateTime:e})},[b]),T=Object(a.useCallback)(function(e){return b({departureDateTime:e})},[b]),R=Object(a.useCallback)(function(e){var t=e.target.value;return b({rideComment:t})},[b]),C=r.map(function(e){return e.visitId}),j=Object.fromEntries(r.map(function(e){return[e.visitId,e]})),V=Object(a.useCallback)(function(e){var t=e.option;if(t===Jt)return i.locationName;var r=j[t];return r?r.locationName:"Не указано"},[j]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:t.optionGroup},n.a.createElement(D,{caption:"Отправление из",inputId:"RideEditCard-departureVisitId",onChange:E,optionRender:V,hasNullOption:!1,options:[Jt].concat(Wt(C)),value:l}),n.a.createElement(D,{caption:"Прибытие в",inputId:"RideEditCard-arrivalVisitId",onChange:y,hasNullOption:!1,optionRender:V,options:[].concat(Wt(C),[Jt]),value:s})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(D,{caption:"Транспорт",inputId:"RideEditCard-VehicleTypeOptions",onChange:g,optionRender:Xt,options:Object.values(Ht.VEHICLE_TYPES),value:c}),n.a.createElement(D,{caption:"Тип поездки",inputId:"RideEditCard-RideTypeOptions",onChange:O,optionRender:$t,options:Object.values(Ht.RIDE_TYPES),value:u})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(D,{caption:"Класс поездки",inputId:"RideEditCard-RideClassOptions",onChange:I,optionRender:Qt,options:Object.values(Ht.RIDE_CLASSES),value:p}),n.a.createElement(D,{caption:"Роль",inputId:"RideEditCard-RideOccupationOptions",onChange:h,optionRender:Zt,options:Object.values(Ht.RIDE_OCCUPATION),value:f})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(xt.a,{autoOk:!0,className:t.option,label:"Дата отправления",onChange:T,value:v}),n.a.createElement(xt.c,{ampm:!1,autoOk:!0,className:t.option,label:"Время отправления",onChange:T,value:v})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(xt.a,{autoOk:!0,className:t.option,label:"Дата прибытия",onChange:S,value:m}),n.a.createElement(xt.c,{ampm:!1,autoOk:!0,className:t.option,label:"Время прибытия",onChange:S,value:m})),n.a.createElement("div",{className:t.optionGroup},n.a.createElement(P.a,{className:t.option,label:"Комментарий",multiline:!0,onChange:R,rows:1,rowsMax:12,value:d})))};tr.propTypes={className:o.a.string,classes:o.a.arrayOf(o.a.string).isRequired},tr.defaultProps={className:void 0};var rr=Object(C.a)({optionGroup:{display:"flex"},option:{flexGrow:"1"}})(tr);function ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var nr=function(e){var t=e.availableVisits,r=e.initialState,a=e.children,i=e.className,o=e.onSubmit,l=e.originLocation,s=er(r),c=s.rideState,u=s.setRideState,d=ar(n.a.useState(!1),2),p=d[0],f=d[1],v=function(){return f(!1)};return n.a.createElement("div",{className:i},n.a.createElement(E.a,{"data-sort-handler":"disabled",size:"small",variant:"outlined",color:"primary",onClick:function(){return f(!0)}},a),p&&n.a.createElement(g.a,{transitionDuration:500,open:!0,onClose:v,"aria-labelledby":"form-dialog-title"},n.a.createElement(S.a,{id:"form-dialog-title"},"Транспорт"),n.a.createElement(I.a,null,n.a.createElement(h.a,null,"Как вы добрались в место назначения и как уехали из него?"),n.a.createElement(rr,{availableVisits:t,rideState:c,setRideState:u,originLocation:l})),n.a.createElement(O.a,null,n.a.createElement(y.a,{onClick:v,color:"secondary"},"Отмена"),n.a.createElement(y.a,{onClick:function(){o(c),v()},color:"primary"},"Сохранить"))))};nr.propTypes={availableVisits:o.a.arrayOf(o.a.shape(Ee.default)),initialState:o.a.shape(T.default).isRequired,children:o.a.node.isRequired,className:o.a.string,onSubmit:o.a.func.isRequired,originLocation:o.a.shape(ve.default).isRequired},nr.defaultProps={className:void 0,availableVisits:[]};var ir=nr;function or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lr=function(e){var t=e.availableVisits,r=e.originLocation,a=e.classes,i=e.className,o=e.defaultArrivalVisitId,l=e.defaultDepartureVisitId,s=e.isEditable,c=e.onRideUpdate,u=e.ride,d=e.ride,p=d.rideId,f=d.vehicleType,v=d.rideType,m=d.arrivalDateTime,b=d.departureDateTime,E=e.showDetails,y=p?u:Object(qt.a)({defaultDepartureVisitId:l,defaultArrivalVisitId:o}),g=p?function(e){switch(e){case Ht.VEHICLE_TYPES.CAR:return dt.a;case Ht.VEHICLE_TYPES.TRAIN:return It.a;case Ht.VEHICLE_TYPES.AIRCRAFT:return mt.a;case Ht.VEHICLE_TYPES.BUS:case Ht.VEHICLE_TYPES.TROLLEY:case Ht.VEHICLE_TYPES.CITY_BUS:return ct.a;case Ht.VEHICLE_TYPES.MOTORHOME:case Ht.VEHICLE_TYPES.JITNEY:return St.a;case Ht.VEHICLE_TYPES.LOCAL_TRAIN:return It.a;case Ht.VEHICLE_TYPES.FERRY:return lt.a;case Ht.VEHICLE_TYPES.BIKE:return it.a;case Ht.VEHICLE_TYPES.BY_FEET:return Rt.a;case Ht.VEHICLE_TYPES.MOTORBIKE:return Et.a;case Ht.VEHICLE_TYPES.TRUCK:return Ye.a;case Ht.VEHICLE_TYPES.ALL_TERRAIN_VEHICLE:return gt.a;case Ht.VEHICLE_TYPES.TRAM:return Pt.a;case Ht.VEHICLE_TYPES.TAXI:return Vt.a;case Ht.VEHICLE_TYPES.SUBWAY:return wt.a;case Ht.VEHICLE_TYPES.PUBLIC_TRANSPORT:return At.a;case Ht.VEHICLE_TYPES.ROPEWAY:case Ht.VEHICLE_TYPES.FUNICULAR:default:return ft.a}}(f):kt.a,O=n.a.createElement(g,{className:a.icon}),I=s?n.a.createElement(ir,{className:a.editDialogTrigger,initialState:y,availableVisits:t,onSubmit:function(e){return c(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){or(e,t,r[t])})}return e}({},u,e))},originLocation:r},O):O;return n.a.createElement("div",{className:Ne()(i,a.container)},v===Ht.RIDE_TYPES.HITCH_HIKING&&n.a.createElement(_t.a,{className:a.icon}),I,Boolean(p&&E)&&n.a.createElement("span",{className:a.details},function(e,t){var r=Boolean(t)&&t.toLocaleDateString(),a=Boolean(e)&&e.toLocaleDateString();return r===a?r:"".concat(a,"—").concat(r)}(b,m)))};lr.propTypes={availableVisits:o.a.arrayOf(o.a.shape(Ee.default)),classes:o.a.objectOf(o.a.string).isRequired,className:o.a.string,defaultArrivalVisitId:o.a.number,defaultDepartureVisitId:o.a.number,isEditable:o.a.bool,onRideUpdate:o.a.func.isRequired,originLocation:o.a.shape(ve.default).isRequired,ride:o.a.shape(T.default),showDetails:o.a.bool},lr.defaultProps={availableVisits:[],className:void 0,defaultArrivalVisitId:void 0,defaultDepartureVisitId:void 0,isEditable:!0,ride:{},showDetails:!1};var sr=Object(C.a)({container:{display:"inline-block"},icon:{marginRight:"4px",display:"inline-block",verticalAlign:"text-bottom"},details:{marginRight:"4px"},editDialogTrigger:{display:"inline-block"}})(lr),cr=r(930),ur=r.n(cr),dr=function(e){var t=e.className,r=e.classes;return n.a.createElement(ur.a,{className:Ne()(t,r.dragHandler),"data-sort-handler":"enabled"})};dr.propTypes={className:o.a.string,classes:o.a.arrayOf(o.a.string).isRequired},dr.defaultProps={className:void 0};var pr=Object(C.a)({dragHandler:{cursor:"grab",marginLeft:"4px",position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-block"}})(dr);function fr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vr=function(e){var t,r,a=e.visit,i=e.visit,o=(i=void 0===i?{}:i).visitId,l=i.arrivalRideId,s=i.departureRideId,c=e.ridesDict,u=e.classes,d=e.prevVisitId,p=e.nextVisitId,f=e.tripVisitsList,v=e.isEditable,m=e.isSorting,b=e.isArrivalRideMatch,E=e.isDepartureRideMatch,y=e.onRideUpdate,g=e.onVisitUpdate,O=e.originLocation,I=v&&!b,h=v&&!E;return n.a.createElement("div",{className:u.container},n.a.createElement(sr,{availableVisits:f,defaultDepartureVisitId:d,defaultArrivalVisitId:o,visitId:o,isEditable:v,className:Ne()(u.ride,(t={},fr(t,u.alwaysVisible,m||!E),fr(t,u.warning,I),t)),ride:c[l],showDetails:m||I,onRideUpdate:y,originLocation:O}),n.a.createElement(at,{visit:a,onVisitUpdate:g,classes:{editIcon:u.visibleOnlyOnHover}}),(!E||m)&&n.a.createElement(sr,{className:Ne()(u.ride,(r={},fr(r,u.alwaysVisible,m||!E),fr(r,u.warning,h),r)),ride:c[s],availableVisits:f,defaultDepartureVisitId:o,defaultArrivalVisitId:p,isEditable:v&&!E,showDetails:m||h,onRideUpdate:y,originLocation:O}),n.a.createElement(pr,{className:u.visibleOnlyOnHover}))};vr.propTypes={classes:o.a.objectOf(o.a.string).isRequired,isArrivalRideMatch:o.a.bool,isDepartureRideMatch:o.a.bool,isEditable:o.a.bool,isSorting:o.a.bool,nextVisitId:o.a.number,onRideUpdate:o.a.func.isRequired,onVisitUpdate:o.a.func.isRequired,originLocation:o.a.shape(ve.default).isRequired,prevVisitId:o.a.number,ridesDict:o.a.objectOf(o.a.shape(T.default)).isRequired,tripVisitsList:o.a.arrayOf(o.a.shape(Ee.default)),visit:o.a.shape(Ee.default).isRequired},vr.defaultProps={isArrivalRideMatch:!0,isDepartureRideMatch:!0,isEditable:!1,isSorting:!1,nextVisitId:null,prevVisitId:null,tripVisitsList:[]};var mr=Object(C.a)({alwaysVisible:{},container:{position:"relative","&:hover $editDialogTrigger":{visibility:"visible"},"&:hover $visibleOnlyOnHover":{visibility:"visible"}},editDialogTrigger:{marginLeft:"4px",position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-block",visibility:"hidden"},visibleOnlyOnHover:{visibility:"hidden"},ride:{},warning:{color:"red"}})(vr);var br=function(e){var t,r,a,i=e.classes,o=e.isSorting,l=e.onVisitUpdate;return n.a.createElement("div",{className:Ne()((t={},r=i.draggableContainer,a=!o,r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t))},n.a.createElement("span",null,"Добавить поездку"),n.a.createElement(Xe,{initialState:{visitType:null,visitComment:""},onSubmit:l},n.a.createElement(d.a,{className:i.visibleOnlyOnHover})),n.a.createElement(pr,{className:i.visibleOnlyOnHover}))};br.propTypes={classes:o.a.arrayOf(o.a.string).isRequired,isSorting:o.a.bool,onVisitUpdate:o.a.func.isRequired},br.defaultProps={isSorting:!1};var Er=Object(C.a)({visibleOnlyOnHover:{visibility:"hidden"},draggableContainer:{position:"relative","&:hover $visibleOnlyOnHover":{visibility:"visible"}}})(br);function yr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Or(){return(Or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function Ir(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var hr=Object(ge.SortableContainer)(function(e){var t=e.children;return n.a.createElement("div",null,t)}),Sr=Object(ge.SortableElement)(function(e){var t=e.replaceWithNode,r=e.onVisitUpdate,a=Ir(e,["replaceWithNode","onVisitUpdate"]);return t||n.a.createElement(mr,Or({onVisitUpdate:r},a))}),Tr=function(e){var t=e.isEditable,r=e.locationsDict,i=e.onRideUpdate,o=e.onVisitsOrderUpdate,l=e.ridesDict,s=e.trip,c=e.trip,u=c.tripId,p=c.originLocationId,f=c.tripName,v=e.tripIndex,m=e.tripVisitsList,b=e.onTripUpdate,E=e.onVisitUpdate,y=e.storyUrl,g=t,O=gr(Object(a.useState)(!1),2),I=O[0],h=O[1],S=gr(Object(a.useState)(m.length),2),T=S[0],R=S[1],C=g?Sr:mr,P=(t?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return[].concat(Se(e.slice(0,r)),[t],Se(e.slice(r)))}(m,{isItVisitCreatorControl:!0},T):m).map(function(e,a){var o=e.isItVisitCreatorControl,s=e.visitId;if(o)return n.a.createElement(Sr,{key:"visitCreator",index:a,replaceWithNode:n.a.createElement(Er,{isSorting:I,onVisitUpdate:function(e){return E(e,{indexInCollection:T,collection:m,tripId:u})}})});var c=gr(function(e,t,r){var a=t-1-(t>r?1:0),n=t+1-(t+1>r?1:0);return[a>=0?e[a]:null,n<e.length?e[n]:null]}(m,a,T),2),d=c[0],f=c[1],v=(d||{}).visitId,b=(f||{}).visitId;return n.a.createElement(C,{index:a,isArrivalRideMatch:Te(d,e),isDepartureRideMatch:Te(e,f),isEditable:t,isSorting:I,key:s,nextVisitId:b,onRideUpdate:i,onVisitUpdate:E,originLocation:r[p],prevVisitId:v,ridesDict:l,tripVisitsList:m,visit:e})}),j=g?n.a.createElement(hr,{onSortEnd:function(e,t){h(!1);var r=e.oldIndex,a=e.newIndex;r===T?R(a):o(t,{oldIndex:r>T?r-1:r,newIndex:a>T?a-1:a,collection:m})},shouldCancelStart:he,updateBeforeSortStart:function(){return h(!0)},lockAxis:"y",lockToContainerEdges:!0},P):n.a.createElement("div",null,P),V=n.a.createElement(je,{location:r[p],Icon:Ie.a}),N=n.a.createElement(fe,{initialState:s,onSubmit:function(e){return b(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){yr(e,t,r[t])})}return e}({},s,e))}},n.a.createElement(d.a,null)),w=m[m.length-1],L=m[m.length-2],A=w||{},D=A.departureRideId,_=A.visitId,Y=n.a.createElement(sr,{availableVisits:m,defaultDepartureVisitId:_,isEditable:t,onRideUpdate:i,originLocation:r[p],ride:l[D],showDetails:I||Te(L,w)}),k=m.some(function(e){var t=e.visitComment,r=e.arrivalRideId,a=e.departureRideId;if(t)return!0;if((l[r]||{}).rideComment)return!0;var n=(l[a]||{}).rideComment;return Boolean(n)});return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"".concat(v+1,". ").concat(f),t&&N),V,j,Y,V,k&&n.a.createElement("div",null,n.a.createElement(ye.b,{to:y},"Заметки")))};Tr.propTypes={tripIndex:o.a.number.isRequired,isEditable:o.a.bool,locationsDict:o.a.objectOf(o.a.shape(ve.default)).isRequired,onRideUpdate:o.a.func.isRequired,onTripUpdate:o.a.func.isRequired,onVisitsOrderUpdate:o.a.func.isRequired,ridesDict:o.a.objectOf(o.a.shape(T.default)).isRequired,trip:o.a.shape(be.default).isRequired,tripVisitsList:o.a.arrayOf(o.a.shape(Ee.default))},Tr.defaultProps={isSortable:!1,tripVisitsList:[]};var Rr=Tr;function Cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){Pr(e,t,r[t])})}return e}function Pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jr,Vr=(jr={orderResolver:function(e){return e.orderInTrip}}.orderResolver,function(e){var t=e.index,r=e.collection;if(!r.length)return 100;if(t<=0)return jr(r[0])-1;if(t>=r.length-1)return jr(r[r.length-1])+1;var a=jr(r[t-1]),n=jr(r[t]);return(a+n)/2+(Math.random()-.5)*(n-a)/2}),Nr=Object(p.a)(me.a),wr=function(e){var t=e.trips,r=(t=void 0===t?{}:t).data,i=void 0===r?[]:r,o=e.visits,l=(o=void 0===o?{}:o).data,s=void 0===l?[]:l,c=e.locationsDict,u=e.namedPaths,p=e.ridesDict,f=e.request,v=Object(b.c)().isAuthenticated;if(!p||!s)return n.a.createElement("div",null,"None");var m=Object(a.useCallback)(function(e,t){var r=t.oldIndex,a=t.newIndex,n=t.collection;r!==a&&f(function(e){var t=e.oldIndex,r=e.newIndex,a=e.collection;return{modelName:"visits",query:{id:a[t].visitId,body:{orderInTrip:Vr({index:r,collection:a})}},meta:{domain:"trips.visits.sort"}}}({oldIndex:r,newIndex:a,collection:n}))},[f]),E=Object(a.useCallback)(function(e){return f(function(e){var t=e.ride;return{modelName:"rides",query:{id:e.ride.rideId,body:t},meta:{domain:"trips.visits.rides"}}}({ride:e}))},[f]),y=Object(a.useCallback)(function(e){return f(function(e){var t=e.trip;return{modelName:"trips",query:{id:e.trip.tripId,body:t},meta:{domain:"trips.visits.trips"}}}({trip:e}))},[f]),g=Object(a.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.indexInCollection,a=t.collection,n=t.tripId;return f(function(e){var t=e.visit,r=e.visit.visitId,a=e.tripId,n=e.indexInCollection,i=e.collection;return{modelName:"visits",query:{id:r,body:Cr({},t,{tripId:a,orderInTrip:n||0===n?Vr({index:n,collection:i}):void 0})},meta:{domain:"trips.visits.visit"}}}({visit:e,tripId:n,indexInCollection:r,collection:a}))},[f]),O=Nr(s);return n.a.createElement(n.a.Fragment,null,v&&n.a.createElement(fe,{initialState:{tripType:null},onSubmit:y},n.a.createElement(d.a,null)),i.map(function(e,t){var r=e.tripId;return n.a.createElement("div",{key:r},n.a.createElement(Rr,{locationsDict:c,onRideUpdate:E,onTripUpdate:y,onVisitUpdate:g,onVisitsOrderUpdate:m,ridesDict:p,trip:e,tripIndex:t,tripVisitsList:O[r],isEditable:v,storyUrl:u.travel.tripStory.toUrl({strTripId:String(r)})}))}))};wr.propTypes={namedPaths:m.d.namedPaths.isRequired,isAuthenticated:b.a.isAuthenticated.isRequired,request:o.a.func.isRequired,trips:o.a.shape({data:o.a.arrayOf(o.a.shape(be.default))}).isRequired,visits:o.a.shape({data:o.a.arrayOf(o.a.shape(Ee.default))}).isRequired,ridesDict:o.a.objectOf(o.a.shape(T.default)).isRequired,locationsDict:o.a.objectOf(o.a.shape(ve.default)).isRequired};t.default=c()(l.f,m.f,Object(v.a)(function(e,t){var r=t.match.params.userAlias,a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).userAlias,n=(Object(f.e)(e,"trips.trips")||{}).fallback,i=((void 0===n?{}:n)[0]||{}).data,o=void 0===i?[]:i;return{identity:{userAlias:r,userTripsIds:o},require:{locations:{modelName:"locations",isMissingIf:!a,query:{navigation:{isDisabled:!0}}},trips:{modelName:"trips",isMissingIf:a!==r,query:{userAlias:r,navigation:{isDisabled:!0}}},rides:{modelName:"rides",isMissingIf:!o.length,query:{filter:{trip_id:{comparator:"in",value:o}},navigation:{isDisabled:!0}}},visits:{modelName:"visits",isMissingIf:!o.length,query:{filter:{trip_id:{comparator:"in",value:o}},navigation:{isDisabled:!0}}}},meta:{domain:"trips"}}},function(e){return{locationsDict:Object(f.d)(e,"locations"),ridesDict:Object(f.d)(e,"rides")}}))(wr)}}]);
//# sourceMappingURL=travel-Trips-0d2ab20b700294e9ec98.js.map